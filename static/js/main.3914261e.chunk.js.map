{"version":3,"sources":["components/Tomato.module.css","components/UserStory.module.css","components/task/TaskTimerButton.module.css","components/task/UserTasks.module.css","features/task/TaskTotalHours.module.css","components/Controller.module.css","components/common/ToggleNumberInput.module.css","tomato.png","app/storage.ts","features/setting/settingSlice.ts","features/project/projectSlice.ts","features/userStory/userStorySlice.ts","features/milestone/milestoneSlice.ts","features/common/commonSlice.ts","app/rootReducer.ts","app/actions.ts","util/fetch.ts","features/project/projectEpic.ts","features/userStory/userStoryEpic.ts","app/rootEpic.ts","app/store.ts","actions.ts","util/timer.ts","store.ts","reducer.ts","util/useSideEffector.ts","util/toastr.tsx","sideEffectors/syncPomodoro.ts","AppDb.ts","util/firebase.ts","sideEffectors/dellFBTimer.ts","sideEffectors/index.ts","sideEffectors/fetchProject.ts","sideEffectors/fetchMilestones.ts","sideEffectors/fetchTasks.ts","sideEffectors/fetchTaskStatuses.ts","sideEffectors/fetchCustomAttrs.ts","sideEffectors/fetchCustomValueMap.ts","sideEffectors/fetchUser.ts","sideEffectors/patchCustomValue.ts","sideEffectors/signIn.ts","sideEffectors/patchTask.ts","sideEffectors/signOut.ts","sideEffectors/setAuthToken.ts","sideEffectors/setUrl.ts","sideEffectors/setPid.ts","sideEffectors/setMid.ts","sideEffectors/setCustomEid.ts","sideEffectors/setCustomRid.ts","sideEffectors/syncBizDays.ts","sideEffectors/syncRejectTaskStatusIds.ts","sideEffectors/addPomodoro.ts","sideEffectors/calcPomodoroTotal.ts","sideEffectors/loadPomodoroTotals.ts","sideEffectors/syncTaskId.ts","sideEffectors/setTimelineCloseTask.ts","sideEffectors/addFBTimer.ts","sideEffectors/setTimerId.ts","init.ts","Provider.tsx","util/handler.ts","components/common/LinearLoader.tsx","components/ProjectSelector.tsx","components/MilestoneSelector.tsx","components/CustomValuesSelector.tsx","components/DaysSelector.tsx","components/TaskStatusSelector.tsx","components/InputGroupSpinner.tsx","components/TimelimitCloseTask.tsx","components/Controller.tsx","components/UpdateButton.tsx","components/SignInForm.tsx","components/task/UserTasks.tsx","components/common/ToggleNumberInput.tsx","tomato.svg","components/Tomato.tsx","components/task/TaskTimerButton.tsx","components/common/InputGroupDisplayNumber.tsx","components/UserStory.tsx","components/UnEstimatedTasks.tsx","components/NotAssignedTasks.tsx","features/chart/ChartTypeSelector.tsx","components/chart/BurnUp.tsx","components/chart/BurnDown.tsx","components/chart/Chart.tsx","components/OverView.tsx","features/task/TaskTotalHours.tsx","components/PersonalTasks.tsx","components/PersonalInfo.tsx","components/PersonalPage.tsx","components/PomodoroHeatmap.tsx","components/Pomodoro.tsx","util/notify.ts","features/task/util.ts","features/user/AvatarSquare.tsx","features/page/BoardPage.tsx","app/BridgeEffect.tsx","index.tsx","App.tsx","app/SideEffect.tsx","app/initialize.ts","components/Pomodoro.module.css"],"names":["module","exports","StorageKey","settingActions","setUrl","createAction","settingReducer","createReducer","url","pid","mid","custom_eid","custom_rid","builder","addCase","state","payload","settingSelectors","setting","useSettingSelector","useSelector","projectActions","fetchList","setList","projectReducer","list","loading","current","projectSelectors","project","useProjectSelector","userStoryActions","addTag","removeTag","userStoryReducer","userStorySelectors","userStory","useUserStorySelector","milestoneActions","setMid","milestoneReducer","String","milestoneSelectors","milestone","useMilestoneSelector","commonActions","epicDone","updateData","commonReducer","updatedTime","Date","now","commonSelectors","common","useCommonSelector","rootReducer","combineReducers","actions","fetchData","path","config","fromFetch","replace","baseUrl","headers","pipe","mergeMap","res","json","projectEpic","action$","state$","ofType","switchMap","value","map","data","catchError","e","console","log","of","userStoryEpic","action","type","rootEpic","combineEpics","epicMiddleware","createEpicMiddleware","store","configureStore","reducer","middleware","getDefaultMiddleware","run","ActionTypes","_getFromStorage","key","localStorage","getItem","getFromStorage","TimerState","TimerMode","TimerDurationMin","FOCUS","SHORT","LONG","timer","tick","STOPPED","mode","duration","checkpointStartAt","NaN","checkpointElapsed","expireTimeout","tickInterval","tickOffsetTimeout","restoreExpired","estimateCompletedAt","restoreStorage","event","listener","this","isStopped","setExpireTimeout","setTickInterval","RUNNING","emit","status","saveStorage","clearExpireTimeout","clearTickInterval","isRunning","periodElapsed","PAUSED","isPaused","remaining","stop","start","_","defer","seconds","setTimeout","clearTimeout","adjusted","limit","setSecTickInterval","offset","setInterval","clearInterval","setItem","STATE","MODE","CHECKPOINT_START_AT","Number","isNaN","CHECKPOINT_ELAPSED","val","lsState","lsMode","lsCpStartAt","lsCpElapsed","includes","values","isValidMode","changeMode","cpElapsed","cpStartAt","Math","max","elapsed","EventEmitter","getFromStorageWithSubkey","subkey","setToStorage","item","setToStorageWithSubkey","initialState","token","timer_id","auth_token","auth_error","username","password","user","custom_attrs","custom_attr_e","custom_attr_r","biz_days","milestones","tasks","task_id","task","user_tasks","task_statuses","active_task_statuses","custom_value_map","WeakMap","reject_task_status_ids","updated_time","isOpen","pomodoro_date","pomodoro_number","pomodoro_used_number","loaded","pomodoro_daily_totals","pomodoro_state","pomodoro_mode","timelimit_close_task","in_progress_task_status_id","pomodoro_live_counts","SET_TOKEN","SET_TIMER_ID","SET_URL","SET_PID","SET_PROJECT","SET_MID","SET_MILESTONES","SET_MILESTONE","SET_CUSTOM_EID","SET_CUSTOM_ATTRS","SET_CUSTOM_ATTR_E","SET_CUSTOM_ATTR_R","SET_CUSTOM_RID","SET_BIZ_DAYS","ADD_BIZ_DAY","biz_day","chain","uniq","sort","REMOVE_BIZ_DAY","reject","SET_TASKS","SET_TASK_ID","RESET_TASK_ID","SET_TASK","SET_USER_TASKS","SET_TASK_STATUSES","SET_ACTIVE_TASK_STATUSES","SET_CUSTOM_VALUE_MAP","SET_USER","RESET_USER","SET_REJECT_TASK_STATUS_IDS","ADD_REJECT_TASK_STATUS_ID","reject_task_status_id","compact","REMOVE_REJECT_TASK_STATUS_ID","OPEN_CONTROLLER","CLOSE_CONTROLLER","UPDATE_DATA","SIGN_IN","SET_AUTH_TOKEN","SET_AUTH_ERROR","SIGN_OUT","ADD_POMODORO","USE_POMODORO","used_number","RESET_POMODORO","RESTORE_POMODORO","SET_POMODORO_TOTALS","LOADED","SET_POMODORO_STATE","SET_POMODORO_MODE","SET_TIMELIMIT_CLOSE_TASK","SET_IN_PROGRESS_TASK_STATUS_ID","task_status_id","SET_POMODORO_LIVE_COUNT","dispatchSideEffector","dispatch","sideEffector","dispatchSECaller","MessageWithIcon","icon","message","className","Notify","title","body","src","style","width","height","alt","toastr","toast","success","faCheck","error","faCheckCircle","syncPomodoro","dispatchm","POMODORO_DATE","POMODORO_NUMBER","POMODORO_USED_NUMBER","db","items","totals","version","stores","table","Dexie","dotenv","process","apiKey","REACT_APP_apiKey","VapidKey","REACT_APP_VapidKey","firebaseConfig","authDomain","REACT_APP_authDomain","databaseURL","REACT_APP_databaseURL","projectId","REACT_APP_projectId","storageBucket","REACT_APP_storageBucket","messagingSenderId","REACT_APP_messagingSenderId","appId","REACT_APP_appId","firebase","initializeApp","_messaging","messaging","navigator","serviceWorker","register","then","registration","get","useServiceWorker","usePublicVapidKey","onTokenRefresh","a","async","getToken","Timers","firestore","collection","requestPermission","catch","err","addTimer","add","click_action","window","location","href","id","delFBTimer","DEL_FB_TIMER","doc","delete","axios","postData","post","patchData","patch","errToastr","response","_error_message","rootSideEffector","FETCH_PROJECT","fetchProject","FETCH_MILESTONES","params","fetchMilestones","FETCH_TASKS","startM","moment","is_closed","finished_date","diff","fetchTasks","FETCH_TASK_STATUSES","fetchTaskStatuses","FETCH_CUSTOM_ATTRS","fetchCustomAttrs","FETCH_CUSTOM_VALUE_MAP","length","Promise","all","custom_attr_val","fetchCustomValueMap","FETCH_USER","uid","fetchUser","PATCH_CUSTOM_VALUE","find","has","custom_value","attributes_values","meta","update_status","PATCH_TASK","use_pomodoro","patchCustomValue","USERNAME","PASSWORD","signIn","patchTask","removeItem","defaults","setAuthToken","URL","PID","MID","CUSTOM_EID","CUSTOM_RID","setPid","beforeMid","BIZ_DAYS","split","TIMELIMIT_CLOSE_TASK","setCustomEid","setCustomRid","dispathc","join","syncBizDays","REJECT_TASK_STATUS_IDS","syncRejectTaskStatusIds","completedAt","pure","dateKey","format","put","CALC_POMODORO_TOTAL","addPomodoro","query","totalDoc","where","toArray","pureValue","filter","dayOfWeek","day","date","toDate","LOAD_POMODORO_TOTALS","calcPomodoroTotal","loadPomodoroTotals","TASK_ID","syncTaskId","customize","setTimelineCloseTask","ADD_FB_TIMER","addFBTimer","TIMER_ID","setTimerId","init","syncStorage","getCustomAttr","RootContext","createContext","Provider","children","dispatchSE","useCallback","stateStore","useMemo","getter","setter","newState","stateStoreFactory","useSideEffector","useReducer","useEffect","orderBy","order","assigned_to","sortBy","firstDay","local","startOf","task_status","slug","Object","forEach","onSnapshot","docs","size","preventDefault","stopPropagation","LinearLoader","progress","buffer","ProjectSelector","projects","useContext","handleChange","target","InputGroup","InputGroupAddon","addonType","isEmpty","Input","onChange","name","MilestoneSelector","useDispatch","xdispatch","CustomValuesSelector","dayNameFromIdx","idx","getDefaultBizDays","biz","isWeekDay","weekClassName","DayItem","checked","isPlanning","eleId","classNames","FormGroup","check","inline","Label","disabled","isWeekendDay","UncontrolledTooltip","indexOf","dayName","DaysTable","useState","setItems","weekdays","setWeekdays","estimated_start","daysInSprint","estimated_finish","times","i","clone","getDays","weeks","chunk","Table","bordered","days","DaysSelector","Card","CardHeader","StatusItem","defaultChecked","TaskStatusSelector","CardBody","InputGroupSpinner","InputGroupText","faSpinner","TimelimitCloseTask","datetime","setDatetime","isFresh","setIsFresh","handleSubmit","Form","onSubmit","defaultValue","Button","ToggleIcon","rotation","undefined","faChevronCircleRight","Controller","stateUrl","handleUrl","toggle","taskboardUrl","project_extra_info","getTaskboardUrl","spName","range","head","last","getRange","styles","header","onClick","Badge","color","pill","rel","faExternalLinkAlt","Collapse","placeholder","UpdateButton","faSyncAlt","SignInForm","sign_in_username","setUsername","setPassword","setLoading","handleUsername","handlePassword","handleSignOut","faUser","faSignOutAlt","onInput","invalid","faKey","Spinner","faSignInAlt","barStyles","getTasksByUser","groupBy","AvatarSquare","props","random","square","getCustomVal","sum","getSumCustomVal","getSumCustomValClosed","getCustomValVersion","custon_value_map","isCustomValValid","r","isCustomValInvalid","UserLink","photo","total_hours","to","NameAndWorkLoad","total","imgSrc","faGrinBeam","faGrinBeamSweat","faDizzy","tblCls","Medal","isNumber","abs","getGrade","grade","num","faMedal","TaskProgress","eid","reverse","label","allSum","Progress","multi","bar","UserRow","sums","isPast","hpd","customTotal","setTotal","sumItem","mergedTotal","totalStr","custom_input_td","bsSize","step","closed","UserTasks","members","setHpd","activeLen","taskSumByUser","rid","mapValues","reduce","result","getTaskSumByUser","notAssignedSum","endOf","tasksByUser","sortedMembers","member","Navbar","light","faTimes","faEquals","faGhost","ToggleNumberInput","onEditable","onValueChange","valid","submitting","disabledMessage","setChecked","setVal","running","setRunning","evt","currentTarget","handleVal","input_group","faHandPointRight","min","faCloudUploadAlt","readOnly","faEdit","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","TomatoState","createElement","fill","d","_ref","svgRef","x","y","viewBox","xmlSpace","ref","ForwardRef","forwardRef","Tomato","bl","br","fresh","FRESH","stale","STALE","TaskTimerButton","handleStart","resume","handlePause","pause","btn","faPause","faPlay","InputGroupDisplayNumber","convToTasksByUserStory","user_story","user_story_extra_info","every","needAuthMsg","UserStoryLink","usName","subject","TaskLink","taskName","Grade","display_medal","medal","TaskStatusItem","onSelect","handleClick","DropdownItem","handleSelect","UncontrolledDropdown","DropdownToggle","caret","status_extra_info","DropdownMenu","UserItem","TaskUserSelector","NotAssignedButton","faUserTimes","EstimateInput","unEstimated","largeTask","ResultInput","setIsOpen","set_used_number","editable","setEditable","setSubmitting","handleToggle","handlePluse","handleMinus","handleReset","handleEditable","handleValueChange","handleUsePomodoro","elId","usableNumber","submittable","isMax","Popover","placement","trigger","PopoverHeader","PopoverBody","ButtonGroup","faPlus","faMinus","faEraser","TaskItem","inactive","is_iocaine","faBiohazard","Row","Col","UserStoryWithEstimate","UserStoryWithTaskUser","Tag","UserStory","tags","totalHours","xs","md","UnEstimatedTasks","userStories","NotAssignedTasks","ChartTypeItem","faLevelDownAlt","faLevelUpAlt","ChartTypeDropdownItem","ChartTypeSelector","UncontrolledButtonDropdown","BurnUpChart","setData","chartSize","days_len","allTaskVal","ideal","getTaskCreated","completed","getTaskFinished","actual","formatter","toFixed","upperFirst","dataKey","stroke","strokeDasharray","BurnDownChart","getTaskCreatedToday","stackId","created_date","Chart","chartType","setChartType","tag","Link","faChalkboard","OverView","TaskTotalHours","rejectVal","isOver","position","cn","st","is_over","PersonalTasks","rejectUS","setRejectUS","usList","userStoryMap","Map","us","first","some","CardFooter","PersonalInfo","PersonalPage","useParams","history","useHistory","handleGoBack","goBack","faArrowCircleLeft","Alert","PomodoroHeatmap","maxVal","maxBy","classForValue","ceil","tooltipDataAttrs","startDate","subtract","showWeekdayLabels","favico","require","secToMin","TimerIcon","short_break_icon","faCoffee","long_break_icon","faCookie","TimerItem","clickToClose","closeFn","clickToWaitClose","clickToChangeFocus","Pomodoro","isOpenDropdown","setIsOpenDropdown","setRemaining","setState","setMode","setProgress","unit","setUnit","toggleDropdown","prev","setRemainingAndUnit","toValueAndUnit","handleState","handleMode","handleTick","handleExpire","option","onDblclick","clickCount","closeTimer","Notification","permission","notification","sec","close","onclick","notify","tomatoIcon","handleRetry","handleRemove","handleAddFBTimer","handleDelFBTimer","on","removeAllListeners","today","bgColor","textColor","animation","badge","reset","taskTitle","taskSubject","truncate","displayLive","top","options","primary","button_group","InputGroupButtonDropdown","fix_w","faRedo","chip_set","faTasks","onRemove","trailingIcon","live","faUserFriends","entries","BoardItem","sm","lg","BoardPage","tasksByUid","sortedTasks","Breadcrumb","BreadcrumbItem","faHome","active","BridgeEffect","ReactDOM","render","exact","component","document","getElementById"],"mappings":"6GACAA,EAAOC,QAAU,CAAC,MAAQ,sBAAsB,MAAQ,sBAAsB,GAAK,mBAAmB,GAAK,qB,oBCA3GD,EAAOC,QAAU,CAAC,OAAS,0BAA0B,cAAgB,iCAAiC,MAAQ,yBAAyB,UAAY,+B,oBCAnJD,EAAOC,QAAU,CAAC,IAAM,+B,oBCAxBD,EAAOC,QAAU,CAAC,KAAO,wBAAwB,OAAS,0BAA0B,OAAS,0BAA0B,gBAAkB,qC,oBCAzID,EAAOC,QAAU,CAAC,MAAQ,8BAA8B,QAAU,kC,oBCAlED,EAAOC,QAAU,CAAC,OAAS,6B,oBCA3BD,EAAOC,QAAU,CAAC,YAAc,yC,oBCDhCD,EAAOC,QAAU,IAA0B,oC,8HCK/BC,E,yJCeCC,EAAiB,CAC5BC,OAAQC,YAAwC,oBAErCC,EAAiBC,YAVF,CAC1BC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,WAAY,GACZC,WAAY,KAK4C,SAAAC,GAAO,OAAIA,EAClEC,QAAQX,EAAeC,QAAQ,SAACW,EAAD,OAAmBP,EAAnB,EAAUQ,QAAV,sBAC3BD,EAD2B,CACpBP,cAGDS,EACE,SAACF,GAAD,OAAsBA,EAAMG,QAAQV,KAGtCW,EACH,kBAAMC,YAAYH,ICNfI,EAAiB,CAC5BC,UAAWjB,YAAyC,sBACpDkB,QAASlB,YAA6C,qBAE3CmB,EAAiBjB,YATF,CAC1BkB,KAAM,GACNC,SAAS,EACTC,QAAS,OAM+C,SAAAd,GAAO,OAAIA,EAClEC,QAAQO,EAAeC,WAAW,SAACP,GAAD,sBAC9BA,EAD8B,CACvBW,SAAS,OAEpBZ,QAAQO,EAAeE,SAAS,SAACR,EAAD,OAAmBU,EAAnB,EAAUT,QAAV,sBAC5BD,EAD4B,CACrBU,OAAMC,SAAS,UAKhBE,EACG,SAACb,GAAD,OAAsBA,EAAMc,QAAQJ,MAGvCK,EACF,kBAAMV,YAAYQ,ICvBhBG,EAAmB,CAC9BT,UAAWjB,YAA4D,wBACvEkB,QAASlB,YAAiD,sBAC1D2B,OAAQ3B,YAAsE,qBAC9E4B,UAAW5B,YAAyE,yBAEzE6B,EAAmB3B,YAVJ,CAC1BkB,KAAM,GACNC,SAAS,IAQiD,SAAAb,GAAO,OAAIA,EACpEC,QAAQiB,EAAiBT,WAAW,SAACP,GAAD,sBAChCA,EADgC,CACzBW,SAAS,OAEpBZ,QAAQiB,EAAiBR,SAAS,SAACR,EAAD,OAAmBU,EAAnB,EAAUT,QAAV,sBAC9BD,EAD8B,CACvBW,SAAS,EAAOD,eAIxBU,EACU,SAACpB,GAAD,OAAsBA,EAAMqB,UAAUX,MAEzCY,EACF,kBAAMjB,YAAYe,ICjChBG,EAAmB,CAC9BC,OAAQlC,YAAmD,sBAEhDmC,EAAmBjC,YANJ,CAC1BG,IAAK,KAKqD,SAAAG,GAAO,OAAIA,EACpEC,QAAQwB,EAAiBC,QAAQ,SAACxB,EAAD,OAAmBL,EAAnB,EAAUM,QAAV,sBAC7BD,EAD6B,CACtBL,IAAK+B,OAAO/B,WAGpBgC,EACS,SAAC3B,GAAD,OAAsBA,EAAM4B,UAAUjC,KAExCkC,EACH,kBAAMxB,YAAYsB,ICZfG,EAAgB,CAC3BC,SAAUzC,YAAuC,oBACjD0C,WAAY1C,YAAyC,uBAE1C2C,EAAgBzC,YAPD,CAC1B0C,YAAa,IAM0C,SAAApC,GAAO,OAAIA,EACjEC,QAAQ+B,EAAcE,YAAY,SAAChC,GAAD,sBAC9BA,EAD8B,CACvBkC,YAAaC,KAAKC,cAG1BC,EACiB,SAACrC,GAAD,OAAsBA,EAAMsC,OAAOJ,aAE7CK,EACK,kBAAMlC,YAAYgC,ICfvBG,EAAcC,0BAAgB,CACzCtC,QAASZ,EACTuB,QAASL,EACTY,UAAWF,EACXS,UAAWH,EACXa,OAAQL,I,sDCPGS,EAAU,CACrBJ,SACAxB,UACAX,UACAkB,a,kBCNWsB,EAAY,SAAIlD,EAAamD,EAAcC,GAA/B,OAAwDC,oBADjE,SAACrD,EAAamD,GAAd,gBAAkCnD,EAAIsD,QAAQ,WAAS,IAAvD,mBAAqEH,GACMI,CAAQvD,EAAKmD,GAAd,eACnFC,EADmF,CAC3EI,QAAQ,aAAG,uBAAwB,QAA5B,OAAuCJ,QAAvC,IAAuCA,OAAvC,EAAuCA,EAAQI,YAAaC,KAC9EC,aAAS,SAAAC,GAAG,OAAIA,EAAIC,YCgBXC,EAAc,CAZsC,SAACC,EAASC,GAAV,OAAqBD,EAAQL,KAC5FO,YAAO,sBACPC,aAAU,WAAO,IACPjE,EAAQ+D,EAAOG,MAAMxD,QAArBV,IACR,OAAOkD,EAAsBlD,EAAK,eAEpCmE,aAAI,SAAAC,GAAI,OAAInB,EAAQ5B,QAAQN,QAAQqD,MACpCC,aAAW,SAAAC,GAET,OADAC,QAAQC,IAAI,MAAOF,GACZG,YAAGpC,EAAcC,kBCQfoC,EAAgB,CAjBoC,SAACZ,EAASC,GAAV,OAAqBD,EAAQL,KAC5FO,YAAO,wBACPC,aAAU,SAACU,GAAY,IACb3E,EAAQ+D,EAAOG,MAAMxD,QAArBV,IACR,GAAoB,yBAAhB2E,EAAOC,KAAiC,CAAC,IACnCzC,EAAcwC,EAAOnE,QAArB2B,UACR,OAAOe,EAAwBlD,EAAf,gCAA6CmC,IAE7D,MAAO,MAGXgC,aAAI,SAAAC,GAAI,OAAInB,EAAQrB,UAAUb,QAAQqD,MACtCC,aAAW,SAAAC,GAET,OADAC,QAAQC,IAAI,MAAOF,GACZG,YAAGpC,EAAcC,kBCpBfuC,EAAWC,IAAY,WAAZ,cAAgBjB,GAAhB,mBAAgCa,KCIlDK,EAAiBC,cACVC,EAAQC,YAAe,CAClCC,QAASpC,EACTqC,WAAW,GAAD,mBAAMC,eAAN,CAA8BN,MAE1CA,EAAeO,IAAIT,G,SZPPnF,K,gBAAAA,E,0BAAAA,E,gBAAAA,E,gBAAAA,E,wBAAAA,E,8BAAAA,E,8BAAAA,E,0BAAAA,E,gDAAAA,E,0BAAAA,E,0BAAAA,E,oCAAAA,E,wCAAAA,E,kDAAAA,E,mDAAAA,M,KAkBZ,IaXY6F,EbWNC,EAAkB,SAACC,GAAD,OAAiBC,aAAaC,QAAQF,IAAQ,IACzDG,EAAiB,SAACH,GAAD,OAAqBD,EAAgBC,I,kHaZvDF,K,sBAAAA,E,4BAAAA,E,4BAAAA,E,4BAAAA,E,kBAAAA,E,kBAAAA,E,gCAAAA,E,gCAAAA,E,oBAAAA,E,kBAAAA,E,8BAAAA,E,0BAAAA,E,oCAAAA,E,kBAAAA,E,gCAAAA,E,8BAAAA,E,gCAAAA,E,gCAAAA,E,wCAAAA,E,oCAAAA,E,sCAAAA,E,sCAAAA,E,4BAAAA,E,0BAAAA,E,gCAAAA,E,0BAAAA,E,sBAAAA,E,0BAAAA,E,8BAAAA,E,oBAAAA,E,gCAAAA,E,wBAAAA,E,0CAAAA,E,sCAAAA,E,oDAAAA,E,gDAAAA,E,4CAAAA,E,wCAAAA,E,wBAAAA,E,oBAAAA,E,wBAAAA,E,wDAAAA,E,sDAAAA,E,4DAAAA,E,kCAAAA,E,oCAAAA,E,0BAAAA,E,4BAAAA,E,4BAAAA,E,gCAAAA,E,oCAAAA,E,0CAAAA,E,4CAAAA,E,0CAAAA,E,gBAAAA,E,wCAAAA,E,sCAAAA,E,oDAAAA,E,gEAAAA,E,mDAAAA,M,YCVAM,GAKAC,G,wFALAD,K,kBAAAA,E,kBAAAA,E,iBAAAA,Q,cAKAC,K,iBAAAA,E,oBAAAA,E,mBAAAA,Q,KAKL,IAKFpG,GALQqG,IAAgB,sBAC1BD,GAAUE,MAAQ,IADQ,gBAE1BF,GAAUG,MAAQ,GAFQ,gBAG1BH,GAAUI,KAAO,IAHS,K,SAKxBxG,K,uBAAAA,E,qBAAAA,E,mDAAAA,E,kDAAAA,Q,KAML,I,GC8GYA,GDqKCyG,GAAQ,I,YA/OnB,WAAYC,GAAe,IAAD,+BACxB,iDAZF7F,MAAoBsF,GAAWQ,QAWL,EAV1BC,KAAkBR,GAAUE,MAUF,EAT1BO,SAAuD,GAApCR,GAAiBD,GAAUE,OASpB,EAR1BI,KAAe,GAQW,EAP1BI,kBAA4BC,IAOF,EAN1BC,kBAA4B,EAMF,EAL1BC,cAAuC,KAKb,EAJ1BC,aAAsC,KAIZ,EAH1BC,kBAA2C,KAGjB,EAF1BC,gBAAiB,EAES,EAD1BC,oBAA4B,IAAIrE,KAG9B,EAAK0D,KAAOA,EACZ,EAAKY,iBAHmB,E,kEAoCvBC,EAAoBC,GACrB,OAAO,4DAASD,EAAOC,K,2BAEpBD,EAAoBC,GACvB,OAAO,8DAAWD,EAAOC,K,8BAGpBC,KAAKC,YAGVD,KAAKE,iBAAiBF,KAAKZ,UAC3BY,KAAKG,gBAAgBH,KAAKf,MAE1Be,KAAK5G,MAAQsF,GAAW0B,QACxBJ,KAAKX,kBAAoB9D,KAAKC,MAC9BwE,KAAKT,kBAAoB,EAEzBS,KAAKK,KAAK,QAASL,KAAKM,QAExBN,KAAKO,iB,6BAGDP,KAAKC,YAGTD,KAAKQ,qBACLR,KAAKS,oBAELT,KAAKX,kBAAoBC,IACzBU,KAAKT,kBAAoB,EAEzBS,KAAK5G,MAAQsF,GAAWQ,QAExBc,KAAKK,KAAK,OAAQL,KAAKM,QAEvBN,KAAKO,iB,8BAGL,GAAKP,KAAKU,UAAV,CAIAV,KAAKQ,qBACLR,KAAKS,oBAEL,IAAIE,GAAiBpF,KAAKC,MAAQwE,KAAKX,mBAAqB,IAC5DW,KAAKT,mBAAqBoB,EAE1BX,KAAK5G,MAAQsF,GAAWkC,OAExBZ,KAAKK,KAAK,QAASL,KAAKM,QAExBN,KAAKO,iB,+BAGAP,KAAKa,WAGVb,KAAKE,iBAAiBF,KAAKc,WAC3Bd,KAAKG,gBAAgBH,KAAKf,MAE1Be,KAAK5G,MAAQsF,GAAW0B,QACxBJ,KAAKX,kBAAoB9D,KAAKC,MAE9BwE,KAAKK,KAAK,SAAUL,KAAKM,QAEzBN,KAAKO,iB,gCAGLP,KAAKe,OACLf,KAAKgB,U,iCAEI7B,EAAiB6B,GAAkB,IAAD,OAC3ChB,KAAKe,OACLf,KAAKb,KAAOA,EACZa,KAAKZ,SAAoC,GAAzBR,GAAiBO,GAEjCa,KAAKK,KAAK,cAAeL,KAAKM,QAE9BN,KAAKO,cACDS,GACFC,KAAEC,OAAM,WACN,EAAKF,a,uCAIMG,GAAkB,IAAD,OAChCnB,KAAKR,cAAgB4B,YAAW,WAC9B,EAAKf,KAAK,SAAU,EAAKC,QACzB,EAAKS,SACM,IAAVI,K,2CAGCnB,KAAKR,eACP6B,aAAarB,KAAKR,eAEpBQ,KAAKR,cAAgB,O,sCAEP2B,GAAgD,IAAD,OAA9BG,EAA8B,wDAAZC,EAAY,uDAAJ,GACjDT,EAAcd,KAAKM,OAAnBQ,UACR,GAAIA,GAAaS,EACfvB,KAAKwB,yBACA,CACL,IAAMC,EAASX,EAAYK,EACvBM,EAAS,IAAMH,EACjBtB,KAAKN,kBAAoB0B,YAAW,WAClC,EAAKf,KAAK,OAAQ,EAAKC,QACvB,EAAKH,gBAAgBgB,GAAS,KACpB,IAATM,GAEHzB,KAAKP,aAAeiC,aAAY,WAC9B,IAAMpB,EAAS,EAAKA,OACpB,EAAKD,KAAK,OAAQC,GACdA,EAAOQ,UAAYS,IACrB,EAAKd,oBACL,EAAKe,wBAEI,IAAVL,M,2CAIa,IAAD,OACnBnB,KAAKP,aAAeiC,aAAY,WAC9B,EAAKrB,KAAK,OAAQ,EAAKC,UACtB,O,0CAGCN,KAAKP,cACPkC,cAAc3B,KAAKP,cAErBO,KAAKP,aAAe,KAChBO,KAAKN,mBACP2B,aAAarB,KAAKN,mBAEpBM,KAAKN,kBAAoB,O,oCAGzBnB,aAAaqD,QAAQrJ,GAAWsJ,MAAO7B,KAAK5G,OAC5CmF,aAAaqD,QAAQrJ,GAAWuJ,KAAM9B,KAAKb,MAC3CZ,aAAaqD,QACXrJ,GAAWwJ,oBACXC,OAAOC,MAAMjC,KAAKX,mBAAqB,GAAKvE,OAAOkF,KAAKX,oBAE1Dd,aAAaqD,QACXrJ,GAAW2J,mBACXpH,OAAOkF,KAAKT,sB,uCAId,IA7NkB4C,EA6NZC,EAAU7D,aAAaC,QAAQjG,GAAWsJ,OAC1CQ,EAAS9D,aAAaC,QAAQjG,GAAWuJ,MACzCQ,EAAc/D,aAAaC,QAAQjG,GAAWwJ,qBAC9CQ,EAAchE,aAAaC,QAAQjG,GAAW2J,oBACpD,GAjOkBC,EAiODC,EAhOnBnB,KAAEuB,SAASvB,KAAEwB,OAAO/D,IAAayD,IAEf,SAACA,GAAD,OAClBlB,KAAEuB,SAASvB,KAAEwB,OAAO9D,IAAYwD,GA6NDO,CAAYL,GAAS,CAChD,IAAMjJ,EAAQgJ,EACRjD,EAAOkD,EACPjD,EAAoC,GAAzBR,GAAiBO,GAClC,OAAQ/F,GACN,KAAKsF,GAAWQ,QACdc,KAAK2C,WAAWxD,GAChB,MAEF,KAAKT,GAAWkC,OACd,IAAMgC,EAAYZ,OAAOO,GACrBK,EAAuB,IAAXxD,IACdY,KAAK5G,MAAQA,EACb4G,KAAKb,KAAOA,EACZa,KAAKZ,SAAWA,EAChBY,KAAKT,kBAAoBqD,GAE3B,MAEF,KAAKlE,GAAW0B,QACd,IAAMyC,EAAYb,OAAOM,GACnBM,EAAYZ,OAAOO,GACzB,GAAIM,EAAY,EACd7C,KAAKb,KAAOA,EACZa,KAAKZ,SAAWA,EACI7D,KAAKC,MAAQqH,EAAwB,IAAZD,EAChB,IAAXxD,GAChBY,KAAK5G,MAAQsF,GAAW0B,QAExBJ,KAAKX,kBAAoBwD,EACzB7C,KAAKT,kBAAoBqD,EAEzB5C,KAAKE,iBAAiBF,KAAKc,WAC3Bd,KAAKG,gBAAgBH,KAAKf,QAE1Be,KAAKe,OAELf,KAAKJ,oBAAsB,IAAIrE,KAC7BsH,EAAqC,KAAxBzD,EAAWwD,IAE1B5C,KAAKL,gBAAiB,O,gCA/NhC,OAAOK,KAAK5G,QAAUsF,GAAWQ,U,gCAGjC,OAAOc,KAAK5G,QAAUsF,GAAW0B,U,+BAGjC,OAAOJ,KAAK5G,QAAUsF,GAAWkC,S,gCAGjC,OAAOkC,KAAKC,IAAI/C,KAAKZ,SAAWY,KAAKgD,QAAS,K,8BAI9C,IAAIrC,EAAgB,EAIpB,OAHIX,KAAKX,mBAAqBW,KAAKU,YACjCC,GAAiBpF,KAAKC,MAAQwE,KAAKX,mBAAqB,KAEnDW,KAAKT,kBAAoBoB,I,6BAGhC,MAAO,CACLvH,MAAO4G,KAAK5G,MACZgG,SAAUY,KAAKZ,SACf4D,QAAShD,KAAKgD,QACdlC,UAAWd,KAAKc,UAChBvB,kBAAmBS,KAAKT,kBACxBF,kBAAmBW,KAAKX,kBACxBF,KAAMa,KAAKb,U,GA7CG8D,iBA2PC,CAAU,K,SCrKnB1K,K,gBAAAA,E,0BAAAA,E,gBAAAA,E,gBAAAA,E,wBAAAA,E,8BAAAA,E,8BAAAA,E,0BAAAA,E,gDAAAA,E,0BAAAA,E,0BAAAA,E,oCAAAA,E,wCAAAA,E,kDAAAA,E,mDAAAA,Q,KAkBZ,IAAM8F,GAAkB,SAACC,GAAD,OAAiBC,aAAaC,QAAQF,IAAQ,IACzDG,GAAiB,SAACH,GAAD,OAAqBD,GAAgBC,IACtD4E,GAA2B,SAAC5E,EAAiB6E,GAAlB,OACtCA,EAAS9E,GAAgB,GAAD,OAAI8E,EAAJ,YAAc7E,IAAS,IAEpC8E,GAAe,SAAC9E,EAAa+E,GACxC9E,aAAaqD,QAAQtD,EAAK+E,IAEfC,GAAyB,SACpChF,EACA6E,EACAE,GAHoC,OAIhCF,EAASC,GAAa,GAAD,OAAID,EAAJ,YAAc7E,GAAO+E,GAAQ,MAE3CE,GAAuB,CAClCC,MAAO,KACPC,SAAU,KACV5K,IAAK,GACL6K,WAAY,GACZC,YAAY,EACZC,SAAU,GACVC,SAAU,GACVC,KAAM,KACNhL,IAAK,GACLoB,QAAS,GACTnB,IAAK,GACLC,WAAY,GACZC,WAAY,GACZ8K,aAAc,GACdC,cAAe,GACfC,cAAe,GACfC,SAAU,GACVC,WAAY,GACZnJ,UAAW,GACXoJ,MAAO,GACPC,QAAS,GACTC,KAAM,KACNC,WAAY,GACZC,cAAe,GACfC,qBAAsB,GACtBC,iBAAkB,IAAIC,QACtBC,uBAAwB,GACxBC,aAAc,EACdC,QAAQ,EACRC,cAAe,GACfC,gBAAiB,EACjBC,qBAAsB,EACtBC,QAAQ,EACRC,sBAAuB,GACvBC,eAAgB1G,GAAWQ,QAC3BmG,cAAe1G,GAAUE,MACzByG,qBAAsB,GACtBC,2BAA4B,GAC5BC,sBAAoB,sBACjB7G,GAAUE,MAAQ,GADD,gBAEjBF,GAAUG,MAAQ,GAFD,gBAGjBH,GAAUI,KAAO,GAHA,KCzMTf,GAAU,WAA4C,IAA3C5E,EAA0C,uDAAlCmK,GAAc/F,EAAoB,uCAChE,OAAQA,EAAOC,MACb,KAAKW,EAAYqH,UAAY,IACnBjC,EAAUhG,EAAOnE,QAAjBmK,MACR,OAAO,eAAKpK,EAAZ,CAAmBoK,UAErB,KAAKpF,EAAYsH,aAAe,IACtBjC,EAAajG,EAAOnE,QAApBoK,SACR,OAAO,eAAKrK,EAAZ,CAAmBqK,aAErB,KAAKrF,EAAYuH,QAAU,IACjB9M,EAAQ2E,EAAOnE,QAAfR,IACR,OAAO,eAAKO,EAAZ,CAAmBP,QAErB,KAAKuF,EAAYwH,QAAU,IACjB9M,EAAQ0E,EAAOnE,QAAfP,IACR,OAAO,eACFM,EADL,CAEEN,MACAoB,QAAS,GACTnB,IAAK,GACLmL,SAAU,GACVH,aAAc,GACdI,WAAY,GACZO,iBAAkB,IAAIC,UAG1B,KAAKvG,EAAYyH,YAAc,IACrB3L,EAAYsD,EAAOnE,QAAnBa,QACR,OAAO,eACFd,EADL,CAEEc,YAGJ,KAAKkE,EAAY0H,QAAU,IACjB/M,EAAQyE,EAAOnE,QAAfN,IACR,OAAO,eACFK,EADL,CAEEL,MACAiC,UAAW,GACXoJ,MAAO,KAGX,KAAKhG,EAAY2H,eAAiB,IACxB5B,EAAe3G,EAAOnE,QAAtB8K,WACR,OAAO,eAAK/K,EAAZ,CAAmB+K,eAErB,KAAK/F,EAAY4H,cAAgB,IACvBhL,EAAcwC,EAAOnE,QAArB2B,UACR,OAAO,eAAK5B,EAAZ,CAAmB4B,cAErB,KAAKoD,EAAY6H,eAAiB,IACxBjN,EAAewE,EAAOnE,QAAtBL,WACR,OAAO,eAAKI,EAAZ,CAAmBJ,eAErB,KAAKoF,EAAY8H,iBAAmB,IAC1BnC,EAAiBvG,EAAOnE,QAAxB0K,aACR,OAAO,eAAK3K,EAAZ,CAAmB2K,iBAErB,KAAK3F,EAAY+H,kBAAoB,IAC3BnC,EAAkBxG,EAAOnE,QAAzB2K,cACR,OAAO,eAAK5K,EAAZ,CAAmB4K,kBAErB,KAAK5F,EAAYgI,kBAAoB,IAC3BnC,EAAkBzG,EAAOnE,QAAzB4K,cACR,OAAO,eAAK7K,EAAZ,CAAmB6K,kBAErB,KAAK7F,EAAYiI,eAAiB,IACxBpN,EAAeuE,EAAOnE,QAAtBJ,WACR,OAAO,eAAKG,EAAZ,CAAmBH,eAErB,KAAKmF,EAAYkI,aAAe,IACtBpC,EAAa1G,EAAOnE,QAApB6K,SACR,OAAO,eAAK9K,EAAZ,CAAmB8K,aAErB,KAAK9F,EAAYmI,YAAc,IACrBC,EAAYhJ,EAAOnE,QAAnBmN,QACFtC,EAAWjD,KAAEwF,MAAF,sBAAYrN,EAAM8K,UAAlB,CAA4BsC,KAC1CE,OACAC,OACA5J,QACH,OAAO,eAAK3D,EAAZ,CAAmB8K,aAErB,KAAK9F,EAAYwI,eAAiB,IACxBJ,EAAYhJ,EAAOnE,QAAnBmN,QACFtC,EAAWjD,KAAE4F,OAAF,YAAazN,EAAM8K,WAAW,SAAAb,GAAI,OAAIA,IAASmD,KAChE,OAAO,eAAKpN,EAAZ,CAAmB8K,aAErB,KAAK9F,EAAY0I,UAAY,IACnB1C,EAAU5G,EAAOnE,QAAjB+K,MACR,OAAO,eAAKhL,EAAZ,CAAmBgL,UAErB,KAAKhG,EAAY2I,YAAc,IACrB1C,EAAY7G,EAAOnE,QAAnBgL,QACR,OAAO,eAAKjL,EAAZ,CAAmBiL,UAASC,KAAM,OAEpC,KAAKlG,EAAY4I,cACf,OAAO,eAAK5N,EAAZ,CAAmBiL,QAAS,GAAIC,KAAM,OAExC,KAAKlG,EAAY6I,SAAW,IAClB3C,EAAS9G,EAAOnE,QAAhBiL,KACR,OAAO,eAAKlL,EAAZ,CAAmBkL,SAErB,KAAKlG,EAAY8I,eAAiB,IACxB3C,EAAe/G,EAAOnE,QAAtBkL,WACR,OAAO,eAAKnL,EAAZ,CAAmBmL,eAErB,KAAKnG,EAAY+I,kBAAoB,IAC3B3C,EAAkBhH,EAAOnE,QAAzBmL,cACR,OAAO,eAAKpL,EAAZ,CAAmBoL,kBAErB,KAAKpG,EAAYgJ,yBAA2B,IAClC3C,EAAyBjH,EAAOnE,QAAhCoL,qBACR,OAAO,eAAKrL,EAAZ,CAAmBqL,yBAErB,KAAKrG,EAAYiJ,qBAAuB,IAC9B3C,EAAqBlH,EAAOnE,QAA5BqL,iBACR,OAAO,eAAKtL,EAAZ,CAAmBsL,qBAErB,KAAKtG,EAAYkJ,SAAW,IAClBxD,EAAStG,EAAOnE,QAAhByK,KACR,OAAO,eAAK1K,EAAZ,CAAmB0K,SAErB,KAAK1F,EAAYmJ,WACf,OAAO,eAAKnO,EAAZ,CAAmB0K,KAAM,KAAMS,WAAY,KAE7C,KAAKnG,EAAYoJ,2BAA6B,IACpC5C,EAA2BpH,EAAOnE,QAAlCuL,uBACR,OAAO,eAAKxL,EAAZ,CAAmBwL,2BAErB,KAAKxG,EAAYqJ,0BAA4B,IACnCC,EAA0BlK,EAAOnE,QAAjCqO,sBACF9C,EAAyB3D,KAAEwF,MAAF,sBAC1BrN,EAAMwL,wBADoB,CAE7B8C,KAECC,UACAjB,OACA3J,QACH,OAAO,eAAK3D,EAAZ,CAAmBwL,2BAErB,KAAKxG,EAAYwJ,6BAA+B,IACtCF,EAA0BlK,EAAOnE,QAAjCqO,sBACF9C,EAAyB3D,KAAE4F,OAAF,YACzBzN,EAAMwL,yBACV,SAAAvB,GAAI,OAAIA,IAASqE,KAEnB,OAAO,eAAKtO,EAAZ,CAAmBwL,2BAErB,KAAKxG,EAAYyJ,gBACf,OAAO,eAAKzO,EAAZ,CAAmB0L,QAAQ,IAE7B,KAAK1G,EAAY0J,iBACf,OAAO,eAAK1O,EAAZ,CAAmB0L,QAAQ,IAE7B,KAAK1G,EAAY2J,YACf,OAAO,eAAK3O,EAAZ,CAAmByL,aAActJ,KAAKC,QAExC,KAAK4C,EAAY4J,QAAU,IAAD,EACOxK,EAAOnE,QAA9BuK,EADgB,EAChBA,SAAUC,EADM,EACNA,SAClB,OAAO,eAAKzK,EAAZ,CAAmBwK,WAAUC,WAAUF,YAAY,IAErD,KAAKvF,EAAY6J,eAAiB,IACxBvE,EAAelG,EAAOnE,QAAtBqK,WACR,OAAO,eAAKtK,EAAZ,CAAmBsK,eAErB,KAAKtF,EAAY8J,eACf,OAAO,eAAK9O,EAAZ,CAAmBuK,YAAY,IAEjC,KAAKvF,EAAY+J,SACf,OAAO,eAAK/O,EAAZ,CAAmBsK,WAAY,GAAIE,SAAU,GAAIC,SAAU,KAE7D,KAAKzF,EAAYgK,aACf,IAAMpD,EAAkB5L,EAAM4L,gBAAkB,EAChD,OAAO,eACF5L,EADL,CAEE4L,oBAGJ,KAAK5G,EAAYiK,aAAe,IACtBC,EAAgB9K,EAAOnE,QAAvBiP,YACFrD,EAAuBnC,KAAKC,IAChC,EACA3J,EAAM6L,qBAAuBqD,GAE/B,OAAO,eACFlP,EADL,CAEE6L,yBAGJ,KAAK7G,EAAYmK,eAAiB,IACxBxD,EAAkBvH,EAAOnE,QAAzB0L,cACR,OAAO,eACF3L,EADL,CAEE4L,gBAAiB,EACjBC,qBAAsB,EACtBF,kBAGJ,KAAK3G,EAAYoK,iBAAmB,IAAD,EAK7BhL,EAAOnE,QAHT0L,EAF+B,EAE/BA,cACAC,EAH+B,EAG/BA,gBACAC,EAJ+B,EAI/BA,qBAEF,OAAO,eACF7L,EADL,CAEE2L,gBACAC,kBACAC,yBAGJ,KAAK7G,EAAYqK,oBAAsB,IAC7BtD,EAA0B3H,EAAOnE,QAAjC8L,sBACR,OAAO,eACF/L,EADL,CAEE+L,0BAGJ,KAAK/G,EAAYsK,OACf,OAAO,eACFtP,EADL,CAEE8L,QAAQ,IAGZ,KAAK9G,EAAYuK,mBAAqB,IAC5BvD,EAAmB5H,EAAOnE,QAA1B+L,eACR,OAAO,eACFhM,EADL,CAEEgM,mBAIJ,KAAKhH,EAAYwK,kBAAoB,IAC3BvD,EAAkB7H,EAAOnE,QAAzBgM,cACR,OAAO,eACFjM,EADL,CAEEiM,kBAGJ,KAAKjH,EAAYyK,yBAA2B,IAClCvD,EAAyB9H,EAAOnE,QAAhCiM,qBACR,OAAO,eACFlM,EADL,CAEEkM,yBAGJ,KAAKlH,EAAY0K,+BAAiC,IACxCC,EAAmBvL,EAAOnE,QAA1B0P,eACR,OAAO,eACF3P,EADL,CAEEmM,2BAA4BwD,IAGhC,KAAK3K,EAAY4K,wBAA0B,IAAD,EAChBxL,EAAOnE,QAAvB8F,GADgC,EAChCA,KAAMpC,GAD0B,EAC1BA,MACd,OAAO,eACF3D,EADL,CAEEoM,qBAAqB,eAChBpM,EAAMoM,qBADS,gBAEjBrG,GAAOpC,OAId,QACE,OAAO3D,ICjOP6P,GAAuB,SAC3B7P,EACA8P,EACAC,EACAC,GAJ2B,OAKxB,SAAC5L,GACJ0L,EAAS1L,GACT2L,EAAa3L,EAAQ4L,EAAkBhQ,K,kBCpCnCiQ,GAAkD,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,QAC/D,OACE,yBAAKC,UAAU,UACb,wBAAIA,UAAU,QACZ,kBAAC,KAAD,CAAiBF,KAAMA,KAEzB,6BAAMC,KASNE,GAAgC,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,KAAML,EAAW,EAAXA,KACpD,OACE,yBAAKE,UAAU,UACb,yBAAKI,IAAKN,EAAMO,MAAO,CAAEC,MAAO,OAAQC,OAAQ,QAAUC,IAAI,KAC9D,yBAAKR,UAAU,QACb,4BAAKE,GACL,2BAAIC,MAKCM,GAIF,SAACV,GACRW,IAAMC,QAAQ,kBAAC,GAAD,CAAiBb,KAAMc,KAASb,QAASA,MAL9CU,GAYJ,SAACV,GACNW,IAAMG,MAAM,kBAAC,GAAD,CAAiBf,KAAMgB,KAAef,QAASA,MAblDU,GAeH,YAAyC,IAAtCP,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,KAAML,EAAwB,EAAxBA,KACtBY,YAAM,kBAAC,GAAD,CAAQR,MAAOA,EAAOC,KAAMA,EAAML,KAAMA,M,oBCrDrCiB,GAA8B,SAAC/M,EAAQgN,EAAWpR,GAC7D6H,KAAEC,OAAM,WAAO,IAAD,EACqD9H,IAAzD2L,EADI,EACJA,cAAeC,EADX,EACWA,gBAAiBC,EAD5B,EAC4BA,qBACxC7B,GAAa7K,GAAWkS,cAAe1F,GACvC3B,GAAa7K,GAAWmS,gBAAiB5P,OAAOkK,IAChD5B,GAAa7K,GAAWoS,qBAAsB7P,OAAOmK,QCqB5C2F,GAAK,IAblB,YAGE,aAAe,IAAD,+BACZ,8CAAM,2BAHRC,WAEc,IADdC,YACc,EAEZ,EAAKC,QAAQ,GAAGC,OAAO,CACrBH,MAAO,6CACPC,OAAQ,sDAEV,EAAKD,MAAQ,EAAKI,MAAM,SACxB,EAAKH,OAAS,EAAKG,MAAM,UAPb,EAHhB,4B,OAAiCC,I,wDCVjCC,KAAOlP,S,OAUHmP,kfARgBC,G,GAAlBC,iBACoBC,G,GAApBC,mBAQIC,GAAiB,CACrBJ,UACAK,W,GATAC,qBAUAC,Y,GATAC,sBAUAC,U,GATAC,oBAUAC,c,GATAC,wBAUAC,kB,GATAC,4BAUAC,M,GATAC,iBAWFC,KAASC,cAAcd,IACvB,IAAIe,GAAkD,KACtD,IACEA,GAAaF,KAASG,YACtB,MAAOtP,IACPC,QAAQC,IAAIF,IAEP,IAAMsP,GAAYD,GAErBE,UAAUC,eAAiBF,IAC7BC,UAAUC,cACPC,SAAS,8BACTC,MAAK,SAAAC,GACC7L,KAAE8L,IAAIN,GAAW,sBACpBA,GAAUO,iBAAiBF,GAE7BL,GAAUQ,kBAAkB1B,IAAY,IACxCkB,GAAUS,gBAAe,qBAAAC,EAAAC,OAAA,mEAAAD,EAAA,MACTV,GAAUY,YADD,sDAGzBZ,GAAUY,WAAWR,MAAK,SAAA1K,GAChBA,QAIhB,IACamL,GADFhB,KAASiB,YACKC,WAAW,UAGhCf,IACFA,GACGgB,oBACAZ,MAAK,WACJzP,QAAQC,IAAI,uCAEbqQ,OAAM,SAASC,GACdvQ,QAAQC,IAAI,sCAAuCsQ,MAGlD,IAAMC,GAAW,SACtBlE,EACAC,EACA7I,EACA0C,EACArE,GALsB,kBAAAgO,EAAAC,OAAA,mEAAAD,EAAA,MAODG,GAAOO,IAAI,CAC9BnE,QACAC,OACA7I,YACA0C,QACA8F,KAAM,eACNwE,aAAcC,OAAOC,SAASC,KAC9B9O,UAdoB,uBAOd+O,EAPc,EAOdA,GAPc,kBAgBfA,GAhBe,sCC/DXC,GAA4B,SAAC3Q,EAAQ0L,EAAU9P,GAC1D,GAAIoE,EAAOC,OAASW,EAAYgQ,aAAc,CAAC,IACrC3K,EAAarK,IAAbqK,SACJA,ID8EiByK,EC7EVzK,ED8Eb6J,GAAOe,IAAIH,GAAII,SC7EXpF,EAAS,CAAEzL,KAAMW,EAAYsH,aAAcrM,QAAS,CAAEoK,SAAU,SD4E9C,IAACyK,GE3CZnS,GAAY,SACvBlD,EACAmD,EACAC,GAHuB,OAIpBsS,KAAMxB,IAAN,UAAgB3Q,GAAQvD,GAAxB,YAAgCmD,GAAQC,IAChCuS,GAAW,SACtB3V,EACAmD,EACAiB,EACAhB,GAJsB,OAKnBsS,KAAME,KAAN,UAAiBrS,GAAQvD,GAAzB,YAAiCmD,GAAQiB,EAAMhB,IACvCyS,GAAY,SACvB7V,EACAmD,EACAiB,EACAhB,GAJuB,OAKpBsS,KAAMI,MAAN,UAAevS,GAAQvD,GAAvB,YAA+BmD,GAAQiB,EAAMhB,IACrC2S,GAAY,SAACjB,GACxB,IAAIpE,EACJ,IACEA,EAAUoE,EAAIkB,SAAWlB,EAAIkB,SAAS5R,KAAK6R,eAAiB,QAC5D,MAAO3R,IACPoM,EAAUpM,GAAEoM,SAAWpM,GAEzB8M,GAAaV,IAEFwF,GAAmB,SAC9BvR,EACA0L,EACA9P,GAEA,OAAQoE,EAAOC,MACb,KAAKW,EAAY4Q,cAEf,YCxEqC,SAAOxR,EAAQ0L,EAAU9P,GAAzB,iBAAA+T,EAAAC,OAAA,mDACrC5P,EAAOC,OAASW,EAAY4Q,cADS,+BAGrB5V,IAARP,EAH6B,EAG7BA,IACAC,EAAQ0E,EAAOnE,QAAfP,KACJD,IAAOC,EAL0B,oCAAAqU,EAAA,MAMHpR,GAC9BlD,EADuC,mBAE3BC,KARqB,gBAMrBoB,EANqB,EAM3B+C,KAIRiM,EAAS,CACPzL,KAAMW,EAAYyH,YAClBxM,QAAS,CAAEa,aAZsB,0DAgBrC0U,GAAU,EAAD,IAhB4B,yDDuErCK,CAAazR,EAAQ0L,EAAU9P,GAGjC,KAAKgF,EAAY8Q,iBAEf,YE5EwC,SAC5C1R,EACA0L,EACA9P,GAH4C,iBAAA+T,EAAAC,OAAA,mDAKxC5P,EAAOC,OAASW,EAAY8Q,iBALY,+BAOxB9V,IAARP,EAPgC,EAOhCA,IACAqB,EAAYsD,EAAOnE,QAAnBa,SACJrB,IAAOqB,EAT6B,oCAAAiT,EAAA,MAUHpR,GACjClD,EACA,aACA,CAAEsW,OAAQ,CAAEjV,cAbwB,gBAUxBiK,EAVwB,EAU9BlH,KAKRiM,EAAS,CAAEzL,KAAMW,EAAY2H,eAAgB1M,QAAS,CAAE8K,gBAflB,0DAkBxCyK,GAAU,EAAD,IAlB+B,yDF2ExCQ,CAAgB5R,EAAQ0L,EAAU9P,GAGpC,KAAKgF,EAAYiR,YAEf,YG9EmC,SAAO7R,EAAQ0L,EAAU9P,GAAzB,2BAAA+T,EAAAC,OAAA,mDACnC5P,EAAOC,OAASW,EAAYiR,YADO,+BAGnBjW,IAARP,EAH2B,EAG3BA,IAH2B,EAQ/B2E,EAAOnE,QAHT2B,EALiC,EAKjCA,UACA4J,EANiC,EAMjCA,uBACAU,EAPiC,EAOjCA,uBAEEzM,GAAOmC,GAAasK,GATW,wBAU3BgK,EAASC,KAAOjK,GAVW,YAAA6H,EAAA,MAWVpR,GAAmBlD,EAAK,QAAS,CACtDwD,QAAS,CAAE,wBAAwB,GACnC8S,OAAQ,CAAEnU,gBAbqB,gBAWzBiC,EAXyB,EAWzBA,KAIFmH,EAAQnD,KAAEwF,MAAMxJ,GACnB4J,QAAO,SAAAxD,GAAI,OACVpC,KAAEuB,SAASoC,EAAwB9J,OAAOuI,EAAK/C,YAEhDuG,QACC,SAAAxD,GAAI,OACFA,EAAKmM,WAAaD,KAAOlM,EAAKoM,eAAeC,KAAKJ,GAAU,KAE/DvS,QAEHmM,EAAS,CAAEzL,KAAMW,EAAY0I,UAAWzN,QAAS,CAAE+K,WAzBlB,0DA4BnCwK,GAAU,EAAD,IA5B0B,yDH6EnCe,CAAWnS,EAAQ0L,EAAU9P,GAG/B,KAAKgF,EAAYwR,oBAEf,YIpF0C,SAC9CpS,EACA0L,EACA9P,GAH8C,iBAAA+T,EAAAC,OAAA,mDAK1C5P,EAAOC,OAASW,EAAYwR,oBALc,+BAO1BxW,IAARP,EAPkC,EAOlCA,IACAqB,EAAYsD,EAAOnE,QAAnBa,SACJrB,IAAOqB,EAT+B,oCAAAiT,EAAA,MAUFpR,GACpClD,EACA,gBACA,CAAEsW,OAAQ,CAAEjV,cAb0B,gBAU1BsK,EAV0B,EAUhCvH,KAKRiM,EAAS,CACPzL,KAAMW,EAAY+I,kBAClB9N,QAAS,CAAEmL,mBAjB2B,0DAqB1CoK,GAAU,EAAD,IArBiC,yDJmF1CiB,CAAkBrS,EAAQ0L,EAAU9P,GAGtC,KAAKgF,EAAY0R,mBAEf,YKxFyC,SAC7CtS,EACA0L,EACA9P,GAH6C,iBAAA+T,EAAAC,OAAA,mDAKzC5P,EAAOC,OAASW,EAAY0R,mBALa,+BAOzB1W,IAARP,EAPiC,EAOjCA,IACAqB,EAAYsD,EAAOnE,QAAnBa,SACJrB,IAAOqB,EAT8B,oCAAAiT,EAAA,MAUFpR,GACnClD,EACA,yBACA,CAAEsW,OAAQ,CAAEjV,cAbyB,gBAUzB6J,EAVyB,EAU/B9G,KAKRiM,EAAS,CACPzL,KAAMW,EAAY8H,iBAClB7M,QAAS,CAAE0K,kBAjB0B,0DAqBzC6K,GAAU,EAAD,IArBgC,yDLuFzCmB,CAAiBvS,EAAQ0L,EAAU9P,GAGrC,KAAKgF,EAAY4R,uBAEf,YM5F4C,SAChDxS,EACA0L,EACA9P,GAHgD,mBAAA+T,EAAAC,OAAA,mDAK5C5P,EAAOC,OAASW,EAAY4R,uBALgB,+BAOJ5W,IAAhCP,EAPoC,EAOpCA,IAAKG,EAP+B,EAO/BA,WAAYC,EAPmB,EAOnBA,WACjBmL,EAAU5G,EAAOnE,QAAjB+K,QACJvL,GAAOuL,EAAM6L,QAAUjX,GAAcC,GATG,6BAUb0L,QAVa,YAAAwI,EAAA,MAWlC+C,QAAQC,IACZ/L,EAAMpH,KAAI,SAAMqG,GAAN,kBAAA8J,EAAAC,OAAA,mEAAAD,EAAA,MACgCpR,GACtClD,EAD+C,yCAEbwK,EAAK6K,MAHjC,uBACMkC,EADN,EACAnT,KADA,kBAKD,CAACoG,EAAM+M,IALN,0CAZ4B,mBAUpC1L,EAVoC,eAqB1CwE,EAAS,CACPzL,KAAMW,EAAYiJ,qBAClBhO,QAAS,CAAEqL,sBAvB6B,0DA2B5CkK,GAAU,EAAD,IA3BmC,yDN2F5CyB,CAAoB7S,EAAQ0L,EAAU9P,GAGxC,KAAKgF,EAAYkS,WAEf,YOhGkC,SAAO9S,EAAQ0L,EAAU9P,GAAzB,iBAAA+T,EAAAC,OAAA,mDAClC5P,EAAOC,OAASW,EAAYkS,WADM,+BAGlBlX,IAARP,EAH0B,EAG1BA,IACA0X,EAAQ/S,EAAOnE,QAAfkX,KACJ1X,IAAO0X,EALuB,oCAAApD,EAAA,MAMHpR,GAAiBlD,EAAR,gBAAsB0X,KAN5B,gBAMlBzM,EANkB,EAMxB7G,KACRiM,EAAS,CACPzL,KAAMW,EAAYkJ,SAClBjO,QAAS,CAAEyK,UATmB,0DAalC8K,GAAU,EAAD,IAbyB,yDP+FlC4B,CAAUhT,EAAQ0L,EAAU9P,GAG9B,KAAKgF,EAAYqS,mBAEf,YQpGyC,SAC7CjT,EACA0L,EACA9P,GAH6C,mCAAA+T,EAAAC,OAAA,mDAKzC5P,EAAOC,OAASW,EAAYqS,mBALa,+BAYrCrX,IAJFP,EARuC,EAQvCA,IACA6L,EATuC,EASvCA,iBACAN,EAVuC,EAUvCA,MACAmB,EAXuC,EAWvCA,2BAXuC,EAaL/H,EAAOnE,QAAnC6U,EAbiC,EAajCA,GAAI5P,EAb6B,EAa7BA,IAAKvB,EAbwB,EAaxBA,MAAOgO,EAbiB,EAajBA,QAClBzG,EAAOF,EAAMsM,MAAK,SAAApM,GAAI,OAAIA,EAAK4J,KAAOA,OACxCrV,GAAOqV,GAAM5P,GAAOgG,GAAQI,EAAiBiM,IAAIrM,IAfZ,sBAgBjCsM,EAAelM,EAAiBqI,IAAIzI,IAhBH,wBAkB7BuM,EAAsBD,EAAtBC,kBAlB6B,aAAA1D,EAAA,MAmB/BuB,GAAU7V,EAAD,yCAAwCqV,GAAM,CAC3D2C,kBAAkB,eACbA,EADY,gBAEdvS,EAAMxD,OAAOiC,KAEhBgO,aAxBmC,QA2BnCvN,EAAOsT,MACPtT,EAAOsT,KAAKC,eACZhU,EAAQ,GACRwI,IACCjB,EAAKkL,WACNlL,EAAKhE,SAAW0B,OAAOuD,IAEvB2D,EAAS,CACPzL,KAAMW,EAAY4S,WAClB3X,QAAS,CACPiF,IAAK,SACLvB,MAAOwI,EACP2I,GAAI5J,EAAK4J,MAIX1Q,EAAOsT,MAAQtT,EAAOsT,KAAKG,eACrB3I,EAAgB9K,EAAOsT,KAAKG,aAA5B3I,YACRY,EAAS,CACPzL,KAAMW,EAAYiK,aAClBhP,QAAS,CAAEiP,kBAGfY,EAAS,CAAEzL,KAAMW,EAAY2J,cAC7BkC,GAAA,iCAAyClN,EAAzC,MAnDqC,0DAuDzC6R,GAAU,EAAD,IAvDgC,yDRmGzCsC,CAAiB1T,EAAQ0L,EAAU9P,GAGrC,KAAKgF,EAAY4J,QAEf,YStG+B,SAAOxK,EAAQ0L,EAAU9P,GAAzB,qBAAA+T,EAAAC,OAAA,mDAC/B5P,EAAOC,OAASW,EAAY4J,QADG,+BAGf5O,IAARP,EAHuB,EAGvBA,IAHuB,EAIA2E,EAAOnE,QAA9BuK,EAJuB,EAIvBA,SAAUC,EAJa,EAIbA,WACdhL,GAAO+K,GAAYC,GALQ,oCAAAsJ,EAAA,MAQnBqB,GAAqB3V,EAAK,OAAQ,CAC1C+K,WACAC,WACApG,KAAM,YAXqB,gBAOnBiG,EAPmB,EAO3BzG,KAAQyG,WAMVwF,EAAS,CAAEzL,KAAMW,EAAY6J,eAAgB5O,QAAS,CAAEqK,gBACxDN,GAAa7K,GAAW4Y,SAAUvN,GAClCR,GAAa7K,GAAW6Y,SAAUvN,GAClCoG,GAAA,UAAkBrG,EAAlB,gBAhB6B,0DAmB/BsF,EAAS,CAAEzL,KAAMW,EAAY8J,iBACzBjH,KAAE8L,IAAF,KAAS,+BACX7D,EAAS,CAAEzL,KAAMW,EAAY+J,WAE/ByG,GAAU,EAAD,IAvBsB,yDTqG/ByC,CAAO7T,EAAQ0L,EAAU9P,GAG3B,KAAKgF,EAAY4S,WAEf,YU3GkC,SAAOxT,EAAQ0L,EAAU9P,GAAzB,yBAAA+T,EAAAC,OAAA,mDAClC5P,EAAOC,OAASW,EAAY4S,WADM,+BAGX5X,IAAfP,EAH0B,EAG1BA,IAAKuL,EAHqB,EAGrBA,MAHqB,EAIP5G,EAAOnE,QAA1B6U,EAJ0B,EAI1BA,GAAI5P,EAJsB,EAItBA,IAAKvB,EAJiB,EAIjBA,MACXuH,EAAOF,EAAMsM,MAAK,SAAApM,GAAI,OAAIA,EAAK4J,KAAOA,OACxCrV,GAAOqV,GAAM5P,GAAOgG,GANU,oCAAA6I,EAAA,MAO1BuB,GAAU7V,EAAD,gBAAeqV,IAAf,oBACZ5P,EAAMvB,GADM,yBAEJuH,EAAKyG,SAFD,KAPiB,OAWhC7B,EAAS,CAAEzL,KAAMW,EAAY2J,cAC7BkC,GAAA,yBAAiC3L,EAAjC,YAAwCvB,EAAxC,MAZgC,0DAelC6R,GAAU,EAAD,IAfyB,yDV0GlC0C,CAAU9T,EAAQ0L,EAAU9P,GAG9B,KAAKgF,EAAY+J,SAEf,OW9GJ5J,aAAagT,WAAWhZ,GAAW4Y,UACnC5S,aAAagT,WAAWhZ,GAAW6Y,eAC/B7C,KAAMiD,SAASnV,QAAQX,OAAvB,sBACK6S,KAAMiD,SAASnV,QAAQX,OAAvB,eX6GP,KAAK0C,EAAY6J,eAEf,YYpHqC,SAACzK,EAAQ0L,EAAU9P,GAC5D,GAAIoE,EAAOC,OAASW,EAAY6J,eAAgB,CAAC,IACvCvE,EAAelG,EAAOnE,QAAtBqK,WACR6K,KAAMiD,SAASnV,QAAQX,OAAvB,+BAA2DgI,IZgHzD+N,CAAajU,GAGf,KAAKY,EAAYuH,QAEf,YaxH+B,SAACnI,EAAQ0L,EAAU9P,GACtD,GAAIoE,EAAOC,OAASW,EAAYuH,QAAS,CAAC,IAChC9M,EAAQ2E,EAAOnE,QAAfR,IACRuK,GAAa7K,GAAWmZ,IAAK7Y,IboH3BJ,CAAO+E,GAGT,KAAKY,EAAYwH,Sc1HgB,SAACpI,EAAQ0L,EAAU9P,GACtD,GAAIoE,EAAOC,OAASW,EAAYwH,QAAS,CAAC,IAChC9M,EAAQ0E,EAAOnE,QAAfP,IACRsK,GAAa7K,GAAWoZ,IAAK7Y,GAC7ByF,aAAagT,WAAWhZ,GAAWqZ,KACnC,IAAM5Y,EAAakK,GAAyB3K,GAAWsZ,WAAY/Y,GAC7DG,EAAaiK,GAAyB3K,GAAWuZ,WAAYhZ,GACnEoQ,EAAS,CAAEzL,KAAMW,EAAY6H,eAAgB5M,QAAS,CAAEL,gBACxDkQ,EAAS,CAAEzL,KAAMW,EAAYiI,eAAgBhN,QAAS,CAAEJ,iBdmHtD8Y,CAAOvU,EAAQ0L,GACf,MAEF,KAAK9K,EAAY0H,Se7HgB,SAACtI,EAAQ0L,EAAU9P,GACtD,GAAIoE,EAAOC,OAASW,EAAY0H,QAAS,CAAC,IAChC/M,EAAQyE,EAAOnE,QAAfN,IACFiZ,EAAY5Y,IAAQL,IAC1BqK,GAAa7K,GAAWqZ,IAAK7Y,GAC7B,IAAMmL,EAAWjD,KAAE0G,QACjBzE,GAAyB3K,GAAW0Z,SAAUlZ,GAAKmZ,MAAM,MACzDvL,OACFuC,EAAS,CAAEzL,KAAMW,EAAYkI,aAAcjN,QAAS,CAAE6K,cAClD8N,GAAajZ,IAAQiZ,GACvB9I,EAAS,CAAEzL,KAAMW,EAAY4I,gBAE/B,IAAM1B,EAAuBpC,GAC3B3K,GAAW4Z,qBACXpZ,GAEFmQ,EAAS,CACPzL,KAAMW,EAAYyK,yBAClBxP,QAAS,CAAEiM,2Bf4GX1K,CAAO4C,EAAQ0L,EAAU9P,GACzB,MAEF,KAAKgF,EAAY6H,gBgBlIsB,SAACzI,EAAQ0L,EAAU9P,GAC5D,GAAIoE,EAAOC,OAASW,EAAY6H,eAAgB,CAAC,IACvCjN,EAAewE,EAAOnE,QAAtBL,WACFF,EAAM2F,GAAelG,GAAWoZ,KACtCrO,GAAuB/K,GAAWsZ,WAAY/Y,EAAKE,IhB+HjDoZ,CAAa5U,GACb,MAEF,KAAKY,EAAYiI,gBiBtIsB,SAAC7I,EAAQ0L,EAAU9P,GAC5D,GAAIoE,EAAOC,OAASW,EAAYiI,eAAgB,CAAC,IACvCpN,EAAeuE,EAAOnE,QAAtBJ,WACFH,EAAM2F,GAAelG,GAAWoZ,KACtCrO,GAAuB/K,GAAWuZ,WAAYhZ,EAAKG,IjBmIjDoZ,CAAa7U,GACb,MAEF,KAAKY,EAAYkI,aACjB,KAAKlI,EAAYmI,YACjB,KAAKnI,EAAYwI,gBkB3IqB,SAACpJ,EAAQ8U,EAAUlZ,GAC3D6H,KAAEC,OAAM,WAAO,IAAD,EACc9H,IAAlBL,EADI,EACJA,IAAKmL,EADD,EACCA,SACbZ,GAAuB/K,GAAW0Z,SAAUlZ,EAAKmL,EAASqO,KAAK,SlByI7DC,CAAYhV,EAAQ0L,EAAU9P,GAC9B,MAEF,KAAKgF,EAAYqJ,0BACjB,KAAKrJ,EAAYwJ,8BmBhJiC,SACpDpK,EACA0L,EACA9P,GAEA6H,KAAEC,OAAM,WAAO,IAAD,EAC4B9H,IAAhCN,EADI,EACJA,IAAK8L,EADD,EACCA,uBACbtB,GACE/K,GAAWka,uBACX3Z,EACA8L,EAAuB2N,KAAK,SnBuI5BG,CAAwBlV,EAAQ0L,EAAU9P,GAC1C,MAEF,KAAKgF,EAAYgK,coBlJqB,SAAO5K,EAAQ0L,EAAU9P,GAAzB,iCAAA+T,EAAAC,OAAA,mDACpC5P,EAAOC,OAASW,EAAYgK,eAAgB5K,EAAOsT,KADf,0BAED1X,IAA7BP,EAF8B,EAE9BA,IAAKwL,EAFyB,EAEzBA,QAASpL,EAFgB,EAEhBA,WAFgB,EAGEuE,EAAOsT,KAAvC6B,EAH8B,EAG9BA,YAAavT,EAHiB,EAGjBA,SAAUwT,EAHO,EAGPA,KACzBC,EAAUtD,KAAOoD,GAAaG,OAAO,cAJL,YAAA3F,EAAA,MAKhCvC,GAAGC,MAAMkI,IAAI,CAAEJ,cAAavT,WAAUwT,OAAMC,aALZ,UAMtC3J,EAAS,CAAEzL,KAAMW,EAAY4U,oBAAqB3Z,QAAS,CAAEwZ,cACzDxO,IAAWpL,EAPuB,qCAAAkU,EAAA,MAQIpR,GACtClD,EAD+C,yCAEbwL,KAVA,iBAQtB+L,EARsB,EAQ5BnT,KAIFF,EACJiF,OAAOf,KAAE8L,IAAIqD,EAAN,4BAA4CnX,GAAc,MACjE,GACM8R,EAAYqF,EAAZrF,QACJqF,GAAmBrF,GACrB7B,EAAS,CACPzL,KAAMW,EAAYqS,mBAClBpX,QAAS,CACP6U,GAAIlM,OAAOqC,GACX/F,IAAKrF,EACL8D,QACAgO,WAEF+F,KAAM,CAAEG,aAAc,CAAE3I,YAAa,GAAKyI,eAAe,KAzBzB,sCpBmJpCkC,CAAYzV,EAAQ0L,EAAU9P,GAC9BmR,GAAa/M,EAAQ0L,EAAU9P,GAC/B,MAEF,KAAKgF,EAAYiK,aACjB,KAAKjK,EAAYmK,eACfgC,GAAa/M,EAAQ0L,EAAU9P,GAC/B,MAEF,KAAKgF,EAAY4U,qBqB7J2B,SAC9CxV,EACA0L,EACA9P,GAH8C,qBAAA+T,EAAAC,OAAA,mDAK1C5P,EAAOC,OAASW,EAAY4U,oBALc,wBAMtCE,EAAQ1V,EAAOnE,QANuB,YAAA8T,EAAA,MAOrBvC,GAAGE,OAAOiC,IAAImG,IAPO,cAOtCC,EAPsC,mBAAAhG,EAAA,MAQvBvC,GAAGC,MAAMuI,MAAMF,GAAOG,WARC,OAQtC5Q,EARsC,OAStC1F,EAAQ0F,EAAOwN,OACfqD,EAAYrS,KAAEsS,OAAO9Q,EAAQ,CAAEmQ,MAAM,IAAQ3C,OAC7CuD,EAAYjE,KAAO2D,EAAML,QAAS,cAAcY,MAChDC,EAAOnE,KAAO2D,EAAML,QAAS,cAAcc,SACjD/I,GAAGE,OAAOiI,IAAV,eAAmBI,EAAnB,GAAgCD,EAAhC,CAAuCQ,OAAM3W,QAAOuW,YAAWE,eAC/DtK,EAAS,CAAEzL,KAAMW,EAAYwV,uBAde,sCrB8J1CC,CAAkBrW,EAAQ0L,GAC1B,MAEF,KAAK9K,EAAYwV,sBsBnK4B,SAC/CpW,EACA0L,EACA9P,GAH+C,SAAA+T,EAAAC,OAAA,mEAAAD,EAAA,MAKXvC,GAAGE,OAAOuI,WALC,OAKzClO,EALyC,OAM/C+D,EAAS,CACPzL,KAAMW,EAAYqK,oBAClBpP,QAAS,CAAE8L,2BARkC,qCtBoK3C2O,CAAmBtW,EAAQ0L,GAC3B,MAEF,KAAK9K,EAAY2I,YACjB,KAAK3I,EAAY4I,euBvKoB,SAACxJ,EAAQ0L,EAAU9P,GAC1D6H,KAAEC,OAAM,WAAO,IACLmD,EAAYjL,IAAZiL,QACJA,EACFjB,GAAa7K,GAAWwb,QAAS1P,GAEjC9F,aAAagT,WAAWhZ,GAAWwb,YvBkKnCC,CAAWxW,EAAQ0L,EAAU9P,GAC7B,MAEF,KAAKgF,EAAYyK,0BwB5K8B,SACjDrL,EACA0L,EACA9P,GAEA,GAAIoE,EAAOC,OAASW,EAAYyK,yBAA0B,CAAC,IACjDvD,EAAyB9H,EAAOnE,QAAhCiM,qBACF2O,IAAYzW,EAAOsT,MAAOtT,EAAOsT,KAAKmD,UACpClb,EAAQK,IAARL,IACRuM,GACE2O,GACA3Q,GACE/K,GAAW4Z,qBACXpZ,EACAuM,IxB+JF4O,CAAqB1W,EAAQ0L,EAAU9P,GACvC,MAEF,KAAKgF,EAAY+V,cyBhLoB,SAAO3W,EAAQ0L,EAAU9P,GAAzB,uBAAA+T,EAAAC,OAAA,mDACnC5P,EAAOC,OAASW,EAAY+V,aADO,yBAEJ/a,IAAzBoK,EAF6B,EAE7BA,MAAO6B,EAFsB,EAEtBA,cAFsB,EAGF7H,EAAOnE,QAAlCqQ,EAH6B,EAG7BA,MAAOC,EAHsB,EAGtBA,KAAM7I,EAHgB,EAGhBA,UAHgB,YAAAqM,EAAA,MAIdS,GACrBlE,EACAC,EACA7I,EACA0C,EACA6B,IATmC,OAI/B5B,EAJ+B,OAWrCyF,EAAS,CAAEzL,KAAMW,EAAYsH,aAAcrM,QAAS,CAAEoK,cAXjB,qCzBiLnC2Q,CAAW5W,EAAQ0L,EAAU9P,GAC7B,MAEF,KAAKgF,EAAYgQ,aACfD,GAAW3Q,EAAQ0L,EAAU9P,GAC7B,MAEF,KAAKgF,EAAYsH,c0BxLoB,SAAClI,EAAQ0L,EAAU9P,GAC1D,GAAIoE,EAAOC,OAASW,EAAYsH,aAAc,CAAC,IACrCjC,EAAajG,EAAOnE,QAApBoK,SACJA,EACFL,GAAa7K,GAAW8b,SAAU5Q,GAElClF,aAAagT,WAAWhZ,GAAW8b,W1BmLnCC,CAAW9W,K2B/HJ+W,GAAO,SAACrL,IAnDD,SAACA,GACnB,IAAMrQ,EAAM4F,GAAelG,GAAWmZ,KAChCjO,EAAWhF,GAAelG,GAAW8b,UACrCvb,EAAM2F,GAAelG,GAAWoZ,KAChC5Y,EAAM0F,GAAelG,GAAWqZ,KAChC5Y,EAAakK,GAAyB3K,GAAWsZ,WAAY/Y,GAC7DG,EAAaiK,GAAyB3K,GAAWuZ,WAAYhZ,GAC7DoL,EAAWjD,KAAE0G,QACjBzE,GAAyB3K,GAAW0Z,SAAUlZ,GAAKmZ,MAAM,MACzDvL,OACI/B,EAAyB3D,KAAE0G,QAC/BzE,GAAyB3K,GAAWka,uBAAwB3Z,GAAKoZ,MAAM,MAGnEpN,IAAWjM,GAAOC,GAAOC,GAAOC,GAAcC,GAE9C8L,EAAgBtG,GAAelG,GAAWkS,eAC1CzF,EAAkBhD,OACtBvD,GAAelG,GAAWmS,kBAAoB,KAE1CzF,EAAuBjD,OAC3BvD,GAAelG,GAAWoS,uBAAyB,KAE/CtG,EAAU5F,GAAelG,GAAWwb,SAC1CtQ,GACEyF,EAAS,CAAEzL,KAAMW,EAAYsH,aAAcrM,QAAS,CAAEoK,cACxD5K,GAAOqQ,EAAS,CAAEzL,KAAMW,EAAYuH,QAAStM,QAAS,CAAER,SACxDC,GAAOoQ,EAAS,CAAEzL,KAAMW,EAAYwH,QAASvM,QAAS,CAAEP,SACxDC,GAAOmQ,EAAS,CAAEzL,KAAMW,EAAY0H,QAASzM,QAAS,CAAEN,SACxDC,GACEkQ,EAAS,CAAEzL,KAAMW,EAAY6H,eAAgB5M,QAAS,CAAEL,gBAC1DC,GACEiQ,EAAS,CAAEzL,KAAMW,EAAYiI,eAAgBhN,QAAS,CAAEJ,gBAC1DiL,EAAS+L,QACP/G,EAAS,CAAEzL,KAAMW,EAAYkI,aAAcjN,QAAS,CAAE6K,cACxDU,EAAuBqL,QACrB/G,EAAS,CACPzL,KAAMW,EAAYoJ,2BAClBnO,QAAS,CAAEuL,4BAGfP,GAAW6E,EAAS,CAAEzL,KAAMW,EAAY2I,YAAa1N,QAAS,CAAEgL,aAChES,GAAUoE,EAAS,CAAEzL,KAAMW,EAAYyJ,kBACvC9C,GACEmE,EAAS,CACPzL,KAAMW,EAAYoK,iBAClBnP,QAAS,CAAE0L,gBAAeC,kBAAiBC,0BAE/CiE,EAAS,CAAEzL,KAAMW,EAAYsK,SAC7BQ,EAAS,CAAEzL,KAAMW,EAAYwV,uBAG7BY,CAAYtL,GACZjI,KAAEC,OAAM,YA1DK,SAACgI,GACd,IAAMtF,EAAWnF,GAAelG,GAAW4Y,UACrCtN,EAAWpF,GAAelG,GAAW6Y,UAC3ClI,EAAS,CAAEzL,KAAMW,EAAY4J,QAAS3O,QAAS,CAAEuK,WAAUC,cAwDzDwN,CAAOnI,OClDE9M,GAAU,SAACvD,GAAD,gBAAoBA,EAAIsD,QAAQ,WAAS,IAAzC,YACjBsY,GAAgB,SAAC5J,EAAsBqD,GAAvB,OACpBjN,KAAEyP,KAAK7F,EAAO,CAAEqD,QASLwG,GAAcC,wBAAc,CACvCvb,MAAOmK,GACP2F,SAAU,SAAC1L,OAEAoX,GAAW,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,SACnBhc,EAAMW,IAD2D,ElCZ1C,WAE7B2P,GACsB,IAAD,oBAFpB/P,EAEoB,KAFb8P,EAEa,KACjB4L,EAAiC,KAE/B1L,EAAmB2L,uBACvB,SAACvX,GACCsX,GAAcA,EAAWtX,KAE3B,CAACsX,IAEGE,EAAaC,mBAAQ,kBArBH,WACxB,IAAI7b,EACJ,MAAO,CACL8b,OAAQ,kBAAM9b,GACd+b,OAAQ,SAACC,GACPhc,EAAQgc,IAgBqBC,KAAwB,IAYzD,OAVAL,EAAWG,OAAO/b,GAUX,CAACA,EATR0b,EAAaC,sBACX9L,GACE+L,EAAWE,OACXhM,EACAC,EACAC,GAEF,KkCRwBkM,CACxBC,qBAAWvX,GAASuF,IACpBwL,IAJqE,oBAEhE3V,EAFgE,KAEzD8P,EAFyD,KAMjEnM,EAAQ,CACZ3D,QACA8P,YA2KF,OAxKAsM,qBAAU,WACJ3c,GAAOO,EAAMN,MACfoQ,EAAS,CACPzL,KAAMW,EAAY8Q,iBAClB7V,QAAS,CAAEa,QAASd,EAAMN,OAE5BoQ,EAAS,CACPzL,KAAMW,EAAY0R,mBAClBzW,QAAS,CAAEa,QAASd,EAAMN,OAE5BoQ,EAAS,CACPzL,KAAMW,EAAYwR,oBAClBvW,QAAS,CAAEa,QAASd,EAAMN,OAE5BoQ,EAAS,CACPzL,KAAMW,EAAY4Q,cAClB3V,QAAS,CAAEP,IAAKM,EAAMN,UAGzB,CAACD,EAAKO,EAAMN,IAAKoQ,IACpBsM,qBAAU,WAEN3c,GACAO,EAAML,KACNK,EAAM4B,UAAUkT,IAChB9U,EAAMkM,sBAEN4D,EAAS,CACPzL,KAAMW,EAAYiR,YAClBhW,QAAS,CACP2B,UAAW5B,EAAML,IACjB6L,uBAAwBxL,EAAMwL,uBAC9BU,qBAAsBlM,EAAMkM,0BAIjC,CACDzM,EACAO,EAAML,IACNK,EAAMyL,aACNzL,EAAMwL,uBACNsE,EACA9P,EAAM4B,UAAUkT,GAChB9U,EAAMkM,uBAERkQ,qBAAU,WACRtM,EAAS,CACPzL,KAAMW,EAAY4R,uBAClB3W,QAAS,CACP+K,MAAOhL,EAAMgL,WAGhB,CAAC8E,EAAU9P,EAAMgL,MAAOhL,EAAMJ,WAAYI,EAAMH,aACnDuc,qBAAU,WACR,IAAM/Q,EAAuBxD,KAAEwF,MAAMrN,EAAMoL,eACxCqC,QAAO,SAAAxD,GAAI,OAAIpC,KAAEuB,SAASpJ,EAAMwL,uBAAwB9J,OAAOuI,EAAK6K,QACpEuH,SAAQ,SAAApS,GAAI,OAAIA,EAAKqS,SACrB3Y,QACHmM,EAAS,CACPzL,KAAMW,EAAYgJ,yBAClB/N,QAAS,CAAEoL,4BAEZ,CAACrL,EAAMoL,cAAepL,EAAMwL,uBAAwBsE,IACvDsM,qBAAU,WACR,IAAMxR,EAAgByQ,GACpBrb,EAAM2K,aACN/B,OAAO5I,EAAMJ,aAEXgL,GACFkF,EAAS,CACPzL,KAAMW,EAAY+H,kBAClB9M,QAAS,CAAE2K,qBAGd,CAACkF,EAAU9P,EAAM2K,aAAc3K,EAAMJ,aACxCwc,qBAAU,WACR,IAAMvR,EAAgBwQ,GACpBrb,EAAM2K,aACN/B,OAAO5I,EAAMH,aAEXgL,GACFiF,EAAS,CACPzL,KAAMW,EAAYgI,kBAClB/M,QAAS,CAAE4K,qBAGd,CAACiF,EAAU9P,EAAM2K,aAAc3K,EAAMH,aACxCuc,qBAAU,WACR,IA/GkB3K,EAAqB9R,EA+GjCiC,GA/GY6P,EA+GazR,EAAM+K,WA/GEpL,EA+GUK,EAAML,IA9GzD8R,EAAM6F,MAAK,SAAArN,GAAI,OAAIvI,OAAOuI,EAAK6K,MAAQnV,MA+GjCiC,GACFkO,EAAS,CACPzL,KAAMW,EAAY4H,cAClB3M,QAAS,CAAE2B,iBAGd,CAACkO,EAAU9P,EAAML,IAAKK,EAAM+K,aAC/BqR,qBAAU,WACR,GAAIpc,EAAMgL,MAAM6L,OAAS,GAAK7W,EAAM0K,KAAM,CACxC,IAAMS,GAvHUsG,EAuHgBzR,EAAMgL,MAvHNmM,EAuHanX,EAAM0K,KAAKoK,GAtH5DjN,KAAEwF,MAAMoE,GACL0I,OAAO,CAAEoC,YAAapF,IACtBqF,OAAO,cACP7Y,SAoHCmM,EAAS,CAAEzL,KAAMW,EAAY8I,eAAgB7N,QAAS,CAAEkL,gBAxHzC,IAACsG,EAAgB0F,IA0HjC,CAACrH,EAAU9P,EAAMgL,MAAOhL,EAAM0K,OAEjC0R,qBAAU,WACRjB,GAAKrL,KACJ,CAACA,IACJsM,qBAAU,WACR,GAAIpc,EAAMiL,QAAS,CACjB,IAAMC,EAAOlL,EAAMgL,MAAMsM,MAAK,SAAArN,GAAI,OAAIA,EAAK6K,KAAOlM,OAAO5I,EAAMiL,YAC3DC,GACF4E,EAAS,CAAEzL,KAAMW,EAAY6I,SAAU5N,QAAS,CAAEiL,aAGrD,CAAC4E,EAAU9P,EAAMiL,QAASjL,EAAMgL,QACnCoR,qBAAU,WACR,IAAMK,EAAWzc,EAAM8K,SAAS,GAChC,GAAI2R,IAAazc,EAAMkM,qBAAsB,CAC3C,IAAMA,EAAoB,UAAMiK,KAAOsG,GACpCC,QACAC,QAAQ,OACRjD,OAAO,cAHgB,UAI1B5J,EAAS,CACPzL,KAAMW,EAAYyK,yBAClBxP,QAAS,CAAEiM,6BAGd,CAAC4D,EAAU9P,EAAM8K,SAAU9K,EAAM4B,UAAW5B,EAAMkM,uBACrDkQ,qBAAU,WACR,GAAIpc,EAAMoL,cAAcyL,OAAS,EAAG,CAClC,IAAM+F,EAAc5c,EAAMoL,cAAckM,MACtC,SAAArN,GAAI,MAAkB,gBAAdA,EAAK4S,QAEfD,GACE9M,EAAS,CACPzL,KAAMW,EAAY0K,+BAClBzP,QAAS,CAAE0P,eAAgBjO,OAAOkb,EAAY9H,UAGnD,CAAChF,EAAU9P,EAAMoL,cAAepL,EAAMoL,cAAcyL,SACvDuF,qBAAU,WACJ/I,KACFA,GAAUS,gBAAe,2BAAAC,EAAAC,OAAA,oDACnBX,GADmB,mCAAAU,EAAA,MAEDV,GAAUY,YAFT,OAEf7J,EAFe,OAGrB0F,EAAS,CACPzL,KAAMW,EAAYqH,UAClBpM,QAAS,CAAEmK,WALQ,wCASzBiJ,GAAUY,WAAWR,MAAK,SAAArJ,GACxB0F,EAAS,CACPzL,KAAMW,EAAYqH,UAClBpM,QAAS,CAAEmK,iBAIhB,CAAC0F,IACJsM,qBAAU,WACRU,OAAOzT,OAAO9D,IAAWwX,SAAQ,SAAAhX,GAC/BmO,GAAO8F,MAAM,OAAQ,KAAMjU,GAAMiX,YAAW,SAAAC,GAC1CnN,EAAS,CACPzL,KAAMW,EAAY4K,wBAClB3P,QAAS,CAAE8F,OAAMpC,MAAOsZ,EAAKC,gBAIlC,CAACpN,IACG,kBAACwL,GAAYE,SAAb,CAAsB7X,MAAOA,GAAQ8X,I,0FC9MjC0B,GAAiB,SAACpZ,GAC7BA,EAAEoZ,kBAESC,GAAkB,SAACrZ,GAC9BA,EAAEqZ,mB,UCHSC,GAA0B,kBACrC,kBAAC,KAAD,CACEC,SAAU,EACVC,OAAQ,EACRnN,UAAU,wCCCDoN,GAAkB,WAC7B,IAAMC,EAAW1c,IADkB,EAK/B2c,qBAAWpC,IAFJ5b,EAHwB,EAGjCM,MAASN,IACToQ,EAJiC,EAIjCA,SAEI6N,EAAehC,uBACnB,SAAC5X,GACC,IAAM+Q,EAAK/Q,EAAE6Z,OAAOja,MAChBmR,GACFhF,EAAS,CAAEzL,KAAMW,EAAYwH,QAASvM,QAAS,CAAEP,IAAKoV,OAG1D,CAAChF,IAEH,OACE,kBAAC+N,GAAA,EAAD,CAAYzN,UAAU,OACpB,kBAAC0N,GAAA,EAAD,CAAiBC,UAAU,WAA3B,WACClW,KAAEmW,QAAQP,GACT,kBAAC,GAAD,MAEE,kBAACQ,GAAA,EAAD,CAAOta,MAAOjE,EAAK2E,KAAK,SAAS6Z,SAAUP,GACzC,4BAAQha,MAAM,IAAd,SACC8Z,EAAS7Z,KAAI,SAAAqG,GAAI,OAChB,4BAAQ/E,IAAK+E,EAAK6K,GAAInR,MAAOsG,EAAK6K,IAC/B7K,EAAKkU,YCvBTC,GAAoB,WAC/B,IAAMtO,EAAWuO,cACX1e,EAAMkC,IAFyB,EAMjC6b,qBAAWpC,IAFJvQ,EAJ0B,EAInC/K,MAAS+K,WACCuT,EALyB,EAKnCxO,SAEI6N,EAAehC,uBACnB,SAAC5X,GACC,IAAM+Q,EAAK/Q,EAAE6Z,OAAOja,MAChBmR,IACFwJ,EAAU,CAAEja,KAAMW,EAAY0H,QAASzM,QAAS,CAAEN,IAAKmV,KACvDhF,EAASvO,EAAiBC,OAAOsT,OAGrC,CAACwJ,EAAWxO,IAGd,OACE,kBAAC+N,GAAA,EAAD,CAAYzN,UAAU,OACpB,kBAAC0N,GAAA,EAAD,CAAiBC,UAAU,WAA3B,UACClW,KAAEmW,QAAQjT,GACT,kBAAC,GAAD,MAEE,kBAACkT,GAAA,EAAD,CAAO5Z,KAAK,SAASV,MAAOhE,EAAKue,SAAUP,GACzC,4BAAQha,MAAM,IAAd,SACCoH,EAAWnH,KAAI,SAAAqG,GAAI,OAClB,4BAAQ/E,IAAK+E,EAAK6K,GAAInR,MAAOsG,EAAK6K,IAC/B7K,EAAKkU,YC9BTI,GAAuB,WAAO,IAAD,EAIpCb,qBAAWpC,IAJyB,IAEtCtb,MAAS2K,EAF6B,EAE7BA,aAAc/K,EAFe,EAEfA,WAAYC,EAFG,EAEHA,WACnCiQ,EAHsC,EAGtCA,SAEI6N,EAAehC,uBACnB,SAAC5X,GACC,IAAM+Q,EAAK/Q,EAAE6Z,OAAOja,MACpB,GAAImR,EACF,OAAQ/Q,EAAE6Z,OAAOO,MACf,IAAK,MACHrO,EAAS,CACPzL,KAAMW,EAAY6H,eAClB5M,QAAS,CAAEL,WAAYkV,KAEzB,MAEF,IAAK,MACHhF,EAAS,CACPzL,KAAMW,EAAYiI,eAClBhN,QAAS,CAAEJ,WAAYiV,QAOjC,CAAChF,IAEH,OACE,yBAAKM,UAAU,OACb,kBAACyN,GAAA,EAAD,CAAYzN,UAAU,OACpB,kBAAC0N,GAAA,EAAD,CAAiBC,UAAU,WAA3B,YACClW,KAAEmW,QAAQrT,GACT,kBAAC,GAAD,MAEA,kBAACsT,GAAA,EAAD,CACEta,MAAO/D,EACPue,KAAK,MACL9Z,KAAK,SACL6Z,SAAUP,GAEV,4BAAQha,MAAM,IAAd,SACCgH,EAAa/G,KAAI,SAAAqG,GAAI,OACpB,4BAAQ/E,IAAK+E,EAAK6K,GAAInR,MAAOsG,EAAK6K,IAC/B7K,EAAKkU,WAMhB,kBAACN,GAAA,EAAD,CAAYzN,UAAU,OACpB,kBAAC0N,GAAA,EAAD,CAAiBC,UAAU,WAA3B,UACClW,KAAEmW,QAAQrT,GACT,kBAAC,GAAD,MAEA,kBAACsT,GAAA,EAAD,CACEta,MAAO9D,EACPse,KAAK,MACL9Z,KAAK,SACL6Z,SAAUP,GAEV,yCACChT,EAAa/G,KAAI,SAAAqG,GAAI,OACpB,4BAAQ/E,IAAK+E,EAAK6K,GAAInR,MAAOsG,EAAK6K,IAC/B7K,EAAKkU,a,6DC7CTK,GAAiB,SAAClE,EAAcmE,GAC3C,OAAa,IAATA,EACK,GAEG,IAARA,EACK,WAEH,OAAN,OAAcA,IAaVC,GAAoB,SAACjN,GAAD,OACxBA,EACG0I,QAAO,SAAAlQ,GAAI,OAAI0U,KAAIC,UAAU3U,MAC7BrG,KAAI,SAAAqG,GAAI,OAAIA,EAAKyP,OAAO,kBAEvBmF,GAAgB,SAACxE,GAAD,MAAkB,CACtC,cAAuB,IAARA,EACf,YAAqB,IAARA,IAOTyE,GAAkC,SAAC,GAAmB,IAAjB7U,EAAgB,EAAhBA,KAAMwU,EAAU,EAAVA,IAAU,EAIrDf,qBAAWpC,IAFJxQ,EAF8C,EAEvD9K,MAAS8K,SACTgF,EAHuD,EAGvDA,SAEI6N,EAAehC,uBACnB,SAAC5X,GACC,IAAMqJ,EAAUrJ,EAAE6Z,OAAOja,MACrBI,EAAE6Z,OAAOmB,QACXjP,EAAS,CAAEzL,KAAMW,EAAYmI,YAAalN,QAAS,CAAEmN,aAErD0C,EAAS,CAAEzL,KAAMW,EAAYwI,eAAgBvN,QAAS,CAAEmN,eAG5D,CAAC0C,IAEH,IAAK7F,EACH,OACE,4BACE,8BAIN,IAAMtG,EAAQsG,EAAKyP,OAAO,cACpBsF,EAAarb,IAAUmH,EAAS,GAChCmU,EAAK,kBAActb,GACnBob,EAAUlX,KAAEuB,SAAS0B,EAAUnH,GACrC,OACE,oCACE,wBACEyM,UAAW8O,KAAWL,GAAcJ,GAAM,CAAE,aAAcO,IAC1DlK,GAAImK,GAEHN,KAAIC,UAAU3U,GACb,kBAACkV,GAAA,EAAD,CAAWC,OAAK,EAACC,QAAM,GACrB,kBAACC,GAAA,EAAD,CAAOF,OAAK,GACV,kBAACnB,GAAA,EAAD,CACEC,SAAUP,EACV4B,SAAUZ,KAAIa,aAAavV,GAC3BtG,MAAOA,EACPU,KAAK,WACL0a,QAASA,EACT3O,UAAU,qBAEXzM,IAIL,8BAAOA,IAGVob,EACC,kBAACU,GAAA,EAAD,CAAqB7B,OAAQqB,GA5Ed,SAAC3E,EAAcxP,GACpC,IAAM2T,EAAM3T,EAAS4U,QAAQpF,GAC7B,OAAOkE,GAAelE,EAAMmE,GA2EnBkB,CAAQhc,EAAOmH,IAEhB,OAQJ8U,GAAsB,WAAO,IAAD,EAI5BlC,qBAAWpC,IAJiB,IAE9Btb,MAAS8K,EAFqB,EAErBA,SAAUlJ,EAFW,EAEXA,UACnBkO,EAH8B,EAG9BA,SAH8B,EAKN+P,mBAAkB,IALZ,oBAKzBpO,EALyB,KAKlBqO,EALkB,OAMAD,mBAA0B,IAN1B,oBAMzBE,EANyB,KAMfC,EANe,KA4BhC,OArBA5D,qBAAU,WACR,GAAIxa,EAAW,CACb,IAAM6P,EA5FI,SAACxH,GACf,IAAMiM,EAASC,KAAOlM,EAAKgW,iBAAiBvD,QAEtCwD,EADU/J,KAAOlM,EAAKkW,kBAAkBzD,QACjBpG,KAAKJ,EAAQ,QAC1C,OAAOrO,KAAEuY,MAAMF,GAActc,KAAI,SAAAyc,GAAC,OAAInK,EAAOoK,QAAQ7L,IAAI4L,EAAG,WAwF1CE,CAAQ3e,GACtBke,EAASrO,GACL3G,EAAS+L,QAAU,GACrB/G,EAAS,CACPzL,KAAMW,EAAYkI,aAClBjN,QAAS,CAAE6K,SAAU4T,GAAkBjN,SAI5C,CAAC7P,EAAWkJ,EAAUgF,IACzBsM,qBAAU,WACR,GAAI3K,EAAMoF,OAAS,EAAG,CACpB,IAAM2J,EAAQ3Y,KAAE4Y,MAAF,sBACR5Y,KAAEuY,MAAM3O,EAAM,GAAG4I,OAAO,kBAAM,SADtB,YACgC5I,IAC5C,GAEFuO,EAAYQ,MAEb,CAAC/O,IAEF,kBAACiP,GAAA,EAAD,CAAOC,UAAQ,GACb,+BACE,4BACGxK,KAAO4J,WAAWnc,KAAI,SAACqG,EAAMwU,GAAP,OACrB,wBACEvZ,IAAKuZ,EACLrO,UAAW8O,KAAW,cAAeL,GAAcJ,KAElDxU,QAKT,+BACG8V,EAASnc,KAAI,SAACgd,EAAMP,GAAP,OACZ,wBAAInb,IAAKmb,GACNO,EAAKhd,KAAI,SAACqG,EAAMwU,GAAP,OACR,kBAAC,GAAD,CAASA,IAAKA,EAAKvZ,IAAKuZ,EAAKxU,KAAMA,cASpC4W,GAAyB,WAAO,IAEhCjf,EACP8b,qBAAWpC,IADbtb,MAAS4B,UAEX,OACE,kBAACkf,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,sBACClZ,KAAEmW,QAAQpc,GACT,kBAACic,GAAA,EAAD,KACE,kBAAC,GAAD,OAGF,kBAAC,GAAD,Q,UClLFmD,GAAa,SAAC,GAAqC,IAAnC/W,EAAkC,EAAlCA,KAAkC,EAIlDyT,qBAAWpC,IAFJ9P,EAF2C,EAEpDxL,MAASwL,uBACTsE,EAHoD,EAGpDA,SAEI6N,EAAehC,uBACnB,SAAC5X,GACC,IAAMuK,EAAwBvK,EAAE6Z,OAAOja,MACnCI,EAAE6Z,OAAOmB,QACXjP,EAAS,CACPzL,KAAMW,EAAYwJ,6BAClBvO,QAAS,CAAEqO,2BAGbwB,EAAS,CACPzL,KAAMW,EAAYqJ,0BAClBpO,QAAS,CAAEqO,6BAIjB,CAACwB,IAEH,OACE,kBAACqP,GAAA,EAAD,CAAWC,OAAK,EAACC,QAAM,GACrB,kBAACC,GAAA,EAAD,CAAOF,OAAK,GACV,kBAACnB,GAAA,EAAD,CACEC,SAAUP,EACVtZ,KAAK,WACLV,MAAOsG,EAAK6K,GACZmM,gBAAiBpZ,KAAEuB,SAASoC,EAAwB9J,OAAOuI,EAAK6K,OAEjE7K,EAAKkU,QAKD+C,GAAqB,WAAO,IAE5B9V,EACPsS,qBAAWpC,IADbtb,MAASoL,cAEX,OAA6B,IAAzBA,EAAcyL,OACT,KAGP,kBAACiK,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,oBACA,kBAACI,GAAA,EAAD,KACG/V,EAAcxH,KAAI,SAAAqG,GAAI,OACrB,kBAAC,GAAD,CAAY/E,IAAK+E,EAAK6K,GAAI7K,KAAMA,U,UCzD7BmX,GAA8B,WACzC,OACE,kBAACtD,GAAA,EAAD,CAAiBC,UAAU,UACzB,kBAACsD,GAAA,EAAD,KACE,kBAAC,KAAD,CAAiBnR,KAAMoR,KAAWlR,UAAU,gBCFvCmR,GAAqB,WAAO,IAAD,EAIlC7D,qBAAWpC,IAFJpP,EAF2B,EAEpClM,MAASkM,qBACT4D,EAHoC,EAGpCA,SAHoC,EAKN+P,mBAAS,IALH,oBAK/B2B,EAL+B,KAKrBC,EALqB,OAMR5B,oBAAS,GAND,oBAM/B6B,EAN+B,KAMtBC,EANsB,KAQhChE,EAAehC,uBAAY,SAAC5X,GAChC0d,EAAY1d,EAAE6Z,OAAOja,SACpB,IACGie,EAAejG,uBACnB,SAAC5X,GACCyd,GACE1R,EAAS,CACPzL,KAAMW,EAAYyK,yBAClBxP,QAAS,CAAEiM,qBAAsBsV,GACjC9J,KAAM,CAAEmD,WAAW,KAEvB9W,EAAEoZ,mBAEJ,CAACqE,EAAU1R,IAQb,OANAsM,qBAAU,WACJlQ,IACFyV,GAAW,GACX9Z,KAAEC,MAAM6Z,GAAY,MAErB,CAACzV,IAEF,kBAAC2V,GAAA,EAAD,CAAMC,SAAUF,GACd,kBAAC/D,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAiBC,UAAU,WAA3B,mCAGC2D,EACC,kBAAC,GAAD,MAEA,kBAACzD,GAAA,EAAD,CACE8D,aAAc7V,EACdgS,SAAUP,EACVtZ,KAAK,mBAGT,kBAACyZ,GAAA,EAAD,CAAiBC,UAAU,UACzB,kBAACiE,GAAA,EAAD,gB,qBCJGC,GAAa,SAAC,GAAqC,IACxDC,EADuD,EAAlCxW,OACD,QAAKyW,EAC/B,OACE,kBAAC,KAAD,CACE/R,UAAU,kBACV8R,SAAUA,EACVhS,KAAMkS,QAICC,GAAuB,WAClC,IAAMvS,EAAWuO,cACXiE,EAAWliB,IAFuB,EAMpCsd,qBAAWpC,IANyB,IAItCtb,MAAS0L,EAJ6B,EAI7BA,OAAQZ,EAJqB,EAIrBA,SAAUlJ,EAJW,EAIXA,UACjB0c,EAL4B,EAKtCxO,SALsC,EAOlB+P,mBAAS,IAPS,oBAOjCpgB,EAPiC,KAO5BJ,EAP4B,KAQlCkjB,EAAY5G,uBAChB,SAAC5X,GACC1E,EAAO0E,EAAE6Z,OAAOja,SAElB,CAACtE,IAEGuiB,EAAejG,uBACnB,SAAC5X,GACKtE,GACFqQ,EAAS1Q,EAAeC,OAAOI,IAEjCsE,EAAEoZ,mBAEJ,CAAC1d,EAAKqQ,IAEF0S,EAAS7G,uBAAY,WAEvB2C,EADE5S,EACQ,CAAErH,KAAMW,EAAY0J,kBAEpB,CAAErK,KAAMW,EAAYyJ,oBAE/B,CAAC6P,EAAW5S,IACT+W,EAAe5G,mBAAQ,kBAvDP,SAACpc,EAAamC,GACpC,OAAInC,GAAOmC,EAAU8gB,mBACb,GAAN,OAAUjjB,EAAV,oBAAyBmC,EAAU8gB,mBAAmB7F,KAAtD,sBAAwEjb,EAAUib,MAE3E,GAmD0B8F,CAAgBL,EAAU1gB,KAAY,CACvEA,EACA0gB,IAEIM,EAAShhB,EAAUuc,KACnB0E,EAAQhH,mBAAQ,kBApDP,SAAC/Q,GAChB,OAAIA,EAAS+L,OAAS,EACd,IAAN,OAAWhP,KAAEib,KAAKhY,GAAlB,cAAiCjD,KAAEkb,KAAKjY,GAAxC,KAEO,GAgDmBkY,CAASlY,KAAW,CAACA,IACjD,OACE,kBAACgW,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAW8O,KAAW+D,KAAOC,QAASC,QAASX,GACzD,kBAAC,GAAD,CAAY9W,OAAQA,IACnBkX,GACC,kBAACQ,GAAA,EAAD,CAAOC,MAAM,UAAUC,MAAI,EAAClT,UAAU,WACpC,8BAAOwS,IAGVC,GACC,kBAACO,GAAA,EAAD,CAAOhT,UAAU,WACf,8BAAOyS,IAGVJ,EACC,uBACE7E,OAAO,SACPuF,QAAS/F,GACThN,UAAU,cACVyE,KAAM4N,EACNc,IAAI,uBAEJ,kBAAC,KAAD,CAAiBnT,UAAU,OAAOF,KAAMsT,OAP1C,aAUE,MAEN,kBAACC,GAAA,EAAD,CAAU/X,OAAQA,GAChB,kBAACmW,GAAA,EAAD,CAAMC,SAAUF,GACd,kBAAC/D,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAiBC,UAAU,WAA3B,OACA,kBAACE,GAAA,EAAD,CACE8D,aAAcO,EACdpE,SAAUqE,EACVmB,YAAY,yBAEd,kBAAC5F,GAAA,EAAD,CAAiBC,UAAU,UACzB,kBAACiE,GAAA,EAAD,eAIN,yBAAK5R,UAAU,OACb,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEF,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,S,gDClIKuT,GAA4C,SAAC,GAAc,IAAZzG,EAAW,EAAXA,KACpDpN,EAAWuO,cACCC,EAAcZ,qBAAWpC,IAAnCxL,SACF9N,EAAa2Z,uBAAY,WAC7B2C,EAAU,CAAEja,KAAMW,EAAY2J,cAC9BmB,EAAShO,EAAcE,gBACtB,CAACsc,EAAWxO,IACf,OACE,kBAACkS,GAAA,EAAD,CAAQmB,QAASnhB,EAAYkb,KAAMA,EAAM9M,UAAU,QACjD,kBAAC,KAAD,CAAiBF,KAAM0T,S,+BCAhBC,GAAuB,WAAO,IAAD,EAIpCnG,qBAAWpC,IAJyB,IAEtCtb,MAASsK,EAF6B,EAE7BA,WAAYC,EAFiB,EAEjBA,WAAsBuZ,EAFL,EAELtZ,SACjCsF,EAHsC,EAGtCA,SAHsC,EAMR+P,mBAAiB,IANT,oBAMjCrV,EANiC,KAMvBuZ,EANuB,OAORlE,mBAAiB,IAPT,oBAOjCpV,EAPiC,KAOvBuZ,EAPuB,OAQVnE,oBAAkB,GARR,oBAQjClf,EARiC,KAQxBsjB,EARwB,KAUlCrC,EAAejG,uBACnB,SAAC5X,GACKyG,GAAYC,IACdwZ,GAAW,GACXnU,EAAS,CACPzL,KAAMW,EAAY4J,QAClB3O,QAAS,CACPuK,WACAC,eAIN1G,EAAEoZ,mBAEJ,CAAC1S,EAAUD,EAAUsF,EAAUmU,IAE3BC,EAAiBvI,uBACrB,SAAC5X,GACCggB,EAAYhgB,EAAE6Z,OAAOja,SAEvB,CAACogB,IAEGI,EAAiBxI,uBACrB,SAAC5X,GACCigB,EAAYjgB,EAAE6Z,OAAOja,SAEvB,CAACqgB,IAEGI,EAAgBzI,uBAAY,WAChC7L,EAAS,CAAEzL,KAAMW,EAAY+J,aAC5B,CAACe,IAMJ,OALAsM,qBAAU,YACJ7R,GAAcD,IAChB2Z,GAAW,KAEZ,CAAC1Z,EAAYD,EAAY2Z,IAE1B,oCACG3Z,EACC,kBAACuX,GAAA,EAAD,CAAMxC,QAAM,EAACyC,SAAU3E,GAAgB/M,UAAU,QAC/C,kBAACyN,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAiBC,UAAU,WACzB,kBAACsD,GAAA,EAAD,KACE,kBAAC,KAAD,CAAiBnR,KAAMmU,SAG3B,kBAACvG,GAAA,EAAD,CACEC,UAAU,UACV3N,UAAU,yBAEV,kBAACiR,GAAA,EAAD,KAAiByC,IAEnB,kBAAChG,GAAA,EAAD,CAAiBC,UAAU,UACzB,kBAACiE,GAAA,EAAD,CAAQ1R,MAAM,WAAW6S,QAASiB,EAAef,MAAM,UACrD,kBAAC,KAAD,CAAiBnT,KAAMoU,WAM/B,kBAACzC,GAAA,EAAD,CAAMxC,QAAM,EAACyC,SAAUF,EAAcxR,UAAU,QAC7C,kBAACyN,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAiBC,UAAU,WACzB,kBAACsD,GAAA,EAAD,KACE,kBAAC,KAAD,CAAiBnR,KAAMmU,SAG3B,kBAACpG,GAAA,EAAD,CACEsB,SAAU5e,EACV4jB,QAASL,EACThG,SAAUgG,EACV/F,KAAK,WACLuF,YAAY,WACZc,QAASja,KAGb,kBAACsT,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAiBC,UAAU,WACzB,kBAACsD,GAAA,EAAD,KACE,kBAAC,KAAD,CAAiBnR,KAAMuU,SAG3B,kBAACxG,GAAA,EAAD,CACEsB,SAAU5e,EACV4jB,QAASJ,EACTjG,SAAUiG,EACVhG,KAAK,WACLuF,YAAY,WACZrf,KAAK,WACLmgB,QAASja,KAGb,kBAACyX,GAAA,EAAD,CAAQqB,MAAM,QACX1iB,EACC,kBAAC+jB,GAAA,EAAD,CAASxH,KAAK,KAAK7Y,KAAK,SAExB,kBAAC,KAAD,CAAiB6L,KAAMyU,WC1F/BC,GAAY,CAAC,UAAW,UAAW,OAAQ,UAC3CC,GAAiB,SAACpT,GAAD,OAAoB5J,KAAEid,QAAQrT,EAAO,gBAC/CsT,GAAsC,SAAAC,GACjD,IAAMxU,EAAMwU,EAAMxU,KAAN,oCAA0C9G,KAAKub,UAC3D,OAAO,kBAAC,KAAD,iBAAYD,EAAZ,CAAmBxU,IAAKA,EAAK0U,QAAM,EAAC9U,UAAU,WAY1C+U,GAAe,SAC1B7Z,EACAJ,EACA4J,GAEA,OAAIxJ,EAAiBiM,IAAIrM,IAfInC,EAiBzBlB,KAAE8L,IAAIrI,EAAiBqI,IAAIzI,GAA3B,4BAAuD4J,GAAM,KAhBjEjN,KAAEwF,MAAMtE,GACLhG,QAAQ,aAAc,IACtBA,QAAQ,OAAQ,KAChB+V,MAAM,KACNvK,UACA3K,IAAIgF,QACJwc,MACAzhB,SAYM,EApBmB,IAACoF,GAuBlBsc,GAAkB,SAC7B/Z,EACAN,EACA8J,GAH6B,OAK7BjN,KAAEwF,MAAMrC,GACLpH,KAAI,SAAAsH,GAAI,OAAIia,GAAa7Z,EAAkBJ,EAAM4J,MACjDsQ,MACAzhB,SAEC2hB,GAAwB,SAC5Bha,EACAN,EACA8J,GAH4B,OAK5BuQ,GACE/Z,EACAN,EAAMmP,QAAO,SAAAlQ,GAAI,OAAIA,EAAKmM,aAC1BtB,IAESyQ,GAAsB,SACjCC,EACAta,GAEA,OAAIsa,EAAiBjO,IAAIrM,GAChBrD,KAAE8L,IAAI6R,EAAiB7R,IAAIzI,GAAO,gBAEzC,GAGSua,GAAmB,SAAC1hB,EAAW2hB,EAAWtP,GAAvB,OAC9BA,GAAasP,IAAM3hB,GACR4hB,GAAqB,SAAC5hB,EAAW2hB,GAAZ,OAA0BA,EAAI3hB,GAsB1D6hB,GAAoC,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,MAAO/Q,EAAgC,EAAhCA,GAAItK,EAA4B,EAA5BA,SAAUsb,EAAkB,EAAlBA,YAC5DC,EAAE,iBAAajR,GAInB,OAHIgR,IACFC,EAAE,UAAMA,EAAN,YAAYD,IAGd,oCACE,kBAAC,GAAD,CAActV,IAAKqV,IACnB,kBAAC,KAAD,CAAME,GAAIA,GAAKvb,KAKfwb,GAAkB,SAAC,GAWlB,IAVLxb,EAUI,EAVJA,SACAzB,EASI,EATJA,IACAkd,EAQI,EARJA,MACAC,EAOI,EAPJA,OAAQpR,EAOJ,EAPIA,GAOJ,EACmB+G,mBAAQ,WAC7B,IAAMvF,EAAO2P,EAAQ,GAAKld,EAAMkd,GAASA,EAAQ,EACjD,OAAI3P,GAAQ,GACH,CAAC6P,KAAY,IACX7P,GAAQ,GACV,CAAC6P,KAAY,iBACX7P,GAAQ,GACV,CAAC8P,KAAiB,iBAElB,CAACC,KAAS,kBAElB,CAACJ,EAAOld,IAZP,oBACGmH,EADH,KACSoW,EADT,KAcJ,OAAKvd,EAWH,oCACE,wBAAIqH,UAAWkW,GACb,kBAAC,GAAD,CAAUxR,GAAIA,EAAI+Q,MAAOK,EAAQ1b,SAAUA,EAAUsb,YAAaG,IAClE,kBAAC,KAAD,CAAiB7V,UAAU,OAAOF,KAAMA,KAE1C,wBAAIE,UAAW8O,KAAWoH,EAAQ,eAAgBvd,IAdlD,oCACE,4BACE,kBAAC,GAAD,CAAcyH,IAAK0V,IADrB,IACiC1b,GAEjC,+BAeK+b,GAAQ,SAAC,GAAwC,IAAtCxiB,EAAqC,EAArCA,EAAG2hB,EAAkC,EAAlCA,EAAkC,EACtC7J,mBAAQ,kBAjFd,SAAC9X,EAAW2hB,GAC3B,GAAI7d,KAAE2e,SAASziB,IAAM8D,KAAE2e,SAASd,IAAM3hB,EAAI,EAAG,CAC3C,IAAMuS,EAAO5M,KAAK+c,IAAI1iB,EAAI2hB,GAAK3hB,EAC/B,GAAIuS,GAAQ,IACV,MAAO,CAAC,OAAQ,GAElB,GAAIA,GAAQ,GACV,MAAO,CAAC,SAAU,GAEpB,GAAIA,EAAO,GACT,MAAO,CAAC,SAAU,GAGtB,MAAO,CAAC,KAAM,GAoEqBoQ,CAAS3iB,EAAG2hB,KAAI,CAAC3hB,EAAG2hB,IADI,oBACpDiB,EADoD,KAC7CC,EAD6C,KAE3D,OAAID,EAEA,oCACG9e,KAAEuY,MAAMwG,GAAKhjB,KAAI,SAAAyc,GAAC,OACjB,kBAAC,KAAD,CAAiBnb,IAAKmb,EAAGjQ,UAAW6S,KAAO0D,GAAQzW,KAAM2W,WAKxD,MAaEC,GAA4C,SAAC,GAAe,IAAb9b,EAAY,EAAZA,MAAY,EAGlE0S,qBAAWpC,IADbtb,MAASqL,EAF2D,EAE3DA,qBAAsBzL,EAFqC,EAErCA,WAAY0L,EAFyB,EAEzBA,iBAEvCyb,EAAMne,OAAOhJ,GACb6R,EAAQoK,mBACZ,kBACEhU,KAAEwF,MAAMhC,GACL8O,OAAO,CAAE/D,WAAW,IACpB4Q,UACApjB,KAAI,SAACqG,EAAMwU,GAAP,MAAgB,CACnBvX,OAAQ+C,EAAK6K,GACbmR,MAAOZ,GACL/Z,EACAzD,KAAEsS,OAAOnP,EAAO,CAAE9D,OAAQ+C,EAAK6K,KAC/BiS,GAEFtW,MAAOmU,GAAUnG,GACjBwI,MAAOhd,EAAKkU,SAEbxa,UACL,CAAC0H,EAAsBC,EAAkByb,EAAK/b,IAG1Ckc,EAASrL,mBAAQ,kBAAMwJ,GAAgB/Z,EAAkBN,EAAO+b,KAAM,CAC1Ezb,EACAyb,EACA/b,IAGF,OACE,kBAACmc,GAAA,EAAD,CAAUC,OAAK,GACZ3V,EAAM7N,KAAI,SAAAqG,GAAI,OACb,kBAACkd,GAAA,EAAD,CACEjiB,IAAK+E,EAAKgd,MACVI,KAAG,EACH1d,IAAKud,EACLvjB,MAAOsG,EAAKgc,MACZ5C,MAAOpZ,EAAKwG,OAEXxG,EAAKgd,YAMVK,GAAU,SAAC,GAcV,IAbLrd,EAaI,EAbJA,KACAsd,EAYI,EAZJA,KACAC,EAWI,EAXJA,OACAvB,EAUI,EAVJA,MACAwB,EASI,EATJA,IACAzc,EAQI,EARJA,MAQI,EAC4B6U,mBAAiB,GAD7C,oBACG6H,EADH,KACgBC,EADhB,KAEEhK,EAAehC,uBACnB,SAAC5X,GACC4jB,EAAS/e,OAAO7E,EAAE6Z,OAAOja,QAAU,KAErC,CAACgkB,IAEGC,EAAU/f,KAAE8L,IAAI4T,EAAMtd,EAAK6K,IAC3B/Q,EAAI8D,KAAE8L,IAAIiU,EAAS,KACnBlC,EAAI7d,KAAE8L,IAAIiU,EAAS,KACnBC,EAAcH,GAAezB,EAC7B6B,EAAWpmB,OAAOmmB,GACxB,OACE,wBAAI3iB,IAAK+E,EAAK6K,IACXmR,EAAQ,EACP,oCACE,kBAAC,GAAD,CACEzb,SAAUP,EAAKO,SACfzB,IAAKhF,EACLkiB,MAAO4B,EACP3B,OAAQjc,EAAK4b,MACb/Q,GAAI7K,EAAK6K,KAEX,wBAAI1E,UAAU,cAAc6V,GAC5B,wBAAI7V,UAAW6S,KAAO8E,iBACpB,kBAAC9J,GAAA,EAAD,CACE+J,OAAO,KACP3jB,KAAK,SACL+L,UAAU,aACVzM,MAAOmkB,EACPG,KAAMR,EACNvJ,SAAUP,MAKd,oCACE,4BACE,kBAAC,GAAD,CAAUkI,MAAO5b,EAAK4b,MAAO/Q,GAAI7K,EAAK6K,GAAItK,SAAUP,EAAKO,YAE3D,wBAAI4F,UAAU,cAAcnG,EAAKie,QAAU,IAC3C,wBAAI9X,UAAU,cAAcrM,GAC5B,wBAAIqM,UAAU,cAAcsV,GAC5B,4BAAK7d,KAAE2e,SAASziB,IAAM,kBAAC,GAAD,CAAciH,MAAOA,MAIhDwc,EACC,4BACE,kBAAC,GAAD,CAAOzjB,EAAGA,EAAG2hB,EAAGA,KAEhB,OA0BGyC,GAAY,WAAO,IAAD,EAYzBzK,qBAAWpC,IAVbtb,MACEgL,EAHyB,EAGzBA,MACAM,EAJyB,EAIzBA,iBACA1L,EALyB,EAKzBA,WACAC,EANyB,EAMzBA,WACAiL,EAPyB,EAOzBA,SACAF,EARyB,EAQzBA,cACAC,EATyB,EASzBA,cACWud,EAVc,EAUzBtnB,QAAWsnB,QAVc,EAaPvI,mBAAiB,GAbV,oBAatB4H,EAbsB,KAajBY,EAbiB,KAcvBC,EAAYxd,EAAS+L,OAAS,EAC9B8G,EAAehC,uBACnB,SAAC5X,GACCskB,EAAOzf,OAAO7E,EAAE6Z,OAAOja,QAAU,KAEnC,CAAC0kB,IAEGpC,EAAQwB,EAAMa,EACdC,EAAgB1M,mBACpB,kBA7C4B,SAC9BpK,EACAnG,EACA1L,EACAC,GAEA,IAAMknB,EAAMne,OAAOhJ,GACb4oB,EAAM5f,OAAO/I,GAanB,OAZoBgI,KAAE4gB,UAAU5D,GAAepT,IAAQ,SAAAzG,GAAK,OAC1DnD,KAAEwF,MAAMrC,GACLpH,KAAI,SAAAsH,GAAI,MAAK,CACZnH,EAAGohB,GAAa7Z,EAAkBJ,EAAM6b,GACxCrB,EAAGP,GAAa7Z,EAAkBJ,EAAMsd,OAEzCE,QAAO,SAACC,EAAQ5f,GAAT,MAAkB,CAAEhF,EAAG4kB,EAAO5kB,EAAIgF,EAAIhF,EAAG2hB,EAAGiD,EAAOjD,EAAI3c,EAAI2c,KAAM,CACvE3hB,EAAG,EACH2hB,EAAG,IAEJ/hB,WA2BGilB,CAAiB5d,EAAOM,EAAkB1L,EAAYC,KAC5D,CAACD,EAAYC,EAAYyL,EAAkBN,IAEvC6d,EAAiBhhB,KAAE8L,IAAI4U,EAAe,SAAU,GAChDvJ,EAAaiH,EAAQ,EACrBuB,EAAS3L,mBACb,kBACGmD,GACD7I,OAASG,KACPH,KAAOtO,KAAEkb,KAAKjY,IACX4R,QACAoM,MAAM,SACP,IACN,CAAChe,EAAUkU,IAEP+J,EAAclN,mBAAQ,kBAAMgJ,GAAe7Z,KAAQ,CAACA,IACpDge,EAAgBnN,mBACpB,kBACEhU,KAAEwF,MAAM+a,GACL3a,QAAO,SAAAwb,GAAM,OAAIphB,KAAEmW,QAAQ+K,EAAYE,EAAOnU,QAC9ClR,KAAI,SAAAqlB,GAAM,sBACNA,EADM,CAETf,OAAQ5C,GACNha,EACAyd,EAAYE,EAAOnU,KAAO,GAC1BlM,OAAOhJ,SAGV4c,OAAO,UACPwK,UACArjB,UACL,CAAC/D,EAAY0L,EAAkB8c,EAASW,IAE1C,OAAKne,EAAckK,KAAOjK,EAAciK,IAAMhK,EAAS+L,QAAU,EACxD,KAGP,oCACE,kBAACqS,GAAA,EAAD,CAAQ7F,MAAM,QAAQ8F,OAAK,GACzB,kBAACtH,GAAA,EAAD,CAAMxC,QAAQ,EAAMjP,UAAU,UAAU0R,SAAU3E,IAChD,kBAACU,GAAA,EAAD,KACE,kBAACI,GAAA,EAAD,CACE5Z,KAAK,SACL4jB,KAAK,MACLvE,YAAY,cACZtT,UAAU,aACV8N,SAAUP,IAEZ,kBAACG,GAAA,EAAD,CAAiBC,UAAU,UACzB,kBAACsD,GAAA,EAAD,KACE,kBAAC,KAAD,CAAiBjR,UAAU,OAAOF,KAAMkZ,OACvCd,EAFH,UAGE,kBAAC,KAAD,CAAiBlY,UAAU,OAAOF,KAAMmZ,QAEzCpD,EAAQ,EACP,oCACE,kBAAC5E,GAAA,EAAD,CAAgBjR,UAAU,YACxB,gCAAS6V,IAEX,kBAAC5E,GAAA,EAAD,wBAEA,QAIV,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEF,kBAACX,GAAA,EAAD,CAAOC,UAAQ,GACb,+BACE,4BACE,qCACE3B,GAAc,wBAAI5O,UAAU,gBAAd,aAChB,4BAAKxF,EAAcuT,MAClBa,EACC,oCACE,qCACA,uCAGA,oCACE,4BAAKnU,EAAcsT,MACnB,yCAGLqJ,EAAS,qCAAiB,OAG/B,gCACIwB,GAAiB,IAAIplB,KAAI,SAAAqG,GAAI,OAC7B,kBAAC,GAAD,CACE/E,IAAK+E,EAAK6K,GACV0S,OAAQA,EACRvd,KAAMA,EACNsd,KAAMgB,EACNtC,MAAOA,EACPwB,IAAKA,EACLzc,MAAO+d,EAAY9e,EAAK6K,KAAO,QAGnC,wBAAI5P,IAAI,QACN,wBAAIkL,UAAU,eACZ,kBAAC,KAAD,CAAiBF,KAAMoZ,KAASlZ,UAAU,oBAD5C,iBAIE4O,GAAc,6BAChB,wBAAI5O,UAAU,0BAA0ByY,GACxC,6BACA,6BACCrB,EAAS,6BAAS,U,mICxblB+B,GAAsD,SAAC,GAa7D,IAZLtC,EAYI,EAZJA,MACAtjB,EAWI,EAXJA,MACAme,EAUI,EAVJA,SACA0H,EASI,EATJA,WACAC,EAQI,EARJA,cACAC,EAOI,EAPJA,MACAlF,EAMI,EANJA,QACAjF,EAKI,EALJA,SACA5e,EAII,EAJJA,QACAmU,EAGI,EAHJA,GACA6U,EAEI,EAFJA,WAEI,IADJC,uBACI,MADc,GACd,IAC0B/J,oBAAS,GADnC,oBACGd,EADH,KACY8K,EADZ,OAEkBhK,mBAAS,IAF3B,oBAEG9W,EAFH,KAEQ+gB,EAFR,OAG0BjK,oBAAS,GAHnC,oBAGGkK,EAHH,KAGYC,EAHZ,KAIE9L,EAAWvC,uBACf,SAACsO,GACCJ,EAAWI,EAAIC,cAAcnL,WAE/B,CAAC8K,IAEGM,EAAYxO,uBAChB,SAAC5X,GAA4C,IACnCJ,EAAUI,EAAE6Z,OAAZja,MACRmmB,EAAOnmB,GACP8lB,GAAiBA,EAAc7gB,OAAOjF,MAExC,CAAC8lB,IAEG7H,EAAejG,uBACnB,SAAC5X,GACC,IAAM6iB,EAAMhe,OAAOG,GACfgW,GAAmB,KAARhW,GAAc6d,GAAO,GAAK9E,IACvCA,EAAS8E,GACTiD,GAAW,GACXG,GAAW,IAEbjmB,EAAEoZ,mBAEJ,CAAC4B,EAAShW,EAAK+Y,EAAU+H,IAwB3B,OAtBAzN,qBAAU,WACJmD,GACFsK,GAAW,KAEZ,CAACA,EAAYtK,IAChBnD,qBAAU,WACR4N,GAAW,KACV,CAACrmB,IACJyY,qBAAU,WACRoN,GAAcA,EAAWzK,KACxB,CAACA,EAASyK,IACbpN,qBAAU,WACJuN,IACFE,GAAW,GACXG,GAAW,MAEZ,CAACL,IACJvN,qBAAU,WACJzb,GACFkpB,GAAW,KAEZ,CAAClpB,IAEF,kBAACkhB,GAAA,EAAD,CAAMxC,QAAM,EAACyC,SAAUF,GACrB,kBAAC/D,GAAA,EAAD,CAAYzN,UAAW6S,KAAOmH,aAC5B,kBAACtM,GAAA,EAAD,CAAiBC,UAAU,WAAWkJ,GACrCtmB,EACC,kBAAC,GAAD,MAEA,oCACGoe,EACC,oCACE,kBAACjB,GAAA,EAAD,CAAiBC,UAAU,WACzB,kBAACsD,GAAA,EAAD,KAAiB1d,IAEnB,kBAACma,GAAA,EAAD,CAAiBC,UAAU,WACzB,kBAACsD,GAAA,EAAD,KACE,kBAAC,KAAD,CACEjR,UAAU,YACVF,KAAMma,SAIZ,kBAACpM,GAAA,EAAD,CACEsG,QAAS4F,EACTjM,SAAUiM,EACVpI,aAAcrgB,OAAOiC,GACrBU,KAAK,SACL4jB,KAAK,MACLqC,IAAI,IACJxV,GAAIA,IAEN,kBAACgJ,GAAA,EAAD,CAAiBC,UAAU,UACzB,kBAACiE,GAAA,EAAD,CAAQqB,MAAM,QACZ,kBAAC,KAAD,CAAiBnT,KAAMqa,UAK7B,oCACGR,EACC,kBAAC,GAAD,MAEA,kBAAC9L,GAAA,EAAD,CACEyL,MAAOA,EACPlF,QAASA,EACTgG,UAAQ,EACR7mB,MAAOA,EACPyM,UAAU,gBAKlB,kBAAC0N,GAAA,EAAD,CACEC,UAAU,SACVzN,MAAOiP,EAAWqK,EAAkB,IAEpC,kBAAC,KAAD,CAAQrK,SAAUA,EAAUR,QAASA,EAASb,SAAUA,GACtD,kBAAC,KAAD,CAAiB9N,UAAU,YAAYF,KAAMua,aCzJ7D,SAASC,KAA2Q,OAA9PA,GAAW5N,OAAO6N,QAAU,SAAU/M,GAAU,IAAK,IAAIyC,EAAI,EAAGA,EAAIuK,UAAU/T,OAAQwJ,IAAK,CAAE,IAAIwK,EAASD,UAAUvK,GAAI,IAAK,IAAInb,KAAO2lB,EAAc/N,OAAOgO,UAAUC,eAAeC,KAAKH,EAAQ3lB,KAAQ0Y,EAAO1Y,GAAO2lB,EAAO3lB,IAAY,OAAO0Y,IAA2BqN,MAAMrkB,KAAMgkB,WAEhT,SAASM,GAAyBL,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAAkE3lB,EAAKmb,EAAnEzC,EAEzF,SAAuCiN,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAA2D3lB,EAAKmb,EAA5DzC,EAAS,GAAQwN,EAAatO,OAAOuO,KAAKR,GAAqB,IAAKxK,EAAI,EAAGA,EAAI+K,EAAWvU,OAAQwJ,IAAOnb,EAAMkmB,EAAW/K,GAAQ8K,EAASzL,QAAQxa,IAAQ,IAAa0Y,EAAO1Y,GAAO2lB,EAAO3lB,IAAQ,OAAO0Y,EAFxM0N,CAA8BT,EAAQM,GAAuB,GAAIrO,OAAOyO,sBAAuB,CAAE,IAAIC,EAAmB1O,OAAOyO,sBAAsBV,GAAS,IAAKxK,EAAI,EAAGA,EAAImL,EAAiB3U,OAAQwJ,IAAOnb,EAAMsmB,EAAiBnL,GAAQ8K,EAASzL,QAAQxa,IAAQ,GAAkB4X,OAAOgO,UAAUW,qBAAqBT,KAAKH,EAAQ3lB,KAAgB0Y,EAAO1Y,GAAO2lB,EAAO3lB,IAAU,OAAO0Y,EAMne,ICJY8N,GDIR,GAEJ,IAAMC,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACzDC,KAAM,eACNxb,UAAW,OACXyb,EAAG,+yBACD,IAAMF,cAAc,OAAQ,CAC9BC,KAAM,eACNxb,UAAW,SACXyb,EAAG,0cAGD,GAAY,SAAmBC,GACjC,IAAIC,EAASD,EAAKC,OACdzb,EAAQwb,EAAKxb,MACb0U,EAAQkG,GAAyBY,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMH,cAAc,MAAOjB,GAAS,CACzC5V,GAAI,QACJkX,EAAG,MACHC,EAAG,MACHC,QAAS,cACTC,SAAU,WACVC,IAAKL,GACJ/G,GAAQ1U,EAAQ,IAAMqb,cAAc,QAAS,KAAMrb,GAAS,KAAM,KAGnE+b,GAAa,IAAMC,YAAW,SAAUtH,EAAOoH,GACjD,OAAO,IAAMT,cAAc,GAAWjB,GAAS,CAC7CqB,OAAQK,GACPpH,O,IAEU,I,6BCpCH0G,K,cAAAA,E,eAAAA,Q,KASL,IAAMa,GAAgC,SAAC,GAAsB,IAAD,EAAnBvsB,EAAmB,EAAnBA,MAAOwsB,EAAY,EAAZA,GAAGC,EAAS,EAATA,GACxD,OACE,kBAAC,GAAD,CACErc,UAAW8O,KAAW,QAAS,kBAAV,oBAClB+D,KAAOyJ,MAAQ1sB,IAAU0rB,GAAYiB,OADnB,eAElB1J,KAAO2J,MAAQ5sB,IAAU0rB,GAAYmB,OAFnB,eAGlB5J,KAAOuJ,GAAKA,GAHM,eAIlBvJ,KAAOwJ,GAAKA,GAJM,O,qBCLdK,GAA2C,SAAC,GAAc,IAAZ7iB,EAAW,EAAXA,KAAW,EAIhEyT,qBAAWpC,IAJqD,IAElEtb,MAASiL,EAFyD,EAEzDA,QAASgB,EAFgD,EAEhDA,cAAeD,EAFiC,EAEjCA,eACjC8D,EAHkE,EAGlEA,SAEIid,EAAcpR,uBAAY,WAC1B/S,OAAOqC,KAAahB,EAAK6K,IAC3BhF,EAAS,CACPzL,KAAMW,EAAY2I,YAClB1N,QAAS,CAAEgL,QAASvJ,OAAOuI,EAAK6K,OAGhC9I,IAAmB1G,GAAWQ,QAChCF,GAAM2D,WAAWhE,GAAUE,OAAO,GAE9BwG,IAAkB1G,GAAUE,MAC9BG,GAAMonB,SAENpnB,GAAM2D,WAAWhE,GAAUE,OAAO,KAGrC,CAACqK,EAAU7F,EAAK6K,GAAI7I,EAAeD,EAAgBf,IAChDgiB,EAActR,uBAAY,WAC9B/V,GAAMsnB,UACL,IACH,OAAItkB,OAAOqC,KAAahB,EAAK6K,GAEzB7I,IAAkB1G,GAAUE,OAC5BuG,IAAmB1G,GAAW0B,QAG5B,kBAACgb,GAAA,EAAD,CACE5R,UAAW8O,KAAW,OAAQ+D,KAAOkK,KACrC9J,MAAM,SACNF,QAAS8J,GAET,kBAAC,KAAD,CAAiB/c,KAAMkd,OACvB,kBAAC,GAAD,OAKF,kBAACpL,GAAA,EAAD,CACEmB,QAAS4J,EACT1J,MAAM,UACNjT,UAAW8O,KAAW,OAAQ+D,KAAOkK,MAErC,kBAAC,KAAD,CAAiBjd,KAAMmd,OACvB,kBAAC,GAAD,OAIe,KAAZpiB,EAEPgB,IAAkB1G,GAAUE,OAC5BuG,IAAmB1G,GAAWQ,QAEvB,KAGL,kBAACkc,GAAA,EAAD,CAAQmB,QAAS4J,EAAa1J,MAAM,UAClCjT,UAAW8O,KAAW,OAAQ+D,KAAOkK,MAErC,kBAAC,KAAD,CAAiBjd,KAAMmd,OACvB,kBAAC,GAAD,OAKC,MCrEEC,GAA6C,SAAC,GAOpD,IANLrG,EAMI,EANJA,MACAtjB,EAKI,EALJA,MACAhD,EAII,EAJJA,QACAuc,EAGI,EAHJA,KACAsH,EAEI,EAFJA,QACAkF,EACI,EADJA,MAEA,OACE,kBAAC7L,GAAA,EAAD,CAAYX,KAAMA,EAAM9M,UAAU,SAChC,kBAAC0N,GAAA,EAAD,CAAiBC,UAAU,WAAWkJ,GACrCtmB,EACC,kBAAC,GAAD,MAEA,kBAACsd,GAAA,EAAD,CACEuG,QAASA,EACTkF,MAAOA,EACPc,UAAQ,EACR7mB,MAAOA,EACPyM,UAAU,iB,oFCyCPmd,GAAyB,SAACviB,GAAD,OACpCnD,KAAEwF,MAAMrC,GACL8Z,QAAQ,cACRlhB,KAAI,SAAC6N,EAAOvM,GAAR,MAAiB,CACpBsoB,WAAY5kB,OAAO1D,GACnBuoB,sBAAuBhc,EAAM,GAAGgc,sBAChC/K,mBAAoBjR,EAAM,GAAGiR,mBAC7B1X,MAAOyG,EACP2E,UAAW3E,EAAMic,OAAM,SAAAxiB,GAAI,OAAIA,EAAKkL,iBAErCzS,SAECgqB,GAAc,SAACpO,GAAD,OAClBA,EAFc,gBAEO,IACjBqO,GAAgB,SAAC,GAMhB,IALLH,EAKI,EALJA,sBACA/K,EAII,EAJJA,mBAKMjjB,EAAMW,IACJyc,EAAS6F,EAAT7F,KACFgR,EAASJ,EAAqB,WAC5BA,EAAsBrB,IADM,YACCqB,EAAsBK,cACvD3L,EACEtN,EAAO4Y,EAAqB,UAC3BhuB,EAD2B,oBACZod,EADY,eACD4Q,EAAsBrB,KACnD,IAEJ,OAAIyB,EAEA,uBACEhZ,KAAMA,EACNsO,QAAS/F,GACTQ,OAAO,SACP2F,IAAI,sBACJjT,MAAOud,GAEP,kBAAC,KAAD,CAAiB3d,KAAMsT,OAPzB,IAOgDqK,GAI3C,2DAILE,GAAW,SAAC,GAA+B,IAA7B9jB,EAA4B,EAA5BA,KACZxK,EAAMW,IACN4tB,EAAQ,WAAO/jB,EAAKmiB,IAAZ,YAAmBniB,EAAK6jB,SAChCjZ,EAAI,UAAMpV,EAAN,oBAAqBwK,EAAKyY,mBAAmB7F,KAA7C,iBAA0D5S,EAAKmiB,KACzE,OACE,uBAAGvX,KAAMA,EAAM+I,OAAO,SAAS2F,IAAI,sBAAsBjT,MAAO0d,GAC9D,kBAAC,KAAD,CAAiB9d,KAAMsT,OADzB,IACgDwK,IASvCC,GAA8B,SAAC,GAAc,IAAZlqB,EAAW,EAAXA,EAAG2hB,EAAQ,EAARA,EAC/C,OACE,kBAAC7H,GAAA,EAAD,CAAYzN,UAAW6S,KAAOiL,eAC5B,kBAACpQ,GAAA,EAAD,CAAiBC,UAAU,WAA3B,SACA,kBAAC,KAAD,CAAgB3N,UAAW6S,KAAOkL,OAChC,kBAAC,GAAD,CAAOpqB,EAAGA,EAAG2hB,EAAGA,OAWlB0I,GAAgD,SAAC,GAIhD,IAHLnkB,EAGI,EAHJA,KACAiB,EAEI,EAFJA,KACAmjB,EACI,EADJA,SAEQve,EAAa4N,qBAAWpC,IAAxBxL,SACFwe,EAAc3S,uBAAY,WAC9B7L,EAAS,CACPzL,KAAMW,EAAY4S,WAClB3X,QAAS,CACPiF,IAAK,SACLvB,MAAOsG,EAAK6K,GACZA,GAAI5J,EAAK4J,MAGbuZ,GAAYA,EAASpkB,EAAK6K,MACzB,CAAChF,EAAU7F,EAAK6K,GAAI5J,EAAK4J,GAAIuZ,IAChC,OAAO,kBAACE,GAAA,EAAD,CAAcpL,QAASmL,GAAcrkB,EAAKkU,OAM7C+C,GAAwD,SAAC,GAGxD,IAFLhW,EAEI,EAFJA,KACAqU,EACI,EADJA,SACI,EAC0BM,oBAAkB,GAD5C,oBACGlf,EADH,KACYsjB,EADZ,KAGO5Y,EACPqS,qBAAWpC,IADbtb,MAASqL,qBAELmjB,EAAe7S,uBAAY,WAC/BsI,GAAW,KACV,CAACA,IAIJ,OAHA7H,qBAAU,WACR6H,GAAW,KACV,CAAC/Y,EAAKyG,QAASsS,IAEhB,oCACGtjB,EACC,kBAAC+jB,GAAA,EAAD,CAASrgB,KAAK,OAAOgf,MAAM,SAEzB,kBAACoL,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEpe,MAAOqd,GAAYpO,GACnBA,SAAUA,EACVoP,OAAQpP,GAEPrU,EAAK0jB,kBAAkBzQ,MAE1B,kBAAC0Q,GAAA,EAAD,KACGxjB,EAAqBzH,KAAI,SAAAqG,GAAI,OAC5B,kBAAC,GAAD,CACEA,KAAMA,EACN/E,IAAK+E,EAAK6K,GACV5J,KAAMA,EACNmjB,SAAUG,WAatBM,GAAoC,SAAC,GAAwB,IAAtB7kB,EAAqB,EAArBA,KAAMokB,EAAe,EAAfA,SAC3CC,EAAc3S,uBAAY,WAC9B0S,GAAYA,EAASpkB,EAAK6K,MACzB,CAAC7K,EAAK6K,GAAIuZ,IACb,OACE,kBAACE,GAAA,EAAD,CAAcpL,QAASmL,GACrB,kBAAC,GAAD,CAAc9d,IAAKvG,EAAK4b,QACvB5b,EAAKO,WAQCukB,GAAoD,SAAC,GAG3D,IAFL7jB,EAEI,EAFJA,KACAqU,EACI,EADJA,SACI,EAC0BM,oBAAkB,GAD5C,oBACGlf,EADH,KACYsjB,EADZ,OAOAvG,qBAAWpC,IAHA8M,EAJX,EAGFpoB,MACEc,QAAWsnB,QAEbtY,EANE,EAMFA,SAEI0e,EAAe7S,uBACnB,SAAC7G,GACCmP,GAAW,GACXnU,EAAS,CACPzL,KAAMW,EAAY4S,WAClB3X,QAAS,CACPiF,IAAK,cACLvB,MAAOmR,EACPA,GAAI5J,EAAK4J,QAIf,CAAChF,EAAU5E,EAAK4J,KAKlB,OAHAsH,qBAAU,WACR6H,GAAW,KACV,CAAC/Y,EAAKyG,QAASsS,IAEhB,oCACGtjB,EACC,kBAAC+jB,GAAA,EAAD,CAASrgB,KAAK,OAAOgf,MAAM,SAEzB,kBAACoL,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEpe,MAAOqd,GAAYpO,GACnBrC,KAAK,KACLqC,SAAUA,EACVoP,OAAQpP,GAJV,aAQA,kBAACsP,GAAA,EAAD,MACIzG,GAAW,IAAIxkB,KAAI,SAAAqG,GAAI,OACvB,kBAAC,GAAD,CAAUA,KAAMA,EAAMokB,SAAUG,EAActpB,IAAK+E,EAAK6K,YAWlEka,GAAsD,SAAC,GAAc,IAAZ9jB,EAAW,EAAXA,KAAW,EAC1C2U,oBAAkB,GADwB,oBACjElf,EADiE,KACxDsjB,EADwD,KAEhEnU,EAAa4N,qBAAWpC,IAAxBxL,SACFwe,EAAc3S,uBAAY,WAC9BsI,GAAW,GACXnU,EAAS,CACPzL,KAAMW,EAAY4S,WAClB3X,QAAS,CACPiF,IAAK,cACLvB,MAAO,KACPmR,GAAI5J,EAAK4J,QAGZ,CAAChF,EAAU5E,EAAK4J,KAInB,OAHAsH,qBAAU,WACR6H,GAAW,KACV,CAAC/Y,EAAKyG,QAASsS,IAEhB,oCACGtjB,EACC,kBAAC+jB,GAAA,EAAD,CAASrgB,KAAK,OAAOgf,MAAM,WAEzB,kBAACrB,GAAA,EAAD,CACE5R,UAAU,OACVE,MAAM,eACN+S,MAAM,SACNF,QAASmL,GAET,kBAAC,KAAD,CAAiBpe,KAAM+e,UAU7BC,GAAiD,SAAC,GAAc,IAAZjlB,EAAW,EAAXA,KAAW,EAI/DyT,qBAAWpC,IAJoD,IAEjEtb,MAASJ,EAFwD,EAExDA,WAAY0L,EAF4C,EAE5CA,iBAAkBhB,EAF0B,EAE1BA,WAAYM,EAFc,EAEdA,cACnDkF,EAHiE,EAGjEA,SAEI6B,EAAU4T,GAAoBja,EAAkBrB,GAChD2X,EAAejG,uBACnB,SAAChY,GACKgO,GACF7B,EAAS,CACPzL,KAAMW,EAAYqS,mBAClBpX,QAAS,CACP6U,GAAI7K,EAAK6K,GACT5P,IAAKtF,EACL+D,QACAgO,eAKR,CAAC7B,EAAU7F,EAAK6K,GAAIlV,EAAY+R,IAE5B5N,EAAI8X,mBACR,kBAAMsJ,GAAa7Z,EAAkBrB,EAAMW,EAAckK,MACzD,CAAClK,EAAckK,GAAIxJ,EAAkBrB,IAEvC,IAAKW,EAAckK,GACjB,OAAO,KAET,IAAMqa,GAAeprB,EACfqrB,EAAYrrB,EAAI,EAChBwb,EAA0B,KAAfjV,EACX3J,GAAWgR,EAEjB,OACE,kBAAC,GAAD,CACEmQ,SAAUF,EACVqF,MAAOrc,EAAcuT,KACrBxa,MAAOI,EACPygB,QAAS2K,GAAeC,EACxB7P,SAAUA,EACV5e,QAASA,EACTipB,gBA9RU,mBAkSVyF,GAA+C,SAAC,GAAc,IAAZplB,EAAW,EAAXA,KAAW,EACrC4V,oBAAS,GAD4B,oBAC1DnU,EAD0D,KAClD4jB,EADkD,OAE1BzP,mBAAS,GAFiB,oBAE1D3Q,EAF0D,KAE7CqgB,EAF6C,OAGjC1P,oBAAS,GAHwB,oBAG1D2P,EAH0D,KAGhDC,EAHgD,OAI7B5P,oBAAS,GAJoB,oBAI1D8J,EAJ0D,KAI9C+F,EAJ8C,OAgB7DhS,qBAAWpC,IAhBkD,IAM/Dtb,MACEH,EAP6D,EAO7DA,WACAyL,EAR6D,EAQ7DA,iBACAV,EAT6D,EAS7DA,cACAC,EAV6D,EAU7DA,cACAP,EAX6D,EAW7DA,WACAsB,EAZ6D,EAY7DA,gBACAC,EAb6D,EAa7DA,qBAEFiE,EAf+D,EAe/DA,SAEI6B,EAAU4T,GAAoBja,EAAkBrB,GAChD0lB,EAAehU,uBAAY,WAC/B2T,GAAW5jB,KACV,CAACA,IACEkW,EAAejG,uBACnB,SAAChY,EAAeuL,GACd,IAAMyI,EAAgBhU,EAAQ,EACxBkU,EAAe3I,EAAc,CAAEA,oBAAgBiT,EACjDxQ,IACF7B,EAAS,CACPzL,KAAMW,EAAYqS,mBAClBpX,QAAS,CACP6U,GAAI7K,EAAK6K,GACT5P,IAAKrF,EACL8D,QACAgO,WAEF+F,KAAM,CAAEG,eAAcF,mBAExB+X,GAAc,MAGlB,CAAC7vB,EAAYiQ,EAAU7F,EAAK6K,GAAInD,IAE5Bie,EAAcjU,uBAAY,WAC9B4T,EAAgBrgB,EAAc,KAC7B,CAACA,IACE2gB,EAAclU,uBAAY,WAC9B4T,EAAgBrgB,EAAc,KAC7B,CAACA,IAEE4gB,EAAcnU,uBAAY,WAC9B4T,EAAgB,KACf,IACGQ,EAAiBpU,uBAAY,SAAC5S,GAClC0mB,EAAY1mB,KACX,IACGhF,EAAI8X,mBACR,kBAAMsJ,GAAa7Z,EAAkBrB,EAAMW,EAAckK,MACzD,CAAClK,EAAckK,GAAIxJ,EAAkBrB,IAEjCyb,EAAI7J,mBACR,kBAAMsJ,GAAa7Z,EAAkBrB,EAAMY,EAAciK,MACzD,CAACjK,EAAciK,GAAIxJ,EAAkBrB,IAEjC+lB,EAAoBrU,uBACxB,SAAC5S,GACC0mB,EAAY/J,IAAM3c,KAEpB,CAAC2c,IAEGuK,EAAoBtU,uBAAY,WAEpCiG,EADe8D,EAAIxW,EAAc,EACZA,GACrBogB,GAAU,GACVC,EAAgB,KACf,CAAC3N,EAAc8D,EAAGxW,IAEfwa,EAAQ7N,mBAAQ,kBAAM4J,GAAiB1hB,EAAG2hB,EAAGzb,EAAKmM,aAAY,CAClErS,EACAkG,EAAKmM,UACLsP,IAEIlB,EAAU3I,mBAAQ,kBAAM8J,GAAmB5hB,EAAG2hB,KAAI,CAAC3hB,EAAG2hB,IAS5D,GARAtJ,qBAAU,WACHzK,GACH+d,GAAc,KAEf,CAAC/d,IACJyK,qBAAU,WACRmT,EAAgB,KACf,CAAC1jB,KACChB,EAAciK,GACjB,OAAO,KAGT,IAAMyK,EAA0B,KAAfjV,EACX3J,GAAWgR,EACXue,EAAI,uBAAmBjmB,EAAK6K,IAC5Bqb,EAAevkB,EAAkBC,EACjCukB,EAAclhB,EAAc,EAC5BmhB,EAAQnhB,IAAgBihB,EAC9B,OACE,oCACE,kBAAC,GAAD,CACErO,SAAUF,EACV4H,WAAYuG,EACZtG,cAAeuG,EACf/I,MAAOpc,EAAcsT,KACrBxa,MAAO+hB,EACPgE,MAAOA,EACPlF,QAASA,EACTjF,SAAUA,EACV5e,QAASA,EACTmU,GAAIob,EACJvG,WAAYA,IAEb6F,GAAYW,EAAe,GAC1B,kBAACG,GAAA,EAAD,CACElgB,UAAW8O,KAAW,gBACtBtB,OAAQsS,EACRK,UAAU,MACV7kB,OAAQA,EACR8W,OAAQmN,EACRa,QAAQ,eAER,kBAACC,GAAA,EAAD,iBACA,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAAC3O,GAAA,EAAD,CAAQzC,SAAU8Q,EAAOlN,QAASyM,GAChC,kBAAC,KAAD,CAAiB1f,KAAM0gB,QAEzB,kBAAC5O,GAAA,EAAD,CAAQzC,UAAW6Q,EAAajN,QAAS0M,GACvC,kBAAC,KAAD,CAAiB3f,KAAM2gB,QAEzB,kBAAC7O,GAAA,EAAD,CAAQzC,UAAQ,EAACnP,UAAU,YACxBvI,KAAEuY,MAAM+P,GAAcvsB,KAAI,SAAAyc,GAAC,OAC1B,kBAAC,GAAD,CACEnb,IAAKmb,EACLrgB,MACEqgB,GAAKnR,EAAcwc,GAAYiB,MAAQjB,GAAYmB,YAK3D,kBAAC7K,GAAA,EAAD,CAAQzC,UAAW6Q,EAAajN,QAAS8M,GACvC,kBAAC,KAAD,CAAiB/f,KAAMqa,QAEzB,kBAACvI,GAAA,EAAD,CAAQzC,UAAW6Q,EAAajN,QAAS2M,GACvC,kBAAC,KAAD,CAAiB5f,KAAM4gB,aAa1BC,GAAoC,SAAC,GAAc,IAAD,EAAX9mB,EAAW,EAAXA,KAAW,EAGzDyT,qBAAWpC,IADbtb,MAASsL,EAFkD,EAElDA,iBAAkBV,EAFgC,EAEhCA,cAAeC,EAFiB,EAEjBA,cAAeP,EAFE,EAEFA,WAErDqH,EAAUkK,mBAAQ,kBAAM0J,GAAoBja,EAAkBrB,KAAO,CACzEqB,EACArB,IAEIlG,EAAI8X,mBACR,kBAAMsJ,GAAa7Z,EAAkBrB,EAAMW,EAAckK,MACzD,CAAClK,EAAckK,GAAIxJ,EAAkBrB,IAEjCyb,EAAI7J,mBACR,kBAAMsJ,GAAa7Z,EAAkBrB,EAAMY,EAAciK,MACzD,CAACjK,EAAciK,GAAIxJ,EAAkBrB,IAEvC,IAAKW,EAAckK,KAAOjK,EAAciK,GACtC,OAAO,KAGT,IAAMyK,EAA0B,KAAfjV,EACX3J,GAAWgR,EACXqf,EAAiB,IAANtL,IAAYzb,EAAKmM,YAAcmJ,IAAa5e,EAC7D,OACE,kBAAC,KAAD,CACEyP,UAAW8O,MAAU,oBAAI+D,KAAO7M,UAAYnM,EAAKmM,WAA5B,eAAuC,aAAcnM,EAAKgnB,YAA1D,KAErB,yBAAK7gB,UAAU,eACb,yBAAKA,UAAU,yBACZnG,EAAKgnB,YAAc,kBAAC,KAAD,CAAiB/gB,KAAMghB,KAAa9gB,UAAU,yBAClE,kBAAC,GAAD,CAAUnG,KAAMA,KAEjB+mB,GAAY,kBAAC,GAAD,CAAmB9lB,KAAMjB,IACtC,kBAAC,GAAD,CAAiBA,KAAMA,IACvB,kBAAC,GAAD,CAAoBiB,KAAMjB,EAAMsV,SAAUA,KAE5C,kBAAC4R,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAAC,GAAD,CAAennB,KAAMA,KAEvB,kBAACmnB,GAAA,EAAD,KACE,kBAAC,GAAD,CAAannB,KAAMA,KAErB,kBAACmnB,GAAA,EAAD,KACE,kBAAC,GAAD,CAAOrtB,EAAGA,EAAG2hB,EAAGA,QAYb2L,GAAkD,SAAC,GAAc,IAAZpnB,EAAW,EAAXA,KAChE,OACE,kBAAC6W,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAU,iBACpB,kBAAC,GAAD,CACEqd,sBAAuBxjB,EAAKwjB,sBAC5B/K,mBAAoBzY,EAAKyY,sBAG7B,kBAAC,KAAD,KACGzY,EAAKe,MAAMpH,KAAI,SAAAsH,GAAI,OAClB,kBAAC,KAAD,CAAehG,IAAKgG,EAAK4J,GAAI1E,UAAU,iBACrC,yBAAKA,UAAU,UACb,yBAAKA,UAAU,yBACb,kBAAC,GAAD,CAAUnG,KAAMiB,KAElB,kBAAC,GAAD,CAAejB,KAAMiB,YAQtBomB,GAAkD,SAAC,GAAc,IAAZrnB,EAAW,EAAXA,KAI1DsV,EAA0B,KAD5B7B,qBAAWpC,IADbtb,MAASsK,WAGX,OACE,kBAACwW,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAU,iBACpB,kBAAC,GAAD,CACEqd,sBAAuBxjB,EAAKwjB,sBAC5B/K,mBAAoBzY,EAAKyY,sBAG7B,kBAACe,GAAA,EAAD,CAAU/X,QAAQ,GAChB,kBAAC,KAAD,KACGzB,EAAKe,MAAMpH,KAAI,SAAAsH,GAAI,OAClB,kBAAC,KAAD,CAAehG,IAAKgG,EAAK4J,IACvB,yBAAK1E,UAAU,UACb,yBAAKA,UAAU,yBACb,kBAAC,GAAD,CAAUnG,KAAMiB,KAElB,kBAAC,GAAD,CAAkBA,KAAMA,EAAMqU,SAAUA,aAalDgS,GAA0B,SAAC,GAAe,IAAbtK,EAAY,EAAZA,MACjC,OACE,kBAAC7D,GAAA,EAAD,CAAOC,MAAM,UAAUjT,UAAU,OAAOE,MAAO2W,GAASA,IAI/CuK,GAAsC,SAAC,GAA8C,IAA5CvnB,EAA2C,EAA3CA,KAAMwnB,EAAqC,EAArCA,KAAqC,IAA/BC,kBAA+B,MAAlB,EAAkB,EAAfrD,EAAe,EAAfA,SAAe,EACnExO,oBAAkB,GADiD,oBACxFnU,EADwF,KAChF4jB,EADgF,OAI3F5R,qBAAWpC,IADbtb,MAASsL,EAHoF,EAGpFA,iBAAkBV,EAHkE,EAGlEA,cAAeC,EAHmD,EAGnDA,cAEtC2X,EAAS7G,uBAAY,WACzB2T,GAAW5jB,KACV,CAACA,EAAQ4jB,IACZlT,qBAAU,WACRkT,GAAWrlB,EAAKmM,aACf,CAACnM,EAAKmM,UAAWkZ,IACpB,IAAMvrB,EAAI8X,mBACR,kBAAMwJ,GAAgB/Z,EAAkBrB,EAAKe,MAAOJ,EAAckK,MAClE,CAAClK,EAAckK,GAAIxJ,EAAkBrB,EAAKe,QAEtC0a,EAAI7J,mBACR,kBAAMwJ,GAAgB/Z,EAAkBrB,EAAKe,MAAOH,EAAciK,MAClE,CAACjK,EAAciK,GAAIxJ,EAAkBrB,EAAKe,QAEtC2S,EAAehC,uBAAY,SAACsO,GACxB,OAARoE,QAAQ,IAARA,KAAWpkB,EAAKujB,WAAYvD,EAAIrM,OAAOmB,QAAU,EAAIhb,KACpD,CAACsqB,EAAUtqB,EAAGkG,EAAKujB,aAChB7sB,GAAW2K,EAAiBiM,IAAItN,EAAKe,MAAM,IACjD,OACE,kBAAC8V,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACE3Q,UAAW8O,KAAW+D,KAAOC,OAAQ,gBAAiB,CACpD,gBAAiBjZ,EAAKmM,YAExB+M,QAASX,GAET,kBAAC2O,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAKO,GAAI,GAAIC,GAAI,EAAGxhB,UAAU,iBAC3BshB,EAAa,GACZ,kBAACvS,GAAA,EAAD,CAAWE,QAAM,EAACD,OAAK,GACrB,kBAACnB,GAAA,EAAD,CAAO5Z,KAAK,WAAW4c,gBAAgB,EAAM/C,SAAUP,EAAcwF,QAAS/F,MAGlF,kBAAC,GAAD,CAAY1R,OAAQA,IACpB,kBAAC,GAAD,CACE+hB,sBAAuBxjB,EAAKwjB,sBAC5B/K,mBAAoBzY,EAAKyY,sBAG7B,kBAAC0O,GAAA,EAAD,CAAKO,GAAI,EAAGC,GAAI,GACd,kBAAC,GAAD,CACE3K,MAAOrc,EAAcuT,KACrBxd,QAASA,EACTgD,MAAOI,EACPmZ,KAAK,QAGT,kBAACkU,GAAA,EAAD,CAAKO,GAAI,EAAGC,GAAI,GACd,kBAAC,GAAD,CACE3K,MAAOpc,EAAcsT,KACrBxd,QAASA,EACTgD,MAAO+hB,EACPxI,KAAK,SAhCb,OAoCGuU,QApCH,IAoCGA,OApCH,EAoCGA,EAAM7tB,KAAI,SAACqjB,EAAO5G,GAAR,OAAe,kBAAC,GAAD,CAAKnb,IAAKmb,EAAG4G,MAAOA,QAEhD,kBAACxD,GAAA,EAAD,CAAU/X,OAAQA,GAChB,kBAAC,KAAD,KACGzB,EAAKe,MAAMpH,KAAI,SAAAsH,GAAI,OAClB,kBAAC,GAAD,CAAUjB,KAAMiB,EAAMhG,IAAKgG,EAAK4J,YCxsB/B+c,GAAmB,WAAO,IAAD,EAGhCnU,qBAAWpC,IADbtb,MAASgL,EAFyB,EAEzBA,MAAOM,EAFkB,EAElBA,iBAAkB1L,EAFA,EAEAA,WAE9BmnB,EAAMlL,mBAAQ,kBAAMjT,OAAOhJ,KAAa,CAACA,IACzC6R,EAAQoK,mBACZ,kBACEkL,EACI/b,EAAMmP,QACJ,SAAAjP,GAAI,OACFqa,GAAoBja,EAAkBJ,IACQ,IAA9Cia,GAAa7Z,EAAkBJ,EAAM6b,MAEzC,KACN,CAACzb,EAAkByb,EAAK/b,IAEpB8mB,EAAcjW,mBAAQ,kBAAM0R,GAAuB9b,KAAQ,CAACA,IAClE,OAAqB,IAAjBA,EAAMoF,OACD,KAGL,kBAACiK,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAU,gBAAtB,sBACA,kBAAC+Q,GAAA,EAAD,KACG2Q,EAAYluB,KAAI,SAAAqG,GAAI,OACnB,kBAAC,GAAD,CAAuBA,KAAMA,EAAM/E,IAAK+E,EAAKujB,mBCzB5CuE,GAA6B,WAAO,IAEpC/mB,EACP0S,qBAAWpC,IADbtb,MAASgL,MAELyG,EAAQoK,mBAAQ,kBAAMhU,KAAEsS,OAAOnP,EAAO,CAAEuR,YAAa,SAAS,CAACvR,IAC/D8mB,EAAcjW,mBAAQ,kBAAM0R,GAAuB9b,KAAQ,CAACA,IAClE,OAAqB,IAAjBA,EAAMoF,OACD,KAGL,kBAACiK,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAU,gBAAtB,sBACA,kBAAC+Q,GAAA,EAAD,KACG2Q,EAAYluB,KAAI,SAAAqG,GAAI,OACnB,kBAAC,GAAD,CAAuBA,KAAMA,EAAM/E,IAAK+E,EAAKujB,mB,UCPnDwE,GAA8C,SAAC,GAAc,IAAZ3tB,EAAW,EAAXA,KAC/C6L,EAAgB,cAAT7L,EAAuB4tB,KAAiBC,KACrD,OACE,8BACG7tB,EACD,kBAAC,KAAD,CAAiB+L,UAAU,QAAQF,KAAMA,MAOzCiiB,GAA8D,SAAC,GAG9D,IAFL9tB,EAEI,EAFJA,KACAgqB,EACI,EADJA,SAEMC,EAAc3S,uBAAY,WAC9B0S,EAAShqB,KACR,CAACgqB,EAAUhqB,IACd,OACE,kBAACkqB,GAAA,EAAD,CAAcpL,QAASmL,GACrB,kBAAC,GAAD,CAAejqB,KAAMA,MAKd+tB,GAA0D,SAAC,GAAwB,IAAtB/tB,EAAqB,EAArBA,KAAMgqB,EAAe,EAAfA,SAC9E,OACE,kBAACgE,GAAA,EAAD,KACE,kBAAC3D,GAAA,EAAD,CAAgBxR,KAAK,KAAKyR,OAAK,GAC7B,kBAAC,GAAD,CAAetqB,KAAMA,KAEvB,kBAACwqB,GAAA,EAAD,KACE,kBAAC,GAAD,CAAuBxqB,KAAK,UAAUgqB,SAAUA,IAChD,kBAAC,GAAD,CAAuBhqB,KAAK,YAAYgqB,SAAUA,O,SCrB7CiE,GAAwC,SAAC,GAA4B,IAA1BtnB,EAAyB,EAAzBA,MAAyB,IAAlBkS,YAAkB,MAAX,KAAW,IACvD2C,mBAAuB,IADgC,oBACxEhc,EADwE,KAClE0uB,EADkE,OAI3E7U,qBAAWpC,IADbtb,MAAS8K,EAHoE,EAGpEA,SAAUQ,EAH0D,EAG1DA,iBAAkB1L,EAHwC,EAGxCA,WAAYC,EAH4B,EAG5BA,WAH4B,EAKrD2yB,GAAUtV,GAA5BxM,EALuE,EAKvEA,MAAOC,EALgE,EAKhEA,OACfyL,qBAAU,WACR,IAAMqW,EAAW3nB,EAAS+L,OACpBkQ,EAAMne,OAAOhJ,GACb4oB,EAAM5f,OAAO/I,GACnB,GAAI4yB,EAAW,GAAKznB,EAAM6L,OAAS,GAAKjX,GAAcC,EAAY,CAChE,IAAM6yB,EAAarN,GAAgB/Z,EAAkBN,EAAO+b,GACtDljB,EAAOiH,EAASlH,KAAI,SAACyW,EAAKoE,GAC9B,IAAMwI,EAAQzI,GAAenE,EAAKoE,GAC5BkU,EAASD,EAAajU,GAAQgU,EAAW,GACzCxM,EAAQZ,GACZ/Z,EACAsnB,GAAe5nB,EAAOqP,GACtB0M,GAGF,OACE5Q,OACGuG,QACAoM,MAAM,QACNxS,KAAKH,KAAOkE,IAAQ,EAahB,CAAE4M,QAAO0L,QAAOE,UAXLxN,GAChB/Z,EACAwnB,GAAgB9nB,EAAOqP,GACvB0M,GAQgCgM,OANnB1N,GACb/Z,EACAwnB,GAAgB9nB,EAAOqP,GACvBmO,GAGwCvC,SAEnC,CAAEgB,QAAO0L,QAAO1M,YAG3BsM,EAAQ1uB,QAER0uB,EAAQ,MAET,CAACvnB,EAAOF,EAAUlL,EAAYC,EAAYyL,EAAkBinB,IAC/D,IAAMS,EAA8BrX,uBAClC,SAAChY,EAAOwa,GAAR,MAAiB,CAACvV,OAAOjF,GAAOsvB,QAAQ,GAAIprB,KAAEqrB,WAAW/U,MACzD,IAEF,OAAoB,IAAhBta,EAAKgT,OACA,KAGL,kBAAC,KAAD,CAAehT,KAAMA,EAAM6M,MAAOA,EAAOC,OAAQA,GAC/C,kBAAC,KAAD,MACA,kBAAC,KAAD,CAAOwiB,QAAQ,UACf,kBAAC,KAAD,CAASH,UAAWA,IACV,OAAT9V,GACC,kBAAC,KAAD,CAAQ8V,UAAWnrB,KAAEqrB,aAEvB,kBAAC,KAAD,CAAKC,QAAQ,YAAYvH,KAAK,YAC9B,kBAAC,KAAD,CAAKuH,QAAQ,SAASvH,KAAK,YAC3B,kBAAC,KAAD,CAAMuH,QAAQ,QAAQC,OAAO,UAAUC,gBAAgB,QACvD,kBAAC,KAAD,CAAMF,QAAQ,QAAQC,OAAO,cClExBE,GAA0C,SAAC,GAA4B,IAA1BtoB,EAAyB,EAAzBA,MAAyB,IAAlBkS,YAAkB,MAAX,KAAW,IACzD2C,mBAAuB,IADkC,oBAC1Ehc,EAD0E,KACpE0uB,EADoE,OAI7E7U,qBAAWpC,IADbtb,MAAS8K,EAHsE,EAGtEA,SAAUQ,EAH4D,EAG5DA,iBAAkB1L,EAH0C,EAG1CA,WAH0C,EAKvD4yB,GAAUtV,GAA5BxM,EALyE,EAKzEA,MAAOC,EALkE,EAKlEA,OACfyL,qBAAU,WACR,IAAMqW,EAAW3nB,EAAS+L,OACpBkQ,EAAMne,OAAOhJ,GACnB,GAAI6yB,EAAW,GAAKznB,EAAM6L,OAAS,GAAKjX,EAAY,CAClD,IAAM8yB,EAAarN,GACjB/Z,EACAsnB,GAAe5nB,EAAOF,EAAS,IAC/Bic,GAEIljB,EAAOiH,EAASlH,KAAI,SAACyW,EAAKoE,GAC9B,IAAMwI,EAAQzI,GAAenE,EAAKoE,GAC5BkU,EAAQD,EAAcA,EAAajU,GAAQgU,EAAW,GAC5D,GACEtc,OACGuG,QACAoM,MAAM,QACNxS,KAAKH,KAAOkE,IAAQ,EACvB,CACA,IAAM5F,EACI,IAARgK,EACI,EACA4G,GACA/Z,EACAioB,GAAoBvoB,EAAOqP,GAC3B0M,GAaN,MAAO,CAAEE,QAAO0L,QAAOjrB,UAXLgC,KAAKC,IACrB0b,GAAgB/Z,EAAkBsnB,GAAe5nB,EAAOqP,GAAM0M,GAC9DtS,EACA4Q,GACE/Z,EACAwnB,GAAgB9nB,EAAOqP,GACvB0M,GAEF,GAGgCtS,OAElC,MAAO,CAAEwS,QAAO0L,YAGpBJ,EAAQ1uB,QAER0uB,EAAQ,MAET,CAACvnB,EAAOF,EAAUlL,EAAY0L,EAAkBinB,IACnD,IAAMS,EAA8BrX,uBAClC,SAAChY,EAAOwa,GAAR,MAAiB,CAACvV,OAAOjF,GAAOsvB,QAAQ,GAAIprB,KAAEqrB,WAAW/U,MACzD,IAEF,OAAoB,IAAhBta,EAAKgT,OACA,KAGL,kBAAC,KAAD,CAAehT,KAAMA,EAAM6M,MAAOA,EAAOC,OAAQA,GAC/C,kBAAC,KAAD,MACA,kBAAC,KAAD,CAAOwiB,QAAQ,UACf,kBAAC,KAAD,CAASH,UAAWA,IACV,OAAT9V,GACC,kBAAC,KAAD,CAAQ8V,UAAWnrB,KAAEqrB,aAEvB,kBAAC,KAAD,CAAKC,QAAQ,YAAYvH,KAAK,UAAU4H,QAAQ,MAChD,kBAAC,KAAD,CAAKL,QAAQ,MAAMvH,KAAK,UAAU4H,QAAQ,MAC1C,kBAAC,KAAD,CAAML,QAAQ,YC/ETL,GAAkB,SAAC9nB,EAAgBsP,GAAjB,OAC7BtP,EAAMmP,QAAO,SAAAjP,GAAI,QACfA,EAAKmL,eACDF,KAAOmE,GACNoC,QACAoM,MAAM,QACNxS,KAAKH,KAAOjL,EAAKmL,gBAAkB,MAI/Bkd,GAAsB,SAACvoB,EAAgBsP,GAAjB,OACjCtP,EAAMmP,QACJ,SAAAjP,GAAI,OACFiL,KAAOmE,GACJoC,QACAhD,OAAO,gBACVvD,KAAOjL,EAAKuoB,cACT/W,QACAhD,OAAO,kBAGHkZ,GAAiB,SAAC5nB,EAAgBsP,GAAjB,OAC5BtP,EAAMmP,QACJ,SAAAjP,GAAI,OACFiL,KAAOmE,GACJoC,QACAoM,MAAM,QACNxS,KAAKH,KAAOjL,EAAKuoB,eAAiB,MAS9BjB,GAAY,SAACtV,GACxB,MAAa,OAATA,EACK,CACLxM,MAAO,IACPC,OAAQ,KAGH,CACLD,MAAO,IACPC,OAAQ,MAID+iB,GAAQ,SAAC,GAAmC,IAAjC1oB,EAAgC,EAAhCA,MAAgC,EACpB6U,mBAAoB,WADA,oBAC/C8T,EAD+C,KACpCC,EADoC,KAEhDpF,EAAe7S,uBAAY,SAACtX,GAChCuvB,EAAavvB,KACZ,CAACuvB,IACJ,OAAqB,IAAjB5oB,EAAM6L,OACD,KAGL,kBAACiK,GAAA,EAAD,CAAM1Q,UAAU,QACd,kBAAC2Q,GAAA,EAAD,CAAY3Q,UAAU,UACpB,yBAAKA,UAAU,WACb,kBAAC4R,GAAA,EAAD,CAAQ9E,KAAK,KAAK2W,IAAKC,KAAM/N,GAAI,SAAU1C,MAAM,UAAUjT,UAAU,OAAOE,MAAM,SAChF,kBAAC,KAAD,CAAiBJ,KAAM6jB,QAF3B,SAKA,kBAAC,GAAD,CAAmB1F,SAAUG,EAAcnqB,KAAMsvB,KAEpC,cAAdA,EACC,kBAAC,GAAD,CAAe3oB,MAAOA,IAEpB,kBAAC,GAAD,CAAaA,MAAOA,MC9EnBgpB,GAAqB,WAAO,IAE5BhpB,EACP0S,qBAAWpC,IADbtb,MAASgL,MAEX,OACE,oCACE,kBAAC,GAAD,CAAOA,MAAOA,IACd,kBAAC,GAAD,MAEA,kBAAC,GAAD,MACA,6BACA,kBAAC,GAAD,Q,yCCPOipB,GAAgD,SAAC,GAAsC,IAApCjpB,EAAmC,EAAnCA,MAAO0mB,EAA4B,EAA5BA,WAAYwC,EAAgB,EAAhBA,UAAgB,EAC7CxW,qBAAWpC,IAAvDtb,MAASJ,EADgF,EAChFA,WAAY0L,EADoE,EACpEA,iBAIvB2a,EAHMpK,mBAAQ,kBAAMwJ,GAAgB/Z,EAAkBN,EAAOpC,OAAOhJ,MAAc,CACtFA,EAAY0L,EAAkBN,IAEZkpB,EACdvqB,EAAmB,IAAb+nB,EACNyC,EAASlO,EAAQyL,EAEvB,OACE,kBAACvK,GAAA,EAAD,CAAUC,OAAK,EAAC3W,MAAO,CAAE2jB,SAAU,aACjC,kBAACjN,GAAA,EAAD,CAAUE,KAAG,EAAC1jB,MAAOsiB,EAAOtc,IAAKA,EAAK0Z,MAAO8Q,EAAS,SAAW,WAAalO,EAA9E,MAAwFyL,GACxF,kBAACvK,GAAA,EAAD,CAAU/W,UAAWikB,KAAGC,KAAGrO,MAAJ,gBAAcqO,KAAGC,QAAUJ,IAChD9M,KAAG,EAAChE,MAAgB,UAAuB1f,MAAO+tB,EAAY/nB,IAAKA,GADrE,IAC6EwqB,EAAM,UAAMlO,EAAN,cAAiByL,EAAjB,KAAiC,MCN7G8C,GAA8C,SAAC,GAAwB,IAAD,IAArB9C,kBAAqB,MAAR,EAAQ,IACjD7R,mBAAoC,IADa,oBAC1E4U,EAD0E,KAChEC,EADgE,KAE3EC,EAASrzB,IAFkE,EAW7Eoc,qBAAWpC,IAPbtb,MACEsL,EAL6E,EAK7EA,iBACAR,EAN6E,EAM7EA,SACAK,EAP6E,EAO7EA,WACAP,EAR6E,EAQ7EA,cACAC,EAT6E,EAS7EA,cAGE+pB,EAAe/Y,mBAAQ,kBAAM,IAAIgZ,IAAwBF,EAAO/wB,KAAI,SAAAkxB,GAAE,MAAI,CAACA,EAAGhgB,GAAIggB,SAAO,CAACH,IAC1F7C,EAAcjW,mBAAQ,kBAAM0R,GAAuBpiB,KAAa,CACpEA,IAEIsG,EAAQoK,mBAAQ,kBAAMhU,KAAEwF,MAAMykB,GACjCluB,KAAI,SAAAqG,GAAI,MAAK,CACZA,OACAwnB,KAAM5pB,KAAEwF,MAAMunB,EAAajhB,IAAI1J,EAAKujB,aAAa7Z,IAAI,OAAQ,IAAI/P,KAAI,SAAAyc,GAAC,OAAIxY,KAAEktB,MAAM1U,MAAI9R,UAAU5K,YAEjG6Y,QAAO,SAAA6D,GAAC,OAAIzX,OAAOC,MAAMwX,EAAEpW,KAAKujB,aAAe,EAAInN,EAAEoR,KAAK5a,UAC1DmQ,UACArjB,UAAS,CAACmuB,EAAa8C,IACpB7wB,EAAI8X,mBACR,kBAAMwJ,GAAgB/Z,EAAkBH,EAAYP,EAAckK,MAClE,CAAClK,EAAckK,GAAIxJ,EAAkBH,IAEjCua,EAAI7J,mBACR,kBAAMwJ,GAAgB/Z,EAAkBH,EAAYN,EAAciK,MAClE,CAACjK,EAAciK,GAAIxJ,EAAkBH,IAEjCue,EAAQ7N,mBACZ,kBACE4J,GACE1hB,EACA2hB,EACAoM,EAAYpE,OAAM,SAAAzjB,GAAI,OAAIA,EAAKmM,gBAEnC,CAACrS,EAAG2hB,EAAGoM,IAEHtN,EAAU3I,mBAAQ,kBAAM8J,GAAmB5hB,EAAG2hB,KAAI,CAAC3hB,EAAG2hB,IACtD/kB,EAAUkb,mBACd,kBAAM1Q,EAAW6pB,MAAK,SAAA/qB,GAAI,OAAKsb,GAAoBja,EAAkBrB,QACrE,CAACqB,EAAkBH,IAEfqjB,EAAe7S,uBAAY,SAAC7G,EAAYnR,GAC5C+wB,EAAY,eAAKD,EAAN,gBAAiB3f,EAAKnR,OAChC,CAAC8wB,EAAUC,IACd,IAAK9pB,EAAckK,KAAOjK,EAAciK,IAAMhK,EAAS+L,QAAU,EAC/D,OAAO,KAET,IAAMqd,EAAYrsB,KAAEud,IAAItI,OAAOzT,OAAOorB,IACtC,OACE,oCACGhjB,EAAM7N,KAAI,gBAAGqG,EAAH,EAAGA,KAAMwnB,EAAT,EAASA,KAAT,OACT,kBAAC,GAAD,CAAWxnB,KAAMA,EAAM/E,IAAK+E,EAAKujB,WAAYiE,KAAMA,EACjDpD,SAAUG,EACVkD,WAAYA,OAEhB,kBAAC5Q,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAW8O,KAAW,eAAlC,SACA,kBAACiC,GAAA,EAAD,KACE,kBAACgQ,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAAC,GAAD,CACEnK,MAAOrc,EAAcuT,KACrBxa,MAAOI,EAAImwB,EACXvzB,QAASA,KAGb,kBAACywB,GAAA,EAAD,KACE,kBAAC,GAAD,CACEnK,MAAOpc,EAAcsT,KACrBxa,MAAO+hB,EACPlB,QAASA,EACTkF,MAAOA,EACP/oB,QAASA,KAGb,kBAACywB,GAAA,EAAD,KACE,kBAAC,GAAD,CAAOrtB,EAAGA,EAAG2hB,EAAGA,OAItB,kBAACuP,GAAA,EAAD,KACGvD,EAAa,EACZ,kBAAC,GAAD,CAAgB1mB,MAAOG,EAAY+oB,UAAWA,EAAWxC,WAAYA,GAAc,IACnF,kBAAC,GAAD,CAAc1mB,MAAOG,QCtGpB+pB,GAAyB,WAAO,IAEhCxqB,EACPgT,qBAAWpC,IADbtb,MAAS0K,KAEX,OACE,kBAACoW,GAAA,EAAD,KACGpW,GACC,kBAACqW,GAAA,EAAD,KACE,kBAAC,GAAD,CAAcvQ,IAAK9F,EAAKmb,MAAO3I,KAAK,WACnCxS,EAAKF,SAFR,cCEK2qB,GAAyB,WACpC,IAAM11B,EAAMW,IAD8B,EAKtCsd,qBAAWpC,IAL2B,IAGxCtb,MAAS0K,EAH+B,EAG/BA,KAAMS,EAHyB,EAGzBA,WACf2E,EAJwC,EAIxCA,SAJwC,EAMbslB,eAArBje,EANkC,EAMlCA,IAAK2O,EAN6B,EAM7BA,YACP4L,EAAa9oB,OAAOkd,GAAe,GACnCuP,EAAUC,eACVC,EAAe5Z,uBAAY,WAC/B0Z,EAAQG,WACP,CAACH,IAUJ,OATAjZ,qBAAU,WAIR,OAHIjF,GAAO1X,GACTqQ,EAAS,CAAEzL,KAAMW,EAAYkS,WAAYjX,QAAS,CAAEkX,SAE/C,WACLrH,EAAS,CAAEzL,KAAMW,EAAYmJ,gBAE9B,CAAC2B,EAAUqH,EAAK1X,IAGjB,oCACE,kBAACypB,GAAA,EAAD,CAAQ7F,MAAM,QAAQ8F,OAAK,GACzB,kBAACnH,GAAA,EAAD,CAAQmB,QAASoS,EAAcnlB,UAAU,WACvC,kBAAC,KAAD,CAAiBF,KAAMulB,OADzB,YAGA,kBAAC,GAAD,MACA,kBAAC,GAAD,OAED/qB,EACC,oCACE,kBAAC,GAAD,MACA,6BACgB,IAAfgnB,GACC,oCACE,kBAAC,GAAD,CAAO1mB,MAAOG,IACd,8BAGJ,kBAAC,GAAD,CAAeumB,WAAYA,KAG3B,kBAACgE,GAAA,EAAD,CAAOrS,MAAM,UAAb,+B,iHC7CGsS,GAA4B,WAAO,IAEnC5pB,EACP2R,qBAAWpC,IADbtb,MAAS+L,sBAEL1C,EAASwS,mBACb,kBACE9P,EAAsBnI,KAAI,SAAAqG,GAAI,MAAK,CACjCqQ,KAAMrQ,EAAKwP,QACX9V,MAAOsG,EAAKtG,MACZuW,UAAWjQ,EAAKiQ,gBAEpB,CAACnO,IAEG6pB,GAAU/tB,KAAEguB,MAAMxsB,EAAQ,UAAY,CAAE1F,MAAO,IAAKA,MACpDmyB,EAAgBna,uBACpB,SAAC1R,GAAD,OACEA,EAAI,wCACiCP,KAAKqsB,KACf,GAAnB9rB,EAAKtG,OAAS,GAAUiyB,IAE5B,kCACN,CAACA,IAEGI,EAAmBra,uBACvB,SAAC1R,GAAD,OACEA,GAAQA,EAAKqQ,KACT,CACE,WAAW,GAAX,OAAerQ,EAAKtG,MAApB,yBAA0CsG,EAAKqQ,OAEjD,OACN,IAEI2b,EAAYpa,mBAChB,kBACE1F,OACG+f,SAAS,GAAI,SACb3b,WACL,IAEF,OAAqC,IAAjCxO,EAAsB8K,OACjB,kBAAC6e,GAAA,EAAD,CAAOrS,MAAM,WAAb,wBAGL,oCACE,kBAAC,KAAD,CACE4S,UAAWA,EACXE,mBAAmB,EACnB9sB,OAAQA,EACRysB,cAAeA,EACfE,iBAAkBA,IAEpB,kBAAC,KAAD,QCTFI,GAAS,IADAC,EAAQ,KACR,CAAW,CAAEhyB,KAAM,cAC5BiyB,GAAW,SAACvuB,GAAD,OAAqB2B,KAAKqsB,KAAKhuB,EAAU,KAMpDwuB,GAAsC,SAAC,GAC3C,OADwD,EAAXxwB,MAE3C,KAAKR,GAAUG,MACb,OACE,kBAAC,KAAD,CACE0K,UAAW8O,KAAW,QAAS+D,KAAOuT,kBACtCtmB,KAAMumB,OAIZ,KAAKlxB,GAAUI,KACb,OACE,kBAAC,KAAD,CACEyK,UAAW8O,KAAW,QAAS+D,KAAOyT,iBACtCxmB,KAAMymB,OAIZ,QACE,OAAO,kBAAC,GAAD,CAAQ32B,MAAO0rB,GAAYiB,UAQlCiK,GAAsC,SAAC,GAAwB,IAAtB7wB,EAAqB,EAArBA,KAAMsoB,EAAe,EAAfA,SAC7CC,EAAc3S,uBAAY,WAC9B0S,EAAStoB,KACR,CAACA,EAAMsoB,IACV,OACE,kBAACE,GAAA,EAAD,CAAcpL,QAASmL,GACrB,kBAAC,GAAD,CAAWvoB,KAAMA,IAChBA,IAID8wB,GAAmC,SAAAC,GACvClxB,GAAMgC,QACNkvB,KAEIC,GAAuC,SAAAD,GAC3ClxB,GAAMgC,QACNkvB,EAAQ,IAEJE,GAAyC,SAAAF,GAC7ClxB,GAAM2D,WAAWhE,GAAUE,OAC3BG,GAAMgC,QACNkvB,KAEWG,GAAqB,WAChC,IAAMnnB,EAAWuO,cADqB,EAclCX,qBAAWpC,IAduB,IAGpCtb,MACE8L,EAJkC,EAIlCA,OACAH,EALkC,EAKlCA,cACAC,EANkC,EAMlCA,gBACAC,EAPkC,EAOlCA,qBACAZ,EARkC,EAQlCA,QACAC,EATkC,EASlCA,KACAZ,EAVkC,EAUlCA,WACA8B,EAXkC,EAWlCA,qBAEQkS,EAb0B,EAapCxO,SAboC,EAeV+P,oBAAS,GAfC,oBAe/BnU,EAf+B,KAevB4jB,EAfuB,OAgBMzP,oBAAS,GAhBf,oBAgB/BqX,EAhB+B,KAgBfC,EAhBe,OAiBJtX,mBAASra,GAAiBD,GAAUE,QAjBhC,oBAiB/BiC,EAjB+B,KAiBpB0vB,EAjBoB,OAkBZvX,mBAAqBva,GAAWQ,SAlBpB,oBAkB/B9F,EAlB+B,KAkBxBq3B,EAlBwB,OAmBdxX,mBAAoBta,GAAUE,OAnBhB,oBAmB/BM,EAnB+B,KAmBzBuxB,EAnByB,OAoBNzX,mBAAS,GApBH,oBAoB/BvC,EApB+B,KAoBrBia,EApBqB,OAqBd1X,mBAAS,OArBK,oBAqB/B2X,EArB+B,KAqBzBC,EArByB,KAuBhCC,EAAiB/b,uBAAY,WACjCwb,GAAkB,SAAAQ,GAAI,OAAKA,OAC1B,IACGnJ,EAAe7S,uBAAY,SAAC5V,GAChCH,GAAM2D,WAAWxD,KAChB,IACGuoB,EAAc3S,uBAAY,WAC9B,OAAQ3b,GACN,KAAKsF,GAAW0B,QACdpB,GAAMsnB,QACN,MAEF,KAAK5nB,GAAWkC,OACd5B,GAAMonB,SACN,MAEF,KAAK1nB,GAAWQ,QACdF,GAAMgC,WAGT,CAAC5H,IACE43B,EAAsBjc,uBAAY,SAAC5T,GAAqB,IAAD,EAjGxC,SAACA,GAAD,OACrBA,GAAW,GAAK,CAACuuB,GAASvuB,GAAU,OAAS,CAAC2B,KAAKqsB,KAAKhuB,GAAU,OAiG5C8vB,CAAe9vB,GADwB,oBACpDgB,EADoD,KAC/CyuB,EAD+C,KAE3DJ,EAAaruB,GACb0uB,EAAQD,KACP,IACGM,EAAkCnc,uBACtC,SAAAzU,GACEmwB,EAASnwB,EAAOlH,OAChB43B,EAAoB1wB,EAAOQ,aAE7B,CAACkwB,IAEGG,EAAiCpc,uBACrC,SAAAzU,GACEowB,EAAQpwB,EAAOnB,MACf6xB,EAAoB1wB,EAAOlB,YAE7B,CAAC4xB,IAEGI,EAAiCrc,uBACrC,SAAAzU,GACE0wB,EAAoB1wB,EAAOQ,aAE7B,CAACkwB,IAEGK,EAAmCtc,uBACvC,SAACzU,EAAQqS,GACP,IAAIqN,EAAMhb,EACVksB,EAAY5wB,GACRA,EAAOnB,OAASR,GAAUE,OAC5B6Y,EAAU,CACRja,KAAMW,EAAYgK,aAClB0I,KAAM,CACJ6B,YAAaA,GAAe,IAAIpX,KAChC6D,SAAUkB,EAAOlB,SACjBwT,KAAmC,IAA7BtS,EAAOf,uBAGjBygB,EACU,IAAM,EACdhhB,GAAM2D,WAAWhE,GAAUI,MAE3BC,GAAM2D,WAAWhE,GAAUG,OAE7BoK,EAAShO,EAAcE,eAEvB4D,GAAM2D,WAAWhE,GAAUE,OAE7B,IACI8K,EADAD,EAAgB,GAEhB4nB,OAA6B/V,EAC7BgB,EAAU0T,GACVsB,OAA6ChW,EAEjD,OADA5R,EAAI,UAAMqW,EAAN,qBACIhhB,GAAMG,MACZ,KAAKR,GAAUE,MACb6K,EAAQ,kBACR,MAEF,KAAK/K,GAAUG,MACb4K,EAAQ,sBACR4nB,EAAS,kCACT/U,EAAU4T,GACVoB,EAAanB,GACb,MAEF,KAAKzxB,GAAUI,KACb2K,EAAQ,qBACR4nB,EAAS,kCACT/U,EAAU4T,GACVoB,EAAanB,ICvND,SAAC,GAOJ,IANjB1mB,EAMgB,EANhBA,MACAC,EAKgB,EALhBA,KAKgB,IAJhB2nB,cAIgB,MAJP,GAIO,EAHhBhoB,EAGgB,EAHhBA,KACAiT,EAEgB,EAFhBA,QACAgV,EACgB,EADhBA,WAEIC,EAAa,EACbC,EAAoC,KACxC,GAAgC,YAA5BC,aAAaC,WAA0B,CACzC,IAAMC,EAAe,IAAIF,aAAahoB,EAAO,CAC3CC,KAAK,GAAD,OAAKA,EAAL,YAAa2nB,GACjBhoB,SAEI4mB,EAAU,WAAc,IAAb2B,EAAY,uDAAN,EACjBA,EACFJ,EAAarwB,YAAW,WACtBwwB,EAAaE,QACbL,EAAa,OACN,IAANI,GAEHD,EAAaE,SAGjBF,EAAaG,QAAU,WACF,IAAfP,GACFA,IACAjV,EAAQ2T,KAERuB,GAAcpwB,aAAaowB,GAC3BF,GAAcA,EAAWrB,UAI7BjmB,GAAc,CAAEP,QAAOC,OAAML,SDwL3B0oB,CAAO,CACLtoB,QACAC,OACA2nB,SACAhoB,KAAM2oB,KACN1V,UACAgV,iBAGJ,CAAC7Z,EAAWwZ,EAAalsB,EAAiBkE,IAEtCgpB,EAAcnd,uBAAY,WAC9B/V,GAAM2D,WAAWhE,GAAUE,OAAO,KACjC,IACGszB,GAAepd,uBAAY,WAC/B2C,EAAU,CAAEja,KAAMW,EAAY4I,kBAC7B,CAAC0Q,IACE0a,GAAuCrd,uBAC3C,SAAAzU,GACE,IAAIoJ,EAAgB,kBAChBsW,EAAMhb,EACFlE,EAAcR,EAAdQ,UAKJ4I,EAHApJ,EAAOnB,OAASR,GAAUE,QAC5BmhB,EACU,IAAM,EACT,4BAAwBtW,GAExB,6BAAyBA,GAG3B,yBAAqBA,GAE5B,IAAMC,EAAI,UAAMqW,EAAN,qBACVtI,EAAU,CACRja,KAAMW,EAAY+V,aAClB9a,QAAS,CACPqQ,QACAC,OACA7I,iBAIN,CAAC4W,EAAW1S,IAERqtB,GAAuCtd,uBAC3C,SAAAzU,GACEoX,EAAU,CACRja,KAAMW,EAAYgQ,iBAGtB,CAACsJ,IAGHlC,qBAAU,WAYR,OAXAxW,GAAMszB,GAAG,OAAQlB,GACjBpyB,GAAMszB,GAAG,QAASpB,GAClBlyB,GAAMszB,GAAG,QAASF,IAClBpzB,GAAMszB,GAAG,OAAQpB,GACjBlyB,GAAMszB,GAAG,OAAQD,IACjBrzB,GAAMszB,GAAG,QAASpB,GAClBlyB,GAAMszB,GAAG,QAASD,IAClBrzB,GAAMszB,GAAG,SAAUpB,GACnBlyB,GAAMszB,GAAG,SAAUF,IACnBpzB,GAAMszB,GAAG,SAAUjB,GACnBryB,GAAMszB,GAAG,cAAenB,GACjB,WACLnyB,GAAMuzB,wBAEP,CACDlB,EACAF,EACAD,EACAE,EACAgB,GACAC,KAEF7c,qBAAU,WACRkb,EAAQ1xB,GAAMG,MACdsxB,EAASzxB,GAAM5F,OACf43B,EAAoBhyB,GAAM8B,WACtB9B,GAAMW,gBAAkB+D,IAC1BzC,KAAEC,OAAM,WACNmwB,EAAaryB,GAAMsB,WAErBtB,GAAMW,gBAAiB,KAExB,CAAC+D,EAAY2tB,EAAcL,IAC9Bxb,qBAAU,WACR,IAAMgd,EAAQjjB,OAASuD,OAAO,cAC1B5N,GAAUH,IAAkBytB,IAC9B9a,EAAU,CACRja,KAAMW,EAAYmK,eAClBlP,QAAS,CAAE0L,cAAeytB,KAE5BxzB,GAAM2D,WAAWhE,GAAUE,UAE5B,CAAC6Y,EAAWxS,EAAQH,IACvByQ,qBAAU,WACwB,WAA5Bkc,aAAaC,YACfD,aAAajkB,sBAEd,IACH+H,qBAAU,WACR,IAAIid,EAAUtzB,IAASR,GAAUE,MAAQ,OAAS,OAC9C6zB,EAAYvzB,IAASR,GAAUE,MAAQ,OAAS,OAChD8zB,EAAY,OAChB,GAAa,QAAT/B,EAAgB,CAAC,IAAD,EACK,CAAC8B,EAAWD,GAAlCA,EADiB,KACRC,EADQ,KAElBC,EAAY,OAEd,OAAQv5B,GACN,KAAKsF,GAAW0B,QACdovB,GAAOoD,MAAM9xB,EAAW,CACtB2xB,UACAC,YACAC,cAEF,MAEF,KAAKj0B,GAAWkC,OACd4uB,GAAOoD,MAAM,IAAK,CAAEH,UAASC,YAAWC,cACxC,MAEF,QACEnD,GAAOqD,WAGV,CAAC1zB,EAAM2B,EAAW1H,EAAOw3B,IAC5Bpb,qBAAU,WACR,IAAMpW,EAAoC,GAAzBR,GAAiBO,GAElCwxB,EAAY,IAA2B,IAAlBvxB,GADA,QAATwxB,EAA6B,GAAZ9vB,EAAiBA,IACD1B,EAAW,OACvD,CAACD,EAAM2B,EAAW8vB,IACrBpb,qBAAU,WACRkC,EAAU,CACRja,KAAMW,EAAYuK,mBAClBtP,QAAS,CAAE+L,eAAgBhM,OAE5B,CAACse,EAAWte,IACfoc,qBAAU,WACRkC,EAAU,CACRja,KAAMW,EAAYwK,kBAClBvP,QAAS,CAAEgM,cAAelG,OAE3B,CAACuY,EAAWvY,IACf,IAAM4pB,GAAehU,uBAAY,WAC/B2T,GAAU,SAAAqI,GAAI,OAAKA,OAClB,IACGpa,GAASvd,IAAUsF,GAAW0B,QAAUsW,EAAW,EACzD,IAAKhT,EACH,OAAO,KAET,IAAMovB,GAAYxuB,EAAI,WACdA,EAAKkhB,IADS,YACFvkB,KAAE8L,IAClBzI,EACA,gCACA,oBAJkB,cAKbA,EAAK4iB,SACV,GACE6L,GAAczuB,EAChBrD,KAAE+xB,SAAF,WAAe1uB,EAAKkhB,IAApB,YAA2BlhB,EAAK4iB,SAAW,CAAEjX,OAAQ,KACrD,GACEgjB,GAAc/c,OAAOzT,OAAO+C,GAAsB4oB,MAAK,SAAAjsB,GAAG,OAAIA,EAAM,KAC1E,OACE,kBAAC+X,GAAA,EAAD,CAAM1Q,UAAW8O,KAAW+D,KAAO6W,IAAK,eACtC,kBAAC,KAAD,CACEC,QAAS,CAAEC,QAASj0B,IAASR,GAAUE,MAAQ,MAAQ,UAEvD,kBAAC,KAAD,CACE8X,OAAQA,GACRD,SAAUA,EACV4K,OAAQloB,IAAUsF,GAAWQ,WAGjC,kBAACib,GAAA,EAAD,CAAYoC,QAASwM,IACnB,yBAAKvf,UAAU,UACb,kBAAC,GAAD,CAAY1E,OAAQA,IACpB,kBAACmS,GAAA,EAAD,CAAYzN,UAAW8O,KAAW+D,KAAOgX,aAAc,SACrD,kBAACC,GAAA,EAAD,CACE/W,QAAS/F,GACT1R,OAAQwrB,EACR1U,OAAQkV,EACR3Z,UAAU,WAEV,kBAAC2Q,GAAA,EAAD,CAAgBrL,MAAM,QAAQnG,KAAK,KAAKyR,OAAK,GAC3C,kBAAC,GAAD,CAAW5oB,KAAMA,KAEnB,kBAAC8oB,GAAA,EAAD,KACE,kBAAC,GAAD,CAAW9oB,KAAMR,GAAUE,MAAO4oB,SAAUG,IAC5C,kBAAC,GAAD,CAAWzoB,KAAMR,GAAUG,MAAO2oB,SAAUG,IAC5C,kBAAC,GAAD,CAAWzoB,KAAMR,GAAUI,KAAM0oB,SAAUG,MAG/C,kBAAC1Q,GAAA,EAAD,CAAiBC,UAAU,UAAUoF,QAAS/F,IAC5C,kBAACiE,GAAA,EAAD,CACEjR,UAAW8O,KAAW+D,KAAOkX,MAAO,CAClC,mBAAoBn6B,IAAUsF,GAAW0B,WAG1CU,IAGL,kBAACoW,GAAA,EAAD,CAAiBqF,QAAS/F,GAAiBW,UAAU,WAClDyZ,GAEH,kBAAC1Z,GAAA,EAAD,CAAiBC,UAAU,SAASoF,QAAS/F,IAC1Cpd,IAAUsF,GAAW0B,QACpB,kBAACgb,GAAA,EAAD,CAAQqB,MAAM,SAASF,QAASmL,GAC9B,kBAAC,KAAD,CAAiBpe,KAAMkd,QAGvB,kBAACpL,GAAA,EAAD,CAAQqB,MAAM,UAAUF,QAASmL,GAC/B,kBAAC,KAAD,CAAiBpe,KAAMmd,SAK9BtnB,IAASR,GAAUE,OAClB,kBAACqY,GAAA,EAAD,CAAiBC,UAAU,SAASoF,QAAS/F,IAC3C,kBAAC4E,GAAA,EAAD,CACEqB,MAAM,QACNF,QAAS2V,EACTxoB,MAAM,kBAEN,kBAAC,KAAD,CAAiBJ,KAAMkqB,KAAQhqB,UAAU,eACzC,kBAAC,GAAD,CAAQpQ,MAAO0rB,GAAYmB,UAKhC5hB,GACC,kBAAC,KAAD,CACEkY,QAAS/F,GACThN,UAAW8O,KAAW+D,KAAOoX,WAE7B,kBAAC,KAAD,CACEnqB,KAAM,kBAAC,KAAD,CAAiBA,KAAMoqB,OAC7BC,SAAUxB,GACVzoB,MAAOopB,GACPc,aAAc,kBAAC,KAAD,CAAiBtqB,KAAMkZ,QAEpCuQ,IAA4B,kBAACjV,GAAA,EAAD,CAASrgB,KAAK,WAIhDw1B,IACC,yBAAKzpB,UAAU,QACb,yBACEA,UAAW8O,KACT,QACA,aACA,YACA,cACA,UACA,SACA,mBACA+D,KAAOwX,OAGT,kBAAC,KAAD,CACErqB,UAAU,OACVF,KAAMwqB,OAER,0BAAMtqB,UAAU,QAAhB,SAEF,6BACG0M,OAAO6d,QAAQvuB,GACb+N,QAAO,qDAAuB,KAC9BvW,KAAI,oCAAEmC,EAAF,KAAQgD,EAAR,YACH,kBAACqa,GAAA,EAAD,CAAOle,IAAKa,EAAMsd,MAAM,QAAQjT,UAAU,UACxC,kBAAC,GAAD,CAAWrK,KAAMA,IADnB,IAC0CgD,SAOrD6C,EAAkB,GACjB,kBAACwX,GAAA,EAAD,CAAOC,MAAM,SAASjT,UAAU,QAC9B,kBAAC,GAAD,MADF,IACa,kBAAC,KAAD,CAAiBF,KAAMkZ,OADpC,IACiDxd,GAGlD/D,KAAEuY,MAAMxU,GAAiBhI,KAAI,SAAAyc,GAAC,OAC7B,kBAAC,GAAD,CACEnb,IAAKmb,EACLrgB,MACEqgB,EAAIxU,EAAuB6f,GAAYmB,MAAQnB,GAAYiB,MAE7DF,GAAIpM,EAAI,IAAMzU,EAAkB,GAAKyU,EAAIzU,EAAkB,SAKnE,kBAAC6X,GAAA,EAAD,CAAU/X,OAAQA,GAChB,kBAACyV,GAAA,EAAD,CAAU/Q,UAAU,YAClB,kBAAC,GAAD,U,oBEtfG+U,GAAe,SAC1B7Z,EACAJ,EACA4J,GAEA,OAAIxJ,EAAiBiM,IAAIrM,IAvBInC,EAyBzBlB,KAAE8L,IAAIrI,EAAiBqI,IAAIzI,GAA3B,4BAAuD4J,GAAM,KAxBjEjN,KAAEwF,MAAMtE,GACLhG,QAAQ,aAAc,IACtBA,QAAQ,OAAQ,KAChB+V,MAAM,KACNvK,UACA3K,IAAIgF,QACJwc,MACAzhB,SAoBM,EA5BmB,IAACoF,GA+BlBuc,GAAwB,SACnCha,EACAN,EACA8J,GAHmC,OAtBN,SAC7BxJ,EACAN,EACA8J,GAH6B,OAK7BjN,KAAEwF,MAAMrC,GACLpH,KAAI,SAAAsH,GAAI,OAAIia,GAAa7Z,EAAkBJ,EAAM4J,MACjDsQ,MACAzhB,QAmBH0hB,CACE/Z,EACAN,EAAMmP,QAAO,SAAAlQ,GAAI,OAAIA,EAAKmM,aAC1BtB,IC3CSiQ,GAAsC,SAAAC,GACjD,IAAMxU,EAAMwU,EAAMxU,KAAN,oCAA0C9G,KAAKub,UAC3D,OAAO,kBAAC,KAAD,iBAAYD,EAAZ,CAAmBxU,IAAKA,EAAK0U,QAAM,EAAC9U,UAAU,WCejDwqB,GAAsC,SAAC,GAA2B,IAAzBlwB,EAAwB,EAAxBA,KAAMM,EAAkB,EAAlBA,MAAO3G,EAAW,EAAXA,KAC1D,OACE,kBAAC+sB,GAAA,EAAD,CAAKyJ,GAAG,KAAKjJ,GAAG,IAAIkJ,GAAG,KACrB,kBAACha,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAY3Q,UAAU,gBAAgBE,MAAO5F,EAAKF,UAChD,kBAAC,GAAD,CAAcgG,IAAK9F,EAAKmb,QACxB,kBAAC,KAAD,CAAME,GAAE,iBAAYrb,EAAKoK,KACtBpK,EAAKF,WAGV,kBAAC2W,GAAA,EAAD,KACY,cAAT9c,EACC,kBAAC,GAAD,CAAe2G,MAAOA,EAAOkS,KAAK,OAElC,kBAAC,GAAD,CAAalS,MAAOA,EAAOkS,KAAK,WAM/B6d,GAAsB,WAAO,IAAD,EAC0Crd,qBAAWpC,IAApFtb,MAASgL,EADsB,EACtBA,MAAkBod,EADI,EACftnB,QAAWsnB,QAAW9c,EADP,EACOA,iBAAkB1L,EADzB,EACyBA,WADzB,EAELigB,mBAAoB,WAFf,oBAEhC8T,EAFgC,KAErBC,EAFqB,KAGjCoH,EAAanf,mBAAQ,kBFxCEpK,EEwCmBzG,EFvChDnD,KAAEwF,MAAMoE,GACLhE,QAAO,SAAAxD,GAAI,OAAKA,EAAKsS,eACrBuI,QAAQ,eAAenhB,QAHE,IAAC8N,IEwC2B,CAACzG,IACnDiwB,EAAcpf,mBAAQ,kBAAMhU,KAAEwF,MAAM+a,GACvCjO,QAAO,SAAAzP,GAAI,OAAI7C,KAAE0P,IAAIyjB,EAAYtwB,EAAKoK,OACtClR,KAAI,SAAA8G,GAAI,MAAK,CAAEA,OAAMM,MAAOgwB,EAAWtwB,EAAKoK,IAAKoT,OAAQ5C,GAAsBha,EAAkB0vB,EAAWtwB,EAAKoK,IAAKlM,OAAOhJ,QAC7H4c,OAAO,UACP7Y,UAAS,CAACq3B,EAAY5S,EAAS9c,EAAkB1L,IAC9C4uB,EAAe7S,uBAAY,SAACtX,GAChCuvB,EAAavvB,KACZ,CAACuvB,IACJ,OACE,oCACE,kBAACsH,GAAA,EAAD,CAAYrH,IAAI,OACd,kBAACsH,GAAA,EAAD,CAAgB7qB,MAAM,OAAOujB,IAAKC,KAAM/N,GAAI,KAAK,kBAAC,KAAD,CAAiB7V,KAAMkrB,QACxE,kBAACD,GAAA,EAAD,CAAgB/qB,UAAU,UAAUyjB,IAAI,OAAOwH,QAAM,GAAC,kBAAC,KAAD,CAAiBnrB,KAAM6jB,OAA7E,WACA,kBAAC,GAAD,CAAmB1vB,KAAMsvB,EAAWtF,SAAUG,IAC9C,kBAAC,GAAD,CAActR,KAAK,QAErB,kBAACiU,GAAA,EAAD,CAAK/gB,UAAU,QACZ6qB,EAAYr3B,KAAI,WAAkByc,GAAlB,IAAG3V,EAAH,EAAGA,KAAMM,EAAT,EAASA,MAAT,OACf,kBAAC,GAAD,CAAW9F,IAAKmb,EAAG3V,KAAMA,EAAMM,MAAOA,EAAO3G,KAAMsvB,UCrDhD2H,GAAyB,WAC9Bjd,cACN,IAAM5e,EAAMW,IACJ0P,EAAa4N,qBAAWpC,IAAxBxL,SAMR,OALAsM,qBAAU,WACJ3c,GAAOqQ,GACTA,EAAS,CAAEzL,KAAMW,EAAYuH,QAAStM,QAAS,CAAER,WAElD,CAACqQ,EAAUrQ,IACP,sCCET87B,IAASC,OACP,kBAAC,IAAD,CAAU92B,MAAOA,GACf,mBCVyB,kBAC3B,yBAAK0L,UAAU,gBACb,kBAAC,IAAD,CAAgBA,UAAU,cAC1B,kBAAC,KAAD,KACE,kBAAC,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,KAAD,CAAOqrB,OAAK,EAAC74B,KAAK,IAAI84B,UAAW1H,KACjC,kBAAC,KAAD,CAAOyH,OAAK,EAAC74B,KAAK,SAAS84B,UAAWX,KACtC,kBAAC,KAAD,CAAOU,OAAK,EAAC74B,KAAK,cAAc84B,UAAWvG,KAC3C,kBAAC,KAAD,CAAOsG,OAAK,EAAC74B,KAAK,2BAA2B84B,UAAWvG,KACxD,kBAAC,GAAD,WDDJ,MACA,mBEfgC,WAClC,IAAMrlB,EAAWuO,cACX5e,EAAMW,IACNT,EAAMkC,IACNK,EAAcK,IAOpB,OANA6Z,qBAAU,WACR3c,GAAOqQ,EAASxP,EAAeC,eAC9B,CAACd,EAAKqQ,IACTsM,qBAAU,WACR3c,GAAOE,GAAOmQ,EAAS9O,EAAiBT,UAAU,CAAEqB,UAAWgH,OAAOjJ,QACrE,CAACF,EAAKE,EAAKmQ,EAAU5N,IACjB,uCFIL,OAEFy5B,SAASC,eAAe,SzFYC,WAAO,IACxB9rB,EAAapL,EAAboL,SACFrQ,EAAM4F,EAAelG,EAAWmZ,KAGhC3Y,EAAM0F,EAAelG,EAAWqZ,KAuBtC/Y,GAAOqQ,EAAS1Q,EAAeC,OAAOI,IAGtCE,GAAOmQ,EAASvO,EAAiBC,OAAO7B,I4FjExCyb,I,mBCDFnc,EAAOC,QAAU,CAAC,IAAM,sBAAsB,aAAe,+BAA+B,SAAW,2BAA2B,MAAQ,wBAAwB,iBAAmB,mCAAmC,gBAAkB,kCAAkC,KAAO,0B","file":"static/js/main.3914261e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"fresh\":\"Tomato_fresh__2s5Ye\",\"stale\":\"Tomato_stale__3bjHh\",\"bl\":\"Tomato_bl__2-LRw\",\"br\":\"Tomato_br__2_ZQQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"UserStory_header__3lGFX\",\"display_medal\":\"UserStory_display_medal__3t53K\",\"medal\":\"UserStory_medal__2Zi1f\",\"is_closed\":\"UserStory_is_closed__2ABQp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"TaskTimerButton_btn__3yv2h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gold\":\"UserTasks_gold__3HGjY\",\"silver\":\"UserTasks_silver__1pI-2\",\"bronze\":\"UserTasks_bronze__3Y2bu\",\"custom_input_td\":\"UserTasks_custom_input_td__2hLT8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"total\":\"TaskTotalHours_total__sFAJH\",\"is_over\":\"TaskTotalHours_is_over__3dHJn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Controller_header__33lvE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_group\":\"ToggleNumberInput_input_group__1wkB8\"};","module.exports = __webpack_public_path__ + \"static/media/tomato.c392a271.png\";","// import _ from \"lodash\";\n\nimport { store } from \"./store\";\nimport { settingActions } from \"../features/setting/settingSlice\";\nimport { milestoneActions } from \"../features/milestone/milestoneSlice\";\nexport enum StorageKey {\n  URL = \"taiga_url\",\n  TIMER_ID = \"taiga_timer_id\",\n  PID = \"taiga_pid\",\n  MID = \"taiga_mid\",\n  TASK_ID = \"taiga_task_id\",\n  CUSTOM_EID = \"taiga_custom_eid\",\n  CUSTOM_RID = \"taiga_custom_rid\",\n  BIZ_DAYS = \"taiga_biz_days\",\n  REJECT_TASK_STATUS_IDS = \"reject_task_status_ids\",\n  USERNAME = \"taiga_username\",\n  PASSWORD = \"taiga_password\",\n  POMODORO_DATE = \"taiga_pomodoro_date\",\n  POMODORO_NUMBER = \"taiga_pomodoro_number\",\n  POMODORO_USED_NUMBER = \"taiga_pomodoro_used_number\",\n  TIMELIMIT_CLOSE_TASK = \"taiga_timelimit_close_task\"\n}\n\nconst _getFromStorage = (key: string) => localStorage.getItem(key) || \"\";\nexport const getFromStorage = (key: StorageKey) => _getFromStorage(key);\nexport const getFromStorageWithSubkey = (key: StorageKey, subkey: string) =>\n  subkey ? _getFromStorage(`${subkey}/${key}`) : \"\";\n\nexport const setToStorage = (key: string, item: string) => {\n  localStorage.setItem(key, item);\n};\nexport const setToStorageWithSubkey = (\n  key: StorageKey,\n  subkey: string,\n  item: string\n) => (subkey ? setToStorage(`${subkey}/${key}`, item) : null);\nexport const syncStorage = () => {\n  const { dispatch } = store\n  const url = getFromStorage(StorageKey.URL);\n  // const timer_id = getFromStorage(StorageKey.TIMER_ID);\n  // const pid = getFromStorage(StorageKey.PID);\n  const mid = getFromStorage(StorageKey.MID);\n  // const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n  // const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n  // const biz_days = _.compact(\n  //   getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n  // ).sort();\n  // const reject_task_status_ids = _.compact(\n  //   getFromStorageWithSubkey(StorageKey.REJECT_TASK_STATUS_IDS, pid).split(\",\")\n  // );\n\n  // const isOpen = !(url && pid && mid && custom_eid && custom_rid);\n\n  // const pomodoro_date = getFromStorage(StorageKey.POMODORO_DATE);\n  // const pomodoro_number = Number(\n  //   getFromStorage(StorageKey.POMODORO_NUMBER) || \"0\"\n  // );\n  // const pomodoro_used_number = Number(\n  //   getFromStorage(StorageKey.POMODORO_USED_NUMBER) || \"0\"\n  // );\n  // const task_id = getFromStorage(StorageKey.TASK_ID);\n  // timer_id &&\n  //   dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id } });\n  // url && dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n  url && dispatch(settingActions.setUrl(url))\n  // pid && dispatch({ type: ActionTypes.SET_PID, payload: { pid } });\n  // mid && dispatch({ type: ActionTypes.SET_MID, payload: { mid } });\n  mid && dispatch(milestoneActions.setMid(mid))\n  // custom_eid &&\n  //   dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n  // custom_rid &&\n  //   dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  // biz_days.length &&\n  //   dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n  // reject_task_status_ids.length &&\n  //   dispatch({\n  //     type: ActionTypes.SET_REJECT_TASK_STATUS_IDS,\n  //     payload: { reject_task_status_ids }\n  //   });\n\n  // task_id && dispatch({ type: ActionTypes.SET_TASK_ID, payload: { task_id } });\n  // isOpen && dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n  // pomodoro_date &&\n  //   dispatch({\n  //     type: ActionTypes.RESTORE_POMODORO,\n  //     payload: { pomodoro_date, pomodoro_number, pomodoro_used_number }\n  //   });\n  // dispatch({ type: ActionTypes.LOADED });\n  // dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n}","import {\n  createAction,\n  createReducer,\n} from \"@reduxjs/toolkit\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from '../../app/store'\ninterface State {\n  url: string;\n  pid: string;\n  mid: string;\n  custom_eid: string;\n  custom_rid: string;\n}\nconst initialState: State = {\n  url: \"\",\n  pid: \"\",\n  mid: \"\",\n  custom_eid: \"\",\n  custom_rid: \"\"\n}\nexport const settingActions = {\n  setUrl: createAction<string, \"/setting/setUrl\">(\"/setting/setUrl\")\n}\nexport const settingReducer = createReducer(initialState, builder => builder\n  .addCase(settingActions.setUrl, (state, { payload: url }) => ({\n    ...state, url\n  })))\nexport type SettingActionTypes = ReturnType<typeof settingActions.setUrl>\nexport const settingSelectors = {\n  urlSelector: (state: RootState) => state.setting.url\n}\n\nexport const useSettingSelector = {\n  useUrl: () => useSelector(settingSelectors.urlSelector)\n}\n","import {\n  createReducer,\n  createAction\n} from \"@reduxjs/toolkit\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../app/store\"\nimport { IUser } from \"../user/userSlice\";\nexport interface IProject {\n  id: number;\n  name: string;\n  members: IUser[];\n}\nexport interface IProjectExtraInfo {\n  id: number;\n  name: string;\n  slug: string;\n}\ninterface State {\n  list: IProject[];\n  loading: boolean;\n  current: IProject | null;\n}\nconst initialState: State = {\n  list: [],\n  loading: false,\n  current: null\n}\nexport const projectActions = {\n  fetchList: createAction<void, \"/project/fetchList\">(\"/project/fetchList\"),\n  setList: createAction<IProject[], \"/project/setList\">(\"/project/setList\")\n}\nexport const projectReducer = createReducer(initialState, builder => builder\n  .addCase(projectActions.fetchList, (state) => ({\n    ...state, loading: true\n  }))\n  .addCase(projectActions.setList, (state, { payload: list }) => ({\n    ...state, list, loading: false\n  }))\n)\n\nexport type ProjectActionTypes = ReturnType<typeof projectActions.fetchList> | ReturnType<typeof projectActions.setList>\nexport const projectSelectors = {\n  listSelector: (state: RootState) => state.project.list\n}\n\nexport const useProjectSelector = {\n  useList: () => useSelector(projectSelectors.listSelector)\n}","import { createReducer, createAction } from \"@reduxjs/toolkit\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../app/store\";\nexport interface IUserStoryExtraInfo {\n  id: number;\n  subject: string;\n  epics: any;\n  ref: number;\n}\ntype ITag = [string, string | null]\nexport interface IUserStory {\n  id: number;\n  subject: string;\n  tags: ITag[];\n}\ninterface State {\n  list: IUserStory[];\n  loading: boolean;\n}\nconst initialState: State = {\n  list: [],\n  loading: false\n}\nexport const userStoryActions = {\n  fetchList: createAction<{ milestone: number }, \"/userStory/fetchList\">(\"/userStory/fetchList\"),\n  setList: createAction<IUserStory[], \"/userStory/setList\">(\"/userStory/setList\"),\n  addTag: createAction<{ milestone: number, tag: string }, \"/userStory/addTag\">(\"/userStory/addTag\"),\n  removeTag: createAction<{ milestone: number, tag: string }, \"/userStory/removeTag\">(\"/userStory/removeTag\"),\n}\nexport const userStoryReducer = createReducer(initialState, builder => builder\n  .addCase(userStoryActions.fetchList, (state) => ({\n    ...state, loading: true\n  }))\n  .addCase(userStoryActions.setList, (state, { payload: list }) => ({\n    ...state, loading: false, list\n  }))\n)\nexport type UserStoryActionTypes = ReturnType<typeof userStoryActions.fetchList> | ReturnType<typeof userStoryActions.setList> | ReturnType<typeof userStoryActions.addTag> | ReturnType<typeof userStoryActions.removeTag>\nconst userStorySelectors = {\n  listSelector: (state: RootState) => state.userStory.list\n}\nexport const useUserStorySelector = {\n  useList: () => useSelector(userStorySelectors.listSelector)\n}\n\n\n","import { createReducer, createAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../../app/store\";\nimport { useSelector } from \"react-redux\";\ninterface State {\n  mid: string;\n}\nconst initialState: State = {\n  mid: \"\"\n}\nexport const milestoneActions = {\n  setMid: createAction<string | number, \"/milestone/setMid\">(\"/milestone/setMid\")\n}\nexport const milestoneReducer = createReducer(initialState, builder => builder\n  .addCase(milestoneActions.setMid, (state, { payload: mid }) => ({\n    ...state, mid: String(mid)\n  }))\n)\nconst milestoneSelectors = {\n  midSelector: (state: RootState) => state.milestone.mid\n}\nexport const useMilestoneSelector = {\n  useMid: () => useSelector(milestoneSelectors.midSelector)\n}\n","import { createAction, createReducer } from \"@reduxjs/toolkit\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../app/store\";\ninterface State {\n  updatedTime: number;\n}\nconst initialState: State = {\n  updatedTime: 0\n}\nexport const commonActions = {\n  epicDone: createAction<void, \"/common/epicDone\">(\"/common/epicDone\"),\n  updateData: createAction<void, \"/common/updateData\">(\"/common/updateData\")\n}\nexport const commonReducer = createReducer(initialState, builder => builder\n  .addCase(commonActions.updateData, (state) => ({\n    ...state, updatedTime: Date.now()\n  }))\n)\nconst commonSelectors = {\n  updatedTimeSelector: (state: RootState) => state.common.updatedTime\n}\nexport const useCommonSelector = {\n  useUpdatedTime: () => useSelector(commonSelectors.updatedTimeSelector)\n}\nexport type CommonActionTypes = ReturnType<typeof commonActions.epicDone>\n  | ReturnType<typeof commonActions.updateData>\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport { settingReducer } from \"../features/setting/settingSlice\";\nimport { projectReducer } from \"../features/project/projectSlice\"\nimport { userStoryReducer } from \"../features/userStory/userStorySlice\";\nimport { milestoneReducer } from \"../features/milestone/milestoneSlice\";\nimport { commonReducer } from \"../features/common/commonSlice\";\n\nexport const rootReducer = combineReducers({\n  setting: settingReducer,\n  project: projectReducer,\n  userStory: userStoryReducer,\n  milestone: milestoneReducer,\n  common: commonReducer\n});\n","import { ProjectActionTypes, projectActions as project } from \"../features/project/projectSlice\";\nimport { SettingActionTypes, settingActions as setting } from '../features/setting/settingSlice'\nimport { CommonActionTypes, commonActions as common } from \"../features/common/commonSlice\"\nimport { UserStoryActionTypes, userStoryActions as userStory } from \"../features/userStory/userStorySlice\";\nexport type ActionTypes = ProjectActionTypes | SettingActionTypes | CommonActionTypes | UserStoryActionTypes\nexport const actions = {\n  common,\n  project,\n  setting,\n  userStory\n}\n","import { fromFetch } from \"rxjs/fetch\";\nimport { mergeMap } from \"rxjs/operators\";\nconst baseUrl = (url: string, path: string) => `${url.replace(/[¥/]$/, \"\")}/api/v1/${path}`;\nexport const fetchData = <T>(url: string, path: string, config?: RequestInit) => fromFetch(baseUrl(url, path),\n  { ...config, headers: { \"x-disable-pagination\": \"true\", ...config?.headers } }).pipe<T>(\n    mergeMap(res => res.json())\n  )","import { Epic, ofType } from \"redux-observable\";\nimport { catchError, switchMap, map } from 'rxjs/operators'\nimport { of } from \"rxjs\";\nimport { ActionTypes, actions } from \"../../app/actions\";\nimport { RootState } from \"../../app/store\";\nimport { fetchData } from \"../../util/fetch\";\nimport { IProject } from \"./projectSlice\";\nimport { commonActions } from \"../common/commonSlice\"\n\nconst fetchListEpic: Epic<ActionTypes, ActionTypes, RootState> = (action$, state$) => action$.pipe(\n  ofType(\"/project/fetchList\"),\n  switchMap(() => {\n    const { url } = state$.value.setting\n    return fetchData<IProject[]>(url, \"projects\")\n  }),\n  map(data => actions.project.setList(data)),\n  catchError(e => {\n    console.log(\"err\", e)\n    return of(commonActions.epicDone())\n  })\n)\nexport const projectEpic = [\n  fetchListEpic\n]","import { Epic, ofType } from \"redux-observable\";\nimport { catchError, switchMap, map } from \"rxjs/operators\";\nimport { of } from \"rxjs\";\nimport { ActionTypes, actions } from \"../../app/actions\";\nimport { RootState } from \"../../app/store\";\nimport { fetchData } from \"../../util/fetch\";\nimport { IUserStory } from \"./userStorySlice\";\nimport { commonActions } from \"../common/commonSlice\"\n\nconst fetchListEpic: Epic<ActionTypes, ActionTypes, RootState> = (action$, state$) => action$.pipe(\n  ofType(\"/userStory/fetchList\"),\n  switchMap((action) => {\n    const { url } = state$.value.setting\n    if (action.type === \"/userStory/fetchList\") {\n      const { milestone } = action.payload\n      return fetchData<IUserStory[]>(url, `userstories?milestone=${milestone}`)\n    } else {\n      return []\n    }\n  }),\n  map(data => actions.userStory.setList(data)),\n  catchError(e => {\n    console.log(\"err\", e)\n    return of(commonActions.epicDone())\n  })\n)\nexport const userStoryEpic = [\n  fetchListEpic\n]","import { combineEpics } from \"redux-observable\";\nimport { projectEpic } from \"../features/project/projectEpic\";\nimport { userStoryEpic } from \"../features/userStory/userStoryEpic\";\nexport const rootEpic = combineEpics(...projectEpic, ...userStoryEpic)\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { rootReducer } from \"./rootReducer\";\nimport { rootEpic } from \"./rootEpic\";\nimport { ActionTypes } from \"./actions\"\n\nexport type RootState = ReturnType<typeof rootReducer>\nconst epicMiddleware = createEpicMiddleware<ActionTypes, ActionTypes, RootState>()\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: [...getDefaultMiddleware(), epicMiddleware]\n})\nepicMiddleware.run(rootEpic)\nexport type AppDispatch = typeof store.dispatch","import {\n  IProject,\n  IMilestone,\n  ICustomAttr,\n  ITask,\n  ICustomValueMap,\n  ITaskStatus,\n  IUser\n} from \"./store\";\nimport { IPomodoroHistory, IDailyTotal } from \"./AppDb\";\nimport { TimerState, TimerMode } from \"./util/timer\";\n\nexport enum ActionTypes {\n  SET_TOKEN = \"SET_TOKEN\",\n  SET_TIMER_ID = \"SET_TIMER_ID\",\n  ADD_FB_TIMER = \"ADD_FB_TIMER\",\n  DEL_FB_TIMER = \"DEL_FB_TIMER\",\n  SET_URL = \"SET_URL\",\n  SIGN_IN = \"SIGN_IN\",\n  SET_AUTH_TOKEN = \"SET_AUTH_TOKEN\",\n  SET_AUTH_ERROR = \"SET_AUTH_ERROR\",\n  SIGN_OUT = \"SIGN_OUT\",\n  SET_PID = \"SET_PID\",\n  FETCH_PROJECT = \"FETCH_PROJECT\",\n  SET_PROJECT = \"SET_PROJECT\",\n  FETCH_MILESTONES = \"FETCH_MILESTONES\",\n  SET_MID = \"SET_MID\",\n  SET_MILESTONES = \"SET_MILESTONES\",\n  SET_MILESTONE = \"SET_MILESTONE\",\n  SET_CUSTOM_EID = \"SET_CUSTOM_EID\",\n  SET_CUSTOM_RID = \"SET_CUSTOM_RID\",\n  FETCH_CUSTOM_ATTRS = \"FETCH_CUSTOM_ATTRS\",\n  SET_CUSTOM_ATTRS = \"SET_CUSTOM_ATTRS\",\n  SET_CUSTOM_ATTR_E = \"SET_CUSTOM_ATTR_E\",\n  SET_CUSTOM_ATTR_R = \"SET_CUSTOM_ATTR_R\",\n  SET_BIZ_DAYS = \"SET_BIZ_DAYS\",\n  ADD_BIZ_DAY = \"ADD_BIZ_DAY\",\n  REMOVE_BIZ_DAY = \"REMOVE_BIZ_DAY\",\n  FETCH_TASKS = \"FETCH_TASKS\",\n  SET_TASKS = \"SET_TASKS\",\n  SET_TASK_ID = \"SET_TASK_ID\",\n  RESET_TASK_ID = \"RESET_TASK_ID\",\n  SET_TASK = \"SET_TASK\",\n  SET_USER_TASKS = \"SET_USER_TASKS\",\n  PATCH_TASK = \"PATCH_TASK\",\n  FETCH_TASK_STATUSES = \"FETCH_TASK_STATUSES\",\n  SET_TASK_STATUSES = \"SET_TASK_STATUSES\",\n  SET_ACTIVE_TASK_STATUSES = \"SET_ACTIVE_TASK_STATUSES\",\n  FETCH_CUSTOM_VALUE_MAP = \"FETCH_CUSTOM_VALUE_MAP\",\n  SET_CUSTOM_VALUE_MAP = \"SET_CUSTOM_VALUE_MAP\",\n  PATCH_CUSTOM_VALUE = \"PATCH_CUSTOM_VALUE\",\n  FETCH_USER = \"FETCH_USER\",\n  SET_USER = \"SET_USER\",\n  RESET_USER = \"RESET_USER\",\n  SET_REJECT_TASK_STATUS_IDS = \"SET_REJECT_TASK_STATUS_IDS\",\n  ADD_REJECT_TASK_STATUS_ID = \"ADD_REJECT_TASK_STATUS_ID\",\n  REMOVE_REJECT_TASK_STATUS_ID = \"REMOVE_REJECT_TASK_STATUS_ID\",\n  OPEN_CONTROLLER = \"OPEN_CONTROLLER\",\n  CLOSE_CONTROLLER = \"CLOSE_CONTROLLER\",\n  UPDATE_DATA = \"UPDATE_DATA\",\n  ADD_POMODORO = \"ADD_POMODORO\",\n  USE_POMODORO = \"USE_POMODORO\",\n  RESET_POMODORO = \"RESET_POMODORO\",\n  RESTORE_POMODORO = \"RESTORE_POMODORO\",\n  CALC_POMODORO_TOTAL = \"CALC_POMODORO_TOTAL\",\n  LOAD_POMODORO_TOTALS = \"LOAD_POMODORO_TOTALS\",\n  SET_POMODORO_TOTALS = \"SET_POMODORO_TOTALS\",\n  LOADED = \"LOADED\",\n  SET_POMODORO_STATE = \"SET_POMODORO_STATE\",\n  SET_POMODORO_MODE = \"SET_POMODORO_MODE\",\n  SET_TIMELIMIT_CLOSE_TASK = \"SET_TIMELIMIT_CLOSE_TASK\",\n  SET_IN_PROGRESS_TASK_STATUS_ID = \"SET_IN_PROGRESS_TASK_STATUS_ID\",\n  SET_POMODORO_LIVE_COUNT = \"SET_POMODORO_LIVE_COUNT\"\n}\n\nexport interface IAction {\n  type: ActionTypes;\n  payload?: any;\n  meta?: { [key: string]: any };\n}\nexport interface SET_TOKEN extends IAction {\n  type: ActionTypes.SET_TOKEN;\n  payload: { token: string | null };\n}\nexport interface SET_TIMER_ID extends IAction {\n  type: ActionTypes.SET_TIMER_ID;\n  payload: { timer_id: string | null };\n}\nexport interface ADD_FB_TIMER extends IAction {\n  type: ActionTypes.ADD_FB_TIMER;\n  payload: { title: string; body: string; remaining: number };\n}\nexport interface DEL_FB_TIMER extends IAction {\n  type: ActionTypes.DEL_FB_TIMER;\n}\nexport interface SET_URL extends IAction {\n  type: ActionTypes.SET_URL;\n  payload: { url: string };\n}\nexport interface SIGN_IN extends IAction {\n  type: ActionTypes.SIGN_IN;\n  payload: { username: string; password: string };\n}\nexport interface SET_AUTH_TOKEN extends IAction {\n  type: ActionTypes.SET_AUTH_TOKEN;\n  payload: { auth_token: string };\n}\nexport interface SET_AUTH_ERROR extends IAction {\n  type: ActionTypes.SET_AUTH_ERROR;\n}\nexport interface SIGN_OUT extends IAction {\n  type: ActionTypes.SIGN_OUT;\n}\n// export interface FETCH_PROJECTS extends IAction {\n//   type: ActionTypes.FETCH_PROJECTS;\n// }\n// export interface SET_PROJECTS extends IAction {\n//   type: ActionTypes.SET_PROJECTS;\n//   payload: { projects: IProject[] };\n// }\n\nexport interface SET_PID extends IAction {\n  type: ActionTypes.SET_PID;\n  payload: { pid: string };\n}\nexport interface FETCH_PROJECT extends IAction {\n  type: ActionTypes.FETCH_PROJECT;\n  payload: { pid: string };\n}\nexport interface SET_PROJECT extends IAction {\n  type: ActionTypes.SET_PROJECT;\n  payload: { project: IProject };\n}\nexport interface FETCH_MILESTONES extends IAction {\n  type: ActionTypes.FETCH_MILESTONES;\n  payload: { project: string };\n}\nexport interface SET_MILESTONES extends IAction {\n  type: ActionTypes.SET_MILESTONES;\n  payload: { milestones: IMilestone[] };\n}\n\nexport interface SET_MID extends IAction {\n  type: ActionTypes.SET_MID;\n  payload: { mid: string };\n}\nexport interface SET_MILESTONE extends IAction {\n  type: ActionTypes.SET_MILESTONE;\n  payload: { milestone: IMilestone };\n}\n\nexport interface SET_CUSTOM_EID extends IAction {\n  type: ActionTypes.SET_CUSTOM_EID;\n  payload: { custom_eid: string };\n}\n\nexport interface SET_CUSTOM_RID extends IAction {\n  type: ActionTypes.SET_CUSTOM_RID;\n  payload: { custom_rid: string };\n}\n\nexport interface FETCH_CUSTOM_ATTRS extends IAction {\n  type: ActionTypes.FETCH_CUSTOM_ATTRS;\n  payload: { project: string };\n}\nexport interface SET_CUSTOM_ATTRS extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTRS;\n  payload: { custom_attrs: ICustomAttr[] };\n}\nexport interface SET_CUSTOM_ATTR_E extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTR_E;\n  payload: { custom_attr_e: ICustomAttr };\n}\nexport interface SET_CUSTOM_ATTR_R extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTR_R;\n  payload: { custom_attr_r: ICustomAttr };\n}\nexport interface SET_BIZ_DAYS extends IAction {\n  type: ActionTypes.SET_BIZ_DAYS;\n  payload: { biz_days: string[] };\n}\n\nexport interface ADD_BIZ_DAY extends IAction {\n  type: ActionTypes.ADD_BIZ_DAY;\n  payload: { biz_day: string };\n}\n\nexport interface REMOVE_BIZ_DAY extends IAction {\n  type: ActionTypes.REMOVE_BIZ_DAY;\n  payload: { biz_day: string };\n}\n\nexport interface FETCH_TASKS extends IAction {\n  type: ActionTypes.FETCH_TASKS;\n  payload: {\n    milestone: string;\n    reject_task_status_ids: string[];\n    timelimit_close_task: string;\n  };\n}\nexport interface SET_TASKS extends IAction {\n  type: ActionTypes.SET_TASKS;\n  payload: { tasks: ITask[] };\n}\nexport interface SET_TASK_ID extends IAction {\n  type: ActionTypes.SET_TASK_ID;\n  payload: { task_id: string };\n}\nexport interface RESET_TASK_ID extends IAction {\n  type: ActionTypes.RESET_TASK_ID;\n}\n\nexport interface SET_TASK extends IAction {\n  type: ActionTypes.SET_TASK;\n  payload: { task: ITask };\n}\n\nexport interface SET_USER_TASKS extends IAction {\n  type: ActionTypes.SET_USER_TASKS;\n  payload: { user_tasks: ITask[] };\n}\n\nexport interface PATCH_TASK extends IAction {\n  type: ActionTypes.PATCH_TASK;\n  payload: { key: keyof ITask; value: ITask[keyof ITask]; id: number };\n}\nexport interface FETCH_CUSTOM_VALUE_MAP extends IAction {\n  type: ActionTypes.FETCH_CUSTOM_VALUE_MAP;\n  payload: { tasks: ITask[] };\n}\nexport interface SET_CUSTOM_VALUE_MAP extends IAction {\n  type: ActionTypes.SET_CUSTOM_VALUE_MAP;\n  payload: { custom_value_map: ICustomValueMap };\n}\nexport interface PATCH_CUSTOM_VALUE extends IAction {\n  type: ActionTypes.PATCH_CUSTOM_VALUE;\n  payload: {\n    id: string | number;\n    key: string;\n    value: string | number;\n    version: number;\n  };\n  meta?: {\n    use_pomodoro?: {\n      used_number: number;\n    };\n    update_status?: boolean;\n  };\n}\nexport interface FETCH_TASK_STATUSES extends IAction {\n  type: ActionTypes.FETCH_TASK_STATUSES;\n  payload: { project: string };\n}\nexport interface SET_TASK_STATUSES extends IAction {\n  type: ActionTypes.SET_TASK_STATUSES;\n  payload: { task_statuses: ITaskStatus[] };\n}\nexport interface SET_ACTIVE_TASK_STATUSES extends IAction {\n  type: ActionTypes.SET_ACTIVE_TASK_STATUSES;\n  payload: { active_task_statuses: ITaskStatus[] };\n}\n\nexport interface FETCH_USER extends IAction {\n  type: ActionTypes.FETCH_USER;\n  payload: { uid: string };\n}\nexport interface SET_USER extends IAction {\n  type: ActionTypes.SET_USER;\n  payload: { user: IUser };\n}\nexport interface RESET_USER extends IAction {\n  type: ActionTypes.RESET_USER;\n}\nexport interface SET_REJECT_TASK_STATUS_IDS extends IAction {\n  type: ActionTypes.SET_REJECT_TASK_STATUS_IDS;\n  payload: { reject_task_status_ids: string[] };\n}\nexport interface ADD_REJECT_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.ADD_REJECT_TASK_STATUS_ID;\n  payload: { reject_task_status_id: string };\n}\n\nexport interface REMOVE_REJECT_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.REMOVE_REJECT_TASK_STATUS_ID;\n  payload: { reject_task_status_id: string };\n}\n\nexport interface OPEN_CONTROLLER extends IAction {\n  type: ActionTypes.OPEN_CONTROLLER;\n}\n\nexport interface CLOSE_CONTROLLER extends IAction {\n  type: ActionTypes.CLOSE_CONTROLLER;\n}\n\nexport interface UPDATE_DATA extends IAction {\n  type: ActionTypes.UPDATE_DATA;\n}\nexport interface ADD_POMODORO extends IAction {\n  type: ActionTypes.ADD_POMODORO;\n  meta?: Pick<IPomodoroHistory, \"completedAt\" | \"duration\" | \"pure\">;\n}\nexport interface USE_POMODORO extends IAction {\n  type: ActionTypes.USE_POMODORO;\n  payload: { used_number: number };\n}\nexport interface RESET_POMODORO extends IAction {\n  type: ActionTypes.RESET_POMODORO;\n  payload: { pomodoro_date: string };\n}\nexport interface RESTORE_POMODORO extends IAction {\n  type: ActionTypes.RESTORE_POMODORO;\n  payload: {\n    pomodoro_date: string;\n    pomodoro_number: number;\n    pomodoro_used_number: number;\n  };\n}\nexport interface CALC_POMODORO_TOTAL extends IAction {\n  type: ActionTypes.CALC_POMODORO_TOTAL;\n  payload: {\n    dateKey: string;\n  };\n}\nexport interface LOAD_POMODORO_TOTALS extends IAction {\n  type: ActionTypes.LOAD_POMODORO_TOTALS;\n}\nexport interface SET_POMODORO_TOTALS extends IAction {\n  type: ActionTypes.SET_POMODORO_TOTALS;\n  payload: {\n    pomodoro_daily_totals: IDailyTotal[];\n  };\n}\nexport interface LOADED extends IAction {\n  type: ActionTypes.LOADED;\n}\nexport interface SET_POMODORO_STATE extends IAction {\n  type: ActionTypes.SET_POMODORO_STATE;\n  payload: {\n    pomodoro_state: TimerState;\n  };\n}\nexport interface SET_POMODORO_MODE extends IAction {\n  type: ActionTypes.SET_POMODORO_MODE;\n  payload: {\n    pomodoro_mode: TimerMode;\n  };\n}\nexport interface SET_TIMELIMIT_CLOSE_TASK extends IAction {\n  type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK;\n  payload: {\n    timelimit_close_task: string;\n  };\n  meta?: {\n    customize: boolean;\n  };\n}\nexport interface SET_IN_PROGRESS_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.SET_IN_PROGRESS_TASK_STATUS_ID;\n  payload: {\n    task_status_id: string;\n  };\n}\nexport interface SET_POMODORO_LIVE_COUNT extends IAction {\n  type: ActionTypes.SET_POMODORO_LIVE_COUNT;\n  payload: {\n    mode: TimerMode;\n    value: number;\n  };\n}\n\nexport type Actions =\n  | SET_TOKEN\n  | SET_TIMER_ID\n  | ADD_FB_TIMER\n  | DEL_FB_TIMER\n  | SET_URL\n  | SIGN_IN\n  | SET_AUTH_TOKEN\n  | SET_AUTH_ERROR\n  | SIGN_OUT\n  | SET_PID\n  | FETCH_PROJECT\n  | SET_PROJECT\n  | FETCH_MILESTONES\n  | SET_MILESTONES\n  | SET_MID\n  | SET_MILESTONE\n  | SET_CUSTOM_EID\n  | SET_CUSTOM_RID\n  | FETCH_CUSTOM_ATTRS\n  | SET_CUSTOM_ATTRS\n  | SET_CUSTOM_ATTR_E\n  | SET_CUSTOM_ATTR_R\n  | PATCH_CUSTOM_VALUE\n  | SET_BIZ_DAYS\n  | SET_BIZ_DAYS\n  | ADD_BIZ_DAY\n  | REMOVE_BIZ_DAY\n  | FETCH_TASKS\n  | SET_TASKS\n  | SET_TASK_ID\n  | RESET_TASK_ID\n  | SET_TASK\n  | SET_USER_TASKS\n  | PATCH_TASK\n  | FETCH_CUSTOM_VALUE_MAP\n  | SET_CUSTOM_VALUE_MAP\n  | FETCH_TASK_STATUSES\n  | SET_TASK_STATUSES\n  | SET_ACTIVE_TASK_STATUSES\n  | FETCH_USER\n  | SET_USER\n  | RESET_USER\n  | SET_REJECT_TASK_STATUS_IDS\n  | ADD_REJECT_TASK_STATUS_ID\n  | REMOVE_REJECT_TASK_STATUS_ID\n  | OPEN_CONTROLLER\n  | CLOSE_CONTROLLER\n  | UPDATE_DATA\n  | ADD_POMODORO\n  | USE_POMODORO\n  | RESET_POMODORO\n  | RESTORE_POMODORO\n  | CALC_POMODORO_TOTAL\n  | LOAD_POMODORO_TOTALS\n  | SET_POMODORO_TOTALS\n  | LOADED\n  | SET_POMODORO_STATE\n  | SET_POMODORO_MODE\n  | SET_TIMELIMIT_CLOSE_TASK\n  | SET_IN_PROGRESS_TASK_STATUS_ID\n  | SET_POMODORO_LIVE_COUNT;\n","import { EventEmitter } from \"events\";\nimport _ from \"lodash\";\nexport enum TimerState {\n  STOPPED = \"stopped\",\n  RUNNING = \"running\",\n  PAUSED = \"paused\"\n}\nexport enum TimerMode {\n  FOCUS = \"Focusing\",\n  SHORT = \"Short break\",\n  LONG = \"Long break\"\n}\nexport const TimerDurationMin = {\n  [TimerMode.FOCUS]: 25,\n  [TimerMode.SHORT]: 5,\n  [TimerMode.LONG]: 15\n};\nenum StorageKey {\n  STATE = \"pomodoro_state\",\n  MODE = \"pomodoro_mode\",\n  CHECKPOINT_START_AT = \"pomodoro_checkpoint_start_at\",\n  CHECKPOINT_ELAPSED = \"pomodoro_checkpoint_elapsed\"\n}\nconst isValidState = (val: string | null) =>\n  _.includes(_.values(TimerState), val);\n\nconst isValidMode = (val: string | null) =>\n  _.includes(_.values(TimerMode), val);\n\ntype TimerEvents =\n  | \"start\"\n  | \"stop\"\n  | \"pause\"\n  | \"resume\"\n  | \"expire\"\n  | \"tick\"\n  | \"change_mode\";\ninterface ITimerStatus {\n  state: TimerState;\n  duration: number;\n  elapsed: number;\n  remaining: number;\n  checkpointElapsed: number;\n  checkpointStartAt: number;\n  mode: TimerMode;\n}\nexport type TimerEventListener = (status: ITimerStatus) => void;\nclass Timer extends EventEmitter {\n  state: TimerState = TimerState.STOPPED;\n  mode: TimerMode = TimerMode.FOCUS;\n  duration: number = TimerDurationMin[TimerMode.FOCUS] * 60;\n  tick: number = 60;\n  checkpointStartAt: number = NaN;\n  checkpointElapsed: number = 0;\n  expireTimeout: NodeJS.Timeout | null = null;\n  tickInterval: NodeJS.Timeout | null = null;\n  tickOffsetTimeout: NodeJS.Timeout | null = null;\n  restoreExpired = false;\n  estimateCompletedAt: Date = new Date();\n  constructor(tick: number) {\n    super();\n    this.tick = tick;\n    this.restoreStorage();\n  }\n  get isStopped() {\n    return this.state === TimerState.STOPPED;\n  }\n  get isRunning() {\n    return this.state === TimerState.RUNNING;\n  }\n  get isPaused() {\n    return this.state === TimerState.PAUSED;\n  }\n  get remaining() {\n    return Math.max(this.duration - this.elapsed, 0);\n  }\n\n  get elapsed() {\n    let periodElapsed = 0;\n    if (this.checkpointStartAt && this.isRunning) {\n      periodElapsed = (Date.now() - this.checkpointStartAt) / 1000;\n    }\n    return this.checkpointElapsed + periodElapsed;\n  }\n  get status(): ITimerStatus {\n    return {\n      state: this.state,\n      duration: this.duration,\n      elapsed: this.elapsed,\n      remaining: this.remaining,\n      checkpointElapsed: this.checkpointElapsed,\n      checkpointStartAt: this.checkpointStartAt,\n      mode: this.mode\n    };\n  }\n  on(event: TimerEvents, listener: TimerEventListener) {\n    return super.on(event, listener);\n  }\n  once(event: TimerEvents, listener: TimerEventListener) {\n    return super.once(event, listener);\n  }\n  start() {\n    if (!this.isStopped) {\n      return;\n    }\n    this.setExpireTimeout(this.duration);\n    this.setTickInterval(this.tick);\n\n    this.state = TimerState.RUNNING;\n    this.checkpointStartAt = Date.now();\n    this.checkpointElapsed = 0;\n\n    this.emit(\"start\", this.status);\n\n    this.saveStorage();\n  }\n  stop() {\n    if (this.isStopped) {\n      return;\n    }\n    this.clearExpireTimeout();\n    this.clearTickInterval();\n\n    this.checkpointStartAt = NaN;\n    this.checkpointElapsed = 0;\n\n    this.state = TimerState.STOPPED;\n\n    this.emit(\"stop\", this.status);\n\n    this.saveStorage();\n  }\n  pause() {\n    if (!this.isRunning) {\n      return;\n    }\n\n    this.clearExpireTimeout();\n    this.clearTickInterval();\n\n    let periodElapsed = (Date.now() - this.checkpointStartAt) / 1000;\n    this.checkpointElapsed += periodElapsed;\n\n    this.state = TimerState.PAUSED;\n\n    this.emit(\"pause\", this.status);\n\n    this.saveStorage();\n  }\n  resume() {\n    if (!this.isPaused) {\n      return;\n    }\n    this.setExpireTimeout(this.remaining);\n    this.setTickInterval(this.tick);\n\n    this.state = TimerState.RUNNING;\n    this.checkpointStartAt = Date.now();\n\n    this.emit(\"resume\", this.status);\n\n    this.saveStorage();\n  }\n  restart() {\n    this.stop();\n    this.start();\n  }\n  changeMode(mode: TimerMode, start?: boolean) {\n    this.stop();\n    this.mode = mode;\n    this.duration = TimerDurationMin[mode] * 60;\n\n    this.emit(\"change_mode\", this.status);\n\n    this.saveStorage();\n    if (start) {\n      _.defer(() => {\n        this.start();\n      });\n    }\n  }\n  setExpireTimeout(seconds: number) {\n    this.expireTimeout = setTimeout(() => {\n      this.emit(\"expire\", this.status);\n      this.stop();\n    }, seconds * 1000);\n  }\n  clearExpireTimeout() {\n    if (this.expireTimeout) {\n      clearTimeout(this.expireTimeout);\n    }\n    this.expireTimeout = null;\n  }\n  setTickInterval(seconds: number, adjusted = false, limit = 60) {\n    const { remaining } = this.status;\n    if (remaining <= limit) {\n      this.setSecTickInterval();\n    } else {\n      const offset = remaining % seconds;\n      if (offset > 1 && !adjusted) {\n        this.tickOffsetTimeout = setTimeout(() => {\n          this.emit(\"tick\", this.status);\n          this.setTickInterval(seconds, true);\n        }, offset * 1000);\n      } else {\n        this.tickInterval = setInterval(() => {\n          const status = this.status;\n          this.emit(\"tick\", status);\n          if (status.remaining < limit) {\n            this.clearTickInterval();\n            this.setSecTickInterval();\n          }\n        }, seconds * 1000);\n      }\n    }\n  }\n  setSecTickInterval() {\n    this.tickInterval = setInterval(() => {\n      this.emit(\"tick\", this.status);\n    }, 1000);\n  }\n  clearTickInterval() {\n    if (this.tickInterval) {\n      clearInterval(this.tickInterval);\n    }\n    this.tickInterval = null;\n    if (this.tickOffsetTimeout) {\n      clearTimeout(this.tickOffsetTimeout);\n    }\n    this.tickOffsetTimeout = null;\n  }\n  saveStorage() {\n    localStorage.setItem(StorageKey.STATE, this.state);\n    localStorage.setItem(StorageKey.MODE, this.mode);\n    localStorage.setItem(\n      StorageKey.CHECKPOINT_START_AT,\n      Number.isNaN(this.checkpointStartAt) ? \"\" : String(this.checkpointStartAt)\n    );\n    localStorage.setItem(\n      StorageKey.CHECKPOINT_ELAPSED,\n      String(this.checkpointElapsed)\n    );\n  }\n  restoreStorage() {\n    const lsState = localStorage.getItem(StorageKey.STATE);\n    const lsMode = localStorage.getItem(StorageKey.MODE);\n    const lsCpStartAt = localStorage.getItem(StorageKey.CHECKPOINT_START_AT);\n    const lsCpElapsed = localStorage.getItem(StorageKey.CHECKPOINT_ELAPSED);\n    if (isValidState(lsState) && isValidMode(lsMode)) {\n      const state = lsState as TimerState;\n      const mode = lsMode as TimerMode;\n      const duration = TimerDurationMin[mode] * 60;\n      switch (state) {\n        case TimerState.STOPPED: {\n          this.changeMode(mode);\n          break;\n        }\n        case TimerState.PAUSED: {\n          const cpElapsed = Number(lsCpElapsed);\n          if (cpElapsed < duration * 1000) {\n            this.state = state;\n            this.mode = mode;\n            this.duration = duration;\n            this.checkpointElapsed = cpElapsed;\n          }\n          break;\n        }\n        case TimerState.RUNNING: {\n          const cpStartAt = Number(lsCpStartAt);\n          const cpElapsed = Number(lsCpElapsed);\n          if (cpStartAt > 0) {\n            this.mode = mode;\n            this.duration = duration;\n            const elapsedMsec = Date.now() - cpStartAt + cpElapsed * 1000;\n            if (elapsedMsec < duration * 1000) {\n              this.state = TimerState.RUNNING;\n\n              this.checkpointStartAt = cpStartAt;\n              this.checkpointElapsed = cpElapsed;\n\n              this.setExpireTimeout(this.remaining);\n              this.setTickInterval(this.tick);\n            } else {\n              this.stop();\n\n              this.estimateCompletedAt = new Date(\n                cpStartAt + (duration - cpElapsed) * 1000\n              );\n              this.restoreExpired = true;\n            }\n          }\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport const timer = new Timer(60);\n","import { IDailyTotal } from \"./AppDb\";\nimport { TimerMode, TimerState } from \"./util/timer\";\nexport interface ICustomAttr {\n  id: number;\n  name: string;\n}\ninterface IPomodoroCounts {\n  [TimerMode.FOCUS]: number;\n  [TimerMode.SHORT]: number;\n  [TimerMode.LONG]: number;\n}\nexport interface IAuthToken {\n  auth_token: string;\n}\nexport interface IMilestone {\n  id: number;\n  name: string;\n  estimated_start: string;\n  estimated_finish: string;\n  slug: string;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n}\nexport interface IProjectExtraInfo {\n  id: number;\n  name: string;\n  slug: string;\n}\ninterface IStatusExtraInfo {\n  name: string;\n  is_closed: boolean;\n}\nexport interface IUserStoryExtraInfo {\n  id: number;\n  subject: string;\n  epics: any;\n  ref: number;\n}\nexport interface ITask {\n  id: number;\n  assigned_to: number | null;\n  created_date: string;\n  finished_date: string;\n  is_closed: boolean;\n  subject: string;\n  ref: number;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n  status: number;\n  status_extra_info: IStatusExtraInfo;\n  user_story: number;\n  user_story_extra_info: IUserStoryExtraInfo;\n  version: number;\n  is_iocaine: boolean;\n}\nexport interface ITasksByUserStory {\n  user_story: number;\n  user_story_extra_info: IUserStoryExtraInfo;\n  project_extra_info: IProjectExtraInfo;\n  tasks: ITask[];\n  is_closed: boolean;\n}\nexport interface ITaskStatus {\n  id: number;\n  color: string;\n  name: string;\n  order: number;\n  project: number;\n  is_closed: boolean;\n  slug: string;\n}\nexport interface IAttrValue { }\nexport interface ICustomValue {\n  attributes_values: {\n    [key: number]: string;\n  };\n  version: number;\n}\nexport interface IUser {\n  id: number;\n  username: string;\n  full_name: string;\n  full_name_display: string;\n  photo: string;\n}\nexport interface IProject {\n  id: number;\n  name: string;\n  members: IUser[];\n}\nexport type ICustomValueMap = WeakMap<ITask, ICustomValue>;\nexport interface IState {\n  token: string | null;\n  timer_id: string | null;\n  url: string;\n  auth_token: string;\n  auth_error: boolean;\n  username: string;\n  password: string;\n  user: IUser | null;\n  pid: string; // url\n  project: IProject;\n  mid: string; // url\n  custom_eid: string; //  pid\n  custom_rid: string; // pid\n  custom_attrs: ICustomAttr[]; // pid\n  custom_attr_e: ICustomAttr;\n  custom_attr_r: ICustomAttr;\n  biz_days: string[]; //mid\n  milestones: IMilestone[]; // pid\n  milestone: IMilestone;\n  tasks: ITask[]; //mid\n  task_id: string;\n  task: ITask | null;\n  user_tasks: ITask[];\n  task_statuses: ITaskStatus[];\n  active_task_statuses: ITaskStatus[];\n  custom_value_map: ICustomValueMap; // pid\n  reject_task_status_ids: string[]; // pid\n  updated_time: number;\n  isOpen: boolean;\n  pomodoro_number: number;\n  pomodoro_date: string;\n  pomodoro_used_number: number;\n  loaded: boolean;\n  pomodoro_daily_totals: IDailyTotal[];\n  pomodoro_state: TimerState;\n  pomodoro_mode: TimerMode;\n  timelimit_close_task: string;\n  in_progress_task_status_id: string;\n  pomodoro_live_counts: IPomodoroCounts;\n}\n\nexport enum StorageKey {\n  URL = \"taiga_url\",\n  TIMER_ID = \"taiga_timer_id\",\n  PID = \"taiga_pid\",\n  MID = \"taiga_mid\",\n  TASK_ID = \"taiga_task_id\",\n  CUSTOM_EID = \"taiga_custom_eid\",\n  CUSTOM_RID = \"taiga_custom_rid\",\n  BIZ_DAYS = \"taiga_biz_days\",\n  REJECT_TASK_STATUS_IDS = \"reject_task_status_ids\",\n  USERNAME = \"taiga_username\",\n  PASSWORD = \"taiga_password\",\n  POMODORO_DATE = \"taiga_pomodoro_date\",\n  POMODORO_NUMBER = \"taiga_pomodoro_number\",\n  POMODORO_USED_NUMBER = \"taiga_pomodoro_used_number\",\n  TIMELIMIT_CLOSE_TASK = \"taiga_timelimit_close_task\"\n}\n\nconst _getFromStorage = (key: string) => localStorage.getItem(key) || \"\";\nexport const getFromStorage = (key: StorageKey) => _getFromStorage(key);\nexport const getFromStorageWithSubkey = (key: StorageKey, subkey: string) =>\n  subkey ? _getFromStorage(`${subkey}/${key}`) : \"\";\n\nexport const setToStorage = (key: string, item: string) => {\n  localStorage.setItem(key, item);\n};\nexport const setToStorageWithSubkey = (\n  key: StorageKey,\n  subkey: string,\n  item: string\n) => (subkey ? setToStorage(`${subkey}/${key}`, item) : null);\n\nexport const initialState: IState = {\n  token: null,\n  timer_id: null,\n  url: \"\",\n  auth_token: \"\",\n  auth_error: false,\n  username: \"\",\n  password: \"\",\n  user: null,\n  pid: \"\",\n  project: {} as IProject,\n  mid: \"\",\n  custom_eid: \"\",\n  custom_rid: \"\",\n  custom_attrs: [],\n  custom_attr_e: {} as ICustomAttr,\n  custom_attr_r: {} as ICustomAttr,\n  biz_days: [],\n  milestones: [],\n  milestone: {} as IMilestone,\n  tasks: [],\n  task_id: \"\",\n  task: null,\n  user_tasks: [],\n  task_statuses: [],\n  active_task_statuses: [],\n  custom_value_map: new WeakMap(),\n  reject_task_status_ids: [],\n  updated_time: 0,\n  isOpen: false,\n  pomodoro_date: \"\",\n  pomodoro_number: 0,\n  pomodoro_used_number: 0,\n  loaded: false,\n  pomodoro_daily_totals: [],\n  pomodoro_state: TimerState.STOPPED,\n  pomodoro_mode: TimerMode.FOCUS,\n  timelimit_close_task: \"\",\n  in_progress_task_status_id: \"\",\n  pomodoro_live_counts: {\n    [TimerMode.FOCUS]: 0,\n    [TimerMode.SHORT]: 0,\n    [TimerMode.LONG]: 0\n  }\n};\n","import _ from \"lodash\";\nimport { initialState, IProject, ICustomValueMap, IMilestone } from \"./store\";\nimport { ActionTypes, Actions } from \"./actions\";\nexport const reducer = (state = initialState, action: Actions) => {\n  switch (action.type) {\n    case ActionTypes.SET_TOKEN: {\n      const { token } = action.payload;\n      return { ...state, token };\n    }\n    case ActionTypes.SET_TIMER_ID: {\n      const { timer_id } = action.payload;\n      return { ...state, timer_id };\n    }\n    case ActionTypes.SET_URL: {\n      const { url } = action.payload;\n      return { ...state, url };\n    }\n    case ActionTypes.SET_PID: {\n      const { pid } = action.payload;\n      return {\n        ...state,\n        pid,\n        project: {} as IProject,\n        mid: \"\",\n        biz_days: [],\n        custom_attrs: [],\n        milestones: [],\n        custom_value_map: new WeakMap() as ICustomValueMap\n      };\n    }\n    case ActionTypes.SET_PROJECT: {\n      const { project } = action.payload;\n      return {\n        ...state,\n        project\n      };\n    }\n    case ActionTypes.SET_MID: {\n      const { mid } = action.payload;\n      return {\n        ...state,\n        mid,\n        milestone: {} as IMilestone,\n        tasks: []\n      };\n    }\n    case ActionTypes.SET_MILESTONES: {\n      const { milestones } = action.payload;\n      return { ...state, milestones };\n    }\n    case ActionTypes.SET_MILESTONE: {\n      const { milestone } = action.payload;\n      return { ...state, milestone };\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      const { custom_eid } = action.payload;\n      return { ...state, custom_eid };\n    }\n    case ActionTypes.SET_CUSTOM_ATTRS: {\n      const { custom_attrs } = action.payload;\n      return { ...state, custom_attrs };\n    }\n    case ActionTypes.SET_CUSTOM_ATTR_E: {\n      const { custom_attr_e } = action.payload;\n      return { ...state, custom_attr_e };\n    }\n    case ActionTypes.SET_CUSTOM_ATTR_R: {\n      const { custom_attr_r } = action.payload;\n      return { ...state, custom_attr_r };\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      const { custom_rid } = action.payload;\n      return { ...state, custom_rid };\n    }\n    case ActionTypes.SET_BIZ_DAYS: {\n      const { biz_days } = action.payload;\n      return { ...state, biz_days };\n    }\n    case ActionTypes.ADD_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.chain([...state.biz_days, biz_day])\n        .uniq()\n        .sort()\n        .value();\n      return { ...state, biz_days };\n    }\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.reject([...state.biz_days], item => item === biz_day);\n      return { ...state, biz_days };\n    }\n    case ActionTypes.SET_TASKS: {\n      const { tasks } = action.payload;\n      return { ...state, tasks };\n    }\n    case ActionTypes.SET_TASK_ID: {\n      const { task_id } = action.payload;\n      return { ...state, task_id, task: null };\n    }\n    case ActionTypes.RESET_TASK_ID: {\n      return { ...state, task_id: \"\", task: null };\n    }\n    case ActionTypes.SET_TASK: {\n      const { task } = action.payload;\n      return { ...state, task };\n    }\n    case ActionTypes.SET_USER_TASKS: {\n      const { user_tasks } = action.payload;\n      return { ...state, user_tasks };\n    }\n    case ActionTypes.SET_TASK_STATUSES: {\n      const { task_statuses } = action.payload;\n      return { ...state, task_statuses };\n    }\n    case ActionTypes.SET_ACTIVE_TASK_STATUSES: {\n      const { active_task_statuses } = action.payload;\n      return { ...state, active_task_statuses };\n    }\n    case ActionTypes.SET_CUSTOM_VALUE_MAP: {\n      const { custom_value_map } = action.payload;\n      return { ...state, custom_value_map };\n    }\n    case ActionTypes.SET_USER: {\n      const { user } = action.payload;\n      return { ...state, user };\n    }\n    case ActionTypes.RESET_USER: {\n      return { ...state, user: null, user_tasks: [] };\n    }\n    case ActionTypes.SET_REJECT_TASK_STATUS_IDS: {\n      const { reject_task_status_ids } = action.payload;\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.chain([\n        ...state.reject_task_status_ids,\n        reject_task_status_id\n      ])\n        .compact()\n        .uniq()\n        .value();\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.reject(\n        [...state.reject_task_status_ids],\n        item => item === reject_task_status_id\n      );\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.OPEN_CONTROLLER: {\n      return { ...state, isOpen: true };\n    }\n    case ActionTypes.CLOSE_CONTROLLER: {\n      return { ...state, isOpen: false };\n    }\n    case ActionTypes.UPDATE_DATA: {\n      return { ...state, updated_time: Date.now() };\n    }\n    case ActionTypes.SIGN_IN: {\n      const { username, password } = action.payload;\n      return { ...state, username, password, auth_error: false };\n    }\n    case ActionTypes.SET_AUTH_TOKEN: {\n      const { auth_token } = action.payload;\n      return { ...state, auth_token };\n    }\n    case ActionTypes.SET_AUTH_ERROR: {\n      return { ...state, auth_error: true };\n    }\n    case ActionTypes.SIGN_OUT: {\n      return { ...state, auth_token: \"\", username: \"\", password: \"\" };\n    }\n    case ActionTypes.ADD_POMODORO: {\n      const pomodoro_number = state.pomodoro_number + 1;\n      return {\n        ...state,\n        pomodoro_number\n      };\n    }\n    case ActionTypes.USE_POMODORO: {\n      const { used_number } = action.payload;\n      const pomodoro_used_number = Math.max(\n        0,\n        state.pomodoro_used_number + used_number\n      );\n      return {\n        ...state,\n        pomodoro_used_number\n      };\n    }\n    case ActionTypes.RESET_POMODORO: {\n      const { pomodoro_date } = action.payload;\n      return {\n        ...state,\n        pomodoro_number: 0,\n        pomodoro_used_number: 0,\n        pomodoro_date\n      };\n    }\n    case ActionTypes.RESTORE_POMODORO: {\n      const {\n        pomodoro_date,\n        pomodoro_number,\n        pomodoro_used_number\n      } = action.payload;\n      return {\n        ...state,\n        pomodoro_date,\n        pomodoro_number,\n        pomodoro_used_number\n      };\n    }\n    case ActionTypes.SET_POMODORO_TOTALS: {\n      const { pomodoro_daily_totals } = action.payload;\n      return {\n        ...state,\n        pomodoro_daily_totals\n      };\n    }\n    case ActionTypes.LOADED: {\n      return {\n        ...state,\n        loaded: true\n      };\n    }\n    case ActionTypes.SET_POMODORO_STATE: {\n      const { pomodoro_state } = action.payload;\n      return {\n        ...state,\n        pomodoro_state\n      };\n    }\n\n    case ActionTypes.SET_POMODORO_MODE: {\n      const { pomodoro_mode } = action.payload;\n      return {\n        ...state,\n        pomodoro_mode\n      };\n    }\n    case ActionTypes.SET_TIMELIMIT_CLOSE_TASK: {\n      const { timelimit_close_task } = action.payload;\n      return {\n        ...state,\n        timelimit_close_task\n      };\n    }\n    case ActionTypes.SET_IN_PROGRESS_TASK_STATUS_ID: {\n      const { task_status_id } = action.payload;\n      return {\n        ...state,\n        in_progress_task_status_id: task_status_id\n      };\n    }\n    case ActionTypes.SET_POMODORO_LIVE_COUNT: {\n      const { mode, value } = action.payload;\n      return {\n        ...state,\n        pomodoro_live_counts: {\n          ...state.pomodoro_live_counts,\n          [mode]: value\n        }\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { Dispatch, useCallback, useMemo } from \"react\";\n\nexport type SideEffector<S, A> = (\n  action: A,\n  dispatch: Dispatch<A>,\n  state: () => S\n) => void;\nconst stateStoreFactory = <S>() => {\n  let state: S;\n  return {\n    getter: () => state,\n    setter: (newState: S) => {\n      state = newState;\n    }\n  };\n};\nexport const useSideEffector = <S, A>(\n  [state, dispatch]: [S, Dispatch<A>],\n  sideEffector: SideEffector<S, A>\n): [S, Dispatch<A>] => {\n  let dispatchSE: Dispatch<A> | null = null;\n\n  const dispatchSECaller = useCallback(\n    (action: A) => {\n      dispatchSE && dispatchSE(action);\n    },\n    [dispatchSE]\n  );\n  const stateStore = useMemo(() => stateStoreFactory<S>(), []);\n\n  stateStore.setter(state);\n  dispatchSE = useCallback(\n    dispatchSideEffector<S, A>(\n      stateStore.getter,\n      dispatch,\n      sideEffector,\n      dispatchSECaller\n    ),\n    []\n  );\n  return [state, dispatchSE];\n};\n\nconst dispatchSideEffector = <S, A>(\n  state: () => S,\n  dispatch: Dispatch<A>,\n  sideEffector: SideEffector<S, A>,\n  dispatchSECaller: Dispatch<A>\n) => (action: A) => {\n  dispatch(action);\n  sideEffector(action, dispatchSECaller, state);\n};\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faInfoCircle,\n  faCheck,\n  faCheckCircle,\n  faExclamationTriangle\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { IconProp } from \"@fortawesome/fontawesome-svg-core\";\ninterface MessageWithIconProps {\n  icon: IconProp;\n  message: string;\n}\nconst MessageWithIcon: React.FC<MessageWithIconProps> = ({ icon, message }) => {\n  return (\n    <div className=\"d-flex\">\n      <h2 className=\"mr-2\">\n        <FontAwesomeIcon icon={icon} />\n      </h2>\n      <div>{message}</div>\n    </div>\n  );\n};\ninterface NotifyProps {\n  title: string;\n  body: string;\n  icon: string;\n}\nconst Notify: React.FC<NotifyProps> = ({ title, body, icon }) => {\n  return (\n    <div className=\"d-flex\">\n      <img src={icon} style={{ width: \"48px\", height: \"48px\" }} alt=\"\" />\n      <div className=\"ml-2\">\n        <h5>{title}</h5>\n        <p>{body}</p>\n      </div>\n    </div>\n  );\n};\nexport const toastr = {\n  info: (message: string) => {\n    toast.info(<MessageWithIcon icon={faInfoCircle} message={message} />);\n  },\n  success: (message: string) => {\n    toast.success(<MessageWithIcon icon={faCheck} message={message} />);\n  },\n  warn: (message: string) => {\n    toast.warn(\n      <MessageWithIcon icon={faExclamationTriangle} message={message} />\n    );\n  },\n  error: (message: string) => {\n    toast.error(<MessageWithIcon icon={faCheckCircle} message={message} />);\n  },\n  notify: ({ title, body, icon }: NotifyProps) => {\n    toast(<Notify title={title} body={body} icon={icon} />);\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncPomodoro: ISideEffector = (action, dispatchm, state) => {\n  _.defer(() => {\n    const { pomodoro_date, pomodoro_number, pomodoro_used_number } = state();\n    setToStorage(StorageKey.POMODORO_DATE, pomodoro_date);\n    setToStorage(StorageKey.POMODORO_NUMBER, String(pomodoro_number));\n    setToStorage(StorageKey.POMODORO_USED_NUMBER, String(pomodoro_used_number));\n  });\n};\n","import Dexie from \"dexie\";\nexport interface IPomodoroHistory {\n  id?: number;\n  completedAt: Date;\n  duration: number;\n  pure: boolean;\n  dateKey: string;\n}\nexport interface IDailyTotal {\n  id?: number;\n  date: Date;\n  value: number;\n  pureValue: number;\n  dateKey: string;\n  dayOfWeek: number;\n}\nexport class AppDatabase extends Dexie {\n  items: Dexie.Table<IPomodoroHistory, number>;\n  totals: Dexie.Table<IDailyTotal, number>;\n  constructor() {\n    super(\"TaigaPomodoroDatabase\");\n    this.version(1).stores({\n      items: \"++id, completedAt, duration, pure, dateKey\",\n      totals: \"++id, date, value, pureValue, &dateKey, dayOfWeek\"\n    });\n    this.items = this.table(\"items\");\n    this.totals = this.table(\"totals\");\n  }\n}\nexport const db = new AppDatabase();\n","import dotenv from \"dotenv\";\nimport _ from \"lodash\";\nimport firebase from \"firebase/app\";\nimport \"firebase/messaging\";\nimport \"firebase/firestore\";\nimport { TimerMode } from \"./timer\";\ndotenv.config();\nconst {\n  REACT_APP_apiKey: apiKey,\n  REACT_APP_VapidKey: VapidKey,\n  REACT_APP_authDomain: authDomain,\n  REACT_APP_databaseURL: databaseURL,\n  REACT_APP_projectId: projectId,\n  REACT_APP_storageBucket: storageBucket,\n  REACT_APP_messagingSenderId: messagingSenderId,\n  REACT_APP_appId: appId\n} = process.env;\nconst firebaseConfig = {\n  apiKey,\n  authDomain,\n  databaseURL,\n  projectId,\n  storageBucket,\n  messagingSenderId,\n  appId\n};\nfirebase.initializeApp(firebaseConfig);\nlet _messaging: firebase.messaging.Messaging | null = null;\ntry {\n  _messaging = firebase.messaging();\n} catch (e) {\n  console.log(e);\n}\nexport const messaging = _messaging;\nlet token: string | null = null;\nif (navigator.serviceWorker && messaging) {\n  navigator.serviceWorker\n    .register(\"./firebase-messaging-sw.js\")\n    .then(registration => {\n      if (!_.get(messaging, \"registrationToUse\")) {\n        messaging.useServiceWorker(registration);\n      }\n      messaging.usePublicVapidKey(VapidKey || \"\");\n      messaging.onTokenRefresh(async () => {\n        token = await messaging.getToken();\n      });\n      messaging.getToken().then(val => {\n        token = val;\n      });\n    });\n}\nconst db = firebase.firestore();\nexport const Timers = db.collection(\"timers\");\nexport const getToken = () => token;\n\nif (messaging) {\n  messaging\n    .requestPermission()\n    .then(function() {\n      console.log(\"Notification permission granted.\");\n    })\n    .catch(function(err) {\n      console.log(\"Unable to get permission to notify.\", err);\n    });\n}\nexport const addTimer = async (\n  title: string,\n  body: string,\n  remaining: number,\n  token: string | null,\n  mode: TimerMode\n) => {\n  const { id } = await Timers.add({\n    title,\n    body,\n    remaining,\n    token,\n    icon: \"./tomato.png\",\n    click_action: window.location.href,\n    mode\n  });\n  return id;\n};\nexport const delTimer = (id: string) => {\n  Timers.doc(id).delete();\n};\n","import { delTimer } from \"../util/firebase\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const delFBTimer: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.DEL_FB_TIMER) {\n    const { timer_id } = state();\n    if (timer_id) {\n      delTimer(timer_id);\n      dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id: null } });\n    }\n  }\n};\n","import { Dispatch } from \"react\";\nimport { Actions, ActionTypes } from \"../actions\";\nimport { IState } from \"../store\";\nimport { baseUrl } from \"../Provider\";\nimport { fetchProject } from \"./fetchProject\";\nimport { fetchMilestones } from \"./fetchMilestones\";\nimport { fetchTasks } from \"./fetchTasks\";\nimport { fetchTaskStatuses } from \"./fetchTaskStatuses\";\nimport { fetchCustomAttrs } from \"./fetchCustomAttrs\";\nimport { fetchCustomValueMap } from \"./fetchCustomValueMap\";\nimport { fetchUser } from \"./fetchUser\";\nimport { patchCustomValue } from \"./patchCustomValue\";\nimport { patchTask } from \"./patchTask\";\nimport { signIn } from \"./signIn\";\nimport { signOut } from \"./signOut\";\nimport { setAuthToken } from \"./setAuthToken\";\nimport { setUrl } from \"./setUrl\";\nimport { setPid } from \"./setPid\";\nimport { setMid } from \"./setMid\";\nimport { setCustomEid } from \"./setCustomEid\";\nimport { setCustomRid } from \"./setCustomRid\";\nimport { syncBizDays } from \"./syncBizDays\";\nimport { syncRejectTaskStatusIds } from \"./syncRejectTaskStatusIds\";\nimport { syncPomodoro } from \"./syncPomodoro\";\nimport { addPomodoro } from \"./addPomodoro\";\nimport { calcPomodoroTotal } from \"./calcPomodoroTotal\";\nimport { loadPomodoroTotals } from \"./loadPomodoroTotals\";\nimport { syncTaskId } from \"./syncTaskId\";\nimport { setTimelineCloseTask } from \"./setTimelineCloseTask\";\nimport { addFBTimer } from \"./addFBTimer\";\nimport { delFBTimer } from \"./dellFBTimer\";\nimport { setTimerId } from \"./setTimerId\";\nimport axios, { AxiosRequestConfig, AxiosError } from \"axios\";\nimport { toastr } from \"../util/toastr\";\nexport { ActionTypes };\nexport type ISideEffector = (\n  action: Actions,\n  dispatch: Dispatch<Actions>,\n  state: () => IState\n) => void;\nexport const fetchData = <T>(\n  url: string,\n  path: string,\n  config?: AxiosRequestConfig\n) => axios.get<T>(`${baseUrl(url)}/${path}`, config);\nexport const postData = <T>(\n  url: string,\n  path: string,\n  data: object,\n  config?: AxiosRequestConfig\n) => axios.post<T>(`${baseUrl(url)}/${path}`, data, config);\nexport const patchData = (\n  url: string,\n  path: string,\n  data: object,\n  config?: AxiosRequestConfig\n) => axios.patch(`${baseUrl(url)}/${path}`, data, config);\nexport const errToastr = (err: AxiosError) => {\n  let message: string;\n  try {\n    message = err.response ? err.response.data._error_message : \"error\";\n  } catch (e) {\n    message = e.message || e;\n  }\n  toastr.error(message);\n};\nexport const rootSideEffector = (\n  action: Actions,\n  dispatch: Dispatch<Actions>,\n  state: () => IState\n) => {\n  switch (action.type) {\n    case ActionTypes.FETCH_PROJECT: {\n      fetchProject(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_MILESTONES: {\n      fetchMilestones(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_TASKS: {\n      fetchTasks(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_TASK_STATUSES: {\n      fetchTaskStatuses(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_CUSTOM_ATTRS: {\n      fetchCustomAttrs(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_CUSTOM_VALUE_MAP: {\n      fetchCustomValueMap(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_USER: {\n      fetchUser(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.PATCH_CUSTOM_VALUE: {\n      patchCustomValue(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SIGN_IN: {\n      signIn(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.PATCH_TASK: {\n      patchTask(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SIGN_OUT: {\n      signOut(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_AUTH_TOKEN: {\n      setAuthToken(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_URL: {\n      setUrl(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_PID: {\n      setPid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_MID: {\n      setMid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      setCustomEid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      setCustomRid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_BIZ_DAYS:\n    case ActionTypes.ADD_BIZ_DAY:\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      syncBizDays(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID:\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      syncRejectTaskStatusIds(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_POMODORO: {\n      addPomodoro(action, dispatch, state);\n      syncPomodoro(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.USE_POMODORO:\n    case ActionTypes.RESET_POMODORO: {\n      syncPomodoro(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.CALC_POMODORO_TOTAL: {\n      calcPomodoroTotal(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.LOAD_POMODORO_TOTALS: {\n      loadPomodoroTotals(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TASK_ID:\n    case ActionTypes.RESET_TASK_ID: {\n      syncTaskId(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TIMELIMIT_CLOSE_TASK: {\n      setTimelineCloseTask(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_FB_TIMER: {\n      addFBTimer(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.DEL_FB_TIMER: {\n      delFBTimer(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TIMER_ID: {\n      setTimerId(action, dispatch, state);\n      break;\n    }\n    default: {\n    }\n  }\n};\n","import { IProject } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchProject: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_PROJECT) {\n    try {\n      const { url } = state();\n      const { pid } = action.payload;\n      if (url && pid) {\n        const { data: project } = await fetchData<IProject>(\n          url,\n          `projects/${pid}`\n        );\n        dispatch({\n          type: ActionTypes.SET_PROJECT,\n          payload: { project }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IMilestone } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchMilestones: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_MILESTONES) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: milestones } = await fetchData<IMilestone[]>(\n          url,\n          \"milestones\",\n          { params: { project } }\n        );\n        dispatch({ type: ActionTypes.SET_MILESTONES, payload: { milestones } });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITask } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nexport const fetchTasks: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_TASKS) {\n    try {\n      const { url } = state();\n      const {\n        milestone,\n        reject_task_status_ids,\n        timelimit_close_task\n      } = action.payload;\n      if (url && milestone && timelimit_close_task) {\n        const startM = moment(timelimit_close_task);\n        const { data } = await fetchData<ITask[]>(url, \"tasks\", {\n          headers: { \"x-disable-pagination\": true },\n          params: { milestone }\n        });\n        const tasks = _.chain(data)\n          .reject(item =>\n            _.includes(reject_task_status_ids, String(item.status))\n          )\n          .reject(\n            item =>\n              item.is_closed && moment(item.finished_date).diff(startM) < 0\n          )\n          .value();\n\n        dispatch({ type: ActionTypes.SET_TASKS, payload: { tasks } });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITaskStatus } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchTaskStatuses: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_TASK_STATUSES) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: task_statuses } = await fetchData<ITaskStatus[]>(\n          url,\n          \"task-statuses\",\n          { params: { project } }\n        );\n        dispatch({\n          type: ActionTypes.SET_TASK_STATUSES,\n          payload: { task_statuses }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ICustomAttr } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchCustomAttrs: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_CUSTOM_ATTRS) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: custom_attrs } = await fetchData<ICustomAttr[]>(\n          url,\n          \"task-custom-attributes\",\n          { params: { project } }\n        );\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_ATTRS,\n          payload: { custom_attrs }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITask, ICustomValue } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchCustomValueMap: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_CUSTOM_VALUE_MAP) {\n    try {\n      const { url, custom_eid, custom_rid } = state();\n      const { tasks } = action.payload;\n      if (url && tasks.length && custom_eid && custom_rid) {\n        const custom_value_map = new WeakMap(\n          await Promise.all(\n            tasks.map(async item => {\n              const { data: custom_attr_val } = await fetchData<ICustomValue>(\n                url,\n                `tasks/custom-attributes-values/${item.id}`\n              );\n              return [item, custom_attr_val] as [ITask, ICustomValue];\n            })\n          )\n        );\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_VALUE_MAP,\n          payload: { custom_value_map }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IUser } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchUser: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_USER) {\n    try {\n      const { url } = state();\n      const { uid } = action.payload;\n      if (url && uid) {\n        const { data: user } = await fetchData<IUser>(url, `users/${uid}`);\n        dispatch({\n          type: ActionTypes.SET_USER,\n          payload: { user }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ISideEffector, patchData, ActionTypes, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nexport const patchCustomValue: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.PATCH_CUSTOM_VALUE) {\n    try {\n      const {\n        url,\n        custom_value_map,\n        tasks,\n        in_progress_task_status_id\n      } = state();\n      const { id, key, value, version } = action.payload;\n      const task = tasks.find(task => task.id === id);\n      if (url && id && key && task && custom_value_map.has(task)) {\n        const custom_value = custom_value_map.get(task);\n        if (custom_value) {\n          const { attributes_values } = custom_value;\n          await patchData(url, `tasks/custom-attributes-values/${id}`, {\n            attributes_values: {\n              ...attributes_values,\n              [key]: String(value)\n            },\n            version\n          });\n          if (\n            action.meta &&\n            action.meta.update_status &&\n            value > 0 &&\n            in_progress_task_status_id &&\n            !task.is_closed &&\n            task.status !== Number(in_progress_task_status_id)\n          ) {\n            dispatch({\n              type: ActionTypes.PATCH_TASK,\n              payload: {\n                key: \"status\",\n                value: in_progress_task_status_id,\n                id: task.id\n              }\n            });\n          }\n          if (action.meta && action.meta.use_pomodoro) {\n            const { used_number } = action.meta.use_pomodoro;\n            dispatch({\n              type: ActionTypes.USE_POMODORO,\n              payload: { used_number }\n            });\n          }\n          dispatch({ type: ActionTypes.UPDATE_DATA });\n          toastr.success(`Custom value updated. [${value}]`);\n        }\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IAuthToken, StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, postData, ActionTypes, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nimport _ from \"lodash\";\nexport const signIn: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.SIGN_IN) {\n    try {\n      const { url } = state();\n      const { username, password } = action.payload;\n      if (url && username && password) {\n        const {\n          data: { auth_token }\n        } = await postData<IAuthToken>(url, \"auth\", {\n          username,\n          password,\n          type: \"normal\"\n        });\n        dispatch({ type: ActionTypes.SET_AUTH_TOKEN, payload: { auth_token } });\n        setToStorage(StorageKey.USERNAME, username);\n        setToStorage(StorageKey.PASSWORD, password);\n        toastr.success(`${username} signed in.`);\n      }\n    } catch (e) {\n      dispatch({ type: ActionTypes.SET_AUTH_ERROR });\n      if (_.get(e, \"response.data._err_message\")) {\n        dispatch({ type: ActionTypes.SIGN_OUT });\n      }\n      errToastr(e);\n    }\n  }\n};\n","import { ActionTypes, ISideEffector, patchData, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\n\nexport const patchTask: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.PATCH_TASK) {\n    try {\n      const { url, tasks } = state();\n      const { id, key, value } = action.payload;\n      const task = tasks.find(task => task.id === id);\n      if (url && id && key && task) {\n        await patchData(url, `tasks/${id}`, {\n          [key]: value,\n          version: task.version\n        });\n        dispatch({ type: ActionTypes.UPDATE_DATA });\n        toastr.success(`Task updated. [${key}=${value}]`);\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { StorageKey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport axios from \"axios\";\nexport const signOut: ISideEffector = (action, dispatch, state) => {\n  localStorage.removeItem(StorageKey.USERNAME);\n  localStorage.removeItem(StorageKey.PASSWORD);\n  if (axios.defaults.headers.common[\"Authorization\"]) {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};\n","import { ISideEffector, ActionTypes } from \".\";\nimport axios from \"axios\";\nexport const setAuthToken: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_AUTH_TOKEN) {\n    const { auth_token } = action.payload;\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${auth_token}`;\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setUrl: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_URL) {\n    const { url } = action.payload;\n    setToStorage(StorageKey.URL, url);\n  }\n};\n","import { StorageKey, setToStorage, getFromStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setPid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_PID) {\n    const { pid } = action.payload;\n    setToStorage(StorageKey.PID, pid);\n    localStorage.removeItem(StorageKey.MID);\n    const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n    const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n    dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n    dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  }\n};\n","import { StorageKey, setToStorage, getFromStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nimport _ from \"lodash\";\nexport const setMid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_MID) {\n    const { mid } = action.payload;\n    const beforeMid = state().mid;\n    setToStorage(StorageKey.MID, mid);\n    const biz_days = _.compact(\n      getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n    ).sort();\n    dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n    if (beforeMid && mid !== beforeMid) {\n      dispatch({ type: ActionTypes.RESET_TASK_ID });\n    }\n    const timelimit_close_task = getFromStorageWithSubkey(\n      StorageKey.TIMELIMIT_CLOSE_TASK,\n      mid\n    );\n    dispatch({\n      type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK,\n      payload: { timelimit_close_task }\n    });\n  }\n};\n","import { StorageKey, setToStorageWithSubkey, getFromStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setCustomEid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_CUSTOM_EID) {\n    const { custom_eid } = action.payload;\n    const pid = getFromStorage(StorageKey.PID);\n    setToStorageWithSubkey(StorageKey.CUSTOM_EID, pid, custom_eid);\n  }\n};\n","import { StorageKey, setToStorageWithSubkey, getFromStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setCustomRid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_CUSTOM_RID) {\n    const { custom_rid } = action.payload;\n    const pid = getFromStorage(StorageKey.PID);\n    setToStorageWithSubkey(StorageKey.CUSTOM_RID, pid, custom_rid);\n  }\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncBizDays: ISideEffector = (action, dispathc, state) => {\n  _.defer(() => {\n    const { mid, biz_days } = state();\n    setToStorageWithSubkey(StorageKey.BIZ_DAYS, mid, biz_days.join(\",\"));\n  });\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncRejectTaskStatusIds: ISideEffector = (\n  action,\n  dispatch,\n  state\n) => {\n  _.defer(() => {\n    const { pid, reject_task_status_ids } = state();\n    setToStorageWithSubkey(\n      StorageKey.REJECT_TASK_STATUS_IDS,\n      pid,\n      reject_task_status_ids.join(\",\")\n    );\n  });\n};\n","import moment from \"moment\";\nimport _ from \"lodash\";\nimport { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes, fetchData } from \".\";\nimport { ICustomValue } from \"../store\";\nexport const addPomodoro: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.ADD_POMODORO && action.meta) {\n    const { url, task_id, custom_rid } = state();\n    const { completedAt, duration, pure } = action.meta;\n    const dateKey = moment(completedAt).format(\"YYYY-MM-DD\");\n    await db.items.put({ completedAt, duration, pure, dateKey });\n    dispatch({ type: ActionTypes.CALC_POMODORO_TOTAL, payload: { dateKey } });\n    if (task_id && custom_rid) {\n      const { data: custom_attr_val } = await fetchData<ICustomValue>(\n        url,\n        `tasks/custom-attributes-values/${task_id}`\n      );\n      const value =\n        Number(_.get(custom_attr_val, `attributes_values.${custom_rid}`, \"0\")) +\n        0.5;\n      const { version } = custom_attr_val;\n      if (custom_attr_val && version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: Number(task_id),\n            key: custom_rid,\n            value,\n            version\n          },\n          meta: { use_pomodoro: { used_number: 1 }, update_status: true }\n        });\n      }\n    }\n  }\n};\n","import moment from \"moment\";\nimport _ from \"lodash\";\nimport { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const calcPomodoroTotal: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.CALC_POMODORO_TOTAL) {\n    const query = action.payload;\n    const totalDoc = await db.totals.get(query);\n    const values = await db.items.where(query).toArray();\n    const value = values.length;\n    const pureValue = _.filter(values, { pure: true }).length;\n    const dayOfWeek = moment(query.dateKey, \"YYYY-MM-DD\").day();\n    const date = moment(query.dateKey, \"YYYY-MM-DD\").toDate();\n    db.totals.put({ ...totalDoc, ...query, date, value, pureValue, dayOfWeek });\n    dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n  }\n};\n","import { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const loadPomodoroTotals: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  const pomodoro_daily_totals = await db.totals.toArray();\n  dispatch({\n    type: ActionTypes.SET_POMODORO_TOTALS,\n    payload: { pomodoro_daily_totals }\n  });\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncTaskId: ISideEffector = (action, dispatch, state) => {\n  _.defer(() => {\n    const { task_id } = state();\n    if (task_id) {\n      setToStorage(StorageKey.TASK_ID, task_id);\n    } else {\n      localStorage.removeItem(StorageKey.TASK_ID);\n    }\n  });\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setTimelineCloseTask: ISideEffector = (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.SET_TIMELIMIT_CLOSE_TASK) {\n    const { timelimit_close_task } = action.payload;\n    const customize = action.meta ? action.meta.customize : false;\n    const { mid } = state();\n    timelimit_close_task &&\n      customize &&\n      setToStorageWithSubkey(\n        StorageKey.TIMELIMIT_CLOSE_TASK,\n        mid,\n        timelimit_close_task\n      );\n  }\n};\n","import { addTimer } from \"../util/firebase\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const addFBTimer: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.ADD_FB_TIMER) {\n    const { token, pomodoro_mode } = state();\n    const { title, body, remaining } = action.payload;\n    const timer_id = await addTimer(\n      title,\n      body,\n      remaining,\n      token,\n      pomodoro_mode\n    );\n    dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id } });\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setTimerId: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_TIMER_ID) {\n    const { timer_id } = action.payload;\n    if (timer_id) {\n      setToStorage(StorageKey.TIMER_ID, timer_id);\n    } else {\n      localStorage.removeItem(StorageKey.TIMER_ID);\n    }\n  }\n};\n","import { Dispatch } from \"react\";\nimport { Actions, ActionTypes } from \"./actions\";\nimport { getFromStorage, getFromStorageWithSubkey, StorageKey } from \"./store\";\nimport _ from \"lodash\";\nconst signIn = (dispatch: Dispatch<Actions>) => {\n  const username = getFromStorage(StorageKey.USERNAME);\n  const password = getFromStorage(StorageKey.PASSWORD);\n  dispatch({ type: ActionTypes.SIGN_IN, payload: { username, password } });\n};\nconst syncStorage = (dispatch: Dispatch<Actions>) => {\n  const url = getFromStorage(StorageKey.URL);\n  const timer_id = getFromStorage(StorageKey.TIMER_ID);\n  const pid = getFromStorage(StorageKey.PID);\n  const mid = getFromStorage(StorageKey.MID);\n  const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n  const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n  const biz_days = _.compact(\n    getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n  ).sort();\n  const reject_task_status_ids = _.compact(\n    getFromStorageWithSubkey(StorageKey.REJECT_TASK_STATUS_IDS, pid).split(\",\")\n  );\n\n  const isOpen = !(url && pid && mid && custom_eid && custom_rid);\n\n  const pomodoro_date = getFromStorage(StorageKey.POMODORO_DATE);\n  const pomodoro_number = Number(\n    getFromStorage(StorageKey.POMODORO_NUMBER) || \"0\"\n  );\n  const pomodoro_used_number = Number(\n    getFromStorage(StorageKey.POMODORO_USED_NUMBER) || \"0\"\n  );\n  const task_id = getFromStorage(StorageKey.TASK_ID);\n  timer_id &&\n    dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id } });\n  url && dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n  pid && dispatch({ type: ActionTypes.SET_PID, payload: { pid } });\n  mid && dispatch({ type: ActionTypes.SET_MID, payload: { mid } });\n  custom_eid &&\n    dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n  custom_rid &&\n    dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  biz_days.length &&\n    dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n  reject_task_status_ids.length &&\n    dispatch({\n      type: ActionTypes.SET_REJECT_TASK_STATUS_IDS,\n      payload: { reject_task_status_ids }\n    });\n\n  task_id && dispatch({ type: ActionTypes.SET_TASK_ID, payload: { task_id } });\n  isOpen && dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n  pomodoro_date &&\n    dispatch({\n      type: ActionTypes.RESTORE_POMODORO,\n      payload: { pomodoro_date, pomodoro_number, pomodoro_used_number }\n    });\n  dispatch({ type: ActionTypes.LOADED });\n  dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n};\nexport const init = (dispatch: Dispatch<Actions>) => {\n  syncStorage(dispatch);\n  _.defer(() => {\n    signIn(dispatch);\n  });\n};\n","import React, { createContext, useReducer, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport { ActionTypes } from \"./actions\";\nimport { initialState, ICustomAttr, IMilestone, ITask } from \"./store\";\nimport { reducer } from \"./reducer\";\nimport { Actions } from \"./actions\";\nimport { useSideEffector } from \"./util/useSideEffector\";\nimport { rootSideEffector } from \"./sideEffectors\";\nimport { init } from \"./init\";\nimport { messaging, Timers } from \"./util/firebase\";\nimport { TimerMode } from \"./util/timer\";\nimport { useSettingSelector } from \"./features/setting/settingSlice\";\nexport const baseUrl = (url: string) => `${url.replace(/[¥/]$/, \"\")}/api/v1`;\nconst getCustomAttr = (items: ICustomAttr[], id: number) =>\n  _.find(items, { id });\nconst getMilestone = (items: IMilestone[], mid: string) =>\n  items.find(item => String(item.id) === mid);\nconst getUserTasks = (items: ITask[], uid: number) =>\n  _.chain(items)\n    .filter({ assigned_to: uid })\n    .sortBy(\"user_story\")\n    .value();\n\nexport const RootContext = createContext({\n  state: initialState,\n  dispatch: (action: Actions) => { }\n});\nexport const Provider = ({ children }: { children: React.ReactNode }) => {\n  const url = useSettingSelector.useUrl()\n  const [state, dispatch] = useSideEffector(\n    useReducer(reducer, initialState),\n    rootSideEffector\n  );\n  const value = {\n    state,\n    dispatch\n  };\n\n  useEffect(() => {\n    if (url && state.pid) {\n      dispatch({\n        type: ActionTypes.FETCH_MILESTONES,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_CUSTOM_ATTRS,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_TASK_STATUSES,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_PROJECT,\n        payload: { pid: state.pid }\n      });\n    }\n  }, [url, state.pid, dispatch]);\n  useEffect(() => {\n    if (\n      url &&\n      state.mid &&\n      state.milestone.id &&\n      state.timelimit_close_task\n    ) {\n      dispatch({\n        type: ActionTypes.FETCH_TASKS,\n        payload: {\n          milestone: state.mid,\n          reject_task_status_ids: state.reject_task_status_ids,\n          timelimit_close_task: state.timelimit_close_task\n        }\n      });\n    }\n  }, [\n    url,\n    state.mid,\n    state.updated_time,\n    state.reject_task_status_ids,\n    dispatch,\n    state.milestone.id,\n    state.timelimit_close_task\n  ]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.FETCH_CUSTOM_VALUE_MAP,\n      payload: {\n        tasks: state.tasks\n      }\n    });\n  }, [dispatch, state.tasks, state.custom_eid, state.custom_rid]);\n  useEffect(() => {\n    const active_task_statuses = _.chain(state.task_statuses)\n      .reject(item => _.includes(state.reject_task_status_ids, String(item.id)))\n      .orderBy(item => item.order)\n      .value();\n    dispatch({\n      type: ActionTypes.SET_ACTIVE_TASK_STATUSES,\n      payload: { active_task_statuses }\n    });\n  }, [state.task_statuses, state.reject_task_status_ids, dispatch]);\n  useEffect(() => {\n    const custom_attr_e = getCustomAttr(\n      state.custom_attrs,\n      Number(state.custom_eid)\n    );\n    if (custom_attr_e) {\n      dispatch({\n        type: ActionTypes.SET_CUSTOM_ATTR_E,\n        payload: { custom_attr_e }\n      });\n    }\n  }, [dispatch, state.custom_attrs, state.custom_eid]);\n  useEffect(() => {\n    const custom_attr_r = getCustomAttr(\n      state.custom_attrs,\n      Number(state.custom_rid)\n    );\n    if (custom_attr_r) {\n      dispatch({\n        type: ActionTypes.SET_CUSTOM_ATTR_R,\n        payload: { custom_attr_r }\n      });\n    }\n  }, [dispatch, state.custom_attrs, state.custom_rid]);\n  useEffect(() => {\n    const milestone = getMilestone(state.milestones, state.mid);\n    if (milestone) {\n      dispatch({\n        type: ActionTypes.SET_MILESTONE,\n        payload: { milestone }\n      });\n    }\n  }, [dispatch, state.mid, state.milestones]);\n  useEffect(() => {\n    if (state.tasks.length > 0 && state.user) {\n      const user_tasks = getUserTasks(state.tasks, state.user.id);\n      dispatch({ type: ActionTypes.SET_USER_TASKS, payload: { user_tasks } });\n    }\n  }, [dispatch, state.tasks, state.user]);\n\n  useEffect(() => {\n    init(dispatch);\n  }, [dispatch]);\n  useEffect(() => {\n    if (state.task_id) {\n      const task = state.tasks.find(item => item.id === Number(state.task_id));\n      if (task) {\n        dispatch({ type: ActionTypes.SET_TASK, payload: { task } });\n      }\n    }\n  }, [dispatch, state.task_id, state.tasks]);\n  useEffect(() => {\n    const firstDay = state.biz_days[0];\n    if (firstDay && !state.timelimit_close_task) {\n      const timelimit_close_task = `${moment(firstDay)\n        .local()\n        .startOf(\"day\")\n        .format(\"YYYY-MM-DD\")}T12:00`;\n      dispatch({\n        type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK,\n        payload: { timelimit_close_task }\n      });\n    }\n  }, [dispatch, state.biz_days, state.milestone, state.timelimit_close_task]);\n  useEffect(() => {\n    if (state.task_statuses.length > 0) {\n      const task_status = state.task_statuses.find(\n        item => item.slug === \"in-progress\"\n      );\n      task_status &&\n        dispatch({\n          type: ActionTypes.SET_IN_PROGRESS_TASK_STATUS_ID,\n          payload: { task_status_id: String(task_status.id) }\n        });\n    }\n  }, [dispatch, state.task_statuses, state.task_statuses.length]);\n  useEffect(() => {\n    if (messaging) {\n      messaging.onTokenRefresh(async () => {\n        if (messaging) {\n          const token = await messaging.getToken();\n          dispatch({\n            type: ActionTypes.SET_TOKEN,\n            payload: { token }\n          });\n        }\n      });\n      messaging.getToken().then(token => {\n        dispatch({\n          type: ActionTypes.SET_TOKEN,\n          payload: { token }\n        });\n      });\n    }\n  }, [dispatch]);\n  useEffect(() => {\n    Object.values(TimerMode).forEach(mode => {\n      Timers.where(\"mode\", \"==\", mode).onSnapshot(docs => {\n        dispatch({\n          type: ActionTypes.SET_POMODORO_LIVE_COUNT,\n          payload: { mode, value: docs.size }\n        });\n      });\n    });\n  }, [dispatch]);\n  return <RootContext.Provider value={value}>{children}</RootContext.Provider>;\n};\n","import React from \"react\";\nexport const preventDefault = (e: React.FormEvent) => {\n  e.preventDefault();\n};\nexport const stopPropagation = (e: React.FormEvent) => {\n  e.stopPropagation();\n};\n","import React from \"react\";\nimport { LinearProgress } from \"@rmwc/linear-progress\";\nexport const LinearLoader: React.SFC = () => (\n  <LinearProgress\n    progress={0}\n    buffer={0}\n    className=\"my-auto mx-2 border-0 form-control\"\n  />\n);\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { LinearLoader } from \"./common/LinearLoader\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nimport { useProjectSelector } from \"../features/project/projectSlice\";\nexport const ProjectSelector = () => {\n  const projects = useProjectSelector.useList()\n  const {\n    state: { pid, },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        dispatch({ type: ActionTypes.SET_PID, payload: { pid: id } });\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Project</InputGroupAddon>\n      {_.isEmpty(projects) ? (\n        <LinearLoader />\n      ) : (\n          <Input value={pid} type=\"select\" onChange={handleChange}>\n            <option value=\"\"> --- </option>\n            {projects.map(item => (\n              <option key={item.id} value={item.id}>\n                {item.name}\n              </option>\n            ))}\n          </Input>\n        )}\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport { LinearLoader } from \"./common/LinearLoader\";\nimport { milestoneActions, useMilestoneSelector } from \"../features/milestone/milestoneSlice\";\n\nexport const MilestoneSelector = () => {\n  const dispatch = useDispatch()\n  const mid = useMilestoneSelector.useMid()\n  const {\n    state: { milestones },\n    dispatch: xdispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        xdispatch({ type: ActionTypes.SET_MID, payload: { mid: id } });\n        dispatch(milestoneActions.setMid(id))\n      }\n    },\n    [xdispatch, dispatch]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Sprint</InputGroupAddon>\n      {_.isEmpty(milestones) ? (\n        <LinearLoader />\n      ) : (\n          <Input type=\"select\" value={mid} onChange={handleChange}>\n            <option value=\"\"> --- </option>\n            {milestones.map(item => (\n              <option key={item.id} value={item.id}>\n                {item.name}\n              </option>\n            ))}\n          </Input>\n        )}\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nimport { LinearLoader } from \"./common/LinearLoader\";\n\nexport const CustomValuesSelector = () => {\n  const {\n    state: { custom_attrs, custom_eid, custom_rid },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        switch (e.target.name) {\n          case \"eid\": {\n            dispatch({\n              type: ActionTypes.SET_CUSTOM_EID,\n              payload: { custom_eid: id }\n            });\n            break;\n          }\n          case \"rid\": {\n            dispatch({\n              type: ActionTypes.SET_CUSTOM_RID,\n              payload: { custom_rid: id }\n            });\n            break;\n          }\n        }\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <div className=\"row\">\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Estimate</InputGroupAddon>\n        {_.isEmpty(custom_attrs) ? (\n          <LinearLoader></LinearLoader>\n        ) : (\n          <Input\n            value={custom_eid}\n            name=\"eid\"\n            type=\"select\"\n            onChange={handleChange}\n          >\n            <option value=\"\"> --- </option>\n            {custom_attrs.map(item => (\n              <option key={item.id} value={item.id}>\n                {item.name}\n              </option>\n            ))}\n          </Input>\n        )}\n      </InputGroup>\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Result</InputGroupAddon>\n        {_.isEmpty(custom_attrs) ? (\n          <LinearLoader></LinearLoader>\n        ) : (\n          <Input\n            value={custom_rid}\n            name=\"rid\"\n            type=\"select\"\n            onChange={handleChange}\n          >\n            <option> --- </option>\n            {custom_attrs.map(item => (\n              <option key={item.id} value={item.id}>\n                {item.name}\n              </option>\n            ))}\n          </Input>\n        )}\n      </InputGroup>\n    </div>\n  );\n};\n","import React, { useEffect, useState, useContext, useCallback } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  UncontrolledTooltip,\n  Table,\n  Card,\n  CardHeader,\n  Input,\n  Label,\n  FormGroup,\n  InputGroup\n} from \"reactstrap\";\nimport { IMilestone } from \"../store\";\nimport { RootContext } from \"../Provider\";\nimport { LinearLoader } from \"./common/LinearLoader\";\nimport moment, { Moment } from \"moment\";\nimport biz from \"moment-business\";\nimport _ from \"lodash\";\nimport { ActionTypes } from \"../actions\";\nexport const isToday = (date: string) =>\n  moment()\n    .local()\n    .format(\"YYYY-MM-DD\") ===\n  moment(date)\n    .local()\n    .format(\"YYYY-MM-DD\");\n\nexport const dayNameFromIdx = (date: string, idx: number) => {\n  if (idx === -1) {\n    return \"\";\n  }\n  if (idx === 0) {\n    return \"Planning\";\n  }\n  return `Day ${idx}`;\n};\n\nexport const dayName = (date: string, biz_days: string[]) => {\n  const idx = biz_days.indexOf(date);\n  return dayNameFromIdx(date, idx);\n};\nconst getDays = (item: IMilestone) => {\n  const startM = moment(item.estimated_start).local();\n  const finishM = moment(item.estimated_finish).local();\n  const daysInSprint = finishM.diff(startM, \"days\");\n  return _.times(daysInSprint).map(i => startM.clone().add(i, \"days\"));\n};\nconst getDefaultBizDays = (items: Moment[]) =>\n  items\n    .filter(item => biz.isWeekDay(item))\n    .map(item => item.format(\"YYYY-MM-DD\"));\n\nconst weekClassName = (day: number) => ({\n  \"text-danger\": day === 0,\n  \"text-info\": day === 6\n});\n\ninterface DayItemProps {\n  item: Moment | null;\n  idx: number;\n}\nconst DayItem: React.FC<DayItemProps> = ({ item, idx }) => {\n  const {\n    state: { biz_days },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const biz_day = e.target.value;\n      if (e.target.checked) {\n        dispatch({ type: ActionTypes.ADD_BIZ_DAY, payload: { biz_day } });\n      } else {\n        dispatch({ type: ActionTypes.REMOVE_BIZ_DAY, payload: { biz_day } });\n      }\n    },\n    [dispatch]\n  );\n  if (!item) {\n    return (\n      <td>\n        <br />\n      </td>\n    );\n  }\n  const value = item.format(\"YYYY-MM-DD\");\n  const isPlanning = value === biz_days[0];\n  const eleId = `biz-day-${value}`;\n  const checked = _.includes(biz_days, value);\n  return (\n    <>\n      <td\n        className={classNames(weekClassName(idx), { \"table-info\": isPlanning })}\n        id={eleId}\n      >\n        {biz.isWeekDay(item) ? (\n          <FormGroup check inline>\n            <Label check>\n              <Input\n                onChange={handleChange}\n                disabled={biz.isWeekendDay(item)}\n                value={value}\n                type=\"checkbox\"\n                checked={checked}\n                className=\"form-check-input\"\n              />\n              {value}\n            </Label>\n          </FormGroup>\n        ) : (\n          <span>{value}</span>\n        )}\n      </td>\n      {checked ? (\n        <UncontrolledTooltip target={eleId}>\n          {dayName(value, biz_days)}\n        </UncontrolledTooltip>\n      ) : null}\n    </>\n  );\n};\ntype Moments = Moment[];\ntype MomentOrNull = Moment | null;\ntype MomentsOrNull = MomentOrNull[];\n\nconst DaysTable: React.FC = () => {\n  const {\n    state: { biz_days, milestone },\n    dispatch\n  } = useContext(RootContext);\n  const [items, setItems] = useState<Moments>([]);\n  const [weekdays, setWeekdays] = useState<MomentsOrNull[]>([]);\n  useEffect(() => {\n    if (milestone) {\n      const items = getDays(milestone);\n      setItems(items);\n      if (biz_days.length <= 1) {\n        dispatch({\n          type: ActionTypes.SET_BIZ_DAYS,\n          payload: { biz_days: getDefaultBizDays(items) }\n        });\n      }\n    }\n  }, [milestone, biz_days, dispatch]);\n  useEffect(() => {\n    if (items.length > 0) {\n      const weeks = _.chunk(\n        [..._.times(items[0].day(), () => null), ...items],\n        7\n      );\n      setWeekdays(weeks);\n    }\n  }, [items]);\n  return (\n    <Table bordered>\n      <thead>\n        <tr>\n          {moment.weekdays().map((item, idx) => (\n            <th\n              key={idx}\n              className={classNames(\"text-center\", weekClassName(idx))}\n            >\n              {item}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {weekdays.map((days, i) => (\n          <tr key={i}>\n            {days.map((item, idx) => (\n              <DayItem idx={idx} key={idx} item={item} />\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n};\n\nexport const DaysSelector: React.FC = () => {\n  const {\n    state: { milestone }\n  } = useContext(RootContext);\n  return (\n    <Card>\n      <CardHeader>Business Days</CardHeader>\n      {_.isEmpty(milestone) ? (\n        <InputGroup>\n          <LinearLoader />\n        </InputGroup>\n      ) : (\n        <DaysTable />\n      )}\n    </Card>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Input,\n  FormGroup,\n  Label\n} from \"reactstrap\";\nimport { ITaskStatus } from \"../store\";\nimport { ActionTypes } from \"../actions\";\nconst StatusItem = ({ item }: { item: ITaskStatus }) => {\n  const {\n    state: { reject_task_status_ids },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const reject_task_status_id = e.target.value;\n      if (e.target.checked) {\n        dispatch({\n          type: ActionTypes.REMOVE_REJECT_TASK_STATUS_ID,\n          payload: { reject_task_status_id }\n        });\n      } else {\n        dispatch({\n          type: ActionTypes.ADD_REJECT_TASK_STATUS_ID,\n          payload: { reject_task_status_id }\n        });\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <FormGroup check inline>\n      <Label check>\n        <Input\n          onChange={handleChange}\n          type=\"checkbox\"\n          value={item.id}\n          defaultChecked={!_.includes(reject_task_status_ids, String(item.id))}\n        />\n        {item.name}\n      </Label>\n    </FormGroup>\n  );\n};\nexport const TaskStatusSelector = () => {\n  const {\n    state: { task_statuses }\n  } = useContext(RootContext);\n  if (task_statuses.length === 0) {\n    return null;\n  }\n  return (\n    <Card>\n      <CardHeader>Task status</CardHeader>\n      <CardBody>\n        {task_statuses.map(item => (\n          <StatusItem key={item.id} item={item} />\n        ))}\n      </CardBody>\n    </Card>\n  );\n};\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport { InputGroupAddon, InputGroupText } from \"reactstrap\";\nexport const InputGroupSpinner: React.FC = () => {\n  return (\n    <InputGroupAddon addonType=\"append\">\n      <InputGroupText>\n        <FontAwesomeIcon icon={faSpinner} className=\"fa-pulse\" />\n      </InputGroupText>\n    </InputGroupAddon>\n  );\n};\n","import React, { useContext, useCallback, useState, useEffect } from \"react\";\nimport { Button, Form, Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { InputGroupSpinner } from \"./InputGroupSpinner\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nexport const TimelimitCloseTask = () => {\n  const {\n    state: { timelimit_close_task },\n    dispatch\n  } = useContext(RootContext);\n  const [datetime, setDatetime] = useState(\"\");\n  const [isFresh, setIsFresh] = useState(false);\n\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setDatetime(e.target.value);\n  }, []);\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      datetime &&\n        dispatch({\n          type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK,\n          payload: { timelimit_close_task: datetime },\n          meta: { customize: true }\n        });\n      e.preventDefault();\n    },\n    [datetime, dispatch]\n  );\n  useEffect(() => {\n    if (timelimit_close_task) {\n      setIsFresh(true);\n      _.defer(setIsFresh, false);\n    }\n  }, [timelimit_close_task]);\n  return (\n    <Form onSubmit={handleSubmit}>\n      <InputGroup>\n        <InputGroupAddon addonType=\"prepend\">\n          Timelimit for closing old tasks\n        </InputGroupAddon>\n        {isFresh ? (\n          <InputGroupSpinner />\n        ) : (\n          <Input\n            defaultValue={timelimit_close_task}\n            onChange={handleChange}\n            type=\"datetime-local\"\n          />\n        )}\n        <InputGroupAddon addonType=\"append\">\n          <Button>Set</Button>\n        </InputGroupAddon>\n      </InputGroup>\n    </Form>\n  );\n};\n","import React, { useContext, useState, useCallback, useMemo } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport _ from \"lodash\";\nimport classNames from \"classnames\";\nimport { settingActions, useSettingSelector } from \"../features/setting/settingSlice\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  Collapse,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  Button,\n  Badge\n} from \"reactstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faChevronCircleRight,\n  faExternalLinkAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { stopPropagation } from \"../util/handler\";\nimport { ProjectSelector } from \"./ProjectSelector\";\nimport { MilestoneSelector } from \"./MilestoneSelector\";\nimport { CustomValuesSelector } from \"./CustomValuesSelector\";\nimport { DaysSelector } from \"./DaysSelector\";\nimport { TaskStatusSelector } from \"./TaskStatusSelector\";\nimport { TimelimitCloseTask } from \"./TimelimitCloseTask\";\nimport { IMilestone } from \"../store\";\nimport styles from \"./Controller.module.css\";\nimport { ActionTypes } from \"../actions\";\nconst getTaskboardUrl = (url: string, milestone: IMilestone) => {\n  if (url && milestone.project_extra_info) {\n    return `${url}/project/${milestone.project_extra_info.slug}/taskboard/${milestone.slug}`;\n  } else {\n    return \"\";\n  }\n};\n\nconst getRange = (biz_days: string[]) => {\n  if (biz_days.length > 1) {\n    return `[${_.head(biz_days)} - ${_.last(biz_days)}]`;\n  } else {\n    return \"\";\n  }\n};\nexport const ToggleIcon = ({ isOpen }: { isOpen: boolean }) => {\n  const rotation = isOpen ? 90 : undefined;\n  return (\n    <FontAwesomeIcon\n      className=\"text-muted mr-2\"\n      rotation={rotation}\n      icon={faChevronCircleRight}\n    />\n  );\n};\nexport const Controller: React.FC = () => {\n  const dispatch = useDispatch()\n  const stateUrl = useSettingSelector.useUrl()\n  const {\n    state: { isOpen, biz_days, milestone },\n    dispatch: xdispatch\n  } = useContext(RootContext);\n  const [url, setUrl] = useState(\"\");\n  const handleUrl = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUrl(e.target.value);\n    },\n    [setUrl]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (url) {\n        dispatch(settingActions.setUrl(url))\n      }\n      e.preventDefault();\n    },\n    [url, dispatch]\n  );\n  const toggle = useCallback(() => {\n    if (isOpen) {\n      xdispatch({ type: ActionTypes.CLOSE_CONTROLLER });\n    } else {\n      xdispatch({ type: ActionTypes.OPEN_CONTROLLER });\n    }\n  }, [xdispatch, isOpen]);\n  const taskboardUrl = useMemo(() => getTaskboardUrl(stateUrl, milestone), [\n    milestone,\n    stateUrl\n  ]);\n  const spName = milestone.name;\n  const range = useMemo(() => getRange(biz_days), [biz_days]);\n  return (\n    <Card>\n      <CardHeader className={classNames(styles.header)} onClick={toggle}>\n        <ToggleIcon isOpen={isOpen} />\n        {spName && (\n          <Badge color=\"primary\" pill className=\"p-1 m-1\">\n            <span>{spName}</span>\n          </Badge>\n        )}\n        {range && (\n          <Badge className=\"p-1 m-1\">\n            <span>{range}</span>\n          </Badge>\n        )}\n        {taskboardUrl ? (\n          <a\n            target=\"_blank\"\n            onClick={stopPropagation}\n            className=\"float-right\"\n            href={taskboardUrl}\n            rel=\"noopener noreferrer\"\n          >\n            <FontAwesomeIcon className=\"mr-1\" icon={faExternalLinkAlt} />\n            Taskboard\n          </a>\n        ) : null}\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <Form onSubmit={handleSubmit}>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">URL</InputGroupAddon>\n            <Input\n              defaultValue={stateUrl}\n              onChange={handleUrl}\n              placeholder=\"http://hostname:port\"\n            />\n            <InputGroupAddon addonType=\"append\">\n              <Button>Set</Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <div className=\"row\">\n          <ProjectSelector />\n          <MilestoneSelector />\n        </div>\n        <CustomValuesSelector />\n        <TimelimitCloseTask />\n        <DaysSelector />\n        <TaskStatusSelector />\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Button } from \"reactstrap\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport { commonActions } from \"../features/common/commonSlice\";\ninterface UpdateButtonProps {\n  size?: \"sm\",\n}\nexport const UpdateButton: React.FC<UpdateButtonProps> = ({ size }) => {\n  const dispatch = useDispatch()\n  const { dispatch: xdispatch } = useContext(RootContext);\n  const updateData = useCallback(() => {\n    xdispatch({ type: ActionTypes.UPDATE_DATA });\n    dispatch(commonActions.updateData())\n  }, [xdispatch, dispatch]);\n  return (\n    <Button onClick={updateData} size={size} className=\"mx-1\">\n      <FontAwesomeIcon icon={faSyncAlt} />\n    </Button>\n  );\n};\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport {\n  Button,\n  Form,\n  InputGroup,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  Spinner\n} from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faUser,\n  faKey,\n  faSignInAlt,\n  faSignOutAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { ActionTypes } from \"../actions\";\nimport { preventDefault } from \"../util/handler\";\nexport const SignInForm: React.FC = () => {\n  const {\n    state: { auth_token, auth_error, username: sign_in_username },\n    dispatch\n  } = useContext(RootContext);\n\n  const [username, setUsername] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (username && password) {\n        setLoading(true);\n        dispatch({\n          type: ActionTypes.SIGN_IN,\n          payload: {\n            username,\n            password\n          }\n        });\n      }\n      e.preventDefault();\n    },\n    [password, username, dispatch, setLoading]\n  );\n  const handleUsername = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUsername(e.target.value);\n    },\n    [setUsername]\n  );\n  const handlePassword = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setPassword(e.target.value);\n    },\n    [setPassword]\n  );\n  const handleSignOut = useCallback(() => {\n    dispatch({ type: ActionTypes.SIGN_OUT });\n  }, [dispatch]);\n  useEffect(() => {\n    if (auth_error || auth_token) {\n      setLoading(false);\n    }\n  }, [auth_error, auth_token, setLoading]);\n  return (\n    <>\n      {auth_token ? (\n        <Form inline onSubmit={preventDefault} className=\"mr-1\">\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faUser} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon\n              addonType=\"prepend\"\n              className=\"border border-success\"\n            >\n              <InputGroupText>{sign_in_username}</InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon addonType=\"append\">\n              <Button title=\"Sign out\" onClick={handleSignOut} color=\"danger\">\n                <FontAwesomeIcon icon={faSignOutAlt} />\n              </Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n      ) : (\n        <Form inline onSubmit={handleSubmit} className=\"mr-1\">\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faUser} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <Input\n              disabled={loading}\n              onInput={handleUsername}\n              onChange={handleUsername}\n              name=\"username\"\n              placeholder=\"username\"\n              invalid={auth_error}\n            />\n          </InputGroup>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faKey} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <Input\n              disabled={loading}\n              onInput={handlePassword}\n              onChange={handlePassword}\n              name=\"password\"\n              placeholder=\"password\"\n              type=\"password\"\n              invalid={auth_error}\n            />\n          </InputGroup>\n          <Button color=\"info\">\n            {loading ? (\n              <Spinner size=\"sm\" type=\"grow\" />\n            ) : (\n              <FontAwesomeIcon icon={faSignInAlt} />\n            )}\n          </Button>\n        </Form>\n      )}\n    </>\n  );\n};\n","import React, { useCallback, useContext, useState, useMemo } from \"react\";\nimport { Avatar, AvatarProps } from \"@rmwc/avatar\";\nimport { ICustomValueMap, IUser, ITask } from \"../../store\";\nimport { RootContext } from \"../../Provider\";\nimport classNames from \"classnames\";\nimport {\n  Table,\n  Navbar,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Progress\n} from \"reactstrap\";\nimport _ from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMedal,\n  faTimes,\n  faEquals,\n  faGrinBeam,\n  faGrinBeamSweat,\n  faDizzy,\n  faGhost\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { UpdateButton } from \"../UpdateButton\";\nimport styles from \"./UserTasks.module.css\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport { preventDefault } from \"../../util/handler\";\nimport { SignInForm } from \"../SignInForm\";\n\ninterface ISortedUser extends IUser {\n  closed: number;\n}\nconst barStyles = [\"success\", \"warning\", \"info\", \"danger\"];\nconst getTasksByUser = (items: ITask[]) => _.groupBy(items, \"assigned_to\");\nexport const AvatarSquare: React.FC<AvatarProps> = props => {\n  const src = props.src || `http://i.pravatar.cc/80?u=${Math.random()}`;\n  return <Avatar {...props} src={src} square className=\"mr-1\" />;\n};\nexport const parseCustomVal = (val: string) =>\n  _.chain(val)\n    .replace(/[^0-9.+,]/g, \"\")\n    .replace(/[+]/g, \",\")\n    .split(\",\")\n    .compact()\n    .map(Number)\n    .sum()\n    .value();\n\nexport const getCustomVal = (\n  custom_value_map: ICustomValueMap,\n  task: ITask,\n  id: number\n) => {\n  if (custom_value_map.has(task)) {\n    return parseCustomVal(\n      _.get(custom_value_map.get(task), `attributes_values.${id}`, \"0\")\n    );\n  } else {\n    return 0;\n  }\n};\nexport const getSumCustomVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, id))\n    .sum()\n    .value();\n\nconst getSumCustomValClosed = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  getSumCustomVal(\n    custom_value_map,\n    tasks.filter(item => item.is_closed),\n    id\n  );\nexport const getCustomValVersion = (\n  custon_value_map: ICustomValueMap,\n  task: ITask\n) => {\n  if (custon_value_map.has(task)) {\n    return _.get(custon_value_map.get(task), \"version\");\n  } else {\n    return undefined;\n  }\n};\nexport const isCustomValValid = (e: number, r: number, is_closed: boolean) =>\n  is_closed && r === e;\nexport const isCustomValInvalid = (e: number, r: number) => r > e;\nconst getGrade = (e: number, r: number): [string | null, number] => {\n  if (_.isNumber(e) && _.isNumber(r) && e > 0) {\n    const diff = Math.abs(e - r) / e;\n    if (diff <= 0.05) {\n      return [\"gold\", 3];\n    }\n    if (diff <= 0.1) {\n      return [\"silver\", 2];\n    }\n    if (diff < 0.2) {\n      return [\"bronze\", 1];\n    }\n  }\n  return [null, 0];\n};\ninterface UserLinkProps {\n  photo: string;\n  id: number;\n  username: string;\n  total_hours?: number;\n}\nconst UserLink: React.FC<UserLinkProps> = ({ photo, id, username, total_hours }) => {\n  let to = `/users/${id}`\n  if (total_hours) {\n    to = `${to}/${total_hours}`\n  }\n  return (\n    <>\n      <AvatarSquare src={photo} />\n      <Link to={to}>{username}</Link>\n    </>\n  )\n}\n\nconst NameAndWorkLoad = ({\n  username,\n  val,\n  total,\n  imgSrc, id\n}: {\n  username: string;\n  val: number;\n  total: number;\n  imgSrc: string;\n  id: number;\n}) => {\n  const [icon, tblCls] = useMemo(() => {\n    const diff = total > 0 ? (val - total) / total : 0;\n    if (diff < -0.1) {\n      return [faGrinBeam, \"\"];\n    } else if (diff <= 0.1) {\n      return [faGrinBeam, \"table-success\"];\n    } else if (diff <= 0.2) {\n      return [faGrinBeamSweat, \"table-warning\"];\n    } else {\n      return [faDizzy, \"table-danger\"];\n    }\n  }, [total, val]);\n\n  if (!val) {\n    return (\n      <>\n        <td>\n          <AvatarSquare src={imgSrc} /> {username}\n        </td>\n        <td />\n      </>\n    );\n  }\n  return (\n    <>\n      <td className={tblCls}>\n        <UserLink id={id} photo={imgSrc} username={username} total_hours={total} />\n        <FontAwesomeIcon className=\"mx-1\" icon={icon} />\n      </td>\n      <td className={classNames(tblCls, \"text-right\")}>{val}</td>\n    </>\n  );\n};\n\nexport const Medal = ({ e, r }: { e: number; r: number }) => {\n  const [grade, num] = useMemo(() => getGrade(e, r), [e, r]);\n  if (grade) {\n    return (\n      <>\n        {_.times(num).map(i => (\n          <FontAwesomeIcon key={i} className={styles[grade]} icon={faMedal} />\n        ))}\n      </>\n    );\n  } else {\n    return null;\n  }\n};\ninterface IProgressTotal {\n  status: number;\n  total: number;\n  style?: string;\n  label: string;\n}\ninterface TaskProgressProps {\n  tasks: ITask[];\n}\n\nexport const TaskProgress: React.FC<TaskProgressProps> = ({ tasks }) => {\n  const {\n    state: { active_task_statuses, custom_eid, custom_value_map }\n  } = useContext(RootContext);\n  const eid = Number(custom_eid);\n  const items = useMemo(\n    () =>\n      _.chain(active_task_statuses)\n        .filter({ is_closed: true })\n        .reverse()\n        .map((item, idx) => ({\n          status: item.id,\n          total: getSumCustomVal(\n            custom_value_map,\n            _.filter(tasks, { status: item.id }),\n            eid\n          ),\n          style: barStyles[idx],\n          label: item.name\n        }))\n        .value(),\n    [active_task_statuses, custom_value_map, eid, tasks]\n  );\n\n  const allSum = useMemo(() => getSumCustomVal(custom_value_map, tasks, eid), [\n    custom_value_map,\n    eid,\n    tasks\n  ]);\n\n  return (\n    <Progress multi>\n      {items.map(item => (\n        <Progress\n          key={item.label}\n          bar\n          max={allSum}\n          value={item.total}\n          color={item.style}\n        >\n          {item.label}\n        </Progress>\n      ))}\n    </Progress>\n  );\n};\nconst UserRow = ({\n  item,\n  sums,\n  isPast,\n  total,\n  hpd,\n  tasks\n}: {\n  item: ISortedUser;\n  sums: { [key: string]: { e: number; r: number } };\n  isPast: boolean;\n  total: number;\n  hpd: number;\n  tasks: ITask[];\n}) => {\n  const [customTotal, setTotal] = useState<number>(0);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setTotal(Number(e.target.value) || 0);\n    },\n    [setTotal]\n  );\n  const sumItem = _.get(sums, item.id);\n  const e = _.get(sumItem, \"e\");\n  const r = _.get(sumItem, \"r\");\n  const mergedTotal = customTotal || total;\n  const totalStr = String(mergedTotal);\n  return (\n    <tr key={item.id}>\n      {total > 0 ? (\n        <>\n          <NameAndWorkLoad\n            username={item.username}\n            val={e}\n            total={mergedTotal}\n            imgSrc={item.photo}\n            id={item.id}\n          />\n          <td className=\"text-right\">{total}</td>\n          <td className={styles.custom_input_td}>\n            <Input\n              bsSize=\"sm\"\n              type=\"number\"\n              className=\"text-right\"\n              value={totalStr}\n              step={hpd}\n              onChange={handleChange}\n            />\n          </td>\n        </>\n      ) : (\n          <>\n            <td>\n              <UserLink photo={item.photo} id={item.id} username={item.username} />\n            </td>\n            <td className=\"text-right\">{item.closed || \"\"}</td>\n            <td className=\"text-right\">{e}</td>\n            <td className=\"text-right\">{r}</td>\n            <td>{_.isNumber(e) && <TaskProgress tasks={tasks} />}</td>\n          </>\n        )}\n\n      {isPast ? (\n        <td>\n          <Medal e={e} r={r} />\n        </td>\n      ) : null}\n    </tr>\n  );\n};\nexport const getTaskSumByUser = (\n  items: ITask[],\n  custom_value_map: ICustomValueMap,\n  custom_eid: string,\n  custom_rid: string\n) => {\n  const eid = Number(custom_eid);\n  const rid = Number(custom_rid);\n  const tasksByUser = _.mapValues(getTasksByUser(items), tasks =>\n    _.chain(tasks)\n      .map(task => ({\n        e: getCustomVal(custom_value_map, task, eid),\n        r: getCustomVal(custom_value_map, task, rid)\n      }))\n      .reduce((result, val) => ({ e: result.e + val.e, r: result.r + val.r }), {\n        e: 0,\n        r: 0\n      })\n      .value()\n  );\n  return tasksByUser;\n};\nexport const UserTasks = () => {\n  const {\n    state: {\n      tasks,\n      custom_value_map,\n      custom_eid,\n      custom_rid,\n      biz_days,\n      custom_attr_e,\n      custom_attr_r,\n      project: { members }\n    }\n  } = useContext(RootContext);\n  const [hpd, setHpd] = useState<number>(0);\n  const activeLen = biz_days.length - 1;\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setHpd(Number(e.target.value) || 0);\n    },\n    [setHpd]\n  );\n  const total = hpd * activeLen;\n  const taskSumByUser = useMemo(\n    () => getTaskSumByUser(tasks, custom_value_map, custom_eid, custom_rid),\n    [custom_eid, custom_rid, custom_value_map, tasks]\n  );\n  const notAssignedSum = _.get(taskSumByUser, \"null.e\", 0);\n  const isPlanning = total > 0;\n  const isPast = useMemo(\n    () =>\n      !isPlanning &&\n      moment().diff(\n        moment(_.last(biz_days))\n          .local()\n          .endOf(\"days\")\n      ) > 0,\n    [biz_days, isPlanning]\n  );\n  const tasksByUser = useMemo(() => getTasksByUser(tasks), [tasks]);\n  const sortedMembers = useMemo(\n    () =>\n      _.chain(members)\n        .reject(member => _.isEmpty(tasksByUser[member.id]))\n        .map(member => ({\n          ...member,\n          closed: getSumCustomValClosed(\n            custom_value_map,\n            tasksByUser[member.id] || [],\n            Number(custom_eid)\n          )\n        }))\n        .sortBy(\"closed\")\n        .reverse()\n        .value(),\n    [custom_eid, custom_value_map, members, tasksByUser]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id || biz_days.length <= 1) {\n    return null;\n  }\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Form inline={true} className=\"mr-auto\" onSubmit={preventDefault}>\n          <InputGroup>\n            <Input\n              type=\"number\"\n              step=\"0.5\"\n              placeholder=\"hours / day\"\n              className=\"text-right\"\n              onChange={handleChange}\n            />\n            <InputGroupAddon addonType=\"append\">\n              <InputGroupText>\n                <FontAwesomeIcon className=\"mx-2\" icon={faTimes} />\n                {activeLen} [days]\n                <FontAwesomeIcon className=\"mx-2\" icon={faEquals} />\n              </InputGroupText>\n              {total > 0 ? (\n                <>\n                  <InputGroupText className=\"bg-white\">\n                    <strong>{total}</strong>\n                  </InputGroupText>\n                  <InputGroupText>hours / sprint</InputGroupText>\n                </>\n              ) : null}\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <SignInForm />\n        <UpdateButton />\n      </Navbar>\n      <Table bordered>\n        <thead>\n          <tr>\n            <th>Name</th>\n            {!isPlanning && <th className=\"text-success\">Completed</th>}\n            <th>{custom_attr_e.name}</th>\n            {isPlanning ? (\n              <>\n                <th>Total</th>\n                <th>Custom</th>\n              </>\n            ) : (\n                <>\n                  <th>{custom_attr_r.name}</th>\n                  <th>Progress</th>\n                </>\n              )}\n            {isPast ? <th>Grade</th> : null}\n          </tr>\n        </thead>\n        <tbody>\n          {(sortedMembers || []).map(item => (\n            <UserRow\n              key={item.id}\n              isPast={isPast}\n              item={item}\n              sums={taskSumByUser}\n              total={total}\n              hpd={hpd}\n              tasks={tasksByUser[item.id] || []}\n            />\n          ))}\n          <tr key=\"null\">\n            <td className=\"text-danger\">\n              <FontAwesomeIcon icon={faGhost} className=\"ml-1 mr-2 fa-lg\" />\n              Not assigned\n            </td>\n            {!isPlanning && <td />}\n            <td className=\"text-right text-danger\">{notAssignedSum}</td>\n            <td />\n            <td />\n            {isPast ? <td /> : null}\n          </tr>\n        </tbody>\n      </Table>\n    </>\n  );\n};\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  Form,\n  InputGroupAddon,\n  InputGroup,\n  InputGroupText,\n  Button,\n  Input\n} from \"reactstrap\";\nimport { InputGroupSpinner } from \"../InputGroupSpinner\";\nimport { Switch } from \"@rmwc/switch\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faCloudUploadAlt,\n  faEdit,\n  faHandPointRight\n} from \"@fortawesome/free-solid-svg-icons\";\nimport styles from \"./ToggleNumberInput.module.css\";\ninterface ToggleNumberInputProps {\n  label: string;\n  value: number;\n  onSubmit?: (value: number) => void;\n  onEditable?: (value: boolean) => void;\n  onValueChange?: (value: number) => void;\n  valid?: boolean;\n  invalid?: boolean;\n  disabled?: boolean;\n  loading?: boolean;\n  id?: string;\n  submitting?: boolean;\n  disabledMessage?: string;\n}\nexport const ToggleNumberInput: React.FC<ToggleNumberInputProps> = ({\n  label,\n  value,\n  onSubmit,\n  onEditable,\n  onValueChange,\n  valid,\n  invalid,\n  disabled,\n  loading,\n  id,\n  submitting,\n  disabledMessage = \"\"\n}) => {\n  const [checked, setChecked] = useState(false);\n  const [val, setVal] = useState(\"\");\n  const [running, setRunning] = useState(false);\n  const onChange = useCallback(\n    (evt: React.FormEvent<any>) => {\n      setChecked(evt.currentTarget.checked);\n    },\n    [setChecked]\n  );\n  const handleVal = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = e.target;\n      setVal(value);\n      onValueChange && onValueChange(Number(value));\n    },\n    [onValueChange]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      const num = Number(val);\n      if (checked && val !== \"\" && num >= 0 && onSubmit) {\n        onSubmit(num);\n        setChecked(false);\n        setRunning(true);\n      }\n      e.preventDefault();\n    },\n    [checked, val, onSubmit, setChecked]\n  );\n  useEffect(() => {\n    if (disabled) {\n      setChecked(false);\n    }\n  }, [setChecked, disabled]);\n  useEffect(() => {\n    setRunning(false);\n  }, [value]);\n  useEffect(() => {\n    onEditable && onEditable(checked);\n  }, [checked, onEditable]);\n  useEffect(() => {\n    if (submitting) {\n      setChecked(false);\n      setRunning(true);\n    }\n  }, [submitting]);\n  useEffect(() => {\n    if (loading) {\n      setChecked(false);\n    }\n  }, [loading]);\n  return (\n    <Form inline onSubmit={handleSubmit}>\n      <InputGroup className={styles.input_group}>\n        <InputGroupAddon addonType=\"prepend\">{label}</InputGroupAddon>\n        {loading ? (\n          <InputGroupSpinner />\n        ) : (\n          <>\n            {checked ? (\n              <>\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>{value}</InputGroupText>\n                </InputGroupAddon>\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>\n                    <FontAwesomeIcon\n                      className=\"text-info\"\n                      icon={faHandPointRight}\n                    />\n                  </InputGroupText>\n                </InputGroupAddon>\n                <Input\n                  onInput={handleVal}\n                  onChange={handleVal}\n                  defaultValue={String(value)}\n                  type=\"number\"\n                  step=\"0.5\"\n                  min=\"0\"\n                  id={id}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <Button color=\"info\">\n                    <FontAwesomeIcon icon={faCloudUploadAlt} />\n                  </Button>\n                </InputGroupAddon>\n              </>\n            ) : (\n              <>\n                {running ? (\n                  <InputGroupSpinner />\n                ) : (\n                  <Input\n                    valid={valid}\n                    invalid={invalid}\n                    readOnly\n                    value={value}\n                    className=\"text-right\"\n                  />\n                )}\n              </>\n            )}\n            <InputGroupAddon\n              addonType=\"append\"\n              title={disabled ? disabledMessage : \"\"}\n            >\n              <Switch disabled={disabled} checked={checked} onChange={onChange}>\n                <FontAwesomeIcon className=\"text-info\" icon={faEdit} />\n              </Switch>\n            </InputGroupAddon>\n          </>\n        )}\n      </InputGroup>\n    </Form>\n  );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"currentColor\",\n  className: \"leaf\",\n  d: \"M115.343,123.839c0.814,1.256,3.343,2.605,7.23,4.014c7.586-1.069,14.943-1.586,21.885-1.586 c15.579,0,30.166,2.469,42.438,7.145c17.87-5.567,43.412-11.694,69.108-11.694c25.694,0,51.228,6.126,69.108,11.694 c12.262-4.676,26.848-7.145,42.42-7.145c7.001,0,14.418,0.518,22.063,1.604c3.471-1.341,6.296-2.699,8.325-4.031 c42.2-28.139,53.036-81.183,47.41-69.931c-4.218,8.418-60.309,35.581-100.004,52.222c14.68-17.769,31.677-44.134,43.438-80.309 c0,0-60.978,52.382-98.867,74.887c-11.974-20.816-33.892-86.589-33.892-86.589s-18.567,49.515-20.358,81.412 c-30.21-16.929-63.354-51.474-72.485-74.538c-10.752-27.189-13.78,53.545,15.436,89.396c-1.095,0.162-2.206,0.315-3.344,0.476 c-39.111-16.072-100.454-47.91-104.926-54.86C64.708,47.255,73.143,101.954,115.343,123.839z M290.531,107.181l0.747,0.857 l-3.098-0.746L290.531,107.181z\"\n}), React.createElement(\"path\", {\n  fill: \"currentColor\",\n  className: \"tomato\",\n  d: \"M485.83,198.564c-38.169-57.253-117.544-70.584-160.338-52.195c-18.27-5.906-43.872-12.27-69.49-12.27 c-25.619,0-51.228,6.364-69.499,12.27c-42.794-18.388-122.168-5.058-160.338,52.195c-64.136,96.203-18.711,299.318,229.836,299.318 C504.541,497.882,549.974,294.767,485.83,198.564z M101.172,262.929c-17.099,0-30.947-13.857-30.947-30.948 c0-17.09,13.848-30.947,30.947-30.947c17.082,0,30.947,13.857,30.947,30.947C132.119,249.071,118.253,262.929,101.172,262.929z\"\n}));\n\nvar SvgTomato = function SvgTomato(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"_x32_\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTomato, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tomato.998f40c5.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { ReactComponent as TomatoIcon } from \"../tomato.svg\";\nimport classNames from \"classnames\";\nimport styles from \"./Tomato.module.css\";\nexport enum TomatoState {\n  FRESH = \"fresh\",\n  STALE = \"stale\"\n}\ninterface TomatoProps {\n  state?: TomatoState;\n  bl?: boolean;\n  br?: boolean;\n}\nexport const Tomato: React.FC<TomatoProps> = ({ state, bl,br }) => {\n  return (\n    <TomatoIcon\n      className={classNames(\"fa-fw\", \"svg-inline--fa\", {\n        [styles.fresh]: state === TomatoState.FRESH,\n        [styles.stale]: state === TomatoState.STALE,\n        [styles.bl]: bl,\n        [styles.br]: br,\n      })}\n    />\n  );\n};\n","import React,{  useContext,useCallback } from \"react\";\nimport { TaskItemProps } from \"../UserStory\";\nimport { RootContext } from \"../../Provider\";\nimport {ActionTypes  } from \"../../actions\";\nimport { TimerState, TimerMode,timer } from \"../../util/timer\";\nimport { Button } from \"reactstrap\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPause, faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { Tomato } from \"../Tomato\";\nimport styles from \"./TaskTimerButton.module.css\";\nexport const TaskTimerButton: React.FC<TaskItemProps> = ({ item }) => {\n  const {\n    state: { task_id, pomodoro_mode, pomodoro_state },\n    dispatch\n  } = useContext(RootContext);\n  const handleStart = useCallback(() => {\n    if (Number(task_id) !== item.id) {\n      dispatch({\n        type: ActionTypes.SET_TASK_ID,\n        payload: { task_id: String(item.id) }\n      });\n    }\n    if (pomodoro_state === TimerState.STOPPED) {\n      timer.changeMode(TimerMode.FOCUS, true);\n    } else {\n      if (pomodoro_mode === TimerMode.FOCUS) {\n        timer.resume();\n      } else {\n        timer.changeMode(TimerMode.FOCUS, true);\n      }\n    }\n  }, [dispatch, item.id, pomodoro_mode, pomodoro_state, task_id]);\n  const handlePause = useCallback(() => {\n    timer.pause();\n  }, []);\n  if (Number(task_id) === item.id) {\n    if (\n      pomodoro_mode === TimerMode.FOCUS &&\n      pomodoro_state === TimerState.RUNNING\n    ) {\n      return (\n        <Button\n          className={classNames(\"mr-2\", styles.btn)}\n          color=\"danger\"\n          onClick={handlePause}\n        >\n          <FontAwesomeIcon icon={faPause} />\n          <Tomato />\n        </Button>\n      );\n    } else {\n      return (\n        <Button\n          onClick={handleStart}\n          color=\"primary\"\n          className={classNames(\"mr-2\", styles.btn)}\n        >\n          <FontAwesomeIcon icon={faPlay} />\n          <Tomato />\n        </Button>\n      );\n    }\n  } else if (task_id === \"\") {\n    if (\n      pomodoro_mode === TimerMode.FOCUS &&\n      pomodoro_state !== TimerState.STOPPED\n    ) {\n      return null;\n    } else {\n      return (\n        <Button onClick={handleStart} color=\"primary\" \n          className={classNames(\"mr-2\", styles.btn)}\n        >\n          <FontAwesomeIcon icon={faPlay} />\n          <Tomato />\n        </Button>\n      );\n    }\n  } else {\n    return null;\n  }\n};","import React from \"react\";\nimport { InputGroup, InputGroupAddon, Input } from \"reactstrap\";\nimport { InputGroupSpinner } from \"../InputGroupSpinner\";\ninterface OwnProp {\n  label: string;\n  value: number;\n  loading?: boolean;\n  size?: string;\n  invalid?: boolean;\n  valid?: boolean;\n}\nexport const InputGroupDisplayNumber: React.FC<OwnProp> = ({\n  label,\n  value,\n  loading,\n  size,\n  invalid,\n  valid\n}) => {\n  return (\n    <InputGroup size={size} className=\"my-n1\">\n      <InputGroupAddon addonType=\"prepend\">{label}</InputGroupAddon>\n      {loading ? (\n        <InputGroupSpinner />\n      ) : (\n        <Input\n          invalid={invalid}\n          valid={valid}\n          readOnly\n          value={value}\n          className=\"text-right\"\n        />\n      )}\n    </InputGroup>\n  );\n};\n","import React, {\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  useMemo\n} from \"react\";\nimport {\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  Collapse,\n  Row,\n  Col,\n  InputGroup,\n  InputGroupAddon,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownItem,\n  DropdownMenu,\n  Spinner,\n  Popover,\n  PopoverHeader,\n  PopoverBody,\n  Badge,\n  Input,\n  FormGroup\n} from \"reactstrap\";\nimport { ToggleNumberInput } from \"./common/ToggleNumberInput\";\nimport classNames from \"classnames\";\nimport { TaskTimerButton } from \"./task/TaskTimerButton\";\nimport { InputGroupDisplayNumber } from \"./common/InputGroupDisplayNumber\";\nimport { useSettingSelector } from \"../features/setting/settingSlice\";\nimport {\n  ITasksByUserStory,\n  ITask,\n  ITaskStatus,\n  IUserStoryExtraInfo,\n  IProjectExtraInfo,\n  IUser\n} from \"../store\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faBiohazard,\n  faExternalLinkAlt,\n  faCloudUploadAlt,\n  faUserTimes,\n  faPlus,\n  faMinus,\n  faEraser,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { RootContext } from \"../Provider\";\nimport { Tomato, TomatoState } from \"./Tomato\";\nimport {\n  getCustomVal,\n  getCustomValVersion,\n  isCustomValInvalid,\n  isCustomValValid,\n  Medal,\n  AvatarSquare,\n  getSumCustomVal\n} from \"./task/UserTasks\";\nimport { ToggleIcon } from \"./Controller\";\nimport ListGroup from \"reactstrap/lib/ListGroup\";\nimport ListGroupItem from \"reactstrap/lib/ListGroupItem\";\nimport styles from \"./UserStory.module.css\";\nimport InputGroupText from \"reactstrap/lib/InputGroupText\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nimport { stopPropagation } from \"../util/handler\";\nexport const convToTasksByUserStory = (tasks: ITask[]) =>\n  _.chain(tasks)\n    .groupBy(\"user_story\")\n    .map((items, key) => ({\n      user_story: Number(key),\n      user_story_extra_info: items[0].user_story_extra_info,\n      project_extra_info: items[0].project_extra_info,\n      tasks: items,\n      is_closed: items.every(task => task.is_closed)\n    }))\n    .value();\nconst AuthMsg = \"Need sign in!\";\nconst needAuthMsg = (disabled: boolean | undefined) =>\n  disabled ? AuthMsg : \"\";\nconst UserStoryLink = ({\n  user_story_extra_info,\n  project_extra_info\n}: {\n  user_story_extra_info: IUserStoryExtraInfo;\n  project_extra_info: IProjectExtraInfo;\n}) => {\n  const url = useSettingSelector.useUrl()\n  const { slug } = project_extra_info;\n  const usName = user_story_extra_info\n    ? `#${user_story_extra_info.ref} ${user_story_extra_info.subject}`\n    : undefined;\n  const href = user_story_extra_info\n    ? `${url}/project/${slug}/us/${user_story_extra_info.ref}`\n    : \"#\";\n\n  if (usName) {\n    return (\n      <a\n        href={href}\n        onClick={stopPropagation}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        title={usName}\n      >\n        <FontAwesomeIcon icon={faExternalLinkAlt} /> {usName}\n      </a>\n    );\n  } else {\n    return <>(Unassigned tasks)</>;\n  }\n};\n\nconst TaskLink = ({ item }: { item: ITask }) => {\n  const url = useSettingSelector.useUrl()\n  const taskName = `#${item.ref} ${item.subject}`;\n  const href = `${url}/project/${item.project_extra_info.slug}/task/${item.ref}`;\n  return (\n    <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" title={taskName}>\n      <FontAwesomeIcon icon={faExternalLinkAlt} /> {taskName}\n    </a>\n  );\n};\n\ninterface GradeProps {\n  e: number;\n  r: number;\n}\nexport const Grade: React.FC<GradeProps> = ({ e, r }) => {\n  return (\n    <InputGroup className={styles.display_medal}>\n      <InputGroupAddon addonType=\"prepend\">Grade</InputGroupAddon>\n      <InputGroupText className={styles.medal}>\n        <Medal e={e} r={r} />\n      </InputGroupText>\n    </InputGroup>\n  );\n};\n\ninterface TaskStatusItemProps {\n  item: ITaskStatus;\n  task: ITask;\n  onSelect?: (id: number) => void;\n}\nconst TaskStatusItem: React.FC<TaskStatusItemProps> = ({\n  item,\n  task,\n  onSelect\n}) => {\n  const { dispatch } = useContext(RootContext);\n  const handleClick = useCallback(() => {\n    dispatch({\n      type: ActionTypes.PATCH_TASK,\n      payload: {\n        key: \"status\",\n        value: item.id,\n        id: task.id\n      }\n    });\n    onSelect && onSelect(item.id);\n  }, [dispatch, item.id, task.id, onSelect]);\n  return <DropdownItem onClick={handleClick}>{item.name}</DropdownItem>;\n};\ninterface TaskStatusSelectorProps {\n  task: ITask;\n  disabled?: boolean;\n}\nconst TaskStatusSelector: React.FC<TaskStatusSelectorProps> = ({\n  task,\n  disabled\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const {\n    state: { active_task_statuses }\n  } = useContext(RootContext);\n  const handleSelect = useCallback(() => {\n    setLoading(true);\n  }, [setLoading]);\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"info\" />\n      ) : (\n          <UncontrolledDropdown>\n            <DropdownToggle\n              title={needAuthMsg(disabled)}\n              disabled={disabled}\n              caret={!disabled}\n            >\n              {task.status_extra_info.name}\n            </DropdownToggle>\n            <DropdownMenu>\n              {active_task_statuses.map(item => (\n                <TaskStatusItem\n                  item={item}\n                  key={item.id}\n                  task={task}\n                  onSelect={handleSelect}\n                />\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        )}\n    </>\n  );\n};\ninterface UserItemProps {\n  item: IUser;\n  onSelect?: (id: number) => void;\n}\nconst UserItem: React.FC<UserItemProps> = ({ item, onSelect }) => {\n  const handleClick = useCallback(() => {\n    onSelect && onSelect(item.id);\n  }, [item.id, onSelect]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <AvatarSquare src={item.photo} />\n      {item.username}\n    </DropdownItem>\n  );\n};\ninterface TaskUserSelectorProps {\n  task: ITask;\n  disabled?: boolean;\n}\nexport const TaskUserSelector: React.FC<TaskUserSelectorProps> = ({\n  task,\n  disabled\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const {\n    state: {\n      project: { members }\n    },\n    dispatch\n  } = useContext(RootContext);\n  const handleSelect = useCallback(\n    (id: number) => {\n      setLoading(true);\n      dispatch({\n        type: ActionTypes.PATCH_TASK,\n        payload: {\n          key: \"assigned_to\",\n          value: id,\n          id: task.id\n        }\n      });\n    },\n    [dispatch, task.id]\n  );\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"info\" />\n      ) : (\n          <UncontrolledDropdown>\n            <DropdownToggle\n              title={needAuthMsg(disabled)}\n              size=\"sm\"\n              disabled={disabled}\n              caret={!disabled}\n            >\n              Assign To\n          </DropdownToggle>\n            <DropdownMenu>\n              {(members || []).map(item => (\n                <UserItem item={item} onSelect={handleSelect} key={item.id} />\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        )}\n    </>\n  );\n};\ninterface NotAssignedButtonProps {\n  task: ITask;\n}\nconst NotAssignedButton: React.FC<NotAssignedButtonProps> = ({ task }) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const { dispatch } = useContext(RootContext);\n  const handleClick = useCallback(() => {\n    setLoading(true);\n    dispatch({\n      type: ActionTypes.PATCH_TASK,\n      payload: {\n        key: \"assigned_to\",\n        value: null,\n        id: task.id\n      }\n    });\n  }, [dispatch, task.id]);\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"danger\" />\n      ) : (\n          <Button\n            className=\"mr-2\"\n            title=\"Not assigned\"\n            color=\"danger\"\n            onClick={handleClick}\n          >\n            <FontAwesomeIcon icon={faUserTimes} />\n          </Button>\n        )}\n    </>\n  );\n};\ninterface CustomValueInputProps {\n  item: ITask;\n}\n\nconst EstimateInput: React.FC<CustomValueInputProps> = ({ item }) => {\n  const {\n    state: { custom_eid, custom_value_map, auth_token, custom_attr_e },\n    dispatch\n  } = useContext(RootContext);\n  const version = getCustomValVersion(custom_value_map, item);\n  const handleSubmit = useCallback(\n    (value: number) => {\n      if (version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: item.id,\n            key: custom_eid,\n            value,\n            version\n          }\n        });\n      }\n    },\n    [dispatch, item.id, custom_eid, version]\n  );\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  if (!custom_attr_e.id) {\n    return null;\n  }\n  const unEstimated = !e;\n  const largeTask = e > 4\n  const disabled = auth_token === \"\";\n  const loading = !version;\n\n  return (\n    <ToggleNumberInput\n      onSubmit={handleSubmit}\n      label={custom_attr_e.name}\n      value={e}\n      invalid={unEstimated || largeTask}\n      disabled={disabled}\n      loading={loading}\n      disabledMessage={AuthMsg}\n    />\n  );\n};\nconst ResultInput: React.FC<CustomValueInputProps> = ({ item }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [used_number, set_used_number] = useState(0);\n  const [editable, setEditable] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const {\n    state: {\n      custom_rid,\n      custom_value_map,\n      custom_attr_e,\n      custom_attr_r,\n      auth_token,\n      pomodoro_number,\n      pomodoro_used_number\n    },\n    dispatch\n  } = useContext(RootContext);\n  const version = getCustomValVersion(custom_value_map, item);\n  const handleToggle = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n  const handleSubmit = useCallback(\n    (value: number, used_number?: number) => {\n      const update_status = value > 0;\n      const use_pomodoro = used_number ? { used_number } : undefined;\n      if (version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: item.id,\n            key: custom_rid,\n            value,\n            version\n          },\n          meta: { use_pomodoro, update_status }\n        });\n        setSubmitting(true);\n      }\n    },\n    [custom_rid, dispatch, item.id, version]\n  );\n  const handlePluse = useCallback(() => {\n    set_used_number(used_number + 1);\n  }, [used_number]);\n  const handleMinus = useCallback(() => {\n    set_used_number(used_number - 1);\n  }, [used_number]);\n\n  const handleReset = useCallback(() => {\n    set_used_number(0);\n  }, []);\n  const handleEditable = useCallback((val: boolean) => {\n    setEditable(val);\n  }, []);\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  const r = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item]\n  );\n  const handleValueChange = useCallback(\n    (val: number) => {\n      setEditable(r === val);\n    },\n    [r]\n  );\n  const handleUsePomodoro = useCallback(() => {\n    const result = r + used_number / 2;\n    handleSubmit(result, used_number);\n    setIsOpen(false);\n    set_used_number(0);\n  }, [handleSubmit, r, used_number]);\n\n  const valid = useMemo(() => isCustomValValid(e, r, item.is_closed), [\n    e,\n    item.is_closed,\n    r\n  ]);\n  const invalid = useMemo(() => isCustomValInvalid(e, r), [e, r]);\n  useEffect(() => {\n    if (!version) {\n      setSubmitting(false);\n    }\n  }, [version]);\n  useEffect(() => {\n    set_used_number(0);\n  }, [pomodoro_used_number]);\n  if (!custom_attr_r.id) {\n    return null;\n  }\n\n  const disabled = auth_token === \"\";\n  const loading = !version;\n  const elId = `rusult-input-${item.id}`;\n  const usableNumber = pomodoro_number - pomodoro_used_number;\n  const submittable = used_number > 0;\n  const isMax = used_number === usableNumber;\n  return (\n    <>\n      <ToggleNumberInput\n        onSubmit={handleSubmit}\n        onEditable={handleEditable}\n        onValueChange={handleValueChange}\n        label={custom_attr_r.name}\n        value={r}\n        valid={valid}\n        invalid={invalid}\n        disabled={disabled}\n        loading={loading}\n        id={elId}\n        submitting={submitting}\n      />\n      {editable && usableNumber > 0 && (\n        <Popover\n          className={classNames(\"popover-wide\")}\n          target={elId}\n          placement=\"top\"\n          isOpen={isOpen}\n          toggle={handleToggle}\n          trigger=\"click hover\"\n        >\n          <PopoverHeader>Pomodoro</PopoverHeader>\n          <PopoverBody>\n            <ButtonGroup>\n              <Button disabled={isMax} onClick={handlePluse}>\n                <FontAwesomeIcon icon={faPlus} />\n              </Button>\n              <Button disabled={!submittable} onClick={handleMinus}>\n                <FontAwesomeIcon icon={faMinus} />\n              </Button>\n              <Button disabled className=\"bg-light\">\n                {_.times(usableNumber).map(i => (\n                  <Tomato\n                    key={i}\n                    state={\n                      i >= used_number ? TomatoState.FRESH : TomatoState.STALE\n                    }\n                  />\n                ))}\n              </Button>\n              <Button disabled={!submittable} onClick={handleUsePomodoro}>\n                <FontAwesomeIcon icon={faCloudUploadAlt} />\n              </Button>\n              <Button disabled={!submittable} onClick={handleReset}>\n                <FontAwesomeIcon icon={faEraser} />\n              </Button>\n            </ButtonGroup>\n          </PopoverBody>\n        </Popover>\n      )}\n    </>\n  );\n};\nexport interface TaskItemProps {\n  item: ITask;\n}\n\nexport const TaskItem: React.FC<TaskItemProps> = ({ item }) => {\n  const {\n    state: { custom_value_map, custom_attr_e, custom_attr_r, auth_token }\n  } = useContext(RootContext);\n  const version = useMemo(() => getCustomValVersion(custom_value_map, item), [\n    custom_value_map,\n    item\n  ]);\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  const r = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id) {\n    return null;\n  }\n\n  const disabled = auth_token === \"\";\n  const loading = !version;\n  const inactive = r === 0 && !item.is_closed && !disabled && !loading;\n  return (\n    <ListGroupItem\n      className={classNames({ [styles.is_closed]: item.is_closed, \"bg-warning\": item.is_iocaine })}\n    >\n      <div className=\"d-flex mb-1\">\n        <div className=\"mr-auto text-truncate\">\n          {item.is_iocaine && <FontAwesomeIcon icon={faBiohazard} className=\"mr-1 text-dark fa-2x\" />}\n          <TaskLink item={item} />\n        </div>\n        {inactive && <NotAssignedButton task={item} />}\n        <TaskTimerButton item={item} />\n        <TaskStatusSelector task={item} disabled={disabled} />\n      </div>\n      <Row>\n        <Col>\n          <EstimateInput item={item} />\n        </Col>\n        <Col>\n          <ResultInput item={item} />\n        </Col>\n        <Col>\n          <Grade e={e} r={r} />\n        </Col>\n      </Row>\n    </ListGroupItem>\n  );\n};\ninterface UserStoryProps {\n  item: ITasksByUserStory;\n  tags?: string[]\n  totalHours?: number;\n  onSelect?: (id: number, value: number) => void\n}\nexport const UserStoryWithEstimate: React.FC<UserStoryProps> = ({ item }) => {\n  return (\n    <Card>\n      <CardHeader className=\"text-truncate\">\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <ListGroup>\n        {item.tasks.map(task => (\n          <ListGroupItem key={task.id} className=\"text-truncate\">\n            <div className=\"d-flex\">\n              <div className=\"mr-auto text-truncate\">\n                <TaskLink item={task} />\n              </div>\n              <EstimateInput item={task} />\n            </div>\n          </ListGroupItem>\n        ))}\n      </ListGroup>\n    </Card>\n  );\n};\nexport const UserStoryWithTaskUser: React.FC<UserStoryProps> = ({ item }) => {\n  const {\n    state: { auth_token }\n  } = useContext(RootContext);\n  const disabled = auth_token === \"\";\n  return (\n    <Card>\n      <CardHeader className=\"text-truncate\">\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <Collapse isOpen={true}>\n        <ListGroup>\n          {item.tasks.map(task => (\n            <ListGroupItem key={task.id}>\n              <div className=\"d-flex\">\n                <div className=\"mr-auto text-truncate\">\n                  <TaskLink item={task} />\n                </div>\n                <TaskUserSelector task={task} disabled={disabled} />\n              </div>\n            </ListGroupItem>\n          ))}\n        </ListGroup>\n      </Collapse>\n    </Card>\n  );\n};\n\ninterface TagProps {\n  label: string;\n}\nconst Tag: React.FC<TagProps> = ({ label }) => {\n  return (\n    <Badge color=\"warning\" className=\"mr-1\" title={label} >{label}</Badge>\n  )\n}\n\nexport const UserStory: React.FC<UserStoryProps> = ({ item, tags, totalHours = 0, onSelect }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const {\n    state: { custom_value_map, custom_attr_e, custom_attr_r }\n  } = useContext(RootContext);\n  const toggle = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen, setIsOpen]);\n  useEffect(() => {\n    setIsOpen(!item.is_closed);\n  }, [item.is_closed, setIsOpen]);\n  const e = useMemo(\n    () => getSumCustomVal(custom_value_map, item.tasks, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item.tasks]\n  );\n  const r = useMemo(\n    () => getSumCustomVal(custom_value_map, item.tasks, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item.tasks]\n  );\n  const handleChange = useCallback((evt: React.ChangeEvent<HTMLInputElement>) => {\n    onSelect?.(item.user_story, evt.target.checked ? 0 : e)\n  }, [onSelect, e, item.user_story])\n  const loading = !custom_value_map.has(item.tasks[0]);\n  return (\n    <Card>\n      <CardHeader\n        className={classNames(styles.header, \"text-truncate\", {\n          \"alert-primary\": item.is_closed\n        })}\n        onClick={toggle}\n      >\n        <Row>\n          <Col xs={12} md={8} className=\"text-truncate\">\n            {totalHours > 0 &&\n              <FormGroup inline check>\n                <Input type=\"checkbox\" defaultChecked={true} onChange={handleChange} onClick={stopPropagation} />\n              </FormGroup>\n            }\n            <ToggleIcon isOpen={isOpen} />\n            <UserStoryLink\n              user_story_extra_info={item.user_story_extra_info}\n              project_extra_info={item.project_extra_info}\n            />\n          </Col>\n          <Col xs={6} md={2}>\n            <InputGroupDisplayNumber\n              label={custom_attr_e.name}\n              loading={loading}\n              value={e}\n              size=\"sm\"\n            />\n          </Col>\n          <Col xs={6} md={2}>\n            <InputGroupDisplayNumber\n              label={custom_attr_r.name}\n              loading={loading}\n              value={r}\n              size=\"sm\"\n            />\n          </Col>\n        </Row>\n        {tags?.map((label, i) => (<Tag key={i} label={label} />))}\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <ListGroup>\n          {item.tasks.map(task => (\n            <TaskItem item={task} key={task.id} />\n          ))}\n        </ListGroup>\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useMemo } from \"react\";\nimport { RootContext } from \"../Provider\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nimport { getCustomVal, getCustomValVersion } from \"./task/UserTasks\";\nimport { UserStoryWithEstimate, convToTasksByUserStory } from \"./UserStory\";\nexport const UnEstimatedTasks = () => {\n  const {\n    state: { tasks, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  const eid = useMemo(() => Number(custom_eid), [custom_eid]);\n  const items = useMemo(\n    () =>\n      eid\n        ? tasks.filter(\n            task =>\n              getCustomValVersion(custom_value_map, task) &&\n              getCustomVal(custom_value_map, task, eid) === 0\n          )\n        : [],\n    [custom_value_map, eid, tasks]\n  );\n  const userStories = useMemo(() => convToTasksByUserStory(items), [items]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader className=\"alert-danger\">Un estimated tasks</CardHeader>\n        <CardBody>\n          {userStories.map(item => (\n            <UserStoryWithEstimate item={item} key={item.user_story} />\n          ))}\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useContext, useMemo } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport { UserStoryWithTaskUser, convToTasksByUserStory } from \"./UserStory\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nexport const NotAssignedTasks: React.FC = () => {\n  const {\n    state: { tasks }\n  } = useContext(RootContext);\n  const items = useMemo(() => _.filter(tasks, { assigned_to: null }), [tasks]);\n  const userStories = useMemo(() => convToTasksByUserStory(items), [items]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader className=\"alert-danger\">Not assigned tasks</CardHeader>\n        <CardBody>\n          {userStories.map(item => (\n            <UserStoryWithTaskUser item={item} key={item.user_story} />\n          ))}\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useCallback } from \"react\";\nimport { UncontrolledButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from \"reactstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faLevelDownAlt,\n  faLevelUpAlt,\n} from \"@fortawesome/free-solid-svg-icons\";\nexport type ChartType = \"Burn up\" | \"Burn down\"\ninterface ChartTypeItemProps {\n  type: ChartType;\n}\n\nconst ChartTypeItem: React.FC<ChartTypeItemProps> = ({ type }) => {\n  const icon = type === \"Burn down\" ? faLevelDownAlt : faLevelUpAlt;\n  return (\n    <span>\n      {type}\n      <FontAwesomeIcon className=\"fa-fw\" icon={icon} />\n    </span>\n  );\n};\ninterface ChartTypeDropdownItemProps extends ChartTypeItemProps {\n  onSelect: (type: ChartType) => void;\n}\nconst ChartTypeDropdownItem: React.FC<ChartTypeDropdownItemProps> = ({\n  type,\n  onSelect\n}) => {\n  const handleClick = useCallback(() => {\n    onSelect(type);\n  }, [onSelect, type]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <ChartTypeItem type={type} />\n    </DropdownItem>\n  );\n};\n\nexport const ChartTypeSelector: React.FC<ChartTypeDropdownItemProps> = ({ type, onSelect }) => {\n  return (\n    <UncontrolledButtonDropdown>\n      <DropdownToggle size=\"sm\" caret>\n        <ChartTypeItem type={type} />\n      </DropdownToggle>\n      <DropdownMenu>\n        <ChartTypeDropdownItem type=\"Burn up\" onSelect={onSelect} />\n        <ChartTypeDropdownItem type=\"Burn down\" onSelect={onSelect} />\n      </DropdownMenu>\n    </UncontrolledButtonDropdown>\n  )\n}","import React, { useContext, useState, useEffect, useCallback } from \"react\";\nimport {\n  ComposedChart,\n  Tooltip,\n  Line,\n  XAxis,\n  YAxis,\n  Bar,\n  Legend,\n  TooltipFormatter\n} from \"recharts\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../../Provider\";\nimport { dayNameFromIdx } from \"../DaysSelector\";\nimport { getSumCustomVal } from \"../task/UserTasks\";\nimport { getTaskCreated, getTaskFinished, BurnChartProps, chartSize } from \"./Chart\";\ninterface IChartItem {\n  label: string;\n  ideal: number;\n  completed?: number;\n  result?: number;\n  total: number;\n}\n\nexport const BurnUpChart: React.FC<BurnChartProps> = ({ tasks, size = \"lg\" }) => {\n  const [data, setData] = useState<IChartItem[]>([]);\n  const {\n    state: { biz_days, custom_value_map, custom_eid, custom_rid }\n  } = useContext(RootContext);\n  const { width, height } = chartSize(size)\n  useEffect(() => {\n    const days_len = biz_days.length;\n    const eid = Number(custom_eid);\n    const rid = Number(custom_rid);\n    if (days_len > 0 && tasks.length > 0 && custom_eid && custom_rid) {\n      const allTaskVal = getSumCustomVal(custom_value_map, tasks, eid);\n      const data = biz_days.map((day, idx) => {\n        const label = dayNameFromIdx(day, idx);\n        const ideal = (allTaskVal * idx) / (days_len - 1);\n        const total = getSumCustomVal(\n          custom_value_map,\n          getTaskCreated(tasks, day),\n          eid\n        );\n\n        if (\n          moment()\n            .local()\n            .endOf(\"days\")\n            .diff(moment(day)) > 0\n        ) {\n          const completed = getSumCustomVal(\n            custom_value_map,\n            getTaskFinished(tasks, day),\n            eid\n          );\n          const actual = getSumCustomVal(\n            custom_value_map,\n            getTaskFinished(tasks, day),\n            rid\n          );\n\n          return { label, ideal, completed, actual, total };\n        } else {\n          return { label, ideal, total };\n        }\n      });\n      setData(data);\n    } else {\n      setData([]);\n    }\n  }, [tasks, biz_days, custom_eid, custom_rid, custom_value_map, setData]);\n  const formatter: TooltipFormatter = useCallback(\n    (value, name) => [Number(value).toFixed(1), _.upperFirst(name)],\n    []\n  );\n  if (data.length === 0) {\n    return null;\n  } else {\n    return (\n      <ComposedChart data={data} width={width} height={height}>\n        <YAxis />\n        <XAxis dataKey=\"label\" />\n        <Tooltip formatter={formatter} />\n        {size === \"lg\" &&\n          <Legend formatter={_.upperFirst} />\n        }\n        <Bar dataKey=\"completed\" fill=\"#28a745\" />\n        <Bar dataKey=\"actual\" fill=\"#17a2b8\" />\n        <Line dataKey=\"ideal\" stroke=\"#007bff\" strokeDasharray=\"5 5\" />\n        <Line dataKey=\"total\" stroke=\"#dc3545\" />\n      </ComposedChart>\n    );\n  }\n};\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\nimport {\n  ComposedChart,\n  Tooltip,\n  Line,\n  XAxis,\n  YAxis,\n  Bar,\n  Legend,\n  TooltipFormatter\n} from \"recharts\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../../Provider\";\nimport { dayNameFromIdx } from \"../DaysSelector\";\n\nimport { getSumCustomVal } from \"../task/UserTasks\";\nimport { getTaskCreated, getTaskFinished, getTaskCreatedToday, BurnChartProps, chartSize } from \"./Chart\";\ninterface IChartItem {\n  label: string;\n  ideal: number;\n  remaining?: number;\n  add?: number;\n}\n\nexport const BurnDownChart: React.FC<BurnChartProps> = ({ tasks, size = \"lg\" }) => {\n  const [data, setData] = useState<IChartItem[]>([]);\n  const {\n    state: { biz_days, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  const { width, height } = chartSize(size)\n  useEffect(() => {\n    const days_len = biz_days.length;\n    const eid = Number(custom_eid);\n    if (days_len > 0 && tasks.length > 0 && custom_eid) {\n      const allTaskVal = getSumCustomVal(\n        custom_value_map,\n        getTaskCreated(tasks, biz_days[0]),\n        eid\n      );\n      const data = biz_days.map((day, idx) => {\n        const label = dayNameFromIdx(day, idx);\n        const ideal = allTaskVal - (allTaskVal * idx) / (days_len - 1);\n        if (\n          moment()\n            .local()\n            .endOf(\"days\")\n            .diff(moment(day)) > 0\n        ) {\n          const add =\n            idx === 0\n              ? 0\n              : getSumCustomVal(\n                custom_value_map,\n                getTaskCreatedToday(tasks, day),\n                eid\n              );\n          const remaining = Math.max(\n            getSumCustomVal(custom_value_map, getTaskCreated(tasks, day), eid) -\n            add -\n            getSumCustomVal(\n              custom_value_map,\n              getTaskFinished(tasks, day),\n              eid\n            ),\n            0\n          );\n\n          return { label, ideal, remaining, add };\n        } else {\n          return { label, ideal };\n        }\n      });\n      setData(data);\n    } else {\n      setData([]);\n    }\n  }, [tasks, biz_days, custom_eid, custom_value_map, setData]);\n  const formatter: TooltipFormatter = useCallback(\n    (value, name) => [Number(value).toFixed(1), _.upperFirst(name)],\n    []\n  );\n  if (data.length === 0) {\n    return null;\n  } else {\n    return (\n      <ComposedChart data={data} width={width} height={height}>\n        <YAxis />\n        <XAxis dataKey=\"label\" />\n        <Tooltip formatter={formatter} />\n        {size === \"lg\" &&\n          <Legend formatter={_.upperFirst} />\n        }\n        <Bar dataKey=\"remaining\" fill=\"#8884d8\" stackId=\"a\" />\n        <Bar dataKey=\"add\" fill=\"#82ca9d\" stackId=\"a\" />\n        <Line dataKey=\"ideal\" />\n      </ComposedChart>\n    );\n  }\n};\n","import React, { useState, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faChalkboard\n} from \"@fortawesome/free-solid-svg-icons\";\nimport moment from \"moment\";\nimport { ITask } from \"../../store\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n} from \"reactstrap\";\nimport { ChartTypeSelector, ChartType } from \"../../features/chart/ChartTypeSelector\";\nimport { BurnUpChart } from \"./BurnUp\";\nimport { BurnDownChart } from \"./BurnDown\";\nexport const getTaskFinished = (tasks: ITask[], date: string) =>\n  tasks.filter(task =>\n    task.finished_date\n      ? moment(date)\n        .local()\n        .endOf(\"days\")\n        .diff(moment(task.finished_date)) > 0\n      : false\n  );\n\nexport const getTaskCreatedToday = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .format(\"YYYY-MM-DD\") ===\n      moment(task.created_date)\n        .local()\n        .format(\"YYYY-MM-DD\")\n  );\n\nexport const getTaskCreated = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .endOf(\"days\")\n        .diff(moment(task.created_date)) > 0\n  );\n\n\ntype ChartSizeType = \"lg\" | \"sm\"\nexport interface BurnChartProps {\n  tasks: ITask[]\n  size?: ChartSizeType\n}\nexport const chartSize = (size: ChartSizeType) => {\n  if (size === \"sm\") {\n    return {\n      width: 250,\n      height: 200\n    }\n  } else {\n    return {\n      width: 800,\n      height: 400\n    }\n  }\n}\nexport const Chart = ({ tasks }: { tasks: ITask[] }) => {\n  const [chartType, setChartType] = useState<ChartType>(\"Burn up\");\n  const handleSelect = useCallback((type: ChartType) => {\n    setChartType(type);\n  }, [setChartType]);\n  if (tasks.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card className=\"mb-2\">\n        <CardHeader className=\"d-flex\">\n          <div className=\"mr-auto\">\n            <Button size=\"sm\" tag={Link} to={\"/board\"} color=\"primary\" className=\"mr-2\" title=\"Board\">\n              <FontAwesomeIcon icon={faChalkboard} />\n            </Button>\n            Chart</div>\n          <ChartTypeSelector onSelect={handleSelect} type={chartType} />\n        </CardHeader>\n        {chartType === \"Burn down\" ? (\n          <BurnDownChart tasks={tasks} />\n        ) : (\n            <BurnUpChart tasks={tasks} />\n          )}\n      </Card>\n    );\n  }\n};\n","import React, { useContext } from \"react\";\nimport { UserTasks } from \"./task/UserTasks\";\nimport { UnEstimatedTasks } from \"./UnEstimatedTasks\";\nimport { NotAssignedTasks } from \"./NotAssignedTasks\";\nimport { Chart } from \"./chart\";\n// import { Hero } from \"./Hero\";\nimport { RootContext } from \"../Provider\";\n\nexport const OverView: React.FC = () => {\n  const {\n    state: { tasks }\n  } = useContext(RootContext);\n  return (\n    <>\n      <Chart tasks={tasks} />\n      <UserTasks />\n      {/* <Hero /> */}\n      <NotAssignedTasks />\n      <br />\n      <UnEstimatedTasks />\n    </>\n  );\n};\n","import React, { useContext, useMemo } from \"react\";\nimport cn from \"classnames\";\nimport { getSumCustomVal } from \"../../components/task/UserTasks\";\nimport { RootContext } from \"../../Provider\";\nimport { Progress } from \"reactstrap\";\nimport st from \"./TaskTotalHours.module.css\"\nimport { ITask } from \"./taskSlice\";\ninterface TaskTotalHoursProps {\n  tasks: ITask[];\n  totalHours: number;\n  rejectVal: number;\n}\nexport const TaskTotalHours: React.FC<TaskTotalHoursProps> = ({ tasks, totalHours, rejectVal }) => {\n  const { state: { custom_eid, custom_value_map } } = useContext(RootContext)\n  const sum = useMemo(() => getSumCustomVal(custom_value_map, tasks, Number(custom_eid)), [\n    custom_eid, custom_value_map, tasks\n  ])\n  const total = sum - rejectVal;\n  const max = totalHours * 1.5;\n  const isOver = total > totalHours\n\n  return (\n    <Progress multi style={{ position: \"relative\" }}>\n      <Progress bar value={total} max={max} color={isOver ? \"danger\" : \"success\"} >{total} / {totalHours}</Progress>\n      <Progress className={cn(st.total, { [st.is_over]: isOver })}\n        bar color={isOver ? \"success\" : \"success\"} value={totalHours} max={max} > {isOver ? `${total} / ${totalHours} ` : \"\"}</Progress>\n    </Progress>\n  )\n}","import React, { useContext, useMemo, useState, useCallback } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport { InputGroupDisplayNumber } from \"./common/InputGroupDisplayNumber\";\nimport { Card, CardHeader, CardBody, CardFooter, Row, Col } from \"reactstrap\";\nimport classNames from \"classnames\";\nimport {\n  getCustomValVersion,\n  isCustomValInvalid,\n  isCustomValValid,\n  TaskProgress,\n  getSumCustomVal\n} from \"./task/UserTasks\";\nimport { UserStory, Grade, convToTasksByUserStory } from \"./UserStory\";\nimport { useUserStorySelector, IUserStory } from \"../features/userStory/userStorySlice\";\nimport { TaskTotalHours } from \"../features/task/TaskTotalHours\";\ninterface PersonalTasksProps {\n  totalHours?: number\n}\nexport const PersonalTasks: React.FC<PersonalTasksProps> = ({ totalHours = 0 }) => {\n  const [rejectUS, setRejectUS] = useState<{ [key: number]: number }>({})\n  const usList = useUserStorySelector.useList()\n  const {\n    state: {\n      custom_value_map,\n      biz_days,\n      user_tasks,\n      custom_attr_e,\n      custom_attr_r\n    }\n  } = useContext(RootContext);\n  const userStoryMap = useMemo(() => new Map<number, IUserStory>(usList.map(us => [us.id, us])), [usList])\n  const userStories = useMemo(() => convToTasksByUserStory(user_tasks), [\n    user_tasks\n  ]);\n  const items = useMemo(() => _.chain(userStories)\n    .map(item => ({\n      item,\n      tags: _.chain(userStoryMap.get(item.user_story)).get(\"tags\", []).map(i => _.first(i)).compact().value()\n    }))\n    .sortBy(i => Number.isNaN(i.item.user_story) ? -1 : i.tags.length)\n    .reverse()\n    .value(), [userStories, userStoryMap])\n  const e = useMemo(\n    () => getSumCustomVal(custom_value_map, user_tasks, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, user_tasks]\n  );\n  const r = useMemo(\n    () => getSumCustomVal(custom_value_map, user_tasks, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, user_tasks]\n  );\n  const valid = useMemo(\n    () =>\n      isCustomValValid(\n        e,\n        r,\n        userStories.every(item => item.is_closed)\n      ),\n    [e, r, userStories]\n  );\n  const invalid = useMemo(() => isCustomValInvalid(e, r), [e, r]);\n  const loading = useMemo(\n    () => user_tasks.some(item => !getCustomValVersion(custom_value_map, item)),\n    [custom_value_map, user_tasks]\n  );\n  const handleSelect = useCallback((id: number, value: number) => {\n    setRejectUS({ ...rejectUS, [id]: value })\n  }, [rejectUS, setRejectUS])\n  if (!custom_attr_e.id || !custom_attr_r.id || biz_days.length <= 1) {\n    return null;\n  }\n  const rejectVal = _.sum(Object.values(rejectUS))\n  return (\n    <>\n      {items.map(({ item, tags }) => (\n        <UserStory item={item} key={item.user_story} tags={tags}\n          onSelect={handleSelect}\n          totalHours={totalHours} />\n      ))}\n      <Card>\n        <CardHeader className={classNames(\"alert-info\")}>Total</CardHeader>\n        <CardBody>\n          <Row>\n            <Col>\n              <InputGroupDisplayNumber\n                label={custom_attr_e.name}\n                value={e - rejectVal}\n                loading={loading}\n              />\n            </Col>\n            <Col>\n              <InputGroupDisplayNumber\n                label={custom_attr_r.name}\n                value={r}\n                invalid={invalid}\n                valid={valid}\n                loading={loading}\n              />\n            </Col>\n            <Col>\n              <Grade e={e} r={r} />\n            </Col>\n          </Row>\n        </CardBody>\n        <CardFooter>\n          {totalHours > 0 ?\n            <TaskTotalHours tasks={user_tasks} rejectVal={rejectVal} totalHours={totalHours || 1} /> :\n            <TaskProgress tasks={user_tasks} />\n          }\n        </CardFooter>\n      </Card>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Card, CardHeader } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\n\nimport { AvatarSquare } from \"./task/UserTasks\";\nexport const PersonalInfo: React.FC = () => {\n  const {\n    state: { user }\n  } = useContext(RootContext);\n  return (\n    <Card>\n      {user && (\n        <CardHeader>\n          <AvatarSquare src={user.photo} size=\"xlarge\" />\n          {user.username} 's task\n        </CardHeader>\n      )}\n    </Card>\n  );\n};\n","import React, { useContext, useEffect, useCallback } from \"react\";\nimport { Button, Alert, Navbar } from \"reactstrap\";\nimport { PersonalTasks } from \"./PersonalTasks\";\nimport { PersonalInfo } from \"./PersonalInfo\";\nimport { RootContext } from \"../Provider\";\nimport { Chart } from \"./chart\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { ActionTypes } from \"../actions\";\nimport { UpdateButton } from \"./UpdateButton\";\nimport { SignInForm } from \"./SignInForm\";\nimport { useSettingSelector } from \"../features/setting/settingSlice\";\n\nexport const PersonalPage: React.FC = () => {\n  const url = useSettingSelector.useUrl()\n  const {\n    state: { user, user_tasks },\n    dispatch\n  } = useContext(RootContext);\n  const { uid, total_hours } = useParams();\n  const totalHours = Number(total_hours || 0)\n  const history = useHistory();\n  const handleGoBack = useCallback(() => {\n    history.goBack();\n  }, [history]);\n  useEffect(() => {\n    if (uid && url) {\n      dispatch({ type: ActionTypes.FETCH_USER, payload: { uid } });\n    }\n    return () => {\n      dispatch({ type: ActionTypes.RESET_USER });\n    };\n  }, [dispatch, uid, url]);\n\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Button onClick={handleGoBack} className=\"mr-auto\">\n          <FontAwesomeIcon icon={faArrowCircleLeft} /> Go back\n        </Button>\n        <SignInForm />\n        <UpdateButton />\n      </Navbar>\n      {user ? (\n        <>\n          <PersonalInfo />\n          <br />\n          {totalHours === 0 &&\n            <>\n              <Chart tasks={user_tasks} />\n              <br />\n            </>\n          }\n          <PersonalTasks totalHours={totalHours} />\n        </>\n      ) : (\n          <Alert color=\"danger\">This user does not exist.</Alert>\n        )}\n    </>\n  );\n};\n","import React, { useContext, useMemo, useCallback } from \"react\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport ReactTooltip from \"react-tooltip\";\nimport CalendarHeatmap from \"react-calendar-heatmap\";\nimport { Alert } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\ninterface IItem {\n  date: string;\n  value: number;\n  pureValue: number;\n}\nexport const PomodoroHeatmap: React.FC = () => {\n  const {\n    state: { pomodoro_daily_totals }\n  } = useContext(RootContext);\n  const values = useMemo(\n    () =>\n      pomodoro_daily_totals.map(item => ({\n        date: item.dateKey,\n        value: item.value,\n        pureValue: item.pureValue\n      })),\n    [pomodoro_daily_totals]\n  );\n  const maxVal = (_.maxBy(values, \"value\") || { value: 1 }).value;\n  const classForValue = useCallback(\n    (item: IItem) =>\n      item\n        ? `style-pomodoro color-pomodoro-${Math.ceil(\n            ((item.value || 0) * 8) / maxVal\n          )}`\n        : \"style-pomodoro empty-pomodoro\",\n    [maxVal]\n  );\n  const tooltipDataAttrs = useCallback(\n    (item: IItem) =>\n      item && item.date\n        ? {\n            \"data-tip\": `${item.value} Pomodoros on ${item.date}`\n          }\n        : null,\n    []\n  );\n  const startDate = useMemo(\n    () =>\n      moment()\n        .subtract(12, \"month\")\n        .toDate(),\n    []\n  );\n  if (pomodoro_daily_totals.length === 0) {\n    return <Alert color=\"warning\">No pomodoro history!</Alert>;\n  } else {\n    return (\n      <>\n        <CalendarHeatmap\n          startDate={startDate}\n          showWeekdayLabels={true}\n          values={values}\n          classForValue={classForValue}\n          tooltipDataAttrs={tooltipDataAttrs}\n        />\n        <ReactTooltip />\n      </>\n    );\n  }\n};\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport { LinearProgress } from \"@rmwc/linear-progress\";\nimport { ThemeProvider } from \"@rmwc/theme\";\nimport { Chip, ChipSet } from \"@rmwc/chip\";\nimport {\n  Card,\n  Collapse,\n  CardHeader,\n  CardBody,\n  Badge,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroupButtonDropdown,\n  Button,\n  Spinner\n} from \"reactstrap\";\nimport styles from \"./Pomodoro.module.css\";\nimport classNames from \"classnames\";\nimport { Tomato, TomatoState } from \"./Tomato\";\nimport { ToggleIcon } from \"./Controller\";\nimport tomatoIcon from \"../tomato.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { stopPropagation } from \"../util/handler\";\nimport {\n  faCoffee,\n  faPlay,\n  faPause,\n  faRedo,\n  faCookie,\n  faTimes,\n  faTasks,\n  faUserFriends\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  TimerState,\n  TimerMode,\n  TimerDurationMin,\n  timer,\n  TimerEventListener\n} from \"../util/timer\";\nimport { RootContext } from \"../Provider\";\nimport { PomodoroHeatmap } from \"./PomodoroHeatmap\";\nimport { ActionTypes } from \"../sideEffectors\";\nimport { notify, NotifyClickHandler } from \"../util/notify\";\nimport { commonActions } from \"../features/common/commonSlice\"\n\nconst Favico = require(\"favico.js-slevomat\");\nconst favico = new Favico({ type: \"rectangle\" });\nconst secToMin = (seconds: number) => Math.ceil(seconds / 60);\ninterface TimerIconProps {\n  mode: TimerMode;\n}\nconst toValueAndUnit = (seconds: number): [number, string] =>\n  seconds >= 60 ? [secToMin(seconds), \"min\"] : [Math.ceil(seconds), \"sec\"];\nconst TimerIcon: React.FC<TimerIconProps> = ({ mode }) => {\n  switch (mode) {\n    case TimerMode.SHORT: {\n      return (\n        <FontAwesomeIcon\n          className={classNames(\"fa-fw\", styles.short_break_icon)}\n          icon={faCoffee}\n        />\n      );\n    }\n    case TimerMode.LONG: {\n      return (\n        <FontAwesomeIcon\n          className={classNames(\"fa-fw\", styles.long_break_icon)}\n          icon={faCookie}\n        />\n      );\n    }\n    default: {\n      return <Tomato state={TomatoState.FRESH} />;\n    }\n  }\n};\ninterface TimerItemProps {\n  mode: TimerMode;\n  onSelect: (mode: TimerMode) => void;\n}\nconst TimerItem: React.FC<TimerItemProps> = ({ mode, onSelect }) => {\n  const handleClick = useCallback(() => {\n    onSelect(mode);\n  }, [mode, onSelect]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <TimerIcon mode={mode} />\n      {mode}\n    </DropdownItem>\n  );\n};\nconst clickToClose: NotifyClickHandler = closeFn => {\n  timer.start();\n  closeFn();\n};\nconst clickToWaitClose: NotifyClickHandler = closeFn => {\n  timer.start();\n  closeFn(2);\n};\nconst clickToChangeFocus: NotifyClickHandler = closeFn => {\n  timer.changeMode(TimerMode.FOCUS);\n  timer.start();\n  closeFn();\n};\nexport const Pomodoro: React.FC = () => {\n  const dispatch = useDispatch()\n  const {\n    state: {\n      loaded,\n      pomodoro_date,\n      pomodoro_number,\n      pomodoro_used_number,\n      task_id,\n      task,\n      auth_token,\n      pomodoro_live_counts\n    },\n    dispatch: xdispatch\n  } = useContext(RootContext);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenDropdown, setIsOpenDropdown] = useState(false);\n  const [remaining, setRemaining] = useState(TimerDurationMin[TimerMode.FOCUS]);\n  const [state, setState] = useState<TimerState>(TimerState.STOPPED);\n  const [mode, setMode] = useState<TimerMode>(TimerMode.FOCUS);\n  const [progress, setProgress] = useState(0);\n  const [unit, setUnit] = useState(\"min\");\n\n  const toggleDropdown = useCallback(() => {\n    setIsOpenDropdown(prev => !prev);\n  }, []);\n  const handleSelect = useCallback((mode: TimerMode) => {\n    timer.changeMode(mode);\n  }, []);\n  const handleClick = useCallback(() => {\n    switch (state) {\n      case TimerState.RUNNING: {\n        timer.pause();\n        break;\n      }\n      case TimerState.PAUSED: {\n        timer.resume();\n        break;\n      }\n      case TimerState.STOPPED: {\n        timer.start();\n      }\n    }\n  }, [state]);\n  const setRemainingAndUnit = useCallback((seconds: number) => {\n    const [val, unit] = toValueAndUnit(seconds);\n    setRemaining(val);\n    setUnit(unit);\n  }, []);\n  const handleState: TimerEventListener = useCallback(\n    status => {\n      setState(status.state);\n      setRemainingAndUnit(status.remaining);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleMode: TimerEventListener = useCallback(\n    status => {\n      setMode(status.mode);\n      setRemainingAndUnit(status.duration);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleTick: TimerEventListener = useCallback(\n    status => {\n      setRemainingAndUnit(status.remaining);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleExpire: TimerEventListener = useCallback(\n    (status, completedAt?: Date) => {\n      let num = pomodoro_number;\n      handleState(status);\n      if (status.mode === TimerMode.FOCUS) {\n        xdispatch({\n          type: ActionTypes.ADD_POMODORO,\n          meta: {\n            completedAt: completedAt || new Date(),\n            duration: status.duration,\n            pure: status.checkpointElapsed === 0\n          }\n        });\n        num++;\n        if (num % 4 === 0) {\n          timer.changeMode(TimerMode.LONG);\n        } else {\n          timer.changeMode(TimerMode.SHORT);\n        }\n        dispatch(commonActions.updateData())\n      } else {\n        timer.changeMode(TimerMode.FOCUS);\n      }\n      let title: string = \"\";\n      let body: string;\n      let option: string | undefined = undefined;\n      let onClick = clickToClose;\n      let onDblclick: NotifyClickHandler | undefined = undefined;\n      body = `${num} Pomodoros today!`;\n      switch (timer.mode) {\n        case TimerMode.FOCUS: {\n          title = \"Start Focusing.\";\n          break;\n        }\n        case TimerMode.SHORT: {\n          title = \"Take a Short Break.\";\n          option = \"Retry focusing if double click.\";\n          onClick = clickToWaitClose;\n          onDblclick = clickToChangeFocus;\n          break;\n        }\n        case TimerMode.LONG: {\n          title = \"Take a Long Break.\";\n          option = \"Retry focusing if double click.\";\n          onClick = clickToWaitClose;\n          onDblclick = clickToChangeFocus;\n          break;\n        }\n      }\n      notify({\n        title,\n        body,\n        option,\n        icon: tomatoIcon,\n        onClick,\n        onDblclick\n      });\n    },\n    [xdispatch, handleState, pomodoro_number, dispatch]\n  );\n  const handleRetry = useCallback(() => {\n    timer.changeMode(TimerMode.FOCUS, true);\n  }, []);\n  const handleRemove = useCallback(() => {\n    xdispatch({ type: ActionTypes.RESET_TASK_ID });\n  }, [xdispatch]);\n  const handleAddFBTimer: TimerEventListener = useCallback(\n    status => {\n      let title: string = \" from firebase!\";\n      let num = pomodoro_number;\n      const { remaining } = status;\n\n      if (status.mode === TimerMode.FOCUS) {\n        num++;\n        if (num % 4 === 0) {\n          title = `Take a Long Break ${title}`;\n        } else {\n          title = `Take a Short Break ${title}`;\n        }\n      } else {\n        title = `Start Focusing ${title}`;\n      }\n      const body = `${num} Pomodoros today!`;\n      xdispatch({\n        type: ActionTypes.ADD_FB_TIMER,\n        payload: {\n          title,\n          body,\n          remaining\n        }\n      });\n    },\n    [xdispatch, pomodoro_number]\n  );\n  const handleDelFBTimer: TimerEventListener = useCallback(\n    status => {\n      xdispatch({\n        type: ActionTypes.DEL_FB_TIMER\n      });\n    },\n    [xdispatch]\n  );\n\n  useEffect(() => {\n    timer.on(\"tick\", handleTick);\n    timer.on(\"start\", handleState);\n    timer.on(\"start\", handleAddFBTimer);\n    timer.on(\"stop\", handleState);\n    timer.on(\"stop\", handleDelFBTimer);\n    timer.on(\"pause\", handleState);\n    timer.on(\"pause\", handleDelFBTimer);\n    timer.on(\"resume\", handleState);\n    timer.on(\"resume\", handleAddFBTimer);\n    timer.on(\"expire\", handleExpire);\n    timer.on(\"change_mode\", handleMode);\n    return () => {\n      timer.removeAllListeners();\n    };\n  }, [\n    handleExpire,\n    handleMode,\n    handleState,\n    handleTick,\n    handleAddFBTimer,\n    handleDelFBTimer\n  ]);\n  useEffect(() => {\n    setMode(timer.mode);\n    setState(timer.state);\n    setRemainingAndUnit(timer.remaining);\n    if (timer.restoreExpired && auth_token) {\n      _.defer(() => {\n        handleExpire(timer.status);\n      });\n      timer.restoreExpired = false;\n    }\n  }, [auth_token, handleExpire, setRemainingAndUnit]);\n  useEffect(() => {\n    const today = moment().format(\"YYYY-MM-DD\");\n    if (loaded && pomodoro_date !== today) {\n      xdispatch({\n        type: ActionTypes.RESET_POMODORO,\n        payload: { pomodoro_date: today }\n      });\n      timer.changeMode(TimerMode.FOCUS);\n    }\n  }, [xdispatch, loaded, pomodoro_date]);\n  useEffect(() => {\n    if (Notification.permission !== \"denied\") {\n      Notification.requestPermission();\n    }\n  }, []);\n  useEffect(() => {\n    let bgColor = mode === TimerMode.FOCUS ? \"#f00\" : \"#0f0\";\n    let textColor = mode === TimerMode.FOCUS ? \"#fff\" : \"#000\";\n    let animation = \"fade\";\n    if (unit === \"sec\") {\n      [bgColor, textColor] = [textColor, bgColor];\n      animation = \"none\";\n    }\n    switch (state) {\n      case TimerState.RUNNING: {\n        favico.badge(remaining, {\n          bgColor,\n          textColor,\n          animation\n        });\n        break;\n      }\n      case TimerState.PAUSED: {\n        favico.badge(\"-\", { bgColor, textColor, animation });\n        break;\n      }\n      default: {\n        favico.reset();\n      }\n    }\n  }, [mode, remaining, state, unit]);\n  useEffect(() => {\n    const duration = TimerDurationMin[mode] * 60;\n    const val = unit === \"min\" ? remaining * 60 : remaining;\n    setProgress(0.01 + ((duration - val) * 99) / duration / 100);\n  }, [mode, remaining, unit]);\n  useEffect(() => {\n    xdispatch({\n      type: ActionTypes.SET_POMODORO_STATE,\n      payload: { pomodoro_state: state }\n    });\n  }, [xdispatch, state]);\n  useEffect(() => {\n    xdispatch({\n      type: ActionTypes.SET_POMODORO_MODE,\n      payload: { pomodoro_mode: mode }\n    });\n  }, [xdispatch, mode]);\n  const handleToggle = useCallback(() => {\n    setIsOpen(prev => !prev);\n  }, []);\n  const buffer = state === TimerState.RUNNING ? progress : 1;\n  if (!auth_token) {\n    return null;\n  }\n  const taskTitle = task\n    ? `#${task.ref} ${_.get(\n      task,\n      \"user_story_extra_info.subject\",\n      \"Unassigned tasks\"\n    )} / ${task.subject}`\n    : \"\";\n  const taskSubject = task\n    ? _.truncate(`#${task.ref} ${task.subject}`, { length: 10 })\n    : \"\";\n  const displayLive = Object.values(pomodoro_live_counts).some(val => val > 0);\n  return (\n    <Card className={classNames(styles.top, \"sticky-top\")}>\n      <ThemeProvider\n        options={{ primary: mode === TimerMode.FOCUS ? \"red\" : \"green\" }}\n      >\n        <LinearProgress\n          buffer={buffer}\n          progress={progress}\n          closed={state === TimerState.STOPPED}\n        />\n      </ThemeProvider>\n      <CardHeader onClick={handleToggle}>\n        <div className=\"d-flex\">\n          <ToggleIcon isOpen={isOpen} />\n          <InputGroup className={classNames(styles.button_group, \"ml-1\")}>\n            <InputGroupButtonDropdown\n              onClick={stopPropagation}\n              isOpen={isOpenDropdown}\n              toggle={toggleDropdown}\n              addonType=\"prepend\"\n            >\n              <DropdownToggle color=\"light\" size=\"sm\" caret>\n                <TimerIcon mode={mode} />\n              </DropdownToggle>\n              <DropdownMenu>\n                <TimerItem mode={TimerMode.FOCUS} onSelect={handleSelect} />\n                <TimerItem mode={TimerMode.SHORT} onSelect={handleSelect} />\n                <TimerItem mode={TimerMode.LONG} onSelect={handleSelect} />\n              </DropdownMenu>\n            </InputGroupButtonDropdown>\n            <InputGroupAddon addonType=\"prepend\" onClick={stopPropagation}>\n              <InputGroupText\n                className={classNames(styles.fix_w, {\n                  \"font-weight-bold\": state === TimerState.RUNNING\n                })}\n              >\n                {remaining}\n              </InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon onClick={stopPropagation} addonType=\"prepend\">\n              {unit}\n            </InputGroupAddon>\n            <InputGroupAddon addonType=\"append\" onClick={stopPropagation}>\n              {state === TimerState.RUNNING ? (\n                <Button color=\"danger\" onClick={handleClick}>\n                  <FontAwesomeIcon icon={faPause} />\n                </Button>\n              ) : (\n                  <Button color=\"primary\" onClick={handleClick}>\n                    <FontAwesomeIcon icon={faPlay} />\n                  </Button>\n                )}\n            </InputGroupAddon>\n\n            {mode !== TimerMode.FOCUS && (\n              <InputGroupAddon addonType=\"append\" onClick={stopPropagation}>\n                <Button\n                  color=\"light\"\n                  onClick={handleRetry}\n                  title=\"Retry focusing\"\n                >\n                  <FontAwesomeIcon icon={faRedo} className=\"text-muted\" />\n                  <Tomato state={TomatoState.STALE} />\n                </Button>\n              </InputGroupAddon>\n            )}\n\n            {task_id && (\n              <ChipSet\n                onClick={stopPropagation}\n                className={classNames(styles.chip_set)}\n              >\n                <Chip\n                  icon={<FontAwesomeIcon icon={faTasks} />}\n                  onRemove={handleRemove}\n                  title={taskTitle}\n                  trailingIcon={<FontAwesomeIcon icon={faTimes} />}\n                >\n                  {taskSubject ? taskSubject : <Spinner type=\"grow\" />}\n                </Chip>\n              </ChipSet>\n            )}\n            {displayLive && (\n              <div className=\"ml-1\">\n                <div\n                  className={classNames(\n                    \"w-100\",\n                    \"text-light\",\n                    \"bg-danger\",\n                    \"text-center\",\n                    \"rounded\",\n                    \"shadow\",\n                    \"font-weight-bold\",\n                    styles.live\n                  )}\n                >\n                  <FontAwesomeIcon\n                    className=\"ml-1\"\n                    icon={faUserFriends}\n                  ></FontAwesomeIcon>\n                  <span className=\"mx-1\">LIVE</span>\n                </div>\n                <div>\n                  {Object.entries(pomodoro_live_counts)\n                    .filter(([mode, val]) => val > 0)\n                    .map(([mode, val]) => (\n                      <Badge key={mode} color=\"light\" className=\"border\">\n                        <TimerIcon mode={mode as TimerMode} />:{val}\n                      </Badge>\n                    ))}\n                </div>\n              </div>\n            )}\n          </InputGroup>\n          {pomodoro_number > 0 && (\n            <Badge color=\"danger\" className=\"mr-2\">\n              <Tomato /> <FontAwesomeIcon icon={faTimes} /> {pomodoro_number}\n            </Badge>\n          )}\n          {_.times(pomodoro_number).map(i => (\n            <Tomato\n              key={i}\n              state={\n                i < pomodoro_used_number ? TomatoState.STALE : TomatoState.FRESH\n              }\n              br={i % 2 !== pomodoro_number % 2 && i < pomodoro_number - 1}\n            />\n          ))}\n        </div>\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <CardBody className=\"bg-grass\">\n          <PomodoroHeatmap />\n        </CardBody>\n      </Collapse>\n    </Card>\n  );\n};\n","import { toastr } from \"./toastr\";\ntype CloseFn = (sec?: number) => void;\nexport type NotifyClickHandler = (close: CloseFn) => void;\ninterface NotifyArgs {\n  title: string;\n  body: string;\n  option?: string;\n  icon: string;\n  onClick: NotifyClickHandler;\n  onDblclick?: NotifyClickHandler;\n}\nexport const notify = ({\n  title,\n  body,\n  option = \"\",\n  icon,\n  onClick,\n  onDblclick\n}: NotifyArgs) => {\n  let clickCount = 0;\n  let closeTimer: NodeJS.Timeout | null = null;\n  if (Notification.permission === \"granted\") {\n    const notification = new Notification(title, {\n      body: `${body} ${option}`,\n      icon\n    });\n    const closeFn = (sec = 0) => {\n      if (sec) {\n        closeTimer = setTimeout(() => {\n          notification.close();\n          closeTimer = null;\n        }, sec * 1000);\n      } else {\n        notification.close();\n      }\n    };\n    notification.onclick = () => {\n      if (clickCount === 0) {\n        clickCount++;\n        onClick(closeFn);\n      } else {\n        closeTimer && clearTimeout(closeTimer);\n        onDblclick && onDblclick(closeFn);\n      }\n    };\n  } else {\n    toastr.notify({ title, body, icon });\n  }\n};\n","import _ from \"lodash\";\nimport { ITask, ICustomValueMap } from \"./taskSlice\";\nexport const getTasksByUser = (items: ITask[]) =>\n  _.chain(items)\n    .reject(item => !item.assigned_to)\n    .groupBy(\"assigned_to\").value();\nexport const parseCustomVal = (val: string) =>\n  _.chain(val)\n    .replace(/[^0-9.+,]/g, \"\")\n    .replace(/[+]/g, \",\")\n    .split(\",\")\n    .compact()\n    .map(Number)\n    .sum()\n    .value();\nexport const getSumCustomVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, id))\n    .sum()\n    .value();\nexport const getCustomVal = (\n  custom_value_map: ICustomValueMap,\n  task: ITask,\n  id: number\n) => {\n  if (custom_value_map.has(task)) {\n    return parseCustomVal(\n      _.get(custom_value_map.get(task), `attributes_values.${id}`, \"0\")\n    );\n  } else {\n    return 0;\n  }\n};\nexport const getSumCustomValClosed = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  getSumCustomVal(\n    custom_value_map,\n    tasks.filter(item => item.is_closed),\n    id\n  );","import React from \"react\";\nimport { Avatar, AvatarProps } from \"@rmwc/avatar\";\nexport const AvatarSquare: React.FC<AvatarProps> = props => {\n  const src = props.src || `http://i.pravatar.cc/80?u=${Math.random()}`;\n  return <Avatar {...props} src={src} square className=\"mr-1\" />;\n};","import React, { useContext, useState, useCallback, useMemo } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../../Provider\";\nimport { Col, Row, Card, CardHeader, CardBody, Breadcrumb, BreadcrumbItem } from \"reactstrap\";\nimport { getTasksByUser, getSumCustomValClosed } from \"../task/util\"\nimport { ITask } from \"../task/taskSlice\";\nimport { IUser } from '../user/userSlice'\nimport { Link } from \"react-router-dom\";\nimport { AvatarSquare } from \"../user/AvatarSquare\";\nimport { BurnUpChart, BurnDownChart } from \"../chart\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHome, faChalkboard } from \"@fortawesome/free-solid-svg-icons\";\nimport { UpdateButton } from \"../common\";\nimport { ChartType, ChartTypeSelector } from \"../chart/ChartTypeSelector\";\ninterface BoardItemProps {\n  user: IUser;\n  tasks: ITask[];\n  type: ChartType;\n}\nconst BoardItem: React.FC<BoardItemProps> = ({ user, tasks, type }) => {\n  return (\n    <Col sm=\"12\" md=\"6\" lg=\"4\" >\n      <Card>\n        <CardHeader className=\"text-truncate\" title={user.username}>\n          <AvatarSquare src={user.photo} />\n          <Link to={`/users/${user.id}`}>\n            {user.username}\n          </Link>\n        </CardHeader>\n        <CardBody>\n          {type === \"Burn down\" ?\n            <BurnDownChart tasks={tasks} size=\"sm\" />\n            :\n            <BurnUpChart tasks={tasks} size=\"sm\" />\n          }\n        </CardBody>\n      </Card>\n    </Col>)\n}\nexport const BoardPage: React.FC = () => {\n  const { state: { tasks, project: { members }, custom_value_map, custom_eid } } = useContext(RootContext)\n  const [chartType, setChartType] = useState<ChartType>(\"Burn up\")\n  const tasksByUid = useMemo(() => getTasksByUser(tasks), [tasks])\n  const sortedTasks = useMemo(() => _.chain(members)\n    .filter(user => _.has(tasksByUid, user.id))\n    .map(user => ({ user, tasks: tasksByUid[user.id], closed: getSumCustomValClosed(custom_value_map, tasksByUid[user.id], Number(custom_eid)) }))\n    .sortBy(\"closed\")\n    .value(), [tasksByUid, members, custom_value_map, custom_eid])\n  const handleSelect = useCallback((type: ChartType) => {\n    setChartType(type);\n  }, [setChartType]);\n  return (\n    <>\n      <Breadcrumb tag=\"nav\" >\n        <BreadcrumbItem title=\"Home\" tag={Link} to={\"/\"}><FontAwesomeIcon icon={faHome} /></BreadcrumbItem>\n        <BreadcrumbItem className=\"mr-auto\" tag=\"span\" active><FontAwesomeIcon icon={faChalkboard} />  Board</BreadcrumbItem>\n        <ChartTypeSelector type={chartType} onSelect={handleSelect} />\n        <UpdateButton size=\"sm\" />\n      </Breadcrumb>\n      <Row className=\"mt-1\">\n        {sortedTasks.map(({ user, tasks }, i) => (\n          <BoardItem key={i} user={user} tasks={tasks} type={chartType} />\n        ))}\n      </Row>\n    </>\n  )\n\n}\n","import React, { useEffect, useContext } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Dispatch } from \"redux\";\nimport { useSettingSelector } from \"../features/setting/settingSlice\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nlet dis: Dispatch<any>\nexport const getBridgeDispatch = () => dis\nexport const BridgeEffect: React.FC = () => {\n  dis = useDispatch()\n  const url = useSettingSelector.useUrl()\n  const { dispatch } = useContext(RootContext)\n  useEffect(() => {\n    if (url && dispatch) {\n      dispatch({ type: ActionTypes.SET_URL, payload: { url } })\n    }\n  }, [dispatch, url])\n  return <></>\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"@material/switch/dist/mdc.switch.css\";\nimport \"@material/form-field/dist/mdc.form-field.css\";\nimport \"@rmwc/avatar/avatar.css\";\nimport \"@material/chips/dist/mdc.chips.css\";\nimport \"@material/linear-progress/dist/mdc.linear-progress.css\";\nimport \"@material/elevation/dist/mdc.elevation.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"react-calendar-heatmap/dist/styles.css\";\nimport { Provider } from \"react-redux\";\nimport { initialize } from \"./app/initialize\";\nimport { store } from \"./app/store\";\nimport { App } from \"./App\";\nimport { SideEffect } from \"./app/SideEffect\";\n// import * as serviceWorker from \"./serviceWorker\";\nimport \"./util/firebase\";\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n    <SideEffect />\n  </Provider>,\n  document.getElementById(\"root\")\n);\ninitialize()\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","import React from \"react\";\nimport \"./App.css\";\nimport { ToastContainer } from \"react-toastify\";\nimport { Controller } from \"./components/Controller\";\nimport { Provider } from \"./Provider\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { OverView } from \"./components/OverView\";\nimport { PersonalPage } from \"./components/PersonalPage\";\nimport { Pomodoro } from \"./components/Pomodoro\";\nimport { BoardPage } from \"./features/page/BoardPage\";\nimport { BridgeEffect } from \"./app/BridgeEffect\";\nexport const App: React.FC = () => (\n  <div className=\"container-xl\">\n    <ToastContainer className=\"toast-top\" />\n    <HashRouter>\n      <Provider>\n        <Pomodoro />\n        <Controller />\n        <Route exact path=\"/\" component={OverView} />\n        <Route exact path=\"/board\" component={BoardPage} />\n        <Route exact path=\"/users/:uid\" component={PersonalPage} />\n        <Route exact path=\"/users/:uid/:total_hours\" component={PersonalPage} />\n        <BridgeEffect />\n      </Provider>\n    </HashRouter>\n  </div>\n);\n","import React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useSettingSelector } from '../features/setting/settingSlice'\nimport { projectActions } from \"../features/project/projectSlice\";\nimport { useMilestoneSelector } from \"../features/milestone/milestoneSlice\";\nimport { userStoryActions } from \"../features/userStory/userStorySlice\";\nimport { useCommonSelector } from \"../features/common/commonSlice\"\nexport const SideEffect: React.FC = () => {\n  const dispatch = useDispatch()\n  const url = useSettingSelector.useUrl()\n  const mid = useMilestoneSelector.useMid()\n  const updatedTime = useCommonSelector.useUpdatedTime()\n  useEffect(() => {\n    url && dispatch(projectActions.fetchList())\n  }, [url, dispatch])\n  useEffect(() => {\n    url && mid && dispatch(userStoryActions.fetchList({ milestone: Number(mid) }))\n  }, [url, mid, dispatch, updatedTime])\n  return <></>\n}\n\n","import { syncStorage } from \"../app/storage\";\nexport const initialize = () => {\n  syncStorage()\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"top\":\"Pomodoro_top__2KPBC\",\"button_group\":\"Pomodoro_button_group__25QhE\",\"chip_set\":\"Pomodoro_chip_set__UcFix\",\"fix_w\":\"Pomodoro_fix_w__26hsb\",\"short_break_icon\":\"Pomodoro_short_break_icon__3e20m\",\"long_break_icon\":\"Pomodoro_long_break_icon__1CgqS\",\"live\":\"Pomodoro_live__293Tt\"};"],"sourceRoot":""}