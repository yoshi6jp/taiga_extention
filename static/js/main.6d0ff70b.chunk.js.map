{"version":3,"sources":["components/task/TaskTimerButton.module.css","components/Hero.module.css","components/UserTasks.module.css","components/Controller.module.css","components/common/ToggleNumberInput.module.css","tomato.png","actions.ts","util/timer.ts","store.ts","reducer.ts","util/useSideEffector.ts","sideEffectors/fetchProjects.ts","sideEffectors/fetchProject.ts","sideEffectors/fetchMilestones.ts","sideEffectors/fetchTasks.ts","sideEffectors/fetchTaskStatuses.ts","sideEffectors/fetchCustomAttrs.ts","sideEffectors/fetchCustomValueMap.ts","sideEffectors/fetchUser.ts","util/toastr.tsx","sideEffectors/patchCustomValue.ts","sideEffectors/patchTask.ts","sideEffectors/signIn.ts","sideEffectors/syncPomodoro.ts","AppDb.ts","sideEffectors/addPomodoro.ts","sideEffectors/calcPomodoroTotal.ts","sideEffectors/loadPomodoroTotals.ts","util/firebase.ts","sideEffectors/addFBTimer.ts","sideEffectors/dellFBTimer.ts","sideEffectors/index.ts","sideEffectors/signOut.ts","sideEffectors/setAuthToken.ts","sideEffectors/setUrl.ts","sideEffectors/setPid.ts","sideEffectors/setMid.ts","sideEffectors/setCustomEid.ts","sideEffectors/setCustomRid.ts","sideEffectors/syncBizDays.ts","sideEffectors/syncRejectTaskStatusIds.ts","sideEffectors/syncTaskId.ts","sideEffectors/setTimelineCloseTask.ts","sideEffectors/setTimerId.ts","init.ts","Provider.tsx","util/handler.ts","components/common/LinearLoader.tsx","components/ProjectSelector.tsx","components/MilestoneSelector.tsx","components/CustomValuesSelector.tsx","components/DaysSelector.tsx","components/TaskStatusSelector.tsx","components/InputGroupSpinner.tsx","components/TimelimitCloseTask.tsx","components/Controller.tsx","components/UpdateButton.tsx","components/SignInForm.tsx","components/UserTasks.tsx","components/common/ToggleNumberInput.tsx","tomato.svg","components/Tomato.tsx","components/task/TaskTimerButton.tsx","components/common/InputGroupDisplayNumber.tsx","components/UserStory.tsx","components/UnEstimatedTasks.tsx","components/NotAssignedTasks.tsx","components/Chart.tsx","components/Hero.tsx","components/OverView.tsx","components/PersonalTasks.tsx","components/PersonalInfo.tsx","components/PersonalPage.tsx","components/PomodoroHeatmap.tsx","components/Pomodoro.tsx","util/notify.ts","App.tsx","index.tsx","components/Pomodoro.module.css","components/Tomato.module.css","components/UserStory.module.css"],"names":["module","exports","ActionTypes","TimerState","TimerMode","StorageKey","TimerDurationMin","FOCUS","SHORT","LONG","timer","tick","state","STOPPED","mode","duration","checkpointStartAt","NaN","checkpointElapsed","expireTimeout","tickInterval","tickOffsetTimeout","restoreExpired","estimateCompletedAt","Date","restoreStorage","event","listener","this","isStopped","setExpireTimeout","setTickInterval","RUNNING","now","emit","status","saveStorage","clearExpireTimeout","clearTickInterval","isRunning","periodElapsed","PAUSED","isPaused","remaining","stop","start","_","defer","seconds","setTimeout","clearTimeout","adjusted","limit","setSecTickInterval","offset","setInterval","clearInterval","localStorage","setItem","STATE","MODE","CHECKPOINT_START_AT","Number","isNaN","String","CHECKPOINT_ELAPSED","val","lsState","getItem","lsMode","lsCpStartAt","lsCpElapsed","includes","values","isValidMode","changeMode","cpElapsed","cpStartAt","Math","max","elapsed","EventEmitter","_getFromStorage","key","getFromStorage","getFromStorageWithSubkey","subkey","setToStorage","item","setToStorageWithSubkey","initialState","token","timer_id","url","auth_token","auth_error","username","password","user","projects","pid","project","mid","custom_eid","custom_rid","custom_attrs","custom_attr_e","custom_attr_r","biz_days","milestones","milestone","tasks","task_id","task","user_tasks","task_statuses","active_task_statuses","custom_value_map","WeakMap","reject_task_status_ids","updated_time","isOpen","pomodoro_date","pomodoro_number","pomodoro_used_number","loaded","pomodoro_daily_totals","pomodoro_state","pomodoro_mode","timelimit_close_task","in_progress_task_status_id","pomodoro_live_counts","reducer","action","type","SET_TOKEN","payload","SET_TIMER_ID","SET_URL","SET_PROJECTS","SET_PID","SET_PROJECT","SET_MID","SET_MILESTONES","SET_MILESTONE","SET_CUSTOM_EID","SET_CUSTOM_ATTRS","SET_CUSTOM_ATTR_E","SET_CUSTOM_ATTR_R","SET_CUSTOM_RID","SET_BIZ_DAYS","ADD_BIZ_DAY","biz_day","chain","uniq","sort","value","REMOVE_BIZ_DAY","reject","SET_TASKS","SET_TASK_ID","RESET_TASK_ID","SET_TASK","SET_USER_TASKS","SET_TASK_STATUSES","SET_ACTIVE_TASK_STATUSES","SET_CUSTOM_VALUE_MAP","SET_USER","RESET_USER","SET_REJECT_TASK_STATUS_IDS","ADD_REJECT_TASK_STATUS_ID","reject_task_status_id","compact","REMOVE_REJECT_TASK_STATUS_ID","OPEN_CONTROLLER","CLOSE_CONTROLLER","UPDATE_DATA","SIGN_IN","SET_AUTH_TOKEN","SET_AUTH_ERROR","SIGN_OUT","ADD_POMODORO","USE_POMODORO","used_number","RESET_POMODORO","RESTORE_POMODORO","SET_POMODORO_TOTALS","LOADED","SET_POMODORO_STATE","SET_POMODORO_MODE","SET_TIMELIMIT_CLOSE_TASK","SET_IN_PROGRESS_TASK_STATUS_ID","task_status_id","SET_POMODORO_LIVE_COUNT","dispatchSideEffector","dispatch","sideEffector","dispatchSECaller","fetchProjecs","a","fetchData","data","errToastr","fetchProject","FETCH_PROJECT","fetchMilestones","FETCH_MILESTONES","params","fetchTasks","FETCH_TASKS","startM","moment","headers","is_closed","finished_date","diff","fetchTaskStatuses","FETCH_TASK_STATUSES","fetchCustomAttrs","FETCH_CUSTOM_ATTRS","fetchCustomValueMap","FETCH_CUSTOM_VALUE_MAP","length","Promise","all","map","id","custom_attr_val","fetchUser","FETCH_USER","uid","MessageWithIcon","icon","message","className","Notify","title","body","src","style","width","height","alt","toastr","toast","success","faCheck","error","faCheckCircle","patchCustomValue","PATCH_CUSTOM_VALUE","version","find","has","custom_value","get","attributes_values","patchData","meta","update_status","PATCH_TASK","use_pomodoro","patchTask","signIn","postData","USERNAME","PASSWORD","syncPomodoro","dispatchm","POMODORO_DATE","POMODORO_NUMBER","POMODORO_USED_NUMBER","db","items","totals","stores","table","Dexie","addPomodoro","completedAt","pure","dateKey","format","put","CALC_POMODORO_TOTAL","calcPomodoroTotal","query","totalDoc","where","toArray","pureValue","filter","dayOfWeek","day","date","toDate","LOAD_POMODORO_TOTALS","loadPomodoroTotals","dotenv","config","process","apiKey","REACT_APP_apiKey","VapidKey","REACT_APP_VapidKey","firebaseConfig","authDomain","REACT_APP_authDomain","databaseURL","REACT_APP_databaseURL","projectId","REACT_APP_projectId","storageBucket","REACT_APP_storageBucket","messagingSenderId","REACT_APP_messagingSenderId","appId","REACT_APP_appId","firebase","initializeApp","_messaging","messaging","e","console","log","navigator","serviceWorker","register","then","registration","useServiceWorker","usePublicVapidKey","onTokenRefresh","getToken","Timers","firestore","collection","requestPermission","catch","err","addTimer","add","click_action","window","location","href","addFBTimer","ADD_FB_TIMER","delFBTimer","DEL_FB_TIMER","doc","delete","path","axios","baseUrl","post","patch","response","_error_message","rootSideEffector","FETCH_PROJECTS","removeItem","defaults","common","setAuthToken","URL","setUrl","PID","MID","CUSTOM_EID","CUSTOM_RID","setPid","beforeMid","BIZ_DAYS","split","TIMELIMIT_CLOSE_TASK","setMid","setCustomEid","setCustomRid","dispathc","join","syncBizDays","REJECT_TASK_STATUS_IDS","syncRejectTaskStatusIds","TASK_ID","syncTaskId","customize","setTimelineCloseTask","TIMER_ID","setTimerId","init","syncStorage","replace","getCustomAttr","RootContext","createContext","Provider","children","dispatchSE","useCallback","stateStore","useMemo","getter","setter","newState","stateStoreFactory","useSideEffector","useReducer","useEffect","orderBy","order","assigned_to","sortBy","firstDay","local","startOf","task_status","slug","Object","forEach","onSnapshot","docs","size","preventDefault","stopPropagation","LinearLoader","progress","buffer","ProjectSelector","useContext","handleChange","target","InputGroup","InputGroupAddon","addonType","isEmpty","Input","onChange","name","MilestoneSelector","CustomValuesSelector","dayNameFromIdx","idx","getDefaultBizDays","biz","isWeekDay","weekClassName","DayItem","checked","isPlanning","eleId","classNames","FormGroup","check","inline","Label","disabled","isWeekendDay","UncontrolledTooltip","indexOf","dayName","DaysTable","useState","setItems","weekdays","setWeekdays","estimated_start","daysInSprint","estimated_finish","times","i","clone","getDays","weeks","chunk","Table","bordered","days","DaysSelector","Card","CardHeader","StatusItem","defaultChecked","TaskStatusSelector","CardBody","InputGroupSpinner","InputGroupText","faSpinner","TimelimitCloseTask","datetime","setDatetime","isFresh","setIsFresh","handleSubmit","Form","onSubmit","defaultValue","Button","ToggleIcon","rotation","undefined","faChevronCircleRight","Controller","stateUrl","handleUrl","toggle","taskboardUrl","project_extra_info","getTaskboardUrl","spName","range","head","last","getRange","styles","header","onClick","Badge","color","pill","rel","faExternalLinkAlt","Collapse","placeholder","UpdateButton","updateData","faSyncAlt","SignInForm","sign_in_username","setUsername","setPassword","loading","setLoading","handleUsername","handlePassword","handleSignOut","faUser","faSignOutAlt","onInput","invalid","faKey","Spinner","faSignInAlt","barStyles","getTasksByUser","groupBy","AvatarSquare","props","random","square","getCustomVal","sum","getSumCustomVal","getSumCustomValClosed","getCustomValVersion","custon_value_map","isCustomValValid","r","isCustomValInvalid","NameAndWorkLoad","total","imgSrc","faGrinBeam","faGrinBeamSweat","faDizzy","tblCls","Medal","isNumber","abs","getGrade","grade","num","faMedal","TaskProgress","eid","reverse","label","allSum","Progress","multi","bar","UserRow","sums","isPast","hpd","customTotal","setTotal","sumItem","margedTotal","totalStr","photo","custom_input_td","bsSize","step","to","burn_down","getTaskSumByUser","rid","mapValues","reduce","result","UserTasks","members","setHpd","activeLen","taskSumByUser","notAssignedSum","endOf","tasksByUser","sortedMembers","member","Navbar","light","faTimes","faEquals","faLevelDownAlt","faBurn","faGhost","ToggleNumberInput","onEditable","onValueChange","valid","submitting","disabledMessage","setChecked","setVal","running","setRunning","evt","currentTarget","handleVal","input_group","faHandPointRight","min","faCloudUploadAlt","readOnly","faEdit","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","TomatoState","createElement","fill","d","_ref","svgRef","x","y","viewBox","xmlSpace","ref","ForwardRef","forwardRef","Tomato","bl","br","fresh","FRESH","stale","STALE","TaskTimerButton","handleStart","resume","handlePause","pause","btn","faPause","faPlay","InputGroupDisplayNumber","convToTasksByUserStory","user_story","user_story_extra_info","every","needAuthMsg","UserStoryLink","usName","subject","TaskLink","taskName","Grade","display_medal","medal","TaskStatusItem","onSelect","handleClick","DropdownItem","handleSelect","UncontrolledDropdown","DropdownToggle","caret","status_extra_info","DropdownMenu","UserItem","TaskUserSelector","NotAssignedButton","faUserTimes","EstimateInput","unEstimated","ResultInput","setIsOpen","set_used_number","editable","setEditable","setSubmitting","handleToggle","handlePluse","handleMinus","handleReset","handleEditable","handleValueChange","handleUsePomodoro","elId","usableNumber","submittable","isMax","Popover","placement","trigger","PopoverHeader","PopoverBody","ButtonGroup","faPlus","faMinus","faEraser","TaskItem","inactive","Row","Col","UserStoryWithEstimate","UserStoryWithTaskUser","UserStory","xs","md","UnEstimatedTasks","userStories","NotAssignedTasks","getTaskCreated","created_date","Chart","setData","days_len","allTaskVal","estimate","getTaskCreatedToday","getTaskFinished","labelFormatter","formatter","toFixed","dataKey","stackId","rank","hero","prev","rankedHero","ranking","HeroItem","sm","gold","silver","bronze","faAward","CardTitle","z","delay","end","Hero","today","finishedTasks","beginM","endM","targetM","getTaskFinishedPrevious","sumByUser","heros","take","faEllipsisH","faEllipsisV","OverView","PersonalTasks","some","CardFooter","PersonalInfo","PersonalPage","useParams","tag","Link","faArrowCircleLeft","Alert","PomodoroHeatmap","maxVal","maxBy","classForValue","ceil","tooltipDataAttrs","startDate","subtract","showWeekdayLabels","favico","require","secToMin","TimerIcon","short_break_icon","faCoffee","long_break_icon","faCookie","TimerItem","clickToClose","closeFn","clickToWaitClose","clickToChangeFocus","Pomodoro","isOpenDropdown","setIsOpenDropdown","setRemaining","setState","setMode","setProgress","unit","setUnit","toggleDropdown","setRemainingAndUnit","toValueAndUnit","handleState","handleMode","handleTick","handleExpire","option","onDblclick","clickCount","closeTimer","Notification","permission","notification","sec","close","onclick","notify","tomatoIcon","handleRetry","handleRemove","handleAddFBTimer","handleDelFBTimer","on","removeAllListeners","bgColor","textColor","animation","badge","reset","taskTitle","taskSubject","truncate","displayLive","top","options","primary","closed","button_group","InputGroupButtonDropdown","fix_w","faRedo","chip_set","faTasks","onRemove","trailingIcon","live","faUserFriends","entries","App","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6d0ff70b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"TaskTimerButton_btn__3yv2h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gold\":\"Hero_gold__22tvr\",\"silver\":\"Hero_silver__3VD88\",\"bronze\":\"Hero_bronze__2KzSy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gold\":\"UserTasks_gold__1MP40\",\"silver\":\"UserTasks_silver__GpK9Y\",\"bronze\":\"UserTasks_bronze__1aHZc\",\"custom_input_td\":\"UserTasks_custom_input_td__1JWmj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Controller_header__33lvE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_group\":\"ToggleNumberInput_input_group__1wkB8\"};","module.exports = __webpack_public_path__ + \"static/media/tomato.c392a271.png\";","import {\n  IProject,\n  IMilestone,\n  ICustomAttr,\n  ITask,\n  ICustomValueMap,\n  ITaskStatus,\n  IUser\n} from \"./store\";\nimport { IPomodoroHistory, IDailyTotal } from \"./AppDb\";\nimport { TimerState, TimerMode } from \"./util/timer\";\n\nexport enum ActionTypes {\n  SET_TOKEN = \"SET_TOKEN\",\n  SET_TIMER_ID = \"SET_TIMER_ID\",\n  ADD_FB_TIMER = \"ADD_FB_TIMER\",\n  DEL_FB_TIMER = \"DEL_FB_TIMER\",\n  SET_URL = \"SET_URL\",\n  SIGN_IN = \"SIGN_IN\",\n  SET_AUTH_TOKEN = \"SET_AUTH_TOKEN\",\n  SET_AUTH_ERROR = \"SET_AUTH_ERROR\",\n  SIGN_OUT = \"SIGN_OUT\",\n  FETCH_PROJECTS = \"FETCH_PROJECTS\",\n  SET_PROJECTS = \"SET_PROJECTS\",\n  SET_PID = \"SET_PID\",\n  FETCH_PROJECT = \"FETCH_PROJECT\",\n  SET_PROJECT = \"SET_PROJECT\",\n  FETCH_MILESTONES = \"FETCH_MILESTONES\",\n  SET_MID = \"SET_MID\",\n  SET_MILESTONES = \"SET_MILESTONES\",\n  SET_MILESTONE = \"SET_MILESTONE\",\n  SET_CUSTOM_EID = \"SET_CUSTOM_EID\",\n  SET_CUSTOM_RID = \"SET_CUSTOM_RID\",\n  FETCH_CUSTOM_ATTRS = \"FETCH_CUSTOM_ATTRS\",\n  SET_CUSTOM_ATTRS = \"SET_CUSTOM_ATTRS\",\n  SET_CUSTOM_ATTR_E = \"SET_CUSTOM_ATTR_E\",\n  SET_CUSTOM_ATTR_R = \"SET_CUSTOM_ATTR_R\",\n  SET_BIZ_DAYS = \"SET_BIZ_DAYS\",\n  ADD_BIZ_DAY = \"ADD_BIZ_DAY\",\n  REMOVE_BIZ_DAY = \"REMOVE_BIZ_DAY\",\n  FETCH_TASKS = \"FETCH_TASKS\",\n  SET_TASKS = \"SET_TASKS\",\n  SET_TASK_ID = \"SET_TASK_ID\",\n  RESET_TASK_ID = \"RESET_TASK_ID\",\n  SET_TASK = \"SET_TASK\",\n  SET_USER_TASKS = \"SET_USER_TASKS\",\n  PATCH_TASK = \"PATCH_TASK\",\n  FETCH_TASK_STATUSES = \"FETCH_TASK_STATUSES\",\n  SET_TASK_STATUSES = \"SET_TASK_STATUSES\",\n  SET_ACTIVE_TASK_STATUSES = \"SET_ACTIVE_TASK_STATUSES\",\n  FETCH_CUSTOM_VALUE_MAP = \"FETCH_CUSTOM_VALUE_MAP\",\n  SET_CUSTOM_VALUE_MAP = \"SET_CUSTOM_VALUE_MAP\",\n  PATCH_CUSTOM_VALUE = \"PATCH_CUSTOM_VALUE\",\n  FETCH_USER = \"FETCH_USER\",\n  SET_USER = \"SET_USER\",\n  RESET_USER = \"RESET_USER\",\n  SET_REJECT_TASK_STATUS_IDS = \"SET_REJECT_TASK_STATUS_IDS\",\n  ADD_REJECT_TASK_STATUS_ID = \"ADD_REJECT_TASK_STATUS_ID\",\n  REMOVE_REJECT_TASK_STATUS_ID = \"REMOVE_REJECT_TASK_STATUS_ID\",\n  OPEN_CONTROLLER = \"OPEN_CONTROLLER\",\n  CLOSE_CONTROLLER = \"CLOSE_CONTROLLER\",\n  UPDATE_DATA = \"UPDATE_DATA\",\n  ADD_POMODORO = \"ADD_POMODORO\",\n  USE_POMODORO = \"USE_POMODORO\",\n  RESET_POMODORO = \"RESET_POMODORO\",\n  RESTORE_POMODORO = \"RESTORE_POMODORO\",\n  CALC_POMODORO_TOTAL = \"CALC_POMODORO_TOTAL\",\n  LOAD_POMODORO_TOTALS = \"LOAD_POMODORO_TOTALS\",\n  SET_POMODORO_TOTALS = \"SET_POMODORO_TOTALS\",\n  LOADED = \"LOADED\",\n  SET_POMODORO_STATE = \"SET_POMODORO_STATE\",\n  SET_POMODORO_MODE = \"SET_POMODORO_MODE\",\n  SET_TIMELIMIT_CLOSE_TASK = \"SET_TIMELIMIT_CLOSE_TASK\",\n  SET_IN_PROGRESS_TASK_STATUS_ID = \"SET_IN_PROGRESS_TASK_STATUS_ID\",\n  SET_POMODORO_LIVE_COUNT = \"SET_POMODORO_LIVE_COUNT\"\n}\n\nexport interface IAction {\n  type: ActionTypes;\n  payload?: any;\n  meta?: { [key: string]: any };\n}\nexport interface SET_TOKEN extends IAction {\n  type: ActionTypes.SET_TOKEN;\n  payload: { token: string | null };\n}\nexport interface SET_TIMER_ID extends IAction {\n  type: ActionTypes.SET_TIMER_ID;\n  payload: { timer_id: string | null };\n}\nexport interface ADD_FB_TIMER extends IAction {\n  type: ActionTypes.ADD_FB_TIMER;\n  payload: { title: string; body: string; remaining: number };\n}\nexport interface DEL_FB_TIMER extends IAction {\n  type: ActionTypes.DEL_FB_TIMER;\n}\nexport interface SET_URL extends IAction {\n  type: ActionTypes.SET_URL;\n  payload: { url: string };\n}\nexport interface SIGN_IN extends IAction {\n  type: ActionTypes.SIGN_IN;\n  payload: { username: string; password: string };\n}\nexport interface SET_AUTH_TOKEN extends IAction {\n  type: ActionTypes.SET_AUTH_TOKEN;\n  payload: { auth_token: string };\n}\nexport interface SET_AUTH_ERROR extends IAction {\n  type: ActionTypes.SET_AUTH_ERROR;\n}\nexport interface SIGN_OUT extends IAction {\n  type: ActionTypes.SIGN_OUT;\n}\nexport interface FETCH_PROJECTS extends IAction {\n  type: ActionTypes.FETCH_PROJECTS;\n}\nexport interface SET_PROJECTS extends IAction {\n  type: ActionTypes.SET_PROJECTS;\n  payload: { projects: IProject[] };\n}\n\nexport interface SET_PID extends IAction {\n  type: ActionTypes.SET_PID;\n  payload: { pid: string };\n}\nexport interface FETCH_PROJECT extends IAction {\n  type: ActionTypes.FETCH_PROJECT;\n  payload: { pid: string };\n}\nexport interface SET_PROJECT extends IAction {\n  type: ActionTypes.SET_PROJECT;\n  payload: { project: IProject };\n}\nexport interface FETCH_MILESTONES extends IAction {\n  type: ActionTypes.FETCH_MILESTONES;\n  payload: { project: string };\n}\nexport interface SET_MILESTONES extends IAction {\n  type: ActionTypes.SET_MILESTONES;\n  payload: { milestones: IMilestone[] };\n}\n\nexport interface SET_MID extends IAction {\n  type: ActionTypes.SET_MID;\n  payload: { mid: string };\n}\nexport interface SET_MILESTONE extends IAction {\n  type: ActionTypes.SET_MILESTONE;\n  payload: { milestone: IMilestone };\n}\n\nexport interface SET_CUSTOM_EID extends IAction {\n  type: ActionTypes.SET_CUSTOM_EID;\n  payload: { custom_eid: string };\n}\n\nexport interface SET_CUSTOM_RID extends IAction {\n  type: ActionTypes.SET_CUSTOM_RID;\n  payload: { custom_rid: string };\n}\n\nexport interface FETCH_CUSTOM_ATTRS extends IAction {\n  type: ActionTypes.FETCH_CUSTOM_ATTRS;\n  payload: { project: string };\n}\nexport interface SET_CUSTOM_ATTRS extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTRS;\n  payload: { custom_attrs: ICustomAttr[] };\n}\nexport interface SET_CUSTOM_ATTR_E extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTR_E;\n  payload: { custom_attr_e: ICustomAttr };\n}\nexport interface SET_CUSTOM_ATTR_R extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTR_R;\n  payload: { custom_attr_r: ICustomAttr };\n}\nexport interface SET_BIZ_DAYS extends IAction {\n  type: ActionTypes.SET_BIZ_DAYS;\n  payload: { biz_days: string[] };\n}\n\nexport interface ADD_BIZ_DAY extends IAction {\n  type: ActionTypes.ADD_BIZ_DAY;\n  payload: { biz_day: string };\n}\n\nexport interface REMOVE_BIZ_DAY extends IAction {\n  type: ActionTypes.REMOVE_BIZ_DAY;\n  payload: { biz_day: string };\n}\n\nexport interface FETCH_TASKS extends IAction {\n  type: ActionTypes.FETCH_TASKS;\n  payload: {\n    milestone: string;\n    reject_task_status_ids: string[];\n    timelimit_close_task: string;\n  };\n}\nexport interface SET_TASKS extends IAction {\n  type: ActionTypes.SET_TASKS;\n  payload: { tasks: ITask[] };\n}\nexport interface SET_TASK_ID extends IAction {\n  type: ActionTypes.SET_TASK_ID;\n  payload: { task_id: string };\n}\nexport interface RESET_TASK_ID extends IAction {\n  type: ActionTypes.RESET_TASK_ID;\n}\n\nexport interface SET_TASK extends IAction {\n  type: ActionTypes.SET_TASK;\n  payload: { task: ITask };\n}\n\nexport interface SET_USER_TASKS extends IAction {\n  type: ActionTypes.SET_USER_TASKS;\n  payload: { user_tasks: ITask[] };\n}\n\nexport interface PATCH_TASK extends IAction {\n  type: ActionTypes.PATCH_TASK;\n  payload: { key: keyof ITask; value: ITask[keyof ITask]; id: number };\n}\nexport interface FETCH_CUSTOM_VALUE_MAP extends IAction {\n  type: ActionTypes.FETCH_CUSTOM_VALUE_MAP;\n  payload: { tasks: ITask[] };\n}\nexport interface SET_CUSTOM_VALUE_MAP extends IAction {\n  type: ActionTypes.SET_CUSTOM_VALUE_MAP;\n  payload: { custom_value_map: ICustomValueMap };\n}\nexport interface PATCH_CUSTOM_VALUE extends IAction {\n  type: ActionTypes.PATCH_CUSTOM_VALUE;\n  payload: {\n    id: string | number;\n    key: string;\n    value: string | number;\n    version: number;\n  };\n  meta?: {\n    use_pomodoro?: {\n      used_number: number;\n    };\n    update_status?: boolean;\n  };\n}\nexport interface FETCH_TASK_STATUSES extends IAction {\n  type: ActionTypes.FETCH_TASK_STATUSES;\n  payload: { project: string };\n}\nexport interface SET_TASK_STATUSES extends IAction {\n  type: ActionTypes.SET_TASK_STATUSES;\n  payload: { task_statuses: ITaskStatus[] };\n}\nexport interface SET_ACTIVE_TASK_STATUSES extends IAction {\n  type: ActionTypes.SET_ACTIVE_TASK_STATUSES;\n  payload: { active_task_statuses: ITaskStatus[] };\n}\n\nexport interface FETCH_USER extends IAction {\n  type: ActionTypes.FETCH_USER;\n  payload: { uid: string };\n}\nexport interface SET_USER extends IAction {\n  type: ActionTypes.SET_USER;\n  payload: { user: IUser };\n}\nexport interface RESET_USER extends IAction {\n  type: ActionTypes.RESET_USER;\n}\nexport interface SET_REJECT_TASK_STATUS_IDS extends IAction {\n  type: ActionTypes.SET_REJECT_TASK_STATUS_IDS;\n  payload: { reject_task_status_ids: string[] };\n}\nexport interface ADD_REJECT_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.ADD_REJECT_TASK_STATUS_ID;\n  payload: { reject_task_status_id: string };\n}\n\nexport interface REMOVE_REJECT_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.REMOVE_REJECT_TASK_STATUS_ID;\n  payload: { reject_task_status_id: string };\n}\n\nexport interface OPEN_CONTROLLER extends IAction {\n  type: ActionTypes.OPEN_CONTROLLER;\n}\n\nexport interface CLOSE_CONTROLLER extends IAction {\n  type: ActionTypes.CLOSE_CONTROLLER;\n}\n\nexport interface UPDATE_DATA extends IAction {\n  type: ActionTypes.UPDATE_DATA;\n}\nexport interface ADD_POMODORO extends IAction {\n  type: ActionTypes.ADD_POMODORO;\n  meta?: Pick<IPomodoroHistory, \"completedAt\" | \"duration\" | \"pure\">;\n}\nexport interface USE_POMODORO extends IAction {\n  type: ActionTypes.USE_POMODORO;\n  payload: { used_number: number };\n}\nexport interface RESET_POMODORO extends IAction {\n  type: ActionTypes.RESET_POMODORO;\n  payload: { pomodoro_date: string };\n}\nexport interface RESTORE_POMODORO extends IAction {\n  type: ActionTypes.RESTORE_POMODORO;\n  payload: {\n    pomodoro_date: string;\n    pomodoro_number: number;\n    pomodoro_used_number: number;\n  };\n}\nexport interface CALC_POMODORO_TOTAL extends IAction {\n  type: ActionTypes.CALC_POMODORO_TOTAL;\n  payload: {\n    dateKey: string;\n  };\n}\nexport interface LOAD_POMODORO_TOTALS extends IAction {\n  type: ActionTypes.LOAD_POMODORO_TOTALS;\n}\nexport interface SET_POMODORO_TOTALS extends IAction {\n  type: ActionTypes.SET_POMODORO_TOTALS;\n  payload: {\n    pomodoro_daily_totals: IDailyTotal[];\n  };\n}\nexport interface LOADED extends IAction {\n  type: ActionTypes.LOADED;\n}\nexport interface SET_POMODORO_STATE extends IAction {\n  type: ActionTypes.SET_POMODORO_STATE;\n  payload: {\n    pomodoro_state: TimerState;\n  };\n}\nexport interface SET_POMODORO_MODE extends IAction {\n  type: ActionTypes.SET_POMODORO_MODE;\n  payload: {\n    pomodoro_mode: TimerMode;\n  };\n}\nexport interface SET_TIMELIMIT_CLOSE_TASK extends IAction {\n  type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK;\n  payload: {\n    timelimit_close_task: string;\n  };\n  meta?: {\n    customize: boolean;\n  };\n}\nexport interface SET_IN_PROGRESS_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.SET_IN_PROGRESS_TASK_STATUS_ID;\n  payload: {\n    task_status_id: string;\n  };\n}\nexport interface SET_POMODORO_LIVE_COUNT extends IAction {\n  type: ActionTypes.SET_POMODORO_LIVE_COUNT;\n  payload: {\n    mode: TimerMode;\n    value: number;\n  };\n}\n\nexport type Actions =\n  | SET_TOKEN\n  | SET_TIMER_ID\n  | ADD_FB_TIMER\n  | DEL_FB_TIMER\n  | SET_URL\n  | SIGN_IN\n  | SET_AUTH_TOKEN\n  | SET_AUTH_ERROR\n  | SIGN_OUT\n  | FETCH_PROJECTS\n  | SET_PROJECTS\n  | SET_PID\n  | FETCH_PROJECT\n  | SET_PROJECT\n  | FETCH_MILESTONES\n  | SET_MILESTONES\n  | SET_MID\n  | SET_MILESTONE\n  | SET_CUSTOM_EID\n  | SET_CUSTOM_RID\n  | FETCH_CUSTOM_ATTRS\n  | SET_CUSTOM_ATTRS\n  | SET_CUSTOM_ATTR_E\n  | SET_CUSTOM_ATTR_R\n  | PATCH_CUSTOM_VALUE\n  | SET_BIZ_DAYS\n  | SET_BIZ_DAYS\n  | ADD_BIZ_DAY\n  | REMOVE_BIZ_DAY\n  | FETCH_TASKS\n  | SET_TASKS\n  | SET_TASK_ID\n  | RESET_TASK_ID\n  | SET_TASK\n  | SET_USER_TASKS\n  | PATCH_TASK\n  | FETCH_CUSTOM_VALUE_MAP\n  | SET_CUSTOM_VALUE_MAP\n  | FETCH_TASK_STATUSES\n  | SET_TASK_STATUSES\n  | SET_ACTIVE_TASK_STATUSES\n  | FETCH_USER\n  | SET_USER\n  | RESET_USER\n  | SET_REJECT_TASK_STATUS_IDS\n  | ADD_REJECT_TASK_STATUS_ID\n  | REMOVE_REJECT_TASK_STATUS_ID\n  | OPEN_CONTROLLER\n  | CLOSE_CONTROLLER\n  | UPDATE_DATA\n  | ADD_POMODORO\n  | USE_POMODORO\n  | RESET_POMODORO\n  | RESTORE_POMODORO\n  | CALC_POMODORO_TOTAL\n  | LOAD_POMODORO_TOTALS\n  | SET_POMODORO_TOTALS\n  | LOADED\n  | SET_POMODORO_STATE\n  | SET_POMODORO_MODE\n  | SET_TIMELIMIT_CLOSE_TASK\n  | SET_IN_PROGRESS_TASK_STATUS_ID\n  | SET_POMODORO_LIVE_COUNT;\n","import { EventEmitter } from \"events\";\nimport _ from \"lodash\";\nexport enum TimerState {\n  STOPPED = \"stopped\",\n  RUNNING = \"running\",\n  PAUSED = \"paused\"\n}\nexport enum TimerMode {\n  FOCUS = \"Focusing\",\n  SHORT = \"Short break\",\n  LONG = \"Long break\"\n}\nexport const TimerDurationMin = {\n  [TimerMode.FOCUS]: 25,\n  [TimerMode.SHORT]: 5,\n  [TimerMode.LONG]: 15\n};\nenum StorageKey {\n  STATE = \"pomodoro_state\",\n  MODE = \"pomodoro_mode\",\n  CHECKPOINT_START_AT = \"pomodoro_checkpoint_start_at\",\n  CHECKPOINT_ELAPSED = \"pomodoro_checkpoint_elapsed\"\n}\nconst isValidState = (val: string | null) =>\n  _.includes(_.values(TimerState), val);\n\nconst isValidMode = (val: string | null) =>\n  _.includes(_.values(TimerMode), val);\n\ntype TimerEvents =\n  | \"start\"\n  | \"stop\"\n  | \"pause\"\n  | \"resume\"\n  | \"expire\"\n  | \"tick\"\n  | \"change_mode\";\ninterface ITimerStatus {\n  state: TimerState;\n  duration: number;\n  elapsed: number;\n  remaining: number;\n  checkpointElapsed: number;\n  checkpointStartAt: number;\n  mode: TimerMode;\n}\nexport type TimerEventListener = (status: ITimerStatus) => void;\nclass Timer extends EventEmitter {\n  state: TimerState = TimerState.STOPPED;\n  mode: TimerMode = TimerMode.FOCUS;\n  duration: number = TimerDurationMin[TimerMode.FOCUS] * 60;\n  tick: number = 60;\n  checkpointStartAt: number = NaN;\n  checkpointElapsed: number = 0;\n  expireTimeout: NodeJS.Timeout | null = null;\n  tickInterval: NodeJS.Timeout | null = null;\n  tickOffsetTimeout: NodeJS.Timeout | null = null;\n  restoreExpired = false;\n  estimateCompletedAt: Date = new Date();\n  constructor(tick: number) {\n    super();\n    this.tick = tick;\n    this.restoreStorage();\n  }\n  get isStopped() {\n    return this.state === TimerState.STOPPED;\n  }\n  get isRunning() {\n    return this.state === TimerState.RUNNING;\n  }\n  get isPaused() {\n    return this.state === TimerState.PAUSED;\n  }\n  get remaining() {\n    return Math.max(this.duration - this.elapsed, 0);\n  }\n\n  get elapsed() {\n    let periodElapsed = 0;\n    if (this.checkpointStartAt && this.isRunning) {\n      periodElapsed = (Date.now() - this.checkpointStartAt) / 1000;\n    }\n    return this.checkpointElapsed + periodElapsed;\n  }\n  get status(): ITimerStatus {\n    return {\n      state: this.state,\n      duration: this.duration,\n      elapsed: this.elapsed,\n      remaining: this.remaining,\n      checkpointElapsed: this.checkpointElapsed,\n      checkpointStartAt: this.checkpointStartAt,\n      mode: this.mode\n    };\n  }\n  on(event: TimerEvents, listener: TimerEventListener) {\n    return super.on(event, listener);\n  }\n  once(event: TimerEvents, listener: TimerEventListener) {\n    return super.once(event, listener);\n  }\n  start() {\n    if (!this.isStopped) {\n      return;\n    }\n    this.setExpireTimeout(this.duration);\n    this.setTickInterval(this.tick);\n\n    this.state = TimerState.RUNNING;\n    this.checkpointStartAt = Date.now();\n    this.checkpointElapsed = 0;\n\n    this.emit(\"start\", this.status);\n\n    this.saveStorage();\n  }\n  stop() {\n    if (this.isStopped) {\n      return;\n    }\n    this.clearExpireTimeout();\n    this.clearTickInterval();\n\n    this.checkpointStartAt = NaN;\n    this.checkpointElapsed = 0;\n\n    this.state = TimerState.STOPPED;\n\n    this.emit(\"stop\", this.status);\n\n    this.saveStorage();\n  }\n  pause() {\n    if (!this.isRunning) {\n      return;\n    }\n\n    this.clearExpireTimeout();\n    this.clearTickInterval();\n\n    let periodElapsed = (Date.now() - this.checkpointStartAt) / 1000;\n    this.checkpointElapsed += periodElapsed;\n\n    this.state = TimerState.PAUSED;\n\n    this.emit(\"pause\", this.status);\n\n    this.saveStorage();\n  }\n  resume() {\n    if (!this.isPaused) {\n      return;\n    }\n    this.setExpireTimeout(this.remaining);\n    this.setTickInterval(this.tick);\n\n    this.state = TimerState.RUNNING;\n    this.checkpointStartAt = Date.now();\n\n    this.emit(\"resume\", this.status);\n\n    this.saveStorage();\n  }\n  restart() {\n    this.stop();\n    this.start();\n  }\n  changeMode(mode: TimerMode, start?: boolean) {\n    this.stop();\n    this.mode = mode;\n    this.duration = TimerDurationMin[mode] * 60;\n\n    this.emit(\"change_mode\", this.status);\n\n    this.saveStorage();\n    if (start) {\n      _.defer(() => {\n        this.start();\n      });\n    }\n  }\n  setExpireTimeout(seconds: number) {\n    this.expireTimeout = setTimeout(() => {\n      this.emit(\"expire\", this.status);\n      this.stop();\n    }, seconds * 1000);\n  }\n  clearExpireTimeout() {\n    if (this.expireTimeout) {\n      clearTimeout(this.expireTimeout);\n    }\n    this.expireTimeout = null;\n  }\n  setTickInterval(seconds: number, adjusted = false, limit = 60) {\n    const { remaining } = this.status;\n    if (remaining <= limit) {\n      this.setSecTickInterval();\n    } else {\n      const offset = remaining % seconds;\n      if (offset > 1 && !adjusted) {\n        this.tickOffsetTimeout = setTimeout(() => {\n          this.emit(\"tick\", this.status);\n          this.setTickInterval(seconds, true);\n        }, offset * 1000);\n      } else {\n        this.tickInterval = setInterval(() => {\n          const status = this.status;\n          this.emit(\"tick\", status);\n          if (status.remaining < limit) {\n            this.clearTickInterval();\n            this.setSecTickInterval();\n          }\n        }, seconds * 1000);\n      }\n    }\n  }\n  setSecTickInterval() {\n    this.tickInterval = setInterval(() => {\n      this.emit(\"tick\", this.status);\n    }, 1000);\n  }\n  clearTickInterval() {\n    if (this.tickInterval) {\n      clearInterval(this.tickInterval);\n    }\n    this.tickInterval = null;\n    if (this.tickOffsetTimeout) {\n      clearTimeout(this.tickOffsetTimeout);\n    }\n    this.tickOffsetTimeout = null;\n  }\n  saveStorage() {\n    localStorage.setItem(StorageKey.STATE, this.state);\n    localStorage.setItem(StorageKey.MODE, this.mode);\n    localStorage.setItem(\n      StorageKey.CHECKPOINT_START_AT,\n      Number.isNaN(this.checkpointStartAt) ? \"\" : String(this.checkpointStartAt)\n    );\n    localStorage.setItem(\n      StorageKey.CHECKPOINT_ELAPSED,\n      String(this.checkpointElapsed)\n    );\n  }\n  restoreStorage() {\n    const lsState = localStorage.getItem(StorageKey.STATE);\n    const lsMode = localStorage.getItem(StorageKey.MODE);\n    const lsCpStartAt = localStorage.getItem(StorageKey.CHECKPOINT_START_AT);\n    const lsCpElapsed = localStorage.getItem(StorageKey.CHECKPOINT_ELAPSED);\n    if (isValidState(lsState) && isValidMode(lsMode)) {\n      const state = lsState as TimerState;\n      const mode = lsMode as TimerMode;\n      const duration = TimerDurationMin[mode] * 60;\n      switch (state) {\n        case TimerState.STOPPED: {\n          this.changeMode(mode);\n          break;\n        }\n        case TimerState.PAUSED: {\n          const cpElapsed = Number(lsCpElapsed);\n          if (cpElapsed < duration * 1000) {\n            this.state = state;\n            this.mode = mode;\n            this.duration = duration;\n            this.checkpointElapsed = cpElapsed;\n          }\n          break;\n        }\n        case TimerState.RUNNING: {\n          const cpStartAt = Number(lsCpStartAt);\n          const cpElapsed = Number(lsCpElapsed);\n          if (cpStartAt > 0) {\n            this.mode = mode;\n            this.duration = duration;\n            const elapsedMsec = Date.now() - cpStartAt + cpElapsed * 1000;\n            if (elapsedMsec < duration * 1000) {\n              this.state = TimerState.RUNNING;\n\n              this.checkpointStartAt = cpStartAt;\n              this.checkpointElapsed = cpElapsed;\n\n              this.setExpireTimeout(this.remaining);\n              this.setTickInterval(this.tick);\n            } else {\n              this.stop();\n\n              this.estimateCompletedAt = new Date(\n                cpStartAt + (duration - cpElapsed) * 1000\n              );\n              this.restoreExpired = true;\n            }\n          }\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport const timer = new Timer(60);\n","import { IDailyTotal } from \"./AppDb\";\nimport { TimerMode, TimerState } from \"./util/timer\";\nexport interface ICustomAttr {\n  id: number;\n  name: string;\n}\ninterface IPomodoroCounts {\n  [TimerMode.FOCUS]: number;\n  [TimerMode.SHORT]: number;\n  [TimerMode.LONG]: number;\n}\nexport interface IAuthToken {\n  auth_token: string;\n}\nexport interface IMilestone {\n  id: number;\n  name: string;\n  estimated_start: string;\n  estimated_finish: string;\n  slug: string;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n}\nexport interface IProjectExtraInfo {\n  id: number;\n  name: string;\n  slug: string;\n}\ninterface IStatusExtraInfo {\n  name: string;\n  is_closed: boolean;\n}\nexport interface IUserStoryExtraInfo {\n  id: number;\n  subject: string;\n  epics: any;\n  ref: number;\n}\nexport interface ITask {\n  id: number;\n  assigned_to: number | null;\n  created_date: string;\n  finished_date: string;\n  is_closed: boolean;\n  subject: string;\n  ref: number;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n  status: number;\n  status_extra_info: IStatusExtraInfo;\n  user_story: number;\n  user_story_extra_info: IUserStoryExtraInfo;\n  version: number;\n}\nexport interface ITasksByUserStory {\n  user_story: number;\n  user_story_extra_info: IUserStoryExtraInfo;\n  project_extra_info: IProjectExtraInfo;\n  tasks: ITask[];\n  is_closed: boolean;\n}\nexport interface ITaskStatus {\n  id: number;\n  color: string;\n  name: string;\n  order: number;\n  project: number;\n  is_closed: boolean;\n  slug: string;\n}\nexport interface IAttrValue {}\nexport interface ICustomValue {\n  attributes_values: {\n    [key: number]: string;\n  };\n  version: number;\n}\nexport interface IUser {\n  id: number;\n  username: string;\n  full_name: string;\n  full_name_display: string;\n  photo: string;\n}\nexport interface IProject {\n  id: number;\n  name: string;\n  members: IUser[];\n}\nexport type ICustomValueMap = WeakMap<ITask, ICustomValue>;\nexport interface IState {\n  token: string | null;\n  timer_id: string | null;\n  url: string;\n  auth_token: string;\n  auth_error: boolean;\n  username: string;\n  password: string;\n  user: IUser | null;\n  projects: IProject[];\n  pid: string; // url\n  project: IProject;\n  mid: string; // url\n  custom_eid: string; //  pid\n  custom_rid: string; // pid\n  custom_attrs: ICustomAttr[]; // pid\n  custom_attr_e: ICustomAttr;\n  custom_attr_r: ICustomAttr;\n  biz_days: string[]; //mid\n  milestones: IMilestone[]; // pid\n  milestone: IMilestone;\n  tasks: ITask[]; //mid\n  task_id: string;\n  task: ITask | null;\n  user_tasks: ITask[];\n  task_statuses: ITaskStatus[];\n  active_task_statuses: ITaskStatus[];\n  custom_value_map: ICustomValueMap; // pid\n  reject_task_status_ids: string[]; // pid\n  updated_time: number;\n  isOpen: boolean;\n  pomodoro_number: number;\n  pomodoro_date: string;\n  pomodoro_used_number: number;\n  loaded: boolean;\n  pomodoro_daily_totals: IDailyTotal[];\n  pomodoro_state: TimerState;\n  pomodoro_mode: TimerMode;\n  timelimit_close_task: string;\n  in_progress_task_status_id: string;\n  pomodoro_live_counts: IPomodoroCounts;\n}\n\nexport enum StorageKey {\n  URL = \"taiga_url\",\n  TIMER_ID = \"taiga_timer_id\",\n  PID = \"taiga_pid\",\n  MID = \"taiga_mid\",\n  TASK_ID = \"taiga_task_id\",\n  CUSTOM_EID = \"taiga_custom_eid\",\n  CUSTOM_RID = \"taiga_custom_rid\",\n  BIZ_DAYS = \"taiga_biz_days\",\n  REJECT_TASK_STATUS_IDS = \"reject_task_status_ids\",\n  USERNAME = \"taiga_username\",\n  PASSWORD = \"taiga_password\",\n  POMODORO_DATE = \"taiga_pomodoro_date\",\n  POMODORO_NUMBER = \"taiga_pomodoro_number\",\n  POMODORO_USED_NUMBER = \"taiga_pomodoro_used_number\",\n  TIMELIMIT_CLOSE_TASK = \"taiga_timelimit_close_task\"\n}\n\nconst _getFromStorage = (key: string) => localStorage.getItem(key) || \"\";\nexport const getFromStorage = (key: StorageKey) => _getFromStorage(key);\nexport const getFromStorageWithSubkey = (key: StorageKey, subkey: string) =>\n  subkey ? _getFromStorage(`${subkey}/${key}`) : \"\";\n\nexport const setToStorage = (key: string, item: string) => {\n  localStorage.setItem(key, item);\n};\nexport const setToStorageWithSubkey = (\n  key: StorageKey,\n  subkey: string,\n  item: string\n) => (subkey ? setToStorage(`${subkey}/${key}`, item) : null);\n\nexport const initialState: IState = {\n  token: null,\n  timer_id: null,\n  url: \"\",\n  auth_token: \"\",\n  auth_error: false,\n  username: \"\",\n  password: \"\",\n  user: null,\n  projects: [],\n  pid: \"\",\n  project: {} as IProject,\n  mid: \"\",\n  custom_eid: \"\",\n  custom_rid: \"\",\n  custom_attrs: [],\n  custom_attr_e: {} as ICustomAttr,\n  custom_attr_r: {} as ICustomAttr,\n  biz_days: [],\n  milestones: [],\n  milestone: {} as IMilestone,\n  tasks: [],\n  task_id: \"\",\n  task: null,\n  user_tasks: [],\n  task_statuses: [],\n  active_task_statuses: [],\n  custom_value_map: new WeakMap(),\n  reject_task_status_ids: [],\n  updated_time: 0,\n  isOpen: false,\n  pomodoro_date: \"\",\n  pomodoro_number: 0,\n  pomodoro_used_number: 0,\n  loaded: false,\n  pomodoro_daily_totals: [],\n  pomodoro_state: TimerState.STOPPED,\n  pomodoro_mode: TimerMode.FOCUS,\n  timelimit_close_task: \"\",\n  in_progress_task_status_id: \"\",\n  pomodoro_live_counts: {\n    [TimerMode.FOCUS]: 0,\n    [TimerMode.SHORT]: 0,\n    [TimerMode.LONG]: 0\n  }\n};\n","import _ from \"lodash\";\nimport { initialState, IProject, ICustomValueMap, IMilestone } from \"./store\";\nimport { ActionTypes, Actions } from \"./actions\";\nexport const reducer = (state = initialState, action: Actions) => {\n  switch (action.type) {\n    case ActionTypes.SET_TOKEN: {\n      const { token } = action.payload;\n      return { ...state, token };\n    }\n    case ActionTypes.SET_TIMER_ID: {\n      const { timer_id } = action.payload;\n      return { ...state, timer_id };\n    }\n    case ActionTypes.SET_URL: {\n      const { url } = action.payload;\n      return { ...state, url };\n    }\n    case ActionTypes.SET_PROJECTS: {\n      const { projects } = action.payload;\n      return {\n        ...state,\n        projects\n      };\n    }\n    case ActionTypes.SET_PID: {\n      const { pid } = action.payload;\n      return {\n        ...state,\n        pid,\n        project: {} as IProject,\n        mid: \"\",\n        biz_days: [],\n        custom_attrs: [],\n        milestones: [],\n        custom_value_map: new WeakMap() as ICustomValueMap\n      };\n    }\n    case ActionTypes.SET_PROJECT: {\n      const { project } = action.payload;\n      return {\n        ...state,\n        project\n      };\n    }\n    case ActionTypes.SET_MID: {\n      const { mid } = action.payload;\n      return {\n        ...state,\n        mid,\n        milestone: {} as IMilestone,\n        tasks: []\n      };\n    }\n    case ActionTypes.SET_MILESTONES: {\n      const { milestones } = action.payload;\n      return { ...state, milestones };\n    }\n    case ActionTypes.SET_MILESTONE: {\n      const { milestone } = action.payload;\n      return { ...state, milestone };\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      const { custom_eid } = action.payload;\n      return { ...state, custom_eid };\n    }\n    case ActionTypes.SET_CUSTOM_ATTRS: {\n      const { custom_attrs } = action.payload;\n      return { ...state, custom_attrs };\n    }\n    case ActionTypes.SET_CUSTOM_ATTR_E: {\n      const { custom_attr_e } = action.payload;\n      return { ...state, custom_attr_e };\n    }\n    case ActionTypes.SET_CUSTOM_ATTR_R: {\n      const { custom_attr_r } = action.payload;\n      return { ...state, custom_attr_r };\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      const { custom_rid } = action.payload;\n      return { ...state, custom_rid };\n    }\n    case ActionTypes.SET_BIZ_DAYS: {\n      const { biz_days } = action.payload;\n      return { ...state, biz_days };\n    }\n    case ActionTypes.ADD_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.chain([...state.biz_days, biz_day])\n        .uniq()\n        .sort()\n        .value();\n      return { ...state, biz_days };\n    }\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.reject([...state.biz_days], item => item === biz_day);\n      return { ...state, biz_days };\n    }\n    case ActionTypes.SET_TASKS: {\n      const { tasks } = action.payload;\n      return { ...state, tasks };\n    }\n    case ActionTypes.SET_TASK_ID: {\n      const { task_id } = action.payload;\n      return { ...state, task_id, task: null };\n    }\n    case ActionTypes.RESET_TASK_ID: {\n      return { ...state, task_id: \"\", task: null };\n    }\n    case ActionTypes.SET_TASK: {\n      const { task } = action.payload;\n      return { ...state, task };\n    }\n    case ActionTypes.SET_USER_TASKS: {\n      const { user_tasks } = action.payload;\n      return { ...state, user_tasks };\n    }\n    case ActionTypes.SET_TASK_STATUSES: {\n      const { task_statuses } = action.payload;\n      return { ...state, task_statuses };\n    }\n    case ActionTypes.SET_ACTIVE_TASK_STATUSES: {\n      const { active_task_statuses } = action.payload;\n      return { ...state, active_task_statuses };\n    }\n    case ActionTypes.SET_CUSTOM_VALUE_MAP: {\n      const { custom_value_map } = action.payload;\n      return { ...state, custom_value_map };\n    }\n    case ActionTypes.SET_USER: {\n      const { user } = action.payload;\n      return { ...state, user };\n    }\n    case ActionTypes.RESET_USER: {\n      return { ...state, user: null, user_tasks: [] };\n    }\n    case ActionTypes.SET_REJECT_TASK_STATUS_IDS: {\n      const { reject_task_status_ids } = action.payload;\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.chain([\n        ...state.reject_task_status_ids,\n        reject_task_status_id\n      ])\n        .compact()\n        .uniq()\n        .value();\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.reject(\n        [...state.reject_task_status_ids],\n        item => item === reject_task_status_id\n      );\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.OPEN_CONTROLLER: {\n      return { ...state, isOpen: true };\n    }\n    case ActionTypes.CLOSE_CONTROLLER: {\n      return { ...state, isOpen: false };\n    }\n    case ActionTypes.UPDATE_DATA: {\n      return { ...state, updated_time: Date.now() };\n    }\n    case ActionTypes.SIGN_IN: {\n      const { username, password } = action.payload;\n      return { ...state, username, password, auth_error: false };\n    }\n    case ActionTypes.SET_AUTH_TOKEN: {\n      const { auth_token } = action.payload;\n      return { ...state, auth_token };\n    }\n    case ActionTypes.SET_AUTH_ERROR: {\n      return { ...state, auth_error: true };\n    }\n    case ActionTypes.SIGN_OUT: {\n      return { ...state, auth_token: \"\", username: \"\", password: \"\" };\n    }\n    case ActionTypes.ADD_POMODORO: {\n      const pomodoro_number = state.pomodoro_number + 1;\n      return {\n        ...state,\n        pomodoro_number\n      };\n    }\n    case ActionTypes.USE_POMODORO: {\n      const { used_number } = action.payload;\n      const pomodoro_used_number = Math.max(\n        0,\n        state.pomodoro_used_number + used_number\n      );\n      return {\n        ...state,\n        pomodoro_used_number\n      };\n    }\n    case ActionTypes.RESET_POMODORO: {\n      const { pomodoro_date } = action.payload;\n      return {\n        ...state,\n        pomodoro_number: 0,\n        pomodoro_used_number: 0,\n        pomodoro_date\n      };\n    }\n    case ActionTypes.RESTORE_POMODORO: {\n      const {\n        pomodoro_date,\n        pomodoro_number,\n        pomodoro_used_number\n      } = action.payload;\n      return {\n        ...state,\n        pomodoro_date,\n        pomodoro_number,\n        pomodoro_used_number\n      };\n    }\n    case ActionTypes.SET_POMODORO_TOTALS: {\n      const { pomodoro_daily_totals } = action.payload;\n      return {\n        ...state,\n        pomodoro_daily_totals\n      };\n    }\n    case ActionTypes.LOADED: {\n      return {\n        ...state,\n        loaded: true\n      };\n    }\n    case ActionTypes.SET_POMODORO_STATE: {\n      const { pomodoro_state } = action.payload;\n      return {\n        ...state,\n        pomodoro_state\n      };\n    }\n\n    case ActionTypes.SET_POMODORO_MODE: {\n      const { pomodoro_mode } = action.payload;\n      return {\n        ...state,\n        pomodoro_mode\n      };\n    }\n    case ActionTypes.SET_TIMELIMIT_CLOSE_TASK: {\n      const { timelimit_close_task } = action.payload;\n      return {\n        ...state,\n        timelimit_close_task\n      };\n    }\n    case ActionTypes.SET_IN_PROGRESS_TASK_STATUS_ID: {\n      const { task_status_id } = action.payload;\n      return {\n        ...state,\n        in_progress_task_status_id: task_status_id\n      };\n    }\n    case ActionTypes.SET_POMODORO_LIVE_COUNT: {\n      const { mode, value } = action.payload;\n      return {\n        ...state,\n        pomodoro_live_counts: {\n          ...state.pomodoro_live_counts,\n          [mode]: value\n        }\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { Dispatch, useCallback, useMemo } from \"react\";\n\nexport type SideEffector<S, A> = (\n  action: A,\n  dispatch: Dispatch<A>,\n  state: () => S\n) => void;\nconst stateStoreFactory = <S>() => {\n  let state: S;\n  return {\n    getter: () => state,\n    setter: (newState: S) => {\n      state = newState;\n    }\n  };\n};\nexport const useSideEffector = <S, A>(\n  [state, dispatch]: [S, Dispatch<A>],\n  sideEffector: SideEffector<S, A>\n): [S, Dispatch<A>] => {\n  let dispatchSE: Dispatch<A> | null = null;\n\n  const dispatchSECaller = useCallback(\n    (action: A) => {\n      dispatchSE && dispatchSE(action);\n    },\n    [dispatchSE]\n  );\n  const stateStore = useMemo(() => stateStoreFactory<S>(), []);\n\n  stateStore.setter(state);\n  dispatchSE = useCallback(\n    dispatchSideEffector<S, A>(\n      stateStore.getter,\n      dispatch,\n      sideEffector,\n      dispatchSECaller\n    ),\n    []\n  );\n  return [state, dispatchSE];\n};\n\nconst dispatchSideEffector = <S, A>(\n  state: () => S,\n  dispatch: Dispatch<A>,\n  sideEffector: SideEffector<S, A>,\n  dispatchSECaller: Dispatch<A>\n) => (action: A) => {\n  dispatch(action);\n  sideEffector(action, dispatchSECaller, state);\n};\n","import { IProject } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchProjecs: ISideEffector = async (action, dispatch, state) => {\n  try {\n    const { url } = state();\n    if (url) {\n      const { data: projects } = await fetchData<IProject[]>(url, \"projects\");\n      dispatch({ type: ActionTypes.SET_PROJECTS, payload: { projects } });\n    }\n  } catch (e) {\n    errToastr(e);\n  }\n};\n","import { IProject } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchProject: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_PROJECT) {\n    try {\n      const { url } = state();\n      const { pid } = action.payload;\n      if (url && pid) {\n        const { data: project } = await fetchData<IProject>(\n          url,\n          `projects/${pid}`\n        );\n        dispatch({\n          type: ActionTypes.SET_PROJECT,\n          payload: { project }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IMilestone } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchMilestones: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_MILESTONES) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: milestones } = await fetchData<IMilestone[]>(\n          url,\n          \"milestones\",\n          { params: { project } }\n        );\n        dispatch({ type: ActionTypes.SET_MILESTONES, payload: { milestones } });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITask } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nexport const fetchTasks: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_TASKS) {\n    try {\n      const { url } = state();\n      const {\n        milestone,\n        reject_task_status_ids,\n        timelimit_close_task\n      } = action.payload;\n      if (url && milestone && timelimit_close_task) {\n        const startM = moment(timelimit_close_task);\n        const { data } = await fetchData<ITask[]>(url, \"tasks\", {\n          headers: { \"x-disable-pagination\": true },\n          params: { milestone }\n        });\n        const tasks = _.chain(data)\n          .reject(item =>\n            _.includes(reject_task_status_ids, String(item.status))\n          )\n          .reject(\n            item =>\n              item.is_closed && moment(item.finished_date).diff(startM) < 0\n          )\n          .value();\n\n        dispatch({ type: ActionTypes.SET_TASKS, payload: { tasks } });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITaskStatus } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchTaskStatuses: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_TASK_STATUSES) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: task_statuses } = await fetchData<ITaskStatus[]>(\n          url,\n          \"task-statuses\",\n          { params: { project } }\n        );\n        dispatch({\n          type: ActionTypes.SET_TASK_STATUSES,\n          payload: { task_statuses }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ICustomAttr } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchCustomAttrs: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_CUSTOM_ATTRS) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: custom_attrs } = await fetchData<ICustomAttr[]>(\n          url,\n          \"task-custom-attributes\",\n          { params: { project } }\n        );\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_ATTRS,\n          payload: { custom_attrs }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITask, ICustomValue } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchCustomValueMap: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_CUSTOM_VALUE_MAP) {\n    try {\n      const { url, custom_eid, custom_rid } = state();\n      const { tasks } = action.payload;\n      if (url && tasks.length && custom_eid && custom_rid) {\n        const custom_value_map = new WeakMap(\n          await Promise.all(\n            tasks.map(async item => {\n              const { data: custom_attr_val } = await fetchData<ICustomValue>(\n                url,\n                `tasks/custom-attributes-values/${item.id}`\n              );\n              return [item, custom_attr_val] as [ITask, ICustomValue];\n            })\n          )\n        );\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_VALUE_MAP,\n          payload: { custom_value_map }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IUser } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchUser: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_USER) {\n    try {\n      const { url } = state();\n      const { uid } = action.payload;\n      if (url && uid) {\n        const { data: user } = await fetchData<IUser>(url, `users/${uid}`);\n        dispatch({\n          type: ActionTypes.SET_USER,\n          payload: { user }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faInfoCircle,\n  faCheck,\n  faCheckCircle,\n  faExclamationTriangle\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { IconProp } from \"@fortawesome/fontawesome-svg-core\";\ninterface MessageWithIconProps {\n  icon: IconProp;\n  message: string;\n}\nconst MessageWithIcon: React.FC<MessageWithIconProps> = ({ icon, message }) => {\n  return (\n    <div className=\"d-flex\">\n      <h2 className=\"mr-2\">\n        <FontAwesomeIcon icon={icon} />\n      </h2>\n      <div>{message}</div>\n    </div>\n  );\n};\ninterface NotifyProps {\n  title: string;\n  body: string;\n  icon: string;\n}\nconst Notify: React.FC<NotifyProps> = ({ title, body, icon }) => {\n  return (\n    <div className=\"d-flex\">\n      <img src={icon} style={{ width: \"48px\", height: \"48px\" }} alt=\"\" />\n      <div className=\"ml-2\">\n        <h5>{title}</h5>\n        <p>{body}</p>\n      </div>\n    </div>\n  );\n};\nexport const toastr = {\n  info: (message: string) => {\n    toast.info(<MessageWithIcon icon={faInfoCircle} message={message} />);\n  },\n  success: (message: string) => {\n    toast.success(<MessageWithIcon icon={faCheck} message={message} />);\n  },\n  warn: (message: string) => {\n    toast.warn(\n      <MessageWithIcon icon={faExclamationTriangle} message={message} />\n    );\n  },\n  error: (message: string) => {\n    toast.error(<MessageWithIcon icon={faCheckCircle} message={message} />);\n  },\n  notify: ({ title, body, icon }: NotifyProps) => {\n    toast(<Notify title={title} body={body} icon={icon} />);\n  }\n};\n","import { ISideEffector, patchData, ActionTypes, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nexport const patchCustomValue: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.PATCH_CUSTOM_VALUE) {\n    try {\n      const {\n        url,\n        custom_value_map,\n        tasks,\n        in_progress_task_status_id\n      } = state();\n      const { id, key, value, version } = action.payload;\n      const task = tasks.find(task => task.id === id);\n      if (url && id && key && task && custom_value_map.has(task)) {\n        const custom_value = custom_value_map.get(task);\n        if (custom_value) {\n          const { attributes_values } = custom_value;\n          await patchData(url, `tasks/custom-attributes-values/${id}`, {\n            attributes_values: {\n              ...attributes_values,\n              [key]: String(value)\n            },\n            version\n          });\n          if (\n            action.meta &&\n            action.meta.update_status &&\n            value > 0 &&\n            in_progress_task_status_id &&\n            !task.is_closed &&\n            task.status !== Number(in_progress_task_status_id)\n          ) {\n            dispatch({\n              type: ActionTypes.PATCH_TASK,\n              payload: {\n                key: \"status\",\n                value: in_progress_task_status_id,\n                id: task.id\n              }\n            });\n          }\n          if (action.meta && action.meta.use_pomodoro) {\n            const { used_number } = action.meta.use_pomodoro;\n            dispatch({\n              type: ActionTypes.USE_POMODORO,\n              payload: { used_number }\n            });\n          }\n          dispatch({ type: ActionTypes.UPDATE_DATA });\n          toastr.success(`Custom value updated. [${value}]`);\n        }\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ActionTypes, ISideEffector, patchData, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nexport const patchTask: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.PATCH_TASK) {\n    try {\n      const { url, tasks } = state();\n      const { id, key, value } = action.payload;\n      const task = tasks.find(task => task.id === id);\n      if (url && id && key && task) {\n        await patchData(url, `tasks/${id}`, {\n          [key]: value,\n          version: task.version\n        });\n        dispatch({ type: ActionTypes.UPDATE_DATA });\n        toastr.success(`Task updated. [${key}=${value}]`);\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IAuthToken, StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, postData, ActionTypes, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nimport _ from \"lodash\";\nexport const signIn: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.SIGN_IN) {\n    try {\n      const { url } = state();\n      const { username, password } = action.payload;\n      if (url && username && password) {\n        const {\n          data: { auth_token }\n        } = await postData<IAuthToken>(url, \"auth\", {\n          username,\n          password,\n          type: \"normal\"\n        });\n        dispatch({ type: ActionTypes.SET_AUTH_TOKEN, payload: { auth_token } });\n        setToStorage(StorageKey.USERNAME, username);\n        setToStorage(StorageKey.PASSWORD, password);\n        toastr.success(`${username} signed in.`);\n      }\n    } catch (e) {\n      dispatch({ type: ActionTypes.SET_AUTH_ERROR });\n      if (_.get(e, \"response.data._err_message\")) {\n        dispatch({ type: ActionTypes.SIGN_OUT });\n      }\n      errToastr(e);\n    }\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncPomodoro: ISideEffector = (action, dispatchm, state) => {\n  _.defer(() => {\n    const { pomodoro_date, pomodoro_number, pomodoro_used_number } = state();\n    setToStorage(StorageKey.POMODORO_DATE, pomodoro_date);\n    setToStorage(StorageKey.POMODORO_NUMBER, String(pomodoro_number));\n    setToStorage(StorageKey.POMODORO_USED_NUMBER, String(pomodoro_used_number));\n  });\n};\n","import Dexie from \"dexie\";\nexport interface IPomodoroHistory {\n  id?: number;\n  completedAt: Date;\n  duration: number;\n  pure: boolean;\n  dateKey: string;\n}\nexport interface IDailyTotal {\n  id?: number;\n  date: Date;\n  value: number;\n  pureValue: number;\n  dateKey: string;\n  dayOfWeek: number;\n}\nexport class AppDatabase extends Dexie {\n  items: Dexie.Table<IPomodoroHistory, number>;\n  totals: Dexie.Table<IDailyTotal, number>;\n  constructor() {\n    super(\"TaigaPomodoroDatabase\");\n    this.version(1).stores({\n      items: \"++id, completedAt, duration, pure, dateKey\",\n      totals: \"++id, date, value, pureValue, &dateKey, dayOfWeek\"\n    });\n    this.items = this.table(\"items\");\n    this.totals = this.table(\"totals\");\n  }\n}\nexport const db = new AppDatabase();\n","import moment from \"moment\";\nimport _ from \"lodash\";\nimport { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes, fetchData } from \".\";\nimport { ICustomValue } from \"../store\";\nexport const addPomodoro: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.ADD_POMODORO && action.meta) {\n    const { url, task_id, custom_rid } = state();\n    const { completedAt, duration, pure } = action.meta;\n    const dateKey = moment(completedAt).format(\"YYYY-MM-DD\");\n    await db.items.put({ completedAt, duration, pure, dateKey });\n    dispatch({ type: ActionTypes.CALC_POMODORO_TOTAL, payload: { dateKey } });\n    if (task_id && custom_rid) {\n      const { data: custom_attr_val } = await fetchData<ICustomValue>(\n        url,\n        `tasks/custom-attributes-values/${task_id}`\n      );\n      const value =\n        Number(_.get(custom_attr_val, `attributes_values.${custom_rid}`, \"0\")) +\n        0.5;\n      const { version } = custom_attr_val;\n      if (custom_attr_val && version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: Number(task_id),\n            key: custom_rid,\n            value,\n            version\n          },\n          meta: { use_pomodoro: { used_number: 1 }, update_status: true }\n        });\n      }\n    }\n  }\n};\n","import moment from \"moment\";\nimport _ from \"lodash\";\nimport { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const calcPomodoroTotal: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.CALC_POMODORO_TOTAL) {\n    const query = action.payload;\n    const totalDoc = await db.totals.get(query);\n    const values = await db.items.where(query).toArray();\n    const value = values.length;\n    const pureValue = _.filter(values, { pure: true }).length;\n    const dayOfWeek = moment(query.dateKey, \"YYYY-MM-DD\").day();\n    const date = moment(query.dateKey, \"YYYY-MM-DD\").toDate();\n    db.totals.put({ ...totalDoc, ...query, date, value, pureValue, dayOfWeek });\n    dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n  }\n};\n","import { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const loadPomodoroTotals: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  const pomodoro_daily_totals = await db.totals.toArray();\n  dispatch({\n    type: ActionTypes.SET_POMODORO_TOTALS,\n    payload: { pomodoro_daily_totals }\n  });\n};\n","import dotenv from \"dotenv\";\nimport _ from \"lodash\";\nimport firebase from \"firebase/app\";\nimport \"firebase/messaging\";\nimport \"firebase/firestore\";\nimport { TimerMode } from \"./timer\";\ndotenv.config();\nconst {\n  REACT_APP_apiKey: apiKey,\n  REACT_APP_VapidKey: VapidKey,\n  REACT_APP_authDomain: authDomain,\n  REACT_APP_databaseURL: databaseURL,\n  REACT_APP_projectId: projectId,\n  REACT_APP_storageBucket: storageBucket,\n  REACT_APP_messagingSenderId: messagingSenderId,\n  REACT_APP_appId: appId\n} = process.env;\nconst firebaseConfig = {\n  apiKey,\n  authDomain,\n  databaseURL,\n  projectId,\n  storageBucket,\n  messagingSenderId,\n  appId\n};\nfirebase.initializeApp(firebaseConfig);\nlet _messaging: firebase.messaging.Messaging | null = null;\ntry {\n  _messaging = firebase.messaging();\n} catch (e) {\n  console.log(e);\n}\nexport const messaging = _messaging;\nlet token: string | null = null;\nif (navigator.serviceWorker && messaging) {\n  navigator.serviceWorker\n    .register(\"./firebase-messaging-sw.js\")\n    .then(registration => {\n      if (!_.get(messaging, \"registrationToUse\")) {\n        messaging.useServiceWorker(registration);\n      }\n      messaging.usePublicVapidKey(VapidKey || \"\");\n      messaging.onTokenRefresh(async () => {\n        token = await messaging.getToken();\n      });\n      messaging.getToken().then(val => {\n        token = val;\n      });\n    });\n}\nconst db = firebase.firestore();\nexport const Timers = db.collection(\"timers\");\nexport const getToken = () => token;\n\nif (messaging) {\n  messaging\n    .requestPermission()\n    .then(function() {\n      console.log(\"Notification permission granted.\");\n    })\n    .catch(function(err) {\n      console.log(\"Unable to get permission to notify.\", err);\n    });\n}\nexport const addTimer = async (\n  title: string,\n  body: string,\n  remaining: number,\n  token: string | null,\n  mode: TimerMode\n) => {\n  const { id } = await Timers.add({\n    title,\n    body,\n    remaining,\n    token,\n    icon: \"./tomato.png\",\n    click_action: window.location.href,\n    mode\n  });\n  return id;\n};\nexport const delTimer = (id: string) => {\n  Timers.doc(id).delete();\n};\n","import { addTimer } from \"../util/firebase\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const addFBTimer: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.ADD_FB_TIMER) {\n    const { token, pomodoro_mode } = state();\n    const { title, body, remaining } = action.payload;\n    const timer_id = await addTimer(\n      title,\n      body,\n      remaining,\n      token,\n      pomodoro_mode\n    );\n    dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id } });\n  }\n};\n","import { delTimer } from \"../util/firebase\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const delFBTimer: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.DEL_FB_TIMER) {\n    const { timer_id } = state();\n    if (timer_id) {\n      delTimer(timer_id);\n      dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id: null } });\n    }\n  }\n};\n","import { Dispatch } from \"react\";\nimport { Actions, ActionTypes } from \"../actions\";\nimport { IState } from \"../store\";\nimport { baseUrl } from \"../Provider\";\nimport { fetchProjecs } from \"./fetchProjects\";\nimport { fetchProject } from \"./fetchProject\";\nimport { fetchMilestones } from \"./fetchMilestones\";\nimport { fetchTasks } from \"./fetchTasks\";\nimport { fetchTaskStatuses } from \"./fetchTaskStatuses\";\nimport { fetchCustomAttrs } from \"./fetchCustomAttrs\";\nimport { fetchCustomValueMap } from \"./fetchCustomValueMap\";\nimport { fetchUser } from \"./fetchUser\";\nimport { patchCustomValue } from \"./patchCustomValue\";\nimport { patchTask } from \"./patchTask\";\nimport { signIn } from \"./signIn\";\nimport { signOut } from \"./signOut\";\nimport { setAuthToken } from \"./setAuthToken\";\nimport { setUrl } from \"./setUrl\";\nimport { setPid } from \"./setPid\";\nimport { setMid } from \"./setMid\";\nimport { setCustomEid } from \"./setCustomEid\";\nimport { setCustomRid } from \"./setCustomRid\";\nimport { syncBizDays } from \"./syncBizDays\";\nimport { syncRejectTaskStatusIds } from \"./syncRejectTaskStatusIds\";\nimport { syncPomodoro } from \"./syncPomodoro\";\nimport { addPomodoro } from \"./addPomodoro\";\nimport { calcPomodoroTotal } from \"./calcPomodoroTotal\";\nimport { loadPomodoroTotals } from \"./loadPomodoroTotals\";\nimport { syncTaskId } from \"./syncTaskId\";\nimport { setTimelineCloseTask } from \"./setTimelineCloseTask\";\nimport { addFBTimer } from \"./addFBTimer\";\nimport { delFBTimer } from \"./dellFBTimer\";\nimport { setTimerId } from \"./setTimerId\";\nimport axios, { AxiosRequestConfig, AxiosError } from \"axios\";\nimport { toastr } from \"../util/toastr\";\nexport { ActionTypes };\nexport type ISideEffector = (\n  action: Actions,\n  dispatch: Dispatch<Actions>,\n  state: () => IState\n) => void;\nexport const fetchData = <T>(\n  url: string,\n  path: string,\n  config?: AxiosRequestConfig\n) => axios.get<T>(`${baseUrl(url)}/${path}`, config);\nexport const postData = <T>(\n  url: string,\n  path: string,\n  data: object,\n  config?: AxiosRequestConfig\n) => axios.post<T>(`${baseUrl(url)}/${path}`, data, config);\nexport const patchData = (\n  url: string,\n  path: string,\n  data: object,\n  config?: AxiosRequestConfig\n) => axios.patch(`${baseUrl(url)}/${path}`, data, config);\nexport const errToastr = (err: AxiosError) => {\n  let message: string;\n  try {\n    message = err.response ? err.response.data._error_message : \"error\";\n  } catch (e) {\n    message = e.message || e;\n  }\n  toastr.error(message);\n};\nexport const rootSideEffector = (\n  action: Actions,\n  dispatch: Dispatch<Actions>,\n  state: () => IState\n) => {\n  switch (action.type) {\n    case ActionTypes.FETCH_PROJECTS: {\n      fetchProjecs(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_PROJECT: {\n      fetchProject(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_MILESTONES: {\n      fetchMilestones(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_TASKS: {\n      fetchTasks(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_TASK_STATUSES: {\n      fetchTaskStatuses(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_CUSTOM_ATTRS: {\n      fetchCustomAttrs(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_CUSTOM_VALUE_MAP: {\n      fetchCustomValueMap(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_USER: {\n      fetchUser(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.PATCH_CUSTOM_VALUE: {\n      patchCustomValue(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SIGN_IN: {\n      signIn(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.PATCH_TASK: {\n      patchTask(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SIGN_OUT: {\n      signOut(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_AUTH_TOKEN: {\n      setAuthToken(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_URL: {\n      setUrl(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_PID: {\n      setPid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_MID: {\n      setMid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      setCustomEid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      setCustomRid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_BIZ_DAYS:\n    case ActionTypes.ADD_BIZ_DAY:\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      syncBizDays(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID:\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      syncRejectTaskStatusIds(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_POMODORO: {\n      addPomodoro(action, dispatch, state);\n      syncPomodoro(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.USE_POMODORO:\n    case ActionTypes.RESET_POMODORO: {\n      syncPomodoro(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.CALC_POMODORO_TOTAL: {\n      calcPomodoroTotal(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.LOAD_POMODORO_TOTALS: {\n      loadPomodoroTotals(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TASK_ID:\n    case ActionTypes.RESET_TASK_ID: {\n      syncTaskId(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TIMELIMIT_CLOSE_TASK: {\n      setTimelineCloseTask(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_FB_TIMER: {\n      addFBTimer(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.DEL_FB_TIMER: {\n      delFBTimer(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TIMER_ID: {\n      setTimerId(action, dispatch, state);\n      break;\n    }\n    default: {\n    }\n  }\n};\n","import { StorageKey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport axios from \"axios\";\nexport const signOut: ISideEffector = (action, dispatch, state) => {\n  localStorage.removeItem(StorageKey.USERNAME);\n  localStorage.removeItem(StorageKey.PASSWORD);\n  if (axios.defaults.headers.common[\"Authorization\"]) {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};\n","import { ISideEffector, ActionTypes } from \".\";\nimport axios from \"axios\";\nexport const setAuthToken: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_AUTH_TOKEN) {\n    const { auth_token } = action.payload;\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${auth_token}`;\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setUrl: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_URL) {\n    const { url } = action.payload;\n    setToStorage(StorageKey.URL, url);\n  }\n};\n","import { StorageKey, setToStorage, getFromStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setPid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_PID) {\n    const { pid } = action.payload;\n    setToStorage(StorageKey.PID, pid);\n    localStorage.removeItem(StorageKey.MID);\n    const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n    const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n    dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n    dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  }\n};\n","import { StorageKey, setToStorage, getFromStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nimport _ from \"lodash\";\nexport const setMid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_MID) {\n    const { mid } = action.payload;\n    const beforeMid = state().mid;\n    setToStorage(StorageKey.MID, mid);\n    const biz_days = _.compact(\n      getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n    ).sort();\n    dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n    if (beforeMid && mid !== beforeMid) {\n      dispatch({ type: ActionTypes.RESET_TASK_ID });\n    }\n    const timelimit_close_task = getFromStorageWithSubkey(\n      StorageKey.TIMELIMIT_CLOSE_TASK,\n      mid\n    );\n    dispatch({\n      type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK,\n      payload: { timelimit_close_task }\n    });\n  }\n};\n","import { StorageKey, setToStorageWithSubkey, getFromStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setCustomEid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_CUSTOM_EID) {\n    const { custom_eid } = action.payload;\n    const pid = getFromStorage(StorageKey.PID);\n    setToStorageWithSubkey(StorageKey.CUSTOM_EID, pid, custom_eid);\n  }\n};\n","import { StorageKey, setToStorageWithSubkey, getFromStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setCustomRid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_CUSTOM_RID) {\n    const { custom_rid } = action.payload;\n    const pid = getFromStorage(StorageKey.PID);\n    setToStorageWithSubkey(StorageKey.CUSTOM_RID, pid, custom_rid);\n  }\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncBizDays: ISideEffector = (action, dispathc, state) => {\n  _.defer(() => {\n    const { mid, biz_days } = state();\n    setToStorageWithSubkey(StorageKey.BIZ_DAYS, mid, biz_days.join(\",\"));\n  });\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncRejectTaskStatusIds: ISideEffector = (\n  action,\n  dispatch,\n  state\n) => {\n  _.defer(() => {\n    const { pid, reject_task_status_ids } = state();\n    setToStorageWithSubkey(\n      StorageKey.REJECT_TASK_STATUS_IDS,\n      pid,\n      reject_task_status_ids.join(\",\")\n    );\n  });\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncTaskId: ISideEffector = (action, dispatch, state) => {\n  _.defer(() => {\n    const { task_id } = state();\n    if (task_id) {\n      setToStorage(StorageKey.TASK_ID, task_id);\n    } else {\n      localStorage.removeItem(StorageKey.TASK_ID);\n    }\n  });\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setTimelineCloseTask: ISideEffector = (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.SET_TIMELIMIT_CLOSE_TASK) {\n    const { timelimit_close_task } = action.payload;\n    const customize = action.meta ? action.meta.customize : false;\n    const { mid } = state();\n    timelimit_close_task &&\n      customize &&\n      setToStorageWithSubkey(\n        StorageKey.TIMELIMIT_CLOSE_TASK,\n        mid,\n        timelimit_close_task\n      );\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setTimerId: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_TIMER_ID) {\n    const { timer_id } = action.payload;\n    if (timer_id) {\n      setToStorage(StorageKey.TIMER_ID, timer_id);\n    } else {\n      localStorage.removeItem(StorageKey.TIMER_ID);\n    }\n  }\n};\n","import { Dispatch } from \"react\";\nimport { Actions, ActionTypes } from \"./actions\";\nimport { getFromStorage, getFromStorageWithSubkey, StorageKey } from \"./store\";\nimport _ from \"lodash\";\nconst signIn = (dispatch: Dispatch<Actions>) => {\n  const username = getFromStorage(StorageKey.USERNAME);\n  const password = getFromStorage(StorageKey.PASSWORD);\n  dispatch({ type: ActionTypes.SIGN_IN, payload: { username, password } });\n};\nconst syncStorage = (dispatch: Dispatch<Actions>) => {\n  const url = getFromStorage(StorageKey.URL);\n  const timer_id = getFromStorage(StorageKey.TIMER_ID);\n  const pid = getFromStorage(StorageKey.PID);\n  const mid = getFromStorage(StorageKey.MID);\n  const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n  const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n  const biz_days = _.compact(\n    getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n  ).sort();\n  const reject_task_status_ids = _.compact(\n    getFromStorageWithSubkey(StorageKey.REJECT_TASK_STATUS_IDS, pid).split(\",\")\n  );\n\n  const isOpen = !(url && pid && mid && custom_eid && custom_rid);\n\n  const pomodoro_date = getFromStorage(StorageKey.POMODORO_DATE);\n  const pomodoro_number = Number(\n    getFromStorage(StorageKey.POMODORO_NUMBER) || \"0\"\n  );\n  const pomodoro_used_number = Number(\n    getFromStorage(StorageKey.POMODORO_USED_NUMBER) || \"0\"\n  );\n  const task_id = getFromStorage(StorageKey.TASK_ID);\n  timer_id &&\n    dispatch({ type: ActionTypes.SET_TIMER_ID, payload: { timer_id } });\n  url && dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n  pid && dispatch({ type: ActionTypes.SET_PID, payload: { pid } });\n  mid && dispatch({ type: ActionTypes.SET_MID, payload: { mid } });\n  custom_eid &&\n    dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n  custom_rid &&\n    dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  biz_days.length &&\n    dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n  reject_task_status_ids.length &&\n    dispatch({\n      type: ActionTypes.SET_REJECT_TASK_STATUS_IDS,\n      payload: { reject_task_status_ids }\n    });\n\n  task_id && dispatch({ type: ActionTypes.SET_TASK_ID, payload: { task_id } });\n  isOpen && dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n  pomodoro_date &&\n    dispatch({\n      type: ActionTypes.RESTORE_POMODORO,\n      payload: { pomodoro_date, pomodoro_number, pomodoro_used_number }\n    });\n  dispatch({ type: ActionTypes.LOADED });\n  dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n};\nexport const init = (dispatch: Dispatch<Actions>) => {\n  syncStorage(dispatch);\n  _.defer(() => {\n    signIn(dispatch);\n  });\n};\n","import React, { createContext, useReducer, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport { ActionTypes } from \"./actions\";\nimport { initialState, ICustomAttr, IMilestone, ITask } from \"./store\";\nimport { reducer } from \"./reducer\";\nimport { Actions } from \"./actions\";\nimport { useSideEffector } from \"./util/useSideEffector\";\nimport { rootSideEffector } from \"./sideEffectors\";\nimport { init } from \"./init\";\nimport { messaging, Timers } from \"./util/firebase\";\nimport { TimerMode } from \"./util/timer\";\nexport const baseUrl = (url: string) => `${url.replace(/[/]$/, \"\")}/api/v1`;\nconst getCustomAttr = (items: ICustomAttr[], id: number) =>\n  _.find(items, { id });\nconst getMilestone = (items: IMilestone[], mid: string) =>\n  items.find(item => String(item.id) === mid);\nconst getUserTasks = (items: ITask[], uid: number) =>\n  _.chain(items)\n    .filter({ assigned_to: uid })\n    .sortBy(\"user_story\")\n    .value();\n\nexport const RootContext = createContext({\n  state: initialState,\n  dispatch: (action: Actions) => {}\n});\nexport const Provider = ({ children }: { children: React.ReactNode }) => {\n  const [state, dispatch] = useSideEffector(\n    useReducer(reducer, initialState),\n    rootSideEffector\n  );\n  const value = {\n    state,\n    dispatch\n  };\n\n  useEffect(() => {\n    if (state.url) {\n      dispatch({ type: ActionTypes.FETCH_PROJECTS });\n    }\n  }, [dispatch, state.url]);\n  useEffect(() => {\n    if (state.url && state.pid) {\n      dispatch({\n        type: ActionTypes.FETCH_MILESTONES,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_CUSTOM_ATTRS,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_TASK_STATUSES,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_PROJECT,\n        payload: { pid: state.pid }\n      });\n    }\n  }, [state.url, state.pid, dispatch]);\n  useEffect(() => {\n    if (\n      state.url &&\n      state.mid &&\n      state.milestone.id &&\n      state.timelimit_close_task\n    ) {\n      dispatch({\n        type: ActionTypes.FETCH_TASKS,\n        payload: {\n          milestone: state.mid,\n          reject_task_status_ids: state.reject_task_status_ids,\n          timelimit_close_task: state.timelimit_close_task\n        }\n      });\n    }\n  }, [\n    state.url,\n    state.mid,\n    state.updated_time,\n    state.reject_task_status_ids,\n    dispatch,\n    state.milestone.id,\n    state.timelimit_close_task\n  ]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.FETCH_CUSTOM_VALUE_MAP,\n      payload: {\n        tasks: state.tasks\n      }\n    });\n  }, [dispatch, state.tasks, state.custom_eid, state.custom_rid]);\n  useEffect(() => {\n    const active_task_statuses = _.chain(state.task_statuses)\n      .reject(item => _.includes(state.reject_task_status_ids, String(item.id)))\n      .orderBy(item => item.order)\n      .value();\n    dispatch({\n      type: ActionTypes.SET_ACTIVE_TASK_STATUSES,\n      payload: { active_task_statuses }\n    });\n  }, [state.task_statuses, state.reject_task_status_ids, dispatch]);\n  useEffect(() => {\n    const custom_attr_e = getCustomAttr(\n      state.custom_attrs,\n      Number(state.custom_eid)\n    );\n    if (custom_attr_e) {\n      dispatch({\n        type: ActionTypes.SET_CUSTOM_ATTR_E,\n        payload: { custom_attr_e }\n      });\n    }\n  }, [dispatch, state.custom_attrs, state.custom_eid]);\n  useEffect(() => {\n    const custom_attr_r = getCustomAttr(\n      state.custom_attrs,\n      Number(state.custom_rid)\n    );\n    if (custom_attr_r) {\n      dispatch({\n        type: ActionTypes.SET_CUSTOM_ATTR_R,\n        payload: { custom_attr_r }\n      });\n    }\n  }, [dispatch, state.custom_attrs, state.custom_rid]);\n  useEffect(() => {\n    const milestone = getMilestone(state.milestones, state.mid);\n    if (milestone) {\n      dispatch({\n        type: ActionTypes.SET_MILESTONE,\n        payload: { milestone }\n      });\n    }\n  }, [dispatch, state.mid, state.milestones]);\n  useEffect(() => {\n    if (state.tasks.length > 0 && state.user) {\n      const user_tasks = getUserTasks(state.tasks, state.user.id);\n      dispatch({ type: ActionTypes.SET_USER_TASKS, payload: { user_tasks } });\n    }\n  }, [dispatch, state.tasks, state.user]);\n\n  useEffect(() => {\n    init(dispatch);\n  }, [dispatch]);\n  useEffect(() => {\n    if (state.task_id) {\n      const task = state.tasks.find(item => item.id === Number(state.task_id));\n      if (task) {\n        dispatch({ type: ActionTypes.SET_TASK, payload: { task } });\n      }\n    }\n  }, [dispatch, state.task_id, state.tasks]);\n  useEffect(() => {\n    const firstDay = state.biz_days[0];\n    if (firstDay && !state.timelimit_close_task) {\n      const timelimit_close_task = `${moment(firstDay)\n        .local()\n        .startOf(\"day\")\n        .format(\"YYYY-MM-DD\")}T12:00`;\n      dispatch({\n        type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK,\n        payload: { timelimit_close_task }\n      });\n    }\n  }, [dispatch, state.biz_days, state.milestone, state.timelimit_close_task]);\n  useEffect(() => {\n    if (state.task_statuses.length > 0) {\n      const task_status = state.task_statuses.find(\n        item => item.slug === \"in-progress\"\n      );\n      task_status &&\n        dispatch({\n          type: ActionTypes.SET_IN_PROGRESS_TASK_STATUS_ID,\n          payload: { task_status_id: String(task_status.id) }\n        });\n    }\n  }, [dispatch, state.task_statuses, state.task_statuses.length]);\n  useEffect(() => {\n    if (messaging) {\n      messaging.onTokenRefresh(async () => {\n        if (messaging) {\n          const token = await messaging.getToken();\n          dispatch({\n            type: ActionTypes.SET_TOKEN,\n            payload: { token }\n          });\n        }\n      });\n      messaging.getToken().then(token => {\n        dispatch({\n          type: ActionTypes.SET_TOKEN,\n          payload: { token }\n        });\n      });\n    }\n  }, [dispatch]);\n  useEffect(() => {\n    Object.values(TimerMode).forEach(mode => {\n      Timers.where(\"mode\", \"==\", mode).onSnapshot(docs => {\n        dispatch({\n          type: ActionTypes.SET_POMODORO_LIVE_COUNT,\n          payload: { mode, value: docs.size }\n        });\n      });\n    });\n  }, [dispatch]);\n  return <RootContext.Provider value={value}>{children}</RootContext.Provider>;\n};\n","import React from \"react\";\nexport const preventDefault = (e: React.FormEvent) => {\n  e.preventDefault();\n};\nexport const stopPropagation = (e: React.FormEvent) => {\n  e.stopPropagation();\n};\n","import React from \"react\";\nimport { LinearProgress } from \"@rmwc/linear-progress\";\nexport const LinearLoader: React.SFC = () => (\n  <LinearProgress\n    progress={0}\n    buffer={0}\n    className=\"my-auto mx-2 border-0 form-control\"\n  />\n);\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { LinearLoader } from \"./common/LinearLoader\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nexport const ProjectSelector = () => {\n  const {\n    state: { pid, projects },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        dispatch({ type: ActionTypes.SET_PID, payload: { pid: id } });\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Project</InputGroupAddon>\n      {_.isEmpty(projects) ? (\n        <LinearLoader />\n      ) : (\n        <Input value={pid} type=\"select\" onChange={handleChange}>\n          <option value=\"\"> --- </option>\n          {projects.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      )}\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport { LinearLoader } from \"./common/LinearLoader\";\n\nexport const MilestoneSelector = () => {\n  const {\n    state: { milestones, mid },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        dispatch({ type: ActionTypes.SET_MID, payload: { mid: id } });\n      }\n    },\n    [dispatch]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Sprint</InputGroupAddon>\n      {_.isEmpty(milestones) ? (\n        <LinearLoader />\n      ) : (\n        <Input type=\"select\" value={mid} onChange={handleChange}>\n          <option value=\"\"> --- </option>\n          {milestones.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      )}\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nimport { LinearLoader } from \"./common/LinearLoader\";\n\nexport const CustomValuesSelector = () => {\n  const {\n    state: { custom_attrs, custom_eid, custom_rid },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        switch (e.target.name) {\n          case \"eid\": {\n            dispatch({\n              type: ActionTypes.SET_CUSTOM_EID,\n              payload: { custom_eid: id }\n            });\n            break;\n          }\n          case \"rid\": {\n            dispatch({\n              type: ActionTypes.SET_CUSTOM_RID,\n              payload: { custom_rid: id }\n            });\n            break;\n          }\n        }\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <div className=\"row\">\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Estimate</InputGroupAddon>\n        {_.isEmpty(custom_attrs) ? (\n          <LinearLoader></LinearLoader>\n        ) : (\n          <Input\n            value={custom_eid}\n            name=\"eid\"\n            type=\"select\"\n            onChange={handleChange}\n          >\n            <option value=\"\"> --- </option>\n            {custom_attrs.map(item => (\n              <option key={item.id} value={item.id}>\n                {item.name}\n              </option>\n            ))}\n          </Input>\n        )}\n      </InputGroup>\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Result</InputGroupAddon>\n        {_.isEmpty(custom_attrs) ? (\n          <LinearLoader></LinearLoader>\n        ) : (\n          <Input\n            value={custom_rid}\n            name=\"rid\"\n            type=\"select\"\n            onChange={handleChange}\n          >\n            <option> --- </option>\n            {custom_attrs.map(item => (\n              <option key={item.id} value={item.id}>\n                {item.name}\n              </option>\n            ))}\n          </Input>\n        )}\n      </InputGroup>\n    </div>\n  );\n};\n","import React, { useEffect, useState, useContext, useCallback } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  UncontrolledTooltip,\n  Table,\n  Card,\n  CardHeader,\n  Input,\n  Label,\n  FormGroup,\n  InputGroup\n} from \"reactstrap\";\nimport { IMilestone } from \"../store\";\nimport { RootContext } from \"../Provider\";\nimport { LinearLoader } from \"./common/LinearLoader\";\nimport moment, { Moment } from \"moment\";\nimport biz from \"moment-business\";\nimport _ from \"lodash\";\nimport { ActionTypes } from \"../actions\";\nexport const isToday = (date: string) =>\n  moment()\n    .local()\n    .format(\"YYYY-MM-DD\") ===\n  moment(date)\n    .local()\n    .format(\"YYYY-MM-DD\");\n\nexport const dayNameFromIdx = (date: string, idx: number) => {\n  if (idx === -1) {\n    return \"\";\n  }\n  if (idx === 0) {\n    return \"Planning\";\n  }\n  return `Day ${idx}`;\n};\n\nexport const dayName = (date: string, biz_days: string[]) => {\n  const idx = biz_days.indexOf(date);\n  return dayNameFromIdx(date, idx);\n};\nconst getDays = (item: IMilestone) => {\n  const startM = moment(item.estimated_start).local();\n  const finishM = moment(item.estimated_finish).local();\n  const daysInSprint = finishM.diff(startM, \"days\");\n  return _.times(daysInSprint).map(i => startM.clone().add(i, \"days\"));\n};\nconst getDefaultBizDays = (items: Moment[]) =>\n  items\n    .filter(item => biz.isWeekDay(item))\n    .map(item => item.format(\"YYYY-MM-DD\"));\n\nconst weekClassName = (day: number) => ({\n  \"text-danger\": day === 0,\n  \"text-info\": day === 6\n});\n\ninterface DayItemProps {\n  item: Moment | null;\n  idx: number;\n}\nconst DayItem: React.FC<DayItemProps> = ({ item, idx }) => {\n  const {\n    state: { biz_days },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const biz_day = e.target.value;\n      if (e.target.checked) {\n        dispatch({ type: ActionTypes.ADD_BIZ_DAY, payload: { biz_day } });\n      } else {\n        dispatch({ type: ActionTypes.REMOVE_BIZ_DAY, payload: { biz_day } });\n      }\n    },\n    [dispatch]\n  );\n  if (!item) {\n    return (\n      <td>\n        <br />\n      </td>\n    );\n  }\n  const value = item.format(\"YYYY-MM-DD\");\n  const isPlanning = value === biz_days[0];\n  const eleId = `biz-day-${value}`;\n  const checked = _.includes(biz_days, value);\n  return (\n    <>\n      <td\n        className={classNames(weekClassName(idx), { \"table-info\": isPlanning })}\n        id={eleId}\n      >\n        {biz.isWeekDay(item) ? (\n          <FormGroup check inline>\n            <Label check>\n              <Input\n                onChange={handleChange}\n                disabled={biz.isWeekendDay(item)}\n                value={value}\n                type=\"checkbox\"\n                checked={checked}\n                className=\"form-check-input\"\n              />\n              {value}\n            </Label>\n          </FormGroup>\n        ) : (\n          <span>{value}</span>\n        )}\n      </td>\n      {checked ? (\n        <UncontrolledTooltip target={eleId}>\n          {dayName(value, biz_days)}\n        </UncontrolledTooltip>\n      ) : null}\n    </>\n  );\n};\ntype Moments = Moment[];\ntype MomentOrNull = Moment | null;\ntype MomentsOrNull = MomentOrNull[];\n\nconst DaysTable: React.FC = () => {\n  const {\n    state: { biz_days, milestone },\n    dispatch\n  } = useContext(RootContext);\n  const [items, setItems] = useState<Moments>([]);\n  const [weekdays, setWeekdays] = useState<MomentsOrNull[]>([]);\n  useEffect(() => {\n    if (milestone) {\n      const items = getDays(milestone);\n      setItems(items);\n      if (biz_days.length <= 1) {\n        dispatch({\n          type: ActionTypes.SET_BIZ_DAYS,\n          payload: { biz_days: getDefaultBizDays(items) }\n        });\n      }\n    }\n  }, [milestone, biz_days, dispatch]);\n  useEffect(() => {\n    if (items.length > 0) {\n      const weeks = _.chunk(\n        [..._.times(items[0].day(), () => null), ...items],\n        7\n      );\n      setWeekdays(weeks);\n    }\n  }, [items]);\n  return (\n    <Table bordered>\n      <thead>\n        <tr>\n          {moment.weekdays().map((item, idx) => (\n            <th\n              key={idx}\n              className={classNames(\"text-center\", weekClassName(idx))}\n            >\n              {item}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {weekdays.map((days, i) => (\n          <tr key={i}>\n            {days.map((item, idx) => (\n              <DayItem idx={idx} key={idx} item={item} />\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n};\n\nexport const DaysSelector: React.FC = () => {\n  const {\n    state: { milestone }\n  } = useContext(RootContext);\n  return (\n    <Card>\n      <CardHeader>Business Days</CardHeader>\n      {_.isEmpty(milestone) ? (\n        <InputGroup>\n          <LinearLoader />\n        </InputGroup>\n      ) : (\n        <DaysTable />\n      )}\n    </Card>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Input,\n  FormGroup,\n  Label\n} from \"reactstrap\";\nimport { ITaskStatus } from \"../store\";\nimport { ActionTypes } from \"../actions\";\nconst StatusItem = ({ item }: { item: ITaskStatus }) => {\n  const {\n    state: { reject_task_status_ids },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const reject_task_status_id = e.target.value;\n      if (e.target.checked) {\n        dispatch({\n          type: ActionTypes.REMOVE_REJECT_TASK_STATUS_ID,\n          payload: { reject_task_status_id }\n        });\n      } else {\n        dispatch({\n          type: ActionTypes.ADD_REJECT_TASK_STATUS_ID,\n          payload: { reject_task_status_id }\n        });\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <FormGroup check inline>\n      <Label check>\n        <Input\n          onChange={handleChange}\n          type=\"checkbox\"\n          value={item.id}\n          defaultChecked={!_.includes(reject_task_status_ids, String(item.id))}\n        />\n        {item.name}\n      </Label>\n    </FormGroup>\n  );\n};\nexport const TaskStatusSelector = () => {\n  const {\n    state: { task_statuses }\n  } = useContext(RootContext);\n  if (task_statuses.length === 0) {\n    return null;\n  }\n  return (\n    <Card>\n      <CardHeader>Task status</CardHeader>\n      <CardBody>\n        {task_statuses.map(item => (\n          <StatusItem key={item.id} item={item} />\n        ))}\n      </CardBody>\n    </Card>\n  );\n};\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport { InputGroupAddon, InputGroupText } from \"reactstrap\";\nexport const InputGroupSpinner: React.FC = () => {\n  return (\n    <InputGroupAddon addonType=\"append\">\n      <InputGroupText>\n        <FontAwesomeIcon icon={faSpinner} className=\"fa-pulse\" />\n      </InputGroupText>\n    </InputGroupAddon>\n  );\n};\n","import React, { useContext, useCallback, useState, useEffect } from \"react\";\nimport { Button, Form, Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { InputGroupSpinner } from \"./InputGroupSpinner\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nexport const TimelimitCloseTask = () => {\n  const {\n    state: { timelimit_close_task },\n    dispatch\n  } = useContext(RootContext);\n  const [datetime, setDatetime] = useState(\"\");\n  const [isFresh, setIsFresh] = useState(false);\n\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setDatetime(e.target.value);\n  }, []);\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      datetime &&\n        dispatch({\n          type: ActionTypes.SET_TIMELIMIT_CLOSE_TASK,\n          payload: { timelimit_close_task: datetime },\n          meta: { customize: true }\n        });\n      e.preventDefault();\n    },\n    [datetime, dispatch]\n  );\n  useEffect(() => {\n    if (timelimit_close_task) {\n      setIsFresh(true);\n      _.defer(setIsFresh, false);\n    }\n  }, [timelimit_close_task]);\n  return (\n    <Form onSubmit={handleSubmit}>\n      <InputGroup>\n        <InputGroupAddon addonType=\"prepend\">\n          Timelimit for closing old tasks\n        </InputGroupAddon>\n        {isFresh ? (\n          <InputGroupSpinner />\n        ) : (\n          <Input\n            defaultValue={timelimit_close_task}\n            onChange={handleChange}\n            type=\"datetime-local\"\n          />\n        )}\n        <InputGroupAddon addonType=\"append\">\n          <Button>Set</Button>\n        </InputGroupAddon>\n      </InputGroup>\n    </Form>\n  );\n};\n","import React, { useContext, useState, useCallback, useMemo } from \"react\";\nimport _ from \"lodash\";\nimport classNames from \"classnames\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  Collapse,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  Button,\n  Badge\n} from \"reactstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faChevronCircleRight,\n  faExternalLinkAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { stopPropagation } from \"../util/handler\";\nimport { ProjectSelector } from \"./ProjectSelector\";\nimport { MilestoneSelector } from \"./MilestoneSelector\";\nimport { CustomValuesSelector } from \"./CustomValuesSelector\";\nimport { DaysSelector } from \"./DaysSelector\";\nimport { TaskStatusSelector } from \"./TaskStatusSelector\";\nimport { TimelimitCloseTask } from \"./TimelimitCloseTask\";\nimport { IMilestone } from \"../store\";\nimport styles from \"./Controller.module.css\";\nimport { ActionTypes } from \"../actions\";\nconst getTaskboardUrl = (url: string, milestone: IMilestone) => {\n  if (url && milestone.project_extra_info) {\n    return `${url}/project/${milestone.project_extra_info.slug}/taskboard/${milestone.slug}`;\n  } else {\n    return \"\";\n  }\n};\n\nconst getRange = (biz_days: string[]) => {\n  if (biz_days.length > 1) {\n    return `[${_.head(biz_days)} - ${_.last(biz_days)}]`;\n  } else {\n    return \"\";\n  }\n};\nexport const ToggleIcon = ({ isOpen }: { isOpen: boolean }) => {\n  const rotation = isOpen ? 90 : undefined;\n  return (\n    <FontAwesomeIcon\n      className=\"text-muted mr-2\"\n      rotation={rotation}\n      icon={faChevronCircleRight}\n    />\n  );\n};\nexport const Controller = () => {\n  const {\n    state: { url: stateUrl, isOpen, biz_days, milestone },\n    dispatch\n  } = useContext(RootContext);\n  const [url, setUrl] = useState(\"\");\n  const handleUrl = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUrl(e.target.value);\n    },\n    [setUrl]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (url) {\n        dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n      }\n      e.preventDefault();\n    },\n    [url, dispatch]\n  );\n  const toggle = useCallback(() => {\n    if (isOpen) {\n      dispatch({ type: ActionTypes.CLOSE_CONTROLLER });\n    } else {\n      dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n    }\n  }, [dispatch, isOpen]);\n  const taskboardUrl = useMemo(() => getTaskboardUrl(stateUrl, milestone), [\n    milestone,\n    stateUrl\n  ]);\n  const spName = milestone.name;\n  const range = useMemo(() => getRange(biz_days), [biz_days]);\n  return (\n    <Card>\n      <CardHeader className={classNames(styles.header)} onClick={toggle}>\n        <ToggleIcon isOpen={isOpen} />\n        {spName && (\n          <Badge color=\"primary\" pill className=\"p-1 m-1\">\n            <span>{spName}</span>\n          </Badge>\n        )}\n        {range && (\n          <Badge className=\"p-1 m-1\">\n            <span>{range}</span>\n          </Badge>\n        )}\n        {taskboardUrl ? (\n          <a\n            target=\"_blank\"\n            onClick={stopPropagation}\n            className=\"float-right\"\n            href={taskboardUrl}\n            rel=\"noopener noreferrer\"\n          >\n            <FontAwesomeIcon className=\"mr-1\" icon={faExternalLinkAlt} />\n            Taskboard\n          </a>\n        ) : null}\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <Form onSubmit={handleSubmit}>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">URL</InputGroupAddon>\n            <Input\n              defaultValue={stateUrl}\n              onChange={handleUrl}\n              placeholder=\"http://hostname:port\"\n            />\n            <InputGroupAddon addonType=\"append\">\n              <Button>Set</Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <div className=\"row\">\n          <ProjectSelector />\n          <MilestoneSelector />\n        </div>\n        <CustomValuesSelector />\n        <TimelimitCloseTask />\n        <DaysSelector />\n        <TaskStatusSelector />\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useCallback } from \"react\";\nimport { Button } from \"reactstrap\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nexport const UpdateButton: React.FC = () => {\n  const { dispatch } = useContext(RootContext);\n  const updateData = useCallback(() => {\n    dispatch({ type: ActionTypes.UPDATE_DATA });\n  }, [dispatch]);\n  return (\n    <Button onClick={updateData}>\n      <FontAwesomeIcon icon={faSyncAlt} />\n    </Button>\n  );\n};\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport {\n  Button,\n  Form,\n  InputGroup,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  Spinner\n} from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faUser,\n  faKey,\n  faSignInAlt,\n  faSignOutAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { ActionTypes } from \"../actions\";\nimport { preventDefault } from \"../util/handler\";\nexport const SignInForm: React.FC = () => {\n  const {\n    state: { auth_token, auth_error, username: sign_in_username },\n    dispatch\n  } = useContext(RootContext);\n\n  const [username, setUsername] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (username && password) {\n        setLoading(true);\n        dispatch({\n          type: ActionTypes.SIGN_IN,\n          payload: {\n            username,\n            password\n          }\n        });\n      }\n      e.preventDefault();\n    },\n    [password, username, dispatch, setLoading]\n  );\n  const handleUsername = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUsername(e.target.value);\n    },\n    [setUsername]\n  );\n  const handlePassword = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setPassword(e.target.value);\n    },\n    [setPassword]\n  );\n  const handleSignOut = useCallback(() => {\n    dispatch({ type: ActionTypes.SIGN_OUT });\n  }, [dispatch]);\n  useEffect(() => {\n    if (auth_error || auth_token) {\n      setLoading(false);\n    }\n  }, [auth_error, auth_token, setLoading]);\n  return (\n    <>\n      {auth_token ? (\n        <Form inline onSubmit={preventDefault} className=\"mr-1\">\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faUser} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon\n              addonType=\"prepend\"\n              className=\"border border-success\"\n            >\n              <InputGroupText>{sign_in_username}</InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon addonType=\"append\">\n              <Button title=\"Sign out\" onClick={handleSignOut} color=\"danger\">\n                <FontAwesomeIcon icon={faSignOutAlt} />\n              </Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n      ) : (\n        <Form inline onSubmit={handleSubmit} className=\"mr-1\">\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faUser} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <Input\n              disabled={loading}\n              onInput={handleUsername}\n              onChange={handleUsername}\n              name=\"username\"\n              placeholder=\"username\"\n              invalid={auth_error}\n            />\n          </InputGroup>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faKey} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <Input\n              disabled={loading}\n              onInput={handlePassword}\n              onChange={handlePassword}\n              name=\"password\"\n              placeholder=\"password\"\n              type=\"password\"\n              invalid={auth_error}\n            />\n          </InputGroup>\n          <Button color=\"info\">\n            {loading ? (\n              <Spinner size=\"sm\" type=\"grow\" />\n            ) : (\n              <FontAwesomeIcon icon={faSignInAlt} />\n            )}\n          </Button>\n        </Form>\n      )}\n    </>\n  );\n};\n","import React, { useCallback, useContext, useState, useMemo } from \"react\";\nimport { Avatar, AvatarProps } from \"@rmwc/avatar\";\nimport { ICustomValueMap, IUser, ITask } from \"../store\";\nimport { RootContext } from \"../Provider\";\nimport classNames from \"classnames\";\nimport {\n  Table,\n  Navbar,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Progress\n} from \"reactstrap\";\nimport _ from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMedal,\n  faTimes,\n  faEquals,\n  faGrinBeam,\n  faGrinBeamSweat,\n  faDizzy,\n  faGhost,\n  faBurn,\n  faLevelDownAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { UpdateButton } from \"./UpdateButton\";\nimport styles from \"./UserTasks.module.css\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport { preventDefault } from \"../util/handler\";\nimport { SignInForm } from \"./SignInForm\";\n\ninterface ISortedUser extends IUser {\n  burn_down: number;\n}\nconst barStyles = [\"success\", \"warning\", \"info\", \"danger\"];\nconst getTasksByUser = (items: ITask[]) => _.groupBy(items, \"assigned_to\");\nexport const AvatarSquare: React.FC<AvatarProps> = props => {\n  const src = props.src || `http://i.pravatar.cc/80?u=${Math.random()}`;\n  return <Avatar {...props} src={src} square className=\"mr-1\" />;\n};\nexport const parseCustomVal = (val: string) =>\n  _.chain(val)\n    .replace(/[^0-9.+,]/g, \"\")\n    .replace(/[+]/g, \",\")\n    .split(\",\")\n    .compact()\n    .map(Number)\n    .sum()\n    .value();\n\nexport const getCustomVal = (\n  custom_value_map: ICustomValueMap,\n  task: ITask,\n  id: number\n) => {\n  if (custom_value_map.has(task)) {\n    return parseCustomVal(\n      _.get(custom_value_map.get(task), `attributes_values.${id}`, \"0\")\n    );\n  } else {\n    return 0;\n  }\n};\nexport const getSumCustomVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, id))\n    .sum()\n    .value();\n\nconst getSumCustomValClosed = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  getSumCustomVal(custom_value_map, tasks.filter(item => item.is_closed), id);\nexport const getCustomValVersion = (\n  custon_value_map: ICustomValueMap,\n  task: ITask\n) => {\n  if (custon_value_map.has(task)) {\n    return _.get(custon_value_map.get(task), \"version\");\n  } else {\n    return undefined;\n  }\n};\nexport const isCustomValValid = (e: number, r: number, is_closed: boolean) =>\n  is_closed && r === e;\nexport const isCustomValInvalid = (e: number, r: number) => r > e;\nconst getGrade = (e: number, r: number): [string | null, number] => {\n  if (_.isNumber(e) && _.isNumber(r) && e > 0) {\n    const diff = Math.abs(e - r) / e;\n    if (diff <= 0.05) {\n      return [\"gold\", 3];\n    }\n    if (diff <= 0.1) {\n      return [\"silver\", 2];\n    }\n    if (diff < 0.2) {\n      return [\"bronze\", 1];\n    }\n  }\n  return [null, 0];\n};\nconst NameAndWorkLoad = ({\n  username,\n  val,\n  total,\n  imgSrc\n}: {\n  username: string;\n  val: number;\n  total: number;\n  imgSrc: string;\n}) => {\n  const [icon, tblCls] = useMemo(() => {\n    const diff = total > 0 ? (val - total) / total : 0;\n    if (diff < -0.1) {\n      return [faGrinBeam, \"\"];\n    } else if (diff <= 0.1) {\n      return [faGrinBeam, \"table-success\"];\n    } else if (diff <= 0.2) {\n      return [faGrinBeamSweat, \"table-warning\"];\n    } else {\n      return [faDizzy, \"table-danger\"];\n    }\n  }, [total, val]);\n\n  if (!val) {\n    return (\n      <>\n        <td>\n          <AvatarSquare src={imgSrc} /> {username}\n        </td>\n        <td />\n      </>\n    );\n  }\n  return (\n    <>\n      <td className={tblCls}>\n        <AvatarSquare src={imgSrc} /> {username}\n        <FontAwesomeIcon className=\"mx-1\" icon={icon} />\n      </td>\n      <td className={classNames(tblCls, \"text-right\")}>{val}</td>\n    </>\n  );\n};\n\nexport const Medal = ({ e, r }: { e: number; r: number }) => {\n  const [grade, num] = useMemo(() => getGrade(e, r), [e, r]);\n  if (grade) {\n    return (\n      <>\n        {_.times(num).map(i => (\n          <FontAwesomeIcon key={i} className={styles[grade]} icon={faMedal} />\n        ))}\n      </>\n    );\n  } else {\n    return null;\n  }\n};\ninterface IProgressTotal {\n  status: number;\n  total: number;\n  style?: string;\n  label: string;\n}\ninterface TaskProgressProps {\n  tasks: ITask[];\n}\n\nexport const TaskProgress: React.FC<TaskProgressProps> = ({ tasks }) => {\n  const {\n    state: { active_task_statuses, custom_eid, custom_value_map }\n  } = useContext(RootContext);\n  const eid = Number(custom_eid);\n  const items = useMemo(\n    () =>\n      _.chain(active_task_statuses)\n        .filter({ is_closed: true })\n        .reverse()\n        .map((item, idx) => ({\n          status: item.id,\n          total: getSumCustomVal(\n            custom_value_map,\n            _.filter(tasks, { status: item.id }),\n            eid\n          ),\n          style: barStyles[idx],\n          label: item.name\n        }))\n        .value(),\n    [active_task_statuses, custom_value_map, eid, tasks]\n  );\n\n  const allSum = useMemo(() => getSumCustomVal(custom_value_map, tasks, eid), [\n    custom_value_map,\n    eid,\n    tasks\n  ]);\n\n  return (\n    <Progress multi>\n      {items.map(item => (\n        <Progress\n          key={item.label}\n          bar\n          max={allSum}\n          value={item.total}\n          color={item.style}\n        >\n          {item.label}\n        </Progress>\n      ))}\n    </Progress>\n  );\n};\nconst UserRow = ({\n  item,\n  sums,\n  isPast,\n  total,\n  hpd,\n  tasks\n}: {\n  item: ISortedUser;\n  sums: { [key: string]: { e: number; r: number } };\n  isPast: boolean;\n  total: number;\n  hpd: number;\n  tasks: ITask[];\n}) => {\n  const [customTotal, setTotal] = useState<number>(0);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setTotal(Number(e.target.value) || 0);\n    },\n    [setTotal]\n  );\n  const sumItem = _.get(sums, item.id);\n  const e = _.get(sumItem, \"e\");\n  const r = _.get(sumItem, \"r\");\n  const margedTotal = customTotal || total;\n  const totalStr = String(margedTotal);\n  return (\n    <tr key={item.id}>\n      {total > 0 ? (\n        <>\n          <NameAndWorkLoad\n            username={item.username}\n            val={e}\n            total={margedTotal}\n            imgSrc={item.photo}\n          />\n          <td className=\"text-right\">{total}</td>\n          <td className={styles.custom_input_td}>\n            <Input\n              bsSize=\"sm\"\n              type=\"number\"\n              className=\"text-right\"\n              value={totalStr}\n              step={hpd}\n              onChange={handleChange}\n            />\n          </td>\n        </>\n      ) : (\n        <>\n          <td>\n            <AvatarSquare src={item.photo} />\n            <Link to={`/${item.id}`}>{item.username}</Link>\n          </td>\n          <td className=\"text-right\">{item.burn_down || \"\"}</td>\n          <td className=\"text-right\">{e}</td>\n          <td className=\"text-right\">{r}</td>\n          <td>{_.isNumber(e) && <TaskProgress tasks={tasks} />}</td>\n        </>\n      )}\n\n      {isPast ? (\n        <td>\n          <Medal e={e} r={r} />\n        </td>\n      ) : null}\n    </tr>\n  );\n};\nexport const getTaskSumByUser = (\n  items: ITask[],\n  custom_value_map: ICustomValueMap,\n  custom_eid: string,\n  custom_rid: string\n) => {\n  const eid = Number(custom_eid);\n  const rid = Number(custom_rid);\n  const tasksByUser = _.mapValues(getTasksByUser(items), tasks =>\n    _.chain(tasks)\n      .map(task => ({\n        e: getCustomVal(custom_value_map, task, eid),\n        r: getCustomVal(custom_value_map, task, rid)\n      }))\n      .reduce((result, val) => ({ e: result.e + val.e, r: result.r + val.r }), {\n        e: 0,\n        r: 0\n      })\n      .value()\n  );\n  return tasksByUser;\n};\nexport const UserTasks = () => {\n  const {\n    state: {\n      tasks,\n      custom_value_map,\n      custom_eid,\n      custom_rid,\n      biz_days,\n      custom_attr_e,\n      custom_attr_r,\n      project: { members }\n    }\n  } = useContext(RootContext);\n  const [hpd, setHpd] = useState<number>(0);\n  const activeLen = biz_days.length - 1;\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setHpd(Number(e.target.value) || 0);\n    },\n    [setHpd]\n  );\n  const total = hpd * activeLen;\n  const taskSumByUser = useMemo(\n    () => getTaskSumByUser(tasks, custom_value_map, custom_eid, custom_rid),\n    [custom_eid, custom_rid, custom_value_map, tasks]\n  );\n  const notAssignedSum = _.get(taskSumByUser, \"null.e\", 0);\n  const isPlanning = total > 0;\n  const isPast = useMemo(\n    () =>\n      !isPlanning &&\n      moment().diff(\n        moment(_.last(biz_days))\n          .local()\n          .endOf(\"days\")\n      ) > 0,\n    [biz_days, isPlanning]\n  );\n  const tasksByUser = useMemo(() => getTasksByUser(tasks), [tasks]);\n  const sortedMembers = useMemo(\n    () =>\n      _.chain(members)\n        .map(member => ({\n          ...member,\n          burn_down: getSumCustomValClosed(\n            custom_value_map,\n            tasksByUser[member.id] || [],\n            Number(custom_eid)\n          )\n        }))\n        .sortBy(\"burn_down\")\n        .reverse()\n        .value(),\n    [custom_eid, custom_value_map, members, tasksByUser]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id || biz_days.length <= 1) {\n    return null;\n  }\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Form inline={true} className=\"mr-auto\" onSubmit={preventDefault}>\n          <InputGroup>\n            <Input\n              type=\"number\"\n              step=\"0.5\"\n              placeholder=\"hours / day\"\n              className=\"text-right\"\n              onChange={handleChange}\n            />\n            <InputGroupAddon addonType=\"append\">\n              <InputGroupText>\n                <FontAwesomeIcon className=\"mx-2\" icon={faTimes} />\n                {activeLen} [days]\n                <FontAwesomeIcon className=\"mx-2\" icon={faEquals} />\n              </InputGroupText>\n              {total > 0 ? (\n                <>\n                  <InputGroupText className=\"bg-white\">\n                    <strong>{total}</strong>\n                  </InputGroupText>\n                  <InputGroupText>hours / sprint</InputGroupText>\n                </>\n              ) : null}\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <SignInForm />\n        <UpdateButton />\n      </Navbar>\n      <Table bordered>\n        <thead>\n          <tr>\n            <th>Name</th>\n            {!isPlanning && (\n              <th className=\"text-danger\">\n                <FontAwesomeIcon icon={faLevelDownAlt} />\n                <FontAwesomeIcon icon={faBurn} />\n              </th>\n            )}\n            <th>{custom_attr_e.name}</th>\n            {isPlanning ? (\n              <>\n                <th>Total</th> <th>Custom</th>\n              </>\n            ) : (\n              <>\n                <th>{custom_attr_r.name}</th>\n                <th>Progress</th>\n              </>\n            )}\n            {isPast ? <th>Grade</th> : null}\n          </tr>\n        </thead>\n        <tbody>\n          {(sortedMembers || []).map(item => (\n            <UserRow\n              key={item.id}\n              isPast={isPast}\n              item={item}\n              sums={taskSumByUser}\n              total={total}\n              hpd={hpd}\n              tasks={tasksByUser[item.id] || []}\n            />\n          ))}\n          <tr key=\"null\">\n            <td className=\"text-danger\">\n              <FontAwesomeIcon icon={faGhost} className=\"ml-1 mr-2 fa-lg\" />\n              Not assigned\n            </td>\n            {!isPlanning && <td />}\n            <td className=\"text-right text-danger\">{notAssignedSum}</td>\n            <td />\n            <td />\n            {isPast ? <td /> : null}\n          </tr>\n        </tbody>\n      </Table>\n    </>\n  );\n};\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  Form,\n  InputGroupAddon,\n  InputGroup,\n  InputGroupText,\n  Button,\n  Input\n} from \"reactstrap\";\nimport { InputGroupSpinner } from \"../InputGroupSpinner\";\nimport { Switch } from \"@rmwc/switch\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faCloudUploadAlt,\n  faEdit,\n  faHandPointRight\n} from \"@fortawesome/free-solid-svg-icons\";\nimport styles from \"./ToggleNumberInput.module.css\";\ninterface ToggleNumberInputProps {\n  label: string;\n  value: number;\n  onSubmit?: (value: number) => void;\n  onEditable?: (value: boolean) => void;\n  onValueChange?: (value: number) => void;\n  valid?: boolean;\n  invalid?: boolean;\n  disabled?: boolean;\n  loading?: boolean;\n  id?: string;\n  submitting?: boolean;\n  disabledMessage?: string;\n}\nexport const ToggleNumberInput: React.FC<ToggleNumberInputProps> = ({\n  label,\n  value,\n  onSubmit,\n  onEditable,\n  onValueChange,\n  valid,\n  invalid,\n  disabled,\n  loading,\n  id,\n  submitting,\n  disabledMessage = \"\"\n}) => {\n  const [checked, setChecked] = useState(false);\n  const [val, setVal] = useState(\"\");\n  const [running, setRunning] = useState(false);\n  const onChange = useCallback(\n    (evt: React.FormEvent<any>) => {\n      setChecked(evt.currentTarget.checked);\n    },\n    [setChecked]\n  );\n  const handleVal = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = e.target;\n      setVal(value);\n      onValueChange && onValueChange(Number(value));\n    },\n    [onValueChange]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      const num = Number(val);\n      if (checked && val !== \"\" && num >= 0 && onSubmit) {\n        onSubmit(num);\n        setChecked(false);\n        setRunning(true);\n      }\n      e.preventDefault();\n    },\n    [checked, val, onSubmit, setChecked]\n  );\n  useEffect(() => {\n    if (disabled) {\n      setChecked(false);\n    }\n  }, [setChecked, disabled]);\n  useEffect(() => {\n    setRunning(false);\n  }, [value]);\n  useEffect(() => {\n    onEditable && onEditable(checked);\n  }, [checked, onEditable]);\n  useEffect(() => {\n    if (submitting) {\n      setChecked(false);\n      setRunning(true);\n    }\n  }, [submitting]);\n  useEffect(() => {\n    if (loading) {\n      setChecked(false);\n    }\n  }, [loading]);\n  return (\n    <Form inline onSubmit={handleSubmit}>\n      <InputGroup className={styles.input_group}>\n        <InputGroupAddon addonType=\"prepend\">{label}</InputGroupAddon>\n        {loading ? (\n          <InputGroupSpinner />\n        ) : (\n          <>\n            {checked ? (\n              <>\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>{value}</InputGroupText>\n                </InputGroupAddon>\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>\n                    <FontAwesomeIcon\n                      className=\"text-info\"\n                      icon={faHandPointRight}\n                    />\n                  </InputGroupText>\n                </InputGroupAddon>\n                <Input\n                  onInput={handleVal}\n                  onChange={handleVal}\n                  defaultValue={String(value)}\n                  type=\"number\"\n                  step=\"0.5\"\n                  min=\"0\"\n                  id={id}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <Button color=\"info\">\n                    <FontAwesomeIcon icon={faCloudUploadAlt} />\n                  </Button>\n                </InputGroupAddon>\n              </>\n            ) : (\n              <>\n                {running ? (\n                  <InputGroupSpinner />\n                ) : (\n                  <Input\n                    valid={valid}\n                    invalid={invalid}\n                    readOnly\n                    value={value}\n                    className=\"text-right\"\n                  />\n                )}\n              </>\n            )}\n            <InputGroupAddon\n              addonType=\"append\"\n              title={disabled ? disabledMessage : \"\"}\n            >\n              <Switch disabled={disabled} checked={checked} onChange={onChange}>\n                <FontAwesomeIcon className=\"text-info\" icon={faEdit} />\n              </Switch>\n            </InputGroupAddon>\n          </>\n        )}\n      </InputGroup>\n    </Form>\n  );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"currentColor\",\n  className: \"leaf\",\n  d: \"M115.343,123.839c0.814,1.256,3.343,2.605,7.23,4.014c7.586-1.069,14.943-1.586,21.885-1.586 c15.579,0,30.166,2.469,42.438,7.145c17.87-5.567,43.412-11.694,69.108-11.694c25.694,0,51.228,6.126,69.108,11.694 c12.262-4.676,26.848-7.145,42.42-7.145c7.001,0,14.418,0.518,22.063,1.604c3.471-1.341,6.296-2.699,8.325-4.031 c42.2-28.139,53.036-81.183,47.41-69.931c-4.218,8.418-60.309,35.581-100.004,52.222c14.68-17.769,31.677-44.134,43.438-80.309 c0,0-60.978,52.382-98.867,74.887c-11.974-20.816-33.892-86.589-33.892-86.589s-18.567,49.515-20.358,81.412 c-30.21-16.929-63.354-51.474-72.485-74.538c-10.752-27.189-13.78,53.545,15.436,89.396c-1.095,0.162-2.206,0.315-3.344,0.476 c-39.111-16.072-100.454-47.91-104.926-54.86C64.708,47.255,73.143,101.954,115.343,123.839z M290.531,107.181l0.747,0.857 l-3.098-0.746L290.531,107.181z\"\n}), React.createElement(\"path\", {\n  fill: \"currentColor\",\n  className: \"tomato\",\n  d: \"M485.83,198.564c-38.169-57.253-117.544-70.584-160.338-52.195c-18.27-5.906-43.872-12.27-69.49-12.27 c-25.619,0-51.228,6.364-69.499,12.27c-42.794-18.388-122.168-5.058-160.338,52.195c-64.136,96.203-18.711,299.318,229.836,299.318 C504.541,497.882,549.974,294.767,485.83,198.564z M101.172,262.929c-17.099,0-30.947-13.857-30.947-30.948 c0-17.09,13.848-30.947,30.947-30.947c17.082,0,30.947,13.857,30.947,30.947C132.119,249.071,118.253,262.929,101.172,262.929z\"\n}));\n\nvar SvgTomato = function SvgTomato(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"_x32_\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTomato, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tomato.998f40c5.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { ReactComponent as TomatoIcon } from \"../tomato.svg\";\nimport classNames from \"classnames\";\nimport styles from \"./Tomato.module.css\";\nexport enum TomatoState {\n  FRESH = \"fresh\",\n  STALE = \"stale\"\n}\ninterface TomatoProps {\n  state?: TomatoState;\n  bl?: boolean;\n  br?: boolean;\n}\nexport const Tomato: React.FC<TomatoProps> = ({ state, bl,br }) => {\n  return (\n    <TomatoIcon\n      className={classNames(\"fa-fw\", \"svg-inline--fa\", {\n        [styles.fresh]: state === TomatoState.FRESH,\n        [styles.stale]: state === TomatoState.STALE,\n        [styles.bl]: bl,\n        [styles.br]: br,\n      })}\n    />\n  );\n};\n","import React,{  useContext,useCallback } from \"react\";\nimport { TaskItemProps } from \"../UserStory\";\nimport { RootContext } from \"../../Provider\";\nimport {ActionTypes  } from \"../../actions\";\nimport { TimerState, TimerMode,timer } from \"../../util/timer\";\nimport { Button } from \"reactstrap\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPause, faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { Tomato } from \"../Tomato\";\nimport styles from \"./TaskTimerButton.module.css\";\nexport const TaskTimerButton: React.FC<TaskItemProps> = ({ item }) => {\n  const {\n    state: { task_id, pomodoro_mode, pomodoro_state },\n    dispatch\n  } = useContext(RootContext);\n  const handleStart = useCallback(() => {\n    if (Number(task_id) !== item.id) {\n      dispatch({\n        type: ActionTypes.SET_TASK_ID,\n        payload: { task_id: String(item.id) }\n      });\n    }\n    if (pomodoro_state === TimerState.STOPPED) {\n      timer.changeMode(TimerMode.FOCUS, true);\n    } else {\n      if (pomodoro_mode === TimerMode.FOCUS) {\n        timer.resume();\n      } else {\n        timer.changeMode(TimerMode.FOCUS, true);\n      }\n    }\n  }, [dispatch, item.id, pomodoro_mode, pomodoro_state, task_id]);\n  const handlePause = useCallback(() => {\n    timer.pause();\n  }, []);\n  if (Number(task_id) === item.id) {\n    if (\n      pomodoro_mode === TimerMode.FOCUS &&\n      pomodoro_state === TimerState.RUNNING\n    ) {\n      return (\n        <Button\n          className={classNames(\"mr-2\", styles.btn)}\n          color=\"danger\"\n          onClick={handlePause}\n        >\n          <FontAwesomeIcon icon={faPause} />\n          <Tomato />\n        </Button>\n      );\n    } else {\n      return (\n        <Button\n          onClick={handleStart}\n          color=\"primary\"\n          className={classNames(\"mr-2\", styles.btn)}\n        >\n          <FontAwesomeIcon icon={faPlay} />\n          <Tomato />\n        </Button>\n      );\n    }\n  } else if (task_id === \"\") {\n    if (\n      pomodoro_mode === TimerMode.FOCUS &&\n      pomodoro_state !== TimerState.STOPPED\n    ) {\n      return null;\n    } else {\n      return (\n        <Button onClick={handleStart} color=\"primary\" \n          className={classNames(\"mr-2\", styles.btn)}\n        >\n          <FontAwesomeIcon icon={faPlay} />\n          <Tomato />\n        </Button>\n      );\n    }\n  } else {\n    return null;\n  }\n};","import React from \"react\";\nimport { InputGroup, InputGroupAddon, Input } from \"reactstrap\";\nimport { InputGroupSpinner } from \"../InputGroupSpinner\";\ninterface OwnProp {\n  label: string;\n  value: number;\n  loading?: boolean;\n  size?: string;\n  invalid?: boolean;\n  valid?: boolean;\n}\nexport const InputGroupDisplayNumber: React.FC<OwnProp> = ({\n  label,\n  value,\n  loading,\n  size,\n  invalid,\n  valid\n}) => {\n  return (\n    <InputGroup size={size} className=\"my-n1\">\n      <InputGroupAddon addonType=\"prepend\">{label}</InputGroupAddon>\n      {loading ? (\n        <InputGroupSpinner />\n      ) : (\n        <Input\n          invalid={invalid}\n          valid={valid}\n          readOnly\n          value={value}\n          className=\"text-right\"\n        />\n      )}\n    </InputGroup>\n  );\n};\n","import React, {\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  useMemo\n} from \"react\";\nimport {\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  Collapse,\n  Row,\n  Col,\n  InputGroup,\n  InputGroupAddon,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownItem,\n  DropdownMenu,\n  Spinner,\n  Popover,\n  PopoverHeader,\n  PopoverBody\n} from \"reactstrap\";\nimport { ToggleNumberInput } from \"./common/ToggleNumberInput\";\nimport classNames from \"classnames\";\nimport { TaskTimerButton } from \"./task/TaskTimerButton\";\nimport { InputGroupDisplayNumber } from \"./common/InputGroupDisplayNumber\";\nimport {\n  ITasksByUserStory,\n  ITask,\n  ITaskStatus,\n  IUserStoryExtraInfo,\n  IProjectExtraInfo,\n  IUser\n} from \"../store\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faExternalLinkAlt,\n  faCloudUploadAlt,\n  faUserTimes,\n  faPlus,\n  faMinus,\n  faEraser\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { RootContext } from \"../Provider\";\nimport { Tomato, TomatoState } from \"./Tomato\";\nimport {\n  getCustomVal,\n  getCustomValVersion,\n  isCustomValInvalid,\n  isCustomValValid,\n  Medal,\n  AvatarSquare,\n  getSumCustomVal\n} from \"./UserTasks\";\nimport { ToggleIcon } from \"./Controller\";\nimport ListGroup from \"reactstrap/lib/ListGroup\";\nimport ListGroupItem from \"reactstrap/lib/ListGroupItem\";\nimport styles from \"./UserStory.module.css\";\nimport InputGroupText from \"reactstrap/lib/InputGroupText\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nimport { stopPropagation } from \"../util/handler\";\nexport const convToTasksByUserStory = (tasks: ITask[]) =>\n  _.chain(tasks)\n    .groupBy(\"user_story\")\n    .map((items, key) => ({\n      user_story: Number(key),\n      user_story_extra_info: items[0].user_story_extra_info,\n      project_extra_info: items[0].project_extra_info,\n      tasks: items,\n      is_closed: items.every(task => task.is_closed)\n    }))\n    .value();\nconst AuthMsg = \"Need sign in!\";\nconst needAuthMsg = (disabled: boolean | undefined) =>\n  disabled ? AuthMsg : \"\";\nconst UserStoryLink = ({\n  user_story_extra_info,\n  project_extra_info\n}: {\n  user_story_extra_info: IUserStoryExtraInfo;\n  project_extra_info: IProjectExtraInfo;\n}) => {\n  const {\n    state: { url }\n  } = useContext(RootContext);\n  const { slug } = project_extra_info;\n  const usName = user_story_extra_info\n    ? `#${user_story_extra_info.ref} ${user_story_extra_info.subject}`\n    : undefined;\n  const href = user_story_extra_info\n    ? `${url}/project/${slug}/us/${user_story_extra_info.ref}`\n    : \"#\";\n\n  if (usName) {\n    return (\n      <a\n        href={href}\n        onClick={stopPropagation}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        title={usName}\n      >\n        <FontAwesomeIcon icon={faExternalLinkAlt} /> {usName}\n      </a>\n    );\n  } else {\n    return <>(Unassigned tasks)</>;\n  }\n};\n\nconst TaskLink = ({ item }: { item: ITask }) => {\n  const {\n    state: { url }\n  } = useContext(RootContext);\n  const taskName = `#${item.ref} ${item.subject}`;\n  const href = `${url}/project/${item.project_extra_info.slug}/task/${item.ref}`;\n  return (\n    <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" title={taskName}>\n      <FontAwesomeIcon icon={faExternalLinkAlt} /> {taskName}\n    </a>\n  );\n};\n\ninterface GradeProps {\n  e: number;\n  r: number;\n}\nexport const Grade: React.FC<GradeProps> = ({ e, r }) => {\n  return (\n    <InputGroup className={styles.display_medal}>\n      <InputGroupAddon addonType=\"prepend\">Grade</InputGroupAddon>\n      <InputGroupText className={styles.medal}>\n        <Medal e={e} r={r} />\n      </InputGroupText>\n    </InputGroup>\n  );\n};\n\ninterface TaskStatusItemProps {\n  item: ITaskStatus;\n  task: ITask;\n  onSelect?: (id: number) => void;\n}\nconst TaskStatusItem: React.FC<TaskStatusItemProps> = ({\n  item,\n  task,\n  onSelect\n}) => {\n  const { dispatch } = useContext(RootContext);\n  const handleClick = useCallback(() => {\n    dispatch({\n      type: ActionTypes.PATCH_TASK,\n      payload: {\n        key: \"status\",\n        value: item.id,\n        id: task.id\n      }\n    });\n    onSelect && onSelect(item.id);\n  }, [dispatch, item.id, task.id, onSelect]);\n  return <DropdownItem onClick={handleClick}>{item.name}</DropdownItem>;\n};\ninterface TaskStatusSelectorProps {\n  task: ITask;\n  disabled?: boolean;\n}\nconst TaskStatusSelector: React.FC<TaskStatusSelectorProps> = ({\n  task,\n  disabled\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const {\n    state: { active_task_statuses }\n  } = useContext(RootContext);\n  const handleSelect = useCallback(() => {\n    setLoading(true);\n  }, [setLoading]);\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"info\" />\n      ) : (\n        <UncontrolledDropdown>\n          <DropdownToggle\n            title={needAuthMsg(disabled)}\n            disabled={disabled}\n            caret={!disabled}\n          >\n            {task.status_extra_info.name}\n          </DropdownToggle>\n          <DropdownMenu>\n            {active_task_statuses.map(item => (\n              <TaskStatusItem\n                item={item}\n                key={item.id}\n                task={task}\n                onSelect={handleSelect}\n              />\n            ))}\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      )}\n    </>\n  );\n};\ninterface UserItemProps {\n  item: IUser;\n  onSelect?: (id: number) => void;\n}\nconst UserItem: React.FC<UserItemProps> = ({ item, onSelect }) => {\n  const handleClick = useCallback(() => {\n    onSelect && onSelect(item.id);\n  }, [item.id, onSelect]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <AvatarSquare src={item.photo} />\n      {item.username}\n    </DropdownItem>\n  );\n};\ninterface TaskUserSelectorProps {\n  task: ITask;\n  disabled?: boolean;\n}\nexport const TaskUserSelector: React.FC<TaskUserSelectorProps> = ({\n  task,\n  disabled\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const {\n    state: {\n      project: { members }\n    },\n    dispatch\n  } = useContext(RootContext);\n  const handleSelect = useCallback(\n    (id: number) => {\n      setLoading(true);\n      dispatch({\n        type: ActionTypes.PATCH_TASK,\n        payload: {\n          key: \"assigned_to\",\n          value: id,\n          id: task.id\n        }\n      });\n    },\n    [dispatch, task.id]\n  );\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"info\" />\n      ) : (\n        <UncontrolledDropdown>\n          <DropdownToggle\n            title={needAuthMsg(disabled)}\n            size=\"sm\"\n            disabled={disabled}\n            caret={!disabled}\n          >\n            Assign To\n          </DropdownToggle>\n          <DropdownMenu>\n            {(members || []).map(item => (\n              <UserItem item={item} onSelect={handleSelect} key={item.id} />\n            ))}\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      )}\n    </>\n  );\n};\ninterface NotAssignedButtonProps {\n  task: ITask;\n}\nconst NotAssignedButton: React.FC<NotAssignedButtonProps> = ({ task }) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const { dispatch } = useContext(RootContext);\n  const handleClick = useCallback(() => {\n    setLoading(true);\n    dispatch({\n      type: ActionTypes.PATCH_TASK,\n      payload: {\n        key: \"assigned_to\",\n        value: null,\n        id: task.id\n      }\n    });\n  }, [dispatch, task.id]);\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"danger\" />\n      ) : (\n        <Button\n          className=\"mr-2\"\n          title=\"Not assigned\"\n          color=\"danger\"\n          onClick={handleClick}\n        >\n          <FontAwesomeIcon icon={faUserTimes} />\n        </Button>\n      )}\n    </>\n  );\n};\ninterface CustomValueInputProps {\n  item: ITask;\n}\n\nconst EstimateInput: React.FC<CustomValueInputProps> = ({ item }) => {\n  const {\n    state: { custom_eid, custom_value_map, auth_token, custom_attr_e },\n    dispatch\n  } = useContext(RootContext);\n  const version = getCustomValVersion(custom_value_map, item);\n  const handleSubmit = useCallback(\n    (value: number) => {\n      if (version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: item.id,\n            key: custom_eid,\n            value,\n            version\n          }\n        });\n      }\n    },\n    [dispatch, item.id, custom_eid, version]\n  );\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  if (!custom_attr_e.id) {\n    return null;\n  }\n  const unEstimated = !e;\n  const disabled = auth_token === \"\";\n  const loading = !version;\n\n  return (\n    <ToggleNumberInput\n      onSubmit={handleSubmit}\n      label={custom_attr_e.name}\n      value={e}\n      invalid={unEstimated}\n      disabled={disabled}\n      loading={loading}\n      disabledMessage={AuthMsg}\n    />\n  );\n};\nconst ResultInput: React.FC<CustomValueInputProps> = ({ item }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [used_number, set_used_number] = useState(0);\n  const [editable, setEditable] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const {\n    state: {\n      custom_rid,\n      custom_value_map,\n      custom_attr_e,\n      custom_attr_r,\n      auth_token,\n      pomodoro_number,\n      pomodoro_used_number\n    },\n    dispatch\n  } = useContext(RootContext);\n  const version = getCustomValVersion(custom_value_map, item);\n  const handleToggle = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n  const handleSubmit = useCallback(\n    (value: number, used_number?: number) => {\n      const update_status = value > 0;\n      const use_pomodoro = used_number ? { used_number } : undefined;\n      if (version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: item.id,\n            key: custom_rid,\n            value,\n            version\n          },\n          meta: { use_pomodoro, update_status }\n        });\n        setSubmitting(true);\n      }\n    },\n    [custom_rid, dispatch, item.id, version]\n  );\n  const handlePluse = useCallback(() => {\n    set_used_number(used_number + 1);\n  }, [used_number]);\n  const handleMinus = useCallback(() => {\n    set_used_number(used_number - 1);\n  }, [used_number]);\n\n  const handleReset = useCallback(() => {\n    set_used_number(0);\n  }, []);\n  const handleEditable = useCallback((val: boolean) => {\n    setEditable(val);\n  }, []);\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  const r = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item]\n  );\n  const handleValueChange = useCallback(\n    (val: number) => {\n      setEditable(r === val);\n    },\n    [r]\n  );\n  const handleUsePomodoro = useCallback(() => {\n    const result = r + used_number / 2;\n    handleSubmit(result, used_number);\n    setIsOpen(false);\n    set_used_number(0);\n  }, [handleSubmit, r, used_number]);\n\n  const valid = useMemo(() => isCustomValValid(e, r, item.is_closed), [\n    e,\n    item.is_closed,\n    r\n  ]);\n  const invalid = useMemo(() => isCustomValInvalid(e, r), [e, r]);\n  useEffect(() => {\n    if (!version) {\n      setSubmitting(false);\n    }\n  }, [version]);\n  useEffect(() => {\n    set_used_number(0);\n  }, [pomodoro_used_number]);\n  if (!custom_attr_r.id) {\n    return null;\n  }\n\n  const disabled = auth_token === \"\";\n  const loading = !version;\n  const elId = `rusult-input-${item.id}`;\n  const usableNumber = pomodoro_number - pomodoro_used_number;\n  const submittable = used_number > 0;\n  const isMax = used_number === usableNumber;\n  return (\n    <>\n      <ToggleNumberInput\n        onSubmit={handleSubmit}\n        onEditable={handleEditable}\n        onValueChange={handleValueChange}\n        label={custom_attr_r.name}\n        value={r}\n        valid={valid}\n        invalid={invalid}\n        disabled={disabled}\n        loading={loading}\n        id={elId}\n        submitting={submitting}\n      />\n      {editable && usableNumber > 0 && (\n        <Popover\n          className={classNames(\"popover-wide\")}\n          target={elId}\n          placement=\"top\"\n          isOpen={isOpen}\n          toggle={handleToggle}\n          trigger=\"click hover\"\n        >\n          <PopoverHeader>Pomodoro</PopoverHeader>\n          <PopoverBody>\n            <ButtonGroup>\n              <Button disabled={isMax} onClick={handlePluse}>\n                <FontAwesomeIcon icon={faPlus} />\n              </Button>\n              <Button disabled={!submittable} onClick={handleMinus}>\n                <FontAwesomeIcon icon={faMinus} />\n              </Button>\n              <Button disabled className=\"bg-light\">\n                {_.times(usableNumber).map(i => (\n                  <Tomato\n                    key={i}\n                    state={\n                      i >= used_number ? TomatoState.FRESH : TomatoState.STALE\n                    }\n                  />\n                ))}\n              </Button>\n              <Button disabled={!submittable} onClick={handleUsePomodoro}>\n                <FontAwesomeIcon icon={faCloudUploadAlt} />\n              </Button>\n              <Button disabled={!submittable} onClick={handleReset}>\n                <FontAwesomeIcon icon={faEraser} />\n              </Button>\n            </ButtonGroup>\n          </PopoverBody>\n        </Popover>\n      )}\n    </>\n  );\n};\nexport interface TaskItemProps {\n  item: ITask;\n}\n\nexport const TaskItem: React.FC<TaskItemProps> = ({ item }) => {\n  const {\n    state: { custom_value_map, custom_attr_e, custom_attr_r, auth_token }\n  } = useContext(RootContext);\n  const version = useMemo(() => getCustomValVersion(custom_value_map, item), [\n    custom_value_map,\n    item\n  ]);\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  const r = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id) {\n    return null;\n  }\n\n  const disabled = auth_token === \"\";\n  const loading = !version;\n  const inactive = r === 0 && !item.is_closed && !disabled && !loading;\n  return (\n    <ListGroupItem\n      className={classNames({ [styles.is_closed]: item.is_closed })}\n    >\n      <div className=\"d-flex mb-1\">\n        <div className=\"mr-auto text-truncate\">\n          <TaskLink item={item} />\n        </div>\n        {inactive && <NotAssignedButton task={item} />}\n        <TaskTimerButton item={item} />\n        <TaskStatusSelector task={item} disabled={disabled} />\n      </div>\n      <Row>\n        <Col>\n          <EstimateInput item={item} />\n        </Col>\n        <Col>\n          <ResultInput item={item} />\n        </Col>\n        <Col>\n          <Grade e={e} r={r} />\n        </Col>\n      </Row>\n    </ListGroupItem>\n  );\n};\ninterface UserStoryProps {\n  item: ITasksByUserStory;\n}\nexport const UserStoryWithEstimate: React.FC<UserStoryProps> = ({ item }) => {\n  return (\n    <Card>\n      <CardHeader className=\"text-truncate\">\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <ListGroup>\n        {item.tasks.map(task => (\n          <ListGroupItem key={task.id} className=\"text-truncate\">\n            <div className=\"d-flex\">\n              <div className=\"mr-auto text-truncate\">\n                <TaskLink item={task} />\n              </div>\n              <EstimateInput item={task} />\n            </div>\n          </ListGroupItem>\n        ))}\n      </ListGroup>\n    </Card>\n  );\n};\nexport const UserStoryWithTaskUser: React.FC<UserStoryProps> = ({ item }) => {\n  const {\n    state: { auth_token }\n  } = useContext(RootContext);\n  const disabled = auth_token === \"\";\n  return (\n    <Card>\n      <CardHeader className=\"text-truncate\">\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <Collapse isOpen={true}>\n        <ListGroup>\n          {item.tasks.map(task => (\n            <ListGroupItem key={task.id}>\n              <div className=\"d-flex\">\n                <div className=\"mr-auto text-truncate\">\n                  <TaskLink item={task} />\n                </div>\n                <TaskUserSelector task={task} disabled={disabled} />\n              </div>\n            </ListGroupItem>\n          ))}\n        </ListGroup>\n      </Collapse>\n    </Card>\n  );\n};\n\nexport const UserStory: React.FC<UserStoryProps> = ({ item }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const {\n    state: { custom_value_map, custom_attr_e, custom_attr_r }\n  } = useContext(RootContext);\n  const toggle = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen, setIsOpen]);\n  useEffect(() => {\n    setIsOpen(!item.is_closed);\n  }, [item.is_closed, setIsOpen]);\n  const e = useMemo(\n    () => getSumCustomVal(custom_value_map, item.tasks, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item.tasks]\n  );\n  const r = useMemo(\n    () => getSumCustomVal(custom_value_map, item.tasks, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item.tasks]\n  );\n  const loading = !custom_value_map.has(item.tasks[0]);\n  return (\n    <Card>\n      <CardHeader\n        className={classNames(styles.header, \"text-truncate\", {\n          \"alert-primary\": item.is_closed\n        })}\n        onClick={toggle}\n      >\n        <Row>\n          <Col xs={12} md={8} className=\"text-truncate\">\n            <ToggleIcon isOpen={isOpen} />\n            <UserStoryLink\n              user_story_extra_info={item.user_story_extra_info}\n              project_extra_info={item.project_extra_info}\n            />\n          </Col>\n          <Col xs={6} md={2}>\n            <InputGroupDisplayNumber\n              label={custom_attr_e.name}\n              loading={loading}\n              value={e}\n              size=\"sm\"\n            />\n          </Col>\n          <Col xs={6} md={2}>\n            <InputGroupDisplayNumber\n              label={custom_attr_r.name}\n              loading={loading}\n              value={r}\n              size=\"sm\"\n            />\n          </Col>\n        </Row>\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <ListGroup>\n          {item.tasks.map(task => (\n            <TaskItem item={task} key={task.id} />\n          ))}\n        </ListGroup>\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useMemo } from \"react\";\nimport { RootContext } from \"../Provider\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nimport { getCustomVal, getCustomValVersion } from \"./UserTasks\";\nimport { UserStoryWithEstimate, convToTasksByUserStory } from \"./UserStory\";\nexport const UnEstimatedTasks = () => {\n  const {\n    state: { tasks, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  const eid = useMemo(() => Number(custom_eid), [custom_eid]);\n  const items = useMemo(\n    () =>\n      eid\n        ? tasks.filter(\n            task =>\n              getCustomValVersion(custom_value_map, task) &&\n              getCustomVal(custom_value_map, task, eid) === 0\n          )\n        : [],\n    [custom_value_map, eid, tasks]\n  );\n  const userStories = useMemo(() => convToTasksByUserStory(items), [items]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader className=\"alert-danger\">Un estimated tasks</CardHeader>\n        <CardBody>\n          {userStories.map(item => (\n            <UserStoryWithEstimate item={item} key={item.user_story} />\n          ))}\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useContext, useMemo } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport { UserStoryWithTaskUser, convToTasksByUserStory } from \"./UserStory\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nexport const NotAssignedTasks: React.FC = () => {\n  const {\n    state: { tasks }\n  } = useContext(RootContext);\n  const items = useMemo(() => _.filter(tasks, { assigned_to: null }), [tasks]);\n  const userStories = useMemo(() => convToTasksByUserStory(items), [items]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader className=\"alert-danger\">Not assigned tasks</CardHeader>\n        <CardBody>\n          {userStories.map(item => (\n            <UserStoryWithTaskUser item={item} key={item.user_story} />\n          ))}\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\nimport {\n  ComposedChart,\n  Tooltip,\n  Line,\n  XAxis,\n  YAxis,\n  Bar,\n  Legend,\n  TooltipFormatter,\n  LegendValueFormatter\n} from \"recharts\";\nimport { ITask } from \"../store\";\nimport moment from \"moment\";\nimport { RootContext } from \"../Provider\";\nimport { dayNameFromIdx } from \"./DaysSelector\";\nimport { Card, CardHeader } from \"reactstrap\";\nimport { getSumCustomVal } from \"./UserTasks\";\ninterface IChartItem {\n  label: string;\n  estimate: number;\n  result?: number;\n  add?: number;\n}\n\nconst getTaskFinished = (tasks: ITask[], date: string) =>\n  tasks.filter(task =>\n    task.finished_date\n      ? moment(date)\n          .local()\n          .endOf(\"days\")\n          .diff(moment(task.finished_date)) > 0\n      : false\n  );\n\nconst getTaskCreatedToday = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .format(\"YYYY-MM-DD\") ===\n      moment(task.created_date)\n        .local()\n        .format(\"YYYY-MM-DD\")\n  );\n\nconst getTaskCreated = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .endOf(\"days\")\n        .diff(moment(task.created_date)) > 0\n  );\nexport const Chart = ({ tasks }: { tasks: ITask[] }) => {\n  const [data, setData] = useState<IChartItem[]>([]);\n  const {\n    state: {\n      biz_days,\n      custom_value_map,\n      custom_eid,\n      custom_attr_e,\n      custom_attr_r\n    }\n  } = useContext(RootContext);\n  useEffect(() => {\n    const days_len = biz_days.length;\n    const eid = Number(custom_eid);\n    if (days_len > 0 && tasks.length > 0 && custom_eid) {\n      const allTaskVal = getSumCustomVal(\n        custom_value_map,\n        getTaskCreated(tasks, biz_days[0]),\n        eid\n      );\n      const data = biz_days.map((day, idx) => {\n        const label = dayNameFromIdx(day, idx);\n        const estimate = allTaskVal - (allTaskVal * idx) / (days_len - 1);\n        if (\n          moment()\n            .local()\n            .endOf(\"days\")\n            .diff(moment(day)) > 0\n        ) {\n          const add =\n            idx === 0\n              ? 0\n              : getSumCustomVal(\n                  custom_value_map,\n                  getTaskCreatedToday(tasks, day),\n                  eid\n                );\n          const result =\n            getSumCustomVal(custom_value_map, getTaskCreated(tasks, day), eid) -\n            add -\n            getSumCustomVal(custom_value_map, getTaskFinished(tasks, day), eid);\n          return { label, estimate, result, add };\n        } else {\n          return { label, estimate };\n        }\n      });\n      setData(data);\n    } else {\n      setData([]);\n    }\n  }, [tasks, biz_days, custom_eid, custom_value_map, setData]);\n  const labelFormatter: LegendValueFormatter = useCallback(\n    (name: string) => {\n      switch (name) {\n        case \"estimate\": {\n          return custom_attr_e.name || name;\n        }\n        case \"result\": {\n          return custom_attr_r.name || name;\n        }\n        default: {\n          return name;\n        }\n      }\n    },\n    [custom_attr_e.name, custom_attr_r.name]\n  );\n  const formatter: TooltipFormatter = useCallback(\n    (value, name) => [Number(value).toFixed(1), labelFormatter(name)],\n    [labelFormatter]\n  );\n  if (data.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card className=\"mb-2\">\n        <CardHeader>Burn down chart</CardHeader>\n        <ComposedChart data={data} width={800} height={400}>\n          <YAxis />\n          <XAxis dataKey=\"label\" />\n          <Tooltip formatter={formatter} />\n          <Legend formatter={labelFormatter} />\n          <Bar dataKey=\"result\" fill=\"#8884d8\" stackId=\"a\" />\n          <Bar dataKey=\"add\" fill=\"#82ca9d\" stackId=\"a\" />\n          <Line dataKey=\"estimate\" />\n        </ComposedChart>\n      </Card>\n    );\n  }\n};\n","import React, { useContext, useMemo } from \"react\";\nimport { Card, CardHeader, CardBody, CardTitle, Col, Row } from \"reactstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faAward,\n  faBurn,\n  faLevelDownAlt,\n  faEllipsisH,\n  faEllipsisV\n} from \"@fortawesome/free-solid-svg-icons\";\nimport _ from \"lodash\";\nimport classNames from \"classnames\";\nimport { Elevation } from \"@rmwc/elevation\";\nimport { AvatarSquare } from \"./UserTasks\";\nimport CountUp from \"react-countup\";\nimport { RootContext } from \"../Provider\";\nimport { getTaskSumByUser } from \"./UserTasks\";\nimport { IUser, ITask } from \"../store\";\nimport moment from \"moment\";\nimport styles from \"./Hero.module.css\";\ntype TRanking = 1 | 2 | 3;\ninterface IHeroUser extends IUser {\n  e: number;\n  r: number;\n  ranking?: TRanking;\n}\nconst rank = (result: IHeroUser[], hero: IHeroUser) => {\n  const prev = _.last(result);\n  let ranking: TRanking;\n  if (prev && prev.ranking) {\n    ranking =\n      prev.e === hero.e ? prev.ranking : ((prev.ranking + 1) as TRanking);\n  } else {\n    ranking = 1;\n  }\n  const rankedHero = { ...hero, ranking };\n  return [...result, rankedHero];\n};\nconst getTaskFinishedPrevious = (\n  tasks: ITask[],\n  date: string,\n  biz_days: string[]\n) => {\n  const idx = biz_days.indexOf(date);\n  if (idx < 1) {\n    return [];\n  } else {\n    const beginM = moment(biz_days[idx - 1])\n      .local()\n      .startOf(\"day\");\n    const endM = moment(date)\n      .local()\n      .startOf(\"day\");\n\n    return tasks.filter(task => {\n      const targetM = moment(task.finished_date);\n      return targetM.diff(beginM) >= 0 && targetM.diff(endM) < 0;\n    });\n  }\n};\ninterface HeroItemProps {\n  name: string;\n  src?: string;\n  value: number;\n  ranking: TRanking;\n}\nconst HeroItem: React.FC<HeroItemProps> = ({ name, src, value, ranking }) => {\n  return (\n    <Col sm={4}>\n      <Card>\n        <CardHeader\n          className={classNames(\n            { [styles.gold]: ranking === 1 },\n            { [styles.silver]: ranking === 2 },\n            { [styles.bronze]: ranking === 3 }\n          )}\n        >\n          <FontAwesomeIcon icon={faAward} /> Top {ranking}\n        </CardHeader>\n        <CardBody>\n          <CardTitle>\n            <h2 className=\"text-truncate\" title={name}>\n              <AvatarSquare src={src} size=\"xlarge\" />\n              {name}\n            </h2>\n          </CardTitle>\n          <Row>\n            <Col className=\"my-auto text-danger text-right\">\n              <h4>\n                <FontAwesomeIcon icon={faLevelDownAlt} />\n                <FontAwesomeIcon icon={faBurn} />\n              </h4>\n            </Col>\n            <Col>\n              <Elevation z={6}>\n                <h1 className=\"text-center\">\n                  <CountUp start={0} delay={3} duration={value} end={value} />\n                </h1>\n              </Elevation>\n            </Col>\n          </Row>\n        </CardBody>\n      </Card>\n    </Col>\n  );\n};\nexport const Hero: React.FC = () => {\n  const {\n    state: {\n      project: { members },\n      tasks,\n      custom_value_map,\n      custom_eid,\n      custom_rid,\n      biz_days\n    }\n  } = useContext(RootContext);\n  const today = moment().format(\"YYYY-MM-DD\");\n  const finishedTasks = useMemo(\n    () => getTaskFinishedPrevious(tasks, today, biz_days),\n    [biz_days, tasks, today]\n  );\n\n  const sumByUser = useMemo(\n    () =>\n      getTaskSumByUser(finishedTasks, custom_value_map, custom_eid, custom_rid),\n    [custom_eid, custom_rid, custom_value_map, finishedTasks]\n  );\n\n  const heros = useMemo(\n    () =>\n      _.chain(members)\n        .map(\n          member =>\n            [member, sumByUser[member.id] || { e: 0, r: 0 }] as [\n              IUser,\n              { e: number; r: number }\n            ]\n        )\n        .map(([member, { e, r }]) => ({ ...member, e, r }))\n        .sortBy(item => item.e + item.r / 100)\n        .reverse()\n        .filter(item => item.e > 0)\n        .take(3)\n        .reduce(rank, [])\n        .value() as Required<IHeroUser>[],\n    [members, sumByUser]\n  );\n\n  const idx = biz_days.indexOf(today) - 1;\n\n  if (idx < 1 || heros.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader>Day {idx} Hero</CardHeader>\n        <CardBody>\n          <Row>\n            {heros.map(hero => (\n              <HeroItem\n                key={hero.id}\n                name={hero.username}\n                value={hero.e}\n                src={hero.photo}\n                ranking={hero.ranking}\n              />\n            ))}\n            {_.times(3 - heros.length).map(i => (\n              <Col key={i}>\n                <Card>\n                  <CardHeader>\n                    <FontAwesomeIcon icon={faEllipsisH} />\n                  </CardHeader>\n                  <CardBody className=\"text-center\">\n                    <FontAwesomeIcon icon={faEllipsisV} />\n                  </CardBody>\n                </Card>\n              </Col>\n            ))}\n          </Row>\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useContext } from \"react\";\nimport { UserTasks } from \"./UserTasks\";\nimport { UnEstimatedTasks } from \"./UnEstimatedTasks\";\nimport { NotAssignedTasks } from \"./NotAssignedTasks\";\nimport { Chart } from \"./Chart\";\nimport { Hero } from \"./Hero\";\nimport { RootContext } from \"../Provider\";\n\nexport const OverView: React.FC = () => {\n  const {\n    state: { tasks }\n  } = useContext(RootContext);\n  return (\n    <>\n      <UserTasks />\n      <Chart tasks={tasks} />\n      <Hero />\n      <NotAssignedTasks />\n      <br />\n      <UnEstimatedTasks />\n    </>\n  );\n};\n","import React, { useContext, useMemo } from \"react\";\nimport { RootContext } from \"../Provider\";\nimport { InputGroupDisplayNumber } from \"./common/InputGroupDisplayNumber\";\nimport { Card, CardHeader, CardBody, CardFooter, Row, Col } from \"reactstrap\";\nimport classNames from \"classnames\";\nimport {\n  getCustomValVersion,\n  isCustomValInvalid,\n  isCustomValValid,\n  TaskProgress,\n  getSumCustomVal\n} from \"./UserTasks\";\nimport { UserStory, Grade, convToTasksByUserStory } from \"./UserStory\";\n\nexport const PersonalTasks: React.FC = () => {\n  const {\n    state: {\n      custom_value_map,\n      biz_days,\n      user_tasks,\n      custom_attr_e,\n      custom_attr_r\n    }\n  } = useContext(RootContext);\n  const userStories = useMemo(() => convToTasksByUserStory(user_tasks), [\n    user_tasks\n  ]);\n  const e = useMemo(\n    () => getSumCustomVal(custom_value_map, user_tasks, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, user_tasks]\n  );\n  const r = useMemo(\n    () => getSumCustomVal(custom_value_map, user_tasks, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, user_tasks]\n  );\n  const valid = useMemo(\n    () => isCustomValValid(e, r, userStories.every(item => item.is_closed)),\n    [e, r, userStories]\n  );\n  const invalid = useMemo(() => isCustomValInvalid(e, r), [e, r]);\n  const loading = useMemo(\n    () => user_tasks.some(item => !getCustomValVersion(custom_value_map, item)),\n    [custom_value_map, user_tasks]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id || biz_days.length <= 1) {\n    return null;\n  }\n\n  return (\n    <>\n      {userStories.map(item => (\n        <UserStory item={item} key={item.user_story} />\n      ))}\n      <Card>\n        <CardHeader className={classNames(\"alert-info\")}>Total</CardHeader>\n        <CardBody>\n          <Row>\n            <Col>\n              <InputGroupDisplayNumber\n                label={custom_attr_e.name}\n                value={e}\n                loading={loading}\n              />\n            </Col>\n            <Col>\n              <InputGroupDisplayNumber\n                label={custom_attr_r.name}\n                value={r}\n                invalid={invalid}\n                valid={valid}\n                loading={loading}\n              />\n            </Col>\n            <Col>\n              <Grade e={e} r={r} />\n            </Col>\n          </Row>\n        </CardBody>\n        <CardFooter>\n          <TaskProgress tasks={user_tasks} />\n        </CardFooter>\n      </Card>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Card, CardHeader } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\n\nimport { AvatarSquare } from \"./UserTasks\";\nexport const PersonalInfo: React.FC = () => {\n  const {\n    state: { user }\n  } = useContext(RootContext);\n  return (\n    <Card>\n      {user && (\n        <CardHeader>\n          <AvatarSquare src={user.photo} size=\"xlarge\" />\n          {user.username} 's task\n        </CardHeader>\n      )}\n    </Card>\n  );\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { Button, Alert, Navbar } from \"reactstrap\";\nimport { PersonalTasks } from \"./PersonalTasks\";\nimport { PersonalInfo } from \"./PersonalInfo\";\nimport { RootContext } from \"../Provider\";\nimport { Chart } from \"./Chart\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { ActionTypes } from \"../actions\";\nimport { UpdateButton } from \"./UpdateButton\";\nimport { SignInForm } from \"./SignInForm\";\n\nexport const PersonalPage: React.FC = () => {\n  const {\n    state: { user, user_tasks, url },\n    dispatch\n  } = useContext(RootContext);\n  const { uid } = useParams();\n  useEffect(() => {\n    if (uid && url) {\n      dispatch({ type: ActionTypes.FETCH_USER, payload: { uid } });\n    }\n    return () => {\n      dispatch({ type: ActionTypes.RESET_USER });\n    };\n  }, [dispatch, uid, url]);\n\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Button tag={Link} to=\"/\" className=\"mr-auto\">\n          <FontAwesomeIcon icon={faArrowCircleLeft} /> Go back\n        </Button>\n        <SignInForm />\n        <UpdateButton />\n      </Navbar>\n      {user ? (\n        <>\n          <PersonalInfo />\n          <br />\n          <PersonalTasks />\n          <br />\n          <Chart tasks={user_tasks} />\n        </>\n      ) : (\n        <Alert color=\"danger\">This user does not exist.</Alert>\n      )}\n    </>\n  );\n};\n","import React, { useContext, useMemo, useCallback } from \"react\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport ReactTooltip from \"react-tooltip\";\nimport CalendarHeatmap from \"react-calendar-heatmap\";\nimport { Alert } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\ninterface IItem {\n  date: string;\n  value: number;\n  pureValue: number;\n}\nexport const PomodoroHeatmap: React.FC = () => {\n  const {\n    state: { pomodoro_daily_totals }\n  } = useContext(RootContext);\n  const values = useMemo(\n    () =>\n      pomodoro_daily_totals.map(item => ({\n        date: item.dateKey,\n        value: item.value,\n        pureValue: item.pureValue\n      })),\n    [pomodoro_daily_totals]\n  );\n  const maxVal = (_.maxBy(values, \"value\") || { value: 1 }).value;\n  const classForValue = useCallback(\n    (item: IItem) =>\n      item\n        ? `style-pomodoro color-pomodoro-${Math.ceil(\n            ((item.value || 0) * 8) / maxVal\n          )}`\n        : \"style-pomodoro empty-pomodoro\",\n    [maxVal]\n  );\n  const tooltipDataAttrs = useCallback(\n    (item: IItem) =>\n      item && item.date\n        ? {\n            \"data-tip\": `${item.value} Pomodoros on ${item.date}`\n          }\n        : null,\n    []\n  );\n  const startDate = useMemo(\n    () =>\n      moment()\n        .subtract(12, \"month\")\n        .toDate(),\n    []\n  );\n  if (pomodoro_daily_totals.length === 0) {\n    return <Alert color=\"warning\">No pomodoro history!</Alert>;\n  } else {\n    return (\n      <>\n        <CalendarHeatmap\n          startDate={startDate}\n          showWeekdayLabels={true}\n          values={values}\n          classForValue={classForValue}\n          tooltipDataAttrs={tooltipDataAttrs}\n        />\n        <ReactTooltip />\n      </>\n    );\n  }\n};\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport { LinearProgress } from \"@rmwc/linear-progress\";\nimport { ThemeProvider } from \"@rmwc/theme\";\nimport { Chip, ChipSet } from \"@rmwc/chip\";\nimport {\n  Card,\n  Collapse,\n  CardHeader,\n  CardBody,\n  Badge,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroupButtonDropdown,\n  Button,\n  Spinner\n} from \"reactstrap\";\nimport styles from \"./Pomodoro.module.css\";\nimport classNames from \"classnames\";\nimport { Tomato, TomatoState } from \"./Tomato\";\nimport { ToggleIcon } from \"./Controller\";\nimport tomatoIcon from \"../tomato.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { stopPropagation } from \"../util/handler\";\nimport {\n  faCoffee,\n  faPlay,\n  faPause,\n  faRedo,\n  faCookie,\n  faTimes,\n  faTasks,\n  faUserFriends\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  TimerState,\n  TimerMode,\n  TimerDurationMin,\n  timer,\n  TimerEventListener\n} from \"../util/timer\";\nimport { RootContext } from \"../Provider\";\nimport { PomodoroHeatmap } from \"./PomodoroHeatmap\";\nimport { ActionTypes } from \"../sideEffectors\";\nimport { notify, NotifyClickHandler } from \"../util/notify\";\nconst Favico = require(\"favico.js-slevomat\");\nconst favico = new Favico({ type: \"rectangle\" });\nconst secToMin = (seconds: number) => Math.ceil(seconds / 60);\ninterface TimerIconProps {\n  mode: TimerMode;\n}\nconst toValueAndUnit = (seconds: number): [number, string] =>\n  seconds >= 60 ? [secToMin(seconds), \"min\"] : [Math.ceil(seconds), \"sec\"];\nconst TimerIcon: React.FC<TimerIconProps> = ({ mode }) => {\n  switch (mode) {\n    case TimerMode.SHORT: {\n      return (\n        <FontAwesomeIcon\n          className={classNames(\"fa-fw\", styles.short_break_icon)}\n          icon={faCoffee}\n        />\n      );\n    }\n    case TimerMode.LONG: {\n      return (\n        <FontAwesomeIcon\n          className={classNames(\"fa-fw\", styles.long_break_icon)}\n          icon={faCookie}\n        />\n      );\n    }\n    default: {\n      return <Tomato state={TomatoState.FRESH} />;\n    }\n  }\n};\ninterface TimerItemProps {\n  mode: TimerMode;\n  onSelect: (mode: TimerMode) => void;\n}\nconst TimerItem: React.FC<TimerItemProps> = ({ mode, onSelect }) => {\n  const handleClick = useCallback(() => {\n    onSelect(mode);\n  }, [mode, onSelect]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <TimerIcon mode={mode} />\n      {mode}\n    </DropdownItem>\n  );\n};\nconst clickToClose: NotifyClickHandler = closeFn => {\n  timer.start();\n  closeFn();\n};\nconst clickToWaitClose: NotifyClickHandler = closeFn => {\n  timer.start();\n  closeFn(2);\n};\nconst clickToChangeFocus: NotifyClickHandler = closeFn => {\n  timer.changeMode(TimerMode.FOCUS);\n  timer.start();\n  closeFn();\n};\nexport const Pomodoro: React.FC = () => {\n  const {\n    state: {\n      loaded,\n      pomodoro_date,\n      pomodoro_number,\n      pomodoro_used_number,\n      task_id,\n      task,\n      auth_token,\n      pomodoro_live_counts\n    },\n    dispatch\n  } = useContext(RootContext);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenDropdown, setIsOpenDropdown] = useState(false);\n  const [remaining, setRemaining] = useState(TimerDurationMin[TimerMode.FOCUS]);\n  const [state, setState] = useState<TimerState>(TimerState.STOPPED);\n  const [mode, setMode] = useState<TimerMode>(TimerMode.FOCUS);\n  const [progress, setProgress] = useState(0);\n  const [unit, setUnit] = useState(\"min\");\n\n  const toggleDropdown = useCallback(() => {\n    setIsOpenDropdown(prev => !prev);\n  }, []);\n  const handleSelect = useCallback((mode: TimerMode) => {\n    timer.changeMode(mode);\n  }, []);\n  const handleClick = useCallback(() => {\n    switch (state) {\n      case TimerState.RUNNING: {\n        timer.pause();\n        break;\n      }\n      case TimerState.PAUSED: {\n        timer.resume();\n        break;\n      }\n      case TimerState.STOPPED: {\n        timer.start();\n      }\n    }\n  }, [state]);\n  const setRemainingAndUnit = useCallback((seconds: number) => {\n    const [val, unit] = toValueAndUnit(seconds);\n    setRemaining(val);\n    setUnit(unit);\n  }, []);\n  const handleState: TimerEventListener = useCallback(\n    status => {\n      setState(status.state);\n      setRemainingAndUnit(status.remaining);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleMode: TimerEventListener = useCallback(\n    status => {\n      setMode(status.mode);\n      setRemainingAndUnit(status.duration);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleTick: TimerEventListener = useCallback(\n    status => {\n      setRemainingAndUnit(status.remaining);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleExpire: TimerEventListener = useCallback(\n    (status, completedAt?: Date) => {\n      let num = pomodoro_number;\n      handleState(status);\n      if (status.mode === TimerMode.FOCUS) {\n        dispatch({\n          type: ActionTypes.ADD_POMODORO,\n          meta: {\n            completedAt: completedAt || new Date(),\n            duration: status.duration,\n            pure: status.checkpointElapsed === 0\n          }\n        });\n        num++;\n        if (num % 4 === 0) {\n          timer.changeMode(TimerMode.LONG);\n        } else {\n          timer.changeMode(TimerMode.SHORT);\n        }\n      } else {\n        timer.changeMode(TimerMode.FOCUS);\n      }\n      let title: string = \"\";\n      let body: string;\n      let option: string | undefined = undefined;\n      let onClick = clickToClose;\n      let onDblclick: NotifyClickHandler | undefined = undefined;\n      body = `${num} Pomodoros today!`;\n      switch (timer.mode) {\n        case TimerMode.FOCUS: {\n          title = \"Start Focusing.\";\n          break;\n        }\n        case TimerMode.SHORT: {\n          title = \"Take a Short Break.\";\n          option = \"Retry focusing if double click.\";\n          onClick = clickToWaitClose;\n          onDblclick = clickToChangeFocus;\n          break;\n        }\n        case TimerMode.LONG: {\n          title = \"Take a Long Break.\";\n          option = \"Retry focusing if double click.\";\n          onClick = clickToWaitClose;\n          onDblclick = clickToChangeFocus;\n          break;\n        }\n      }\n      notify({\n        title,\n        body,\n        option,\n        icon: tomatoIcon,\n        onClick,\n        onDblclick\n      });\n    },\n    [dispatch, handleState, pomodoro_number]\n  );\n  const handleRetry = useCallback(() => {\n    timer.changeMode(TimerMode.FOCUS, true);\n  }, []);\n  const handleRemove = useCallback(() => {\n    dispatch({ type: ActionTypes.RESET_TASK_ID });\n  }, [dispatch]);\n  const handleAddFBTimer: TimerEventListener = useCallback(\n    status => {\n      let title: string = \" from firebase!\";\n      let num = pomodoro_number;\n      const { remaining } = status;\n\n      if (status.mode === TimerMode.FOCUS) {\n        num++;\n        if (num % 4 === 0) {\n          title = `Take a Long Break ${title}`;\n        } else {\n          title = `Take a Short Break ${title}`;\n        }\n      } else {\n        title = `Start Focusing ${title}`;\n      }\n      const body = `${num} Pomodoros today!`;\n      dispatch({\n        type: ActionTypes.ADD_FB_TIMER,\n        payload: {\n          title,\n          body,\n          remaining\n        }\n      });\n    },\n    [dispatch, pomodoro_number]\n  );\n  const handleDelFBTimer: TimerEventListener = useCallback(\n    status => {\n      dispatch({\n        type: ActionTypes.DEL_FB_TIMER\n      });\n    },\n    [dispatch]\n  );\n\n  useEffect(() => {\n    timer.on(\"tick\", handleTick);\n    timer.on(\"start\", handleState);\n    timer.on(\"start\", handleAddFBTimer);\n    timer.on(\"stop\", handleState);\n    timer.on(\"stop\", handleDelFBTimer);\n    timer.on(\"pause\", handleState);\n    timer.on(\"pause\", handleDelFBTimer);\n    timer.on(\"resume\", handleState);\n    timer.on(\"resume\", handleAddFBTimer);\n    timer.on(\"expire\", handleExpire);\n    timer.on(\"change_mode\", handleMode);\n    return () => {\n      timer.removeAllListeners();\n    };\n  }, [\n    handleExpire,\n    handleMode,\n    handleState,\n    handleTick,\n    handleAddFBTimer,\n    handleDelFBTimer\n  ]);\n  useEffect(() => {\n    setMode(timer.mode);\n    setState(timer.state);\n    setRemainingAndUnit(timer.remaining);\n    if (timer.restoreExpired && auth_token) {\n      _.defer(() => {\n        handleExpire(timer.status);\n      });\n      timer.restoreExpired = false;\n    }\n  }, [auth_token, handleExpire, setRemainingAndUnit]);\n  useEffect(() => {\n    const today = moment().format(\"YYYY-MM-DD\");\n    if (loaded && pomodoro_date !== today) {\n      dispatch({\n        type: ActionTypes.RESET_POMODORO,\n        payload: { pomodoro_date: today }\n      });\n      timer.changeMode(TimerMode.FOCUS);\n    }\n  }, [dispatch, loaded, pomodoro_date]);\n  useEffect(() => {\n    if (Notification.permission !== \"denied\") {\n      Notification.requestPermission();\n    }\n  }, [dispatch]);\n  useEffect(() => {\n    let bgColor = mode === TimerMode.FOCUS ? \"#f00\" : \"#0f0\";\n    let textColor = mode === TimerMode.FOCUS ? \"#fff\" : \"#000\";\n    let animation = \"fade\";\n    if (unit === \"sec\") {\n      [bgColor, textColor] = [textColor, bgColor];\n      animation = \"none\";\n    }\n    switch (state) {\n      case TimerState.RUNNING: {\n        favico.badge(remaining, {\n          bgColor,\n          textColor,\n          animation\n        });\n        break;\n      }\n      case TimerState.PAUSED: {\n        favico.badge(\"-\", { bgColor, textColor, animation });\n        break;\n      }\n      default: {\n        favico.reset();\n      }\n    }\n  }, [mode, remaining, state, unit]);\n  useEffect(() => {\n    const duration = TimerDurationMin[mode] * 60;\n    const val = unit === \"min\" ? remaining * 60 : remaining;\n    setProgress(0.01 + ((duration - val) * 99) / duration / 100);\n  }, [mode, remaining, unit]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.SET_POMODORO_STATE,\n      payload: { pomodoro_state: state }\n    });\n  }, [dispatch, state]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.SET_POMODORO_MODE,\n      payload: { pomodoro_mode: mode }\n    });\n  }, [dispatch, mode]);\n  const handleToggle = useCallback(() => {\n    setIsOpen(prev => !prev);\n  }, []);\n  const buffer = state === TimerState.RUNNING ? progress : 1;\n  if (!auth_token) {\n    return null;\n  }\n  const taskTitle = task\n    ? `#${task.ref} ${_.get(\n        task,\n        \"user_story_extra_info.subject\",\n        \"Unassigned tasks\"\n      )} / ${task.subject}`\n    : \"\";\n  const taskSubject = task\n    ? _.truncate(`#${task.ref} ${task.subject}`, { length: 10 })\n    : \"\";\n  const displayLive = Object.values(pomodoro_live_counts).some(val => val > 0);\n  return (\n    <Card className={classNames(styles.top, \"sticky-top\")}>\n      <ThemeProvider\n        options={{ primary: mode === TimerMode.FOCUS ? \"red\" : \"green\" }}\n      >\n        <LinearProgress\n          buffer={buffer}\n          progress={progress}\n          closed={state === TimerState.STOPPED}\n        />\n      </ThemeProvider>\n      <CardHeader onClick={handleToggle}>\n        <div className=\"d-flex\">\n          <ToggleIcon isOpen={isOpen} />\n          <InputGroup className={classNames(styles.button_group, \"ml-1\")}>\n            <InputGroupButtonDropdown\n              onClick={stopPropagation}\n              isOpen={isOpenDropdown}\n              toggle={toggleDropdown}\n              addonType=\"prepend\"\n            >\n              <DropdownToggle color=\"light\" size=\"sm\" caret>\n                <TimerIcon mode={mode} />\n              </DropdownToggle>\n              <DropdownMenu>\n                <TimerItem mode={TimerMode.FOCUS} onSelect={handleSelect} />\n                <TimerItem mode={TimerMode.SHORT} onSelect={handleSelect} />\n                <TimerItem mode={TimerMode.LONG} onSelect={handleSelect} />\n              </DropdownMenu>\n            </InputGroupButtonDropdown>\n            <InputGroupAddon addonType=\"prepend\" onClick={stopPropagation}>\n              <InputGroupText\n                className={classNames(styles.fix_w, {\n                  \"font-weight-bold\": state === TimerState.RUNNING\n                })}\n              >\n                {remaining}\n              </InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon onClick={stopPropagation} addonType=\"prepend\">\n              {unit}\n            </InputGroupAddon>\n            <InputGroupAddon addonType=\"append\" onClick={stopPropagation}>\n              {state === TimerState.RUNNING ? (\n                <Button color=\"danger\" onClick={handleClick}>\n                  <FontAwesomeIcon icon={faPause} />\n                </Button>\n              ) : (\n                <Button color=\"primary\" onClick={handleClick}>\n                  <FontAwesomeIcon icon={faPlay} />\n                </Button>\n              )}\n            </InputGroupAddon>\n\n            {mode !== TimerMode.FOCUS && (\n              <InputGroupAddon addonType=\"append\" onClick={stopPropagation}>\n                <Button\n                  color=\"light\"\n                  onClick={handleRetry}\n                  title=\"Retry focusing\"\n                >\n                  <FontAwesomeIcon icon={faRedo} className=\"text-muted\" />\n                  <Tomato state={TomatoState.STALE} />\n                </Button>\n              </InputGroupAddon>\n            )}\n\n            {task_id && (\n              <ChipSet\n                onClick={stopPropagation}\n                className={classNames(styles.chip_set)}\n              >\n                <Chip\n                  icon={<FontAwesomeIcon icon={faTasks} />}\n                  onRemove={handleRemove}\n                  title={taskTitle}\n                  trailingIcon={<FontAwesomeIcon icon={faTimes} />}\n                >\n                  {taskSubject ? taskSubject : <Spinner type=\"grow\" />}\n                </Chip>\n              </ChipSet>\n            )}\n            {displayLive && (\n              <div className=\"ml-1\">\n                <div\n                  className={classNames(\n                    \"w-100\",\n                    \"text-light\",\n                    \"bg-danger\",\n                    \"text-center\",\n                    \"rounded\",\n                    \"shadow\",\n                    \"font-weight-bold\",\n                    styles.live\n                  )}\n                >\n                  <FontAwesomeIcon\n                    className=\"ml-1\"\n                    icon={faUserFriends}\n                  ></FontAwesomeIcon>\n                  <span className=\"mx-1\">LIVE</span>\n                </div>\n                <div>\n                  {Object.entries(pomodoro_live_counts)\n                    .filter(([mode, val]) => val > 0)\n                    .map(([mode, val]) => (\n                      <Badge key={mode} color=\"light\" className=\"border\">\n                        <TimerIcon mode={mode as TimerMode} />:{val}\n                      </Badge>\n                    ))}\n                </div>\n              </div>\n            )}\n          </InputGroup>\n          {pomodoro_number > 0 && (\n            <Badge color=\"danger\" className=\"mr-2\">\n              <Tomato /> <FontAwesomeIcon icon={faTimes} /> {pomodoro_number}\n            </Badge>\n          )}\n          {_.times(pomodoro_number).map(i => (\n            <Tomato\n              key={i}\n              state={\n                i < pomodoro_used_number ? TomatoState.STALE : TomatoState.FRESH\n              }\n              br={i % 2 !== pomodoro_number % 2 && i < pomodoro_number - 1}\n            />\n          ))}\n        </div>\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <CardBody className=\"bg-grass\">\n          <PomodoroHeatmap />\n        </CardBody>\n      </Collapse>\n    </Card>\n  );\n};\n","import { toastr } from \"./toastr\";\ntype CloseFn = (sec?: number) => void;\nexport type NotifyClickHandler = (close: CloseFn) => void;\ninterface NotifyArgs {\n  title: string;\n  body: string;\n  option?: string;\n  icon: string;\n  onClick: NotifyClickHandler;\n  onDblclick?: NotifyClickHandler;\n}\nexport const notify = ({\n  title,\n  body,\n  option = \"\",\n  icon,\n  onClick,\n  onDblclick\n}: NotifyArgs) => {\n  let clickCount = 0;\n  let closeTimer: NodeJS.Timeout | null = null;\n  if (Notification.permission === \"granted\") {\n    const notification = new Notification(title, {\n      body: `${body} ${option}`,\n      icon\n    });\n    const closeFn = (sec = 0) => {\n      if (sec) {\n        closeTimer = setTimeout(() => {\n          notification.close();\n          closeTimer = null;\n        }, sec * 1000);\n      } else {\n        notification.close();\n      }\n    };\n    notification.onclick = () => {\n      if (clickCount === 0) {\n        clickCount++;\n        onClick(closeFn);\n      } else {\n        closeTimer && clearTimeout(closeTimer);\n        onDblclick && onDblclick(closeFn);\n      }\n    };\n  } else {\n    toastr.notify({ title, body, icon });\n  }\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { ToastContainer } from \"react-toastify\";\nimport { Controller } from \"./components/Controller\";\nimport { Provider } from \"./Provider\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { OverView } from \"./components/OverView\";\nimport { PersonalPage } from \"./components/PersonalPage\";\nimport { Pomodoro } from \"./components/Pomodoro\";\nexport const App = () => (\n  <div className=\"container\">\n    <ToastContainer className=\"toast-top\" />\n    <HashRouter>\n      <Provider>\n        <Pomodoro />\n        <Controller />\n        <Route exact path=\"/\" component={OverView} />\n        <Route exact path=\"/:uid\" component={PersonalPage} />\n      </Provider>\n    </HashRouter>\n  </div>\n);\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap-css-only/css/bootstrap.css\";\nimport \"@material/switch/dist/mdc.switch.css\";\nimport \"@material/form-field/dist/mdc.form-field.css\";\nimport \"@rmwc/avatar/avatar.css\";\nimport \"@material/chips/dist/mdc.chips.css\";\nimport \"@material/linear-progress/dist/mdc.linear-progress.css\";\nimport \"@material/elevation/dist/mdc.elevation.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"react-calendar-heatmap/dist/styles.css\";\nimport App from \"./App\";\n// import * as serviceWorker from \"./serviceWorker\";\nimport \"./util/firebase\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"top\":\"Pomodoro_top__2KPBC\",\"button_group\":\"Pomodoro_button_group__25QhE\",\"chip_set\":\"Pomodoro_chip_set__UcFix\",\"fix_w\":\"Pomodoro_fix_w__26hsb\",\"short_break_icon\":\"Pomodoro_short_break_icon__3e20m\",\"long_break_icon\":\"Pomodoro_long_break_icon__1CgqS\",\"live\":\"Pomodoro_live__293Tt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fresh\":\"Tomato_fresh__2s5Ye\",\"stale\":\"Tomato_stale__3bjHh\",\"bl\":\"Tomato_bl__2-LRw\",\"br\":\"Tomato_br__2_ZQQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"UserStory_header__3lGFX\",\"display_medal\":\"UserStory_display_medal__3t53K\",\"medal\":\"UserStory_medal__2Zi1f\",\"is_closed\":\"UserStory_is_closed__2ABQp\"};"],"sourceRoot":""}