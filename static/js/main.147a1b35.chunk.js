(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){e.exports={header:"Controller_header__1l3a3"}},198:function(e,t,a){e.exports={avator:"PersonalInfo_avator__YLWcN"}},224:function(e,t,a){e.exports=a(438)},229:function(e,t,a){},438:function(e,t,a){"use strict";a.r(t);var n,r,c=a(1),l=a.n(c),u=a(43),s=a.n(u),o=(a(229),a(230),a(231),a(232),a(11)),i=a(8),m=a.n(i),d=a(2),E=a.n(d);!function(e){e.SET_URL="SET_URL",e.SIGN_IN="SIGN_IN",e.SET_AUTH_TOKEN="SET_AUTH_TOKEN",e.SET_AUTH_ERROR="SET_AUTH_ERROR",e.SIGN_OUT="SIGN_OUT",e.FETCH_PROJECTS="FETCH_PROJECTS",e.SET_PROJECTS="SET_PROJECTS",e.SET_PID="SET_PID",e.FETCH_PROJECT="FETCH_PROJECT",e.SET_PROJECT="SET_PROJECT",e.FETCH_MILESTONES="FETCH_MILESTONES",e.SET_MID="SET_MID",e.SET_MILESTONES="SET_MILESTONES",e.SET_CUSTOM_EID="SET_CUSTOM_EID",e.SET_CUSTOM_RID="SET_CUSTOM_RID",e.FETCH_CUSTOM_ATTRS="FETCH_CUSTOM_ATTRS",e.SET_CUSTOM_ATTRS="SET_CUSTOM_ATTRS",e.SET_BIZ_DAYS="SET_BIZ_DAYS",e.ADD_BIZ_DAY="ADD_BIZ_DAY",e.REMOVE_BIZ_DAY="REMOVE_BIZ_DAY",e.FETCH_TASKS="FETCH_TASKS",e.SET_TASKS="SET_TASKS",e.FETCH_TASK_STATUSES="FETCH_TASK_STATUSES",e.SET_TASK_STATUSES="SET_TASK_STATUSES",e.FETCH_CUSTOM_VALUE_MAP="FETCH_CUSTOM_VALUE_MAP",e.SET_CUSTOM_VALUE_MAP="SET_CUSTOM_VALUE_MAP",e.PATCH_CUSTOM_VALUE="PATCH_CUSTOM_VALUE",e.FETCH_USER="FETCH_USER",e.SET_USER="SET_USER",e.RESET_USER="RESET_USER",e.ADD_REJECT_TASK_STATUS_ID="ADD_REJECT_TASK_STATUS",e.REMOVE_REJECT_TASK_STATUS_ID="REMOVE_REJECT_TASK_STATUS",e.OPEN_CONTROLLER="OPEN_CONTROLLER",e.CLOSE_CONTROLLER="CLOSE_CONTROLLER",e.UPDATE_DATA="UPDATE_DATA"}(n||(n={})),function(e){e.URL="taiga_url",e.PID="taiga_pid",e.MID="taiga_mid",e.CUSTOM_EID="taiga_custom_eid",e.CUSTOM_RID="taiga_custom_rid",e.BIZ_DAYS="taiga_biz_days",e.REJECT_TASK_STATUS_IDS="reject_task_status_ids"}(r||(r={}));var _,p=function(e){return localStorage.getItem(e)||""},f=function(e,t){return t?p("".concat(t,"/").concat(e)):""},T=function(e,t){localStorage.setItem(e,t)},b=function(e,t,a){return t?T("".concat(t,"/").concat(e),a):null},S=function(){var e=p(r.URL),t=p(r.PID),a=p(r.MID),n=f(r.CUSTOM_EID,t),c=f(r.CUSTOM_RID,t),l=f(r.BIZ_DAYS,a),u=m.a.compact(l.split(",")).sort(),s=m.a.compact(f(r.REJECT_TASK_STATUS_IDS,t).split(",")),o=!(e&&t&&a&&n&&c);return{url:e,auth_token:"",auth_error:!1,username:"",password:"",user:null,projects:[],pid:t,project:{},mid:a,custom_eid:n,custom_rid:c,custom_attrs:[],biz_days:u,milestones:[],tasks:[],task_statuses:[],custom_value_map:new WeakMap,reject_task_status_ids:s,updated_time:0,isOpen:o}},O=a(47),v=a(14),y=a(45),h=a.n(y),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_URL:var a=t.payload.url;return T(r.URL,a),Object(v.a)({},e,{url:a});case n.SET_PROJECTS:var c=t.payload.projects;return Object(v.a)({},e,{projects:c});case n.SET_PID:var l=t.payload.pid;return T(r.PID,l),Object(v.a)({},e,{pid:l,project:{},mid:"",custom_eid:f(r.CUSTOM_EID,l),custom_rid:f(r.CUSTOM_RID,l),custom_attrs:[],milestones:[],custom_value_map:new WeakMap});case n.SET_PROJECT:var u=t.payload.project;return Object(v.a)({},e,{project:u});case n.SET_MID:var s=t.payload.mid;return T(r.MID,s),Object(v.a)({},e,{mid:s,tasks:[],biz_days:m.a.compact(f(r.BIZ_DAYS,s).split(",")).sort()});case n.SET_MILESTONES:var o=t.payload.milestones;return Object(v.a)({},e,{milestones:o});case n.SET_CUSTOM_EID:var i=t.payload.custom_eid;return b(r.CUSTOM_EID,e.pid,i),Object(v.a)({},e,{custom_eid:i});case n.SET_CUSTOM_ATTRS:var d=t.payload.custom_attrs;return Object(v.a)({},e,{custom_attrs:d});case n.SET_CUSTOM_RID:var E=t.payload.custom_rid;return b(r.CUSTOM_RID,e.pid,E),Object(v.a)({},e,{custom_rid:E});case n.SET_BIZ_DAYS:var _=t.payload.biz_days;return b(r.BIZ_DAYS,e.mid,_.join(",")),Object(v.a)({},e,{biz_days:_});case n.ADD_BIZ_DAY:var p=t.payload.biz_day,y=m.a.chain([].concat(Object(O.a)(e.biz_days),[p])).uniq().sort().value();return b(r.BIZ_DAYS,e.mid,y.join(",")),Object(v.a)({},e,{biz_days:y});case n.REMOVE_BIZ_DAY:var j=t.payload.biz_day,k=m.a.reject(Object(O.a)(e.biz_days),function(e){return e===j});return b(r.BIZ_DAYS,e.mid,k.join(",")),Object(v.a)({},e,{biz_days:k});case n.SET_TASKS:var C=t.payload.tasks;return Object(v.a)({},e,{tasks:C});case n.SET_TASK_STATUSES:var g=t.payload.task_statuses;return Object(v.a)({},e,{task_statuses:g});case n.SET_CUSTOM_VALUE_MAP:var A=t.payload.custom_value_map;return Object(v.a)({},e,{custom_value_map:A});case n.SET_USER:var U=t.payload.user;return Object(v.a)({},e,{user:U});case n.RESET_USER:return Object(v.a)({},e,{user:null});case n.ADD_REJECT_TASK_STATUS_ID:var x=t.payload.reject_task_status_id,R=m.a.chain([].concat(Object(O.a)(e.reject_task_status_ids),[x])).compact().uniq().value();return b(r.REJECT_TASK_STATUS_IDS,e.pid,R.join(",")),Object(v.a)({},e,{reject_task_status_ids:R});case n.REMOVE_REJECT_TASK_STATUS_ID:var N=t.payload.reject_task_status_id,D=m.a.reject(Object(O.a)(e.reject_task_status_ids),function(e){return e===N});return b(r.REJECT_TASK_STATUS_IDS,e.pid,D.join(",")),Object(v.a)({},e,{reject_task_status_ids:D});case n.OPEN_CONTROLLER:return Object(v.a)({},e,{isOpen:!0});case n.CLOSE_CONTROLLER:return Object(v.a)({},e,{isOpen:!1});case n.UPDATE_DATA:return Object(v.a)({},e,{updated_time:Date.now()});case n.SIGN_IN:var I=t.payload,M=I.username,P=I.password;return Object(v.a)({},e,{username:M,password:P,auth_error:!1});case n.SET_AUTH_TOKEN:var w=t.payload.auth_token;return h.a.defaults.headers.common.Authorization="Bearer ".concat(w),Object(v.a)({},e,{auth_token:w});case n.SET_AUTH_ERROR:return Object(v.a)({},e,{auth_error:!0});case n.SIGN_OUT:return h.a.defaults.headers.common.Authorization&&delete h.a.defaults.headers.common.Authorization,Object(v.a)({},e,{auth_token:"",username:"",password:""});default:return e}},k=function(e,t,a,n){return function(r){t(r),a(r,n,e)}},C=a(12),g=a.n(C),A=a(18),U=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=r(),!(l=c.url)){e.next=8;break}return e.next=5,L(l,"projects");case 5:u=e.sent,s=u.data,a({type:n.SET_PROJECTS,payload:{projects:s}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("err:fetchProjects",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,a,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_PROJECT){e.next=15;break}if(e.prev=1,c=r(),l=c.url,u=t.payload.pid,!l||!u){e.next=10;break}return e.next=7,L(l,"projects/".concat(u));case 7:s=e.sent,o=s.data,a({type:n.SET_PROJECT,payload:{project:o}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("err:fetchProject",e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_MILESTONES){e.next=15;break}if(e.prev=1,c=r(),l=c.url,u=t.payload.project,!l||!u){e.next=10;break}return e.next=7,L(l,"milestones",{params:{project:u}});case 7:s=e.sent,o=s.data,a({type:n.SET_MILESTONES,payload:{milestones:o}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("err:fetchMilestones",e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o,i,d;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_TASKS){e.next=16;break}if(e.prev=1,c=r(),l=c.url,u=c.reject_task_status_ids,s=t.payload.milestone,!l||!s){e.next=11;break}return e.next=7,L(l,"tasks",{headers:{"x-disable-pagination":!0},params:{milestone:s}});case 7:o=e.sent,i=o.data,d=i.filter(function(e){return!m.a.includes(u,String(e.status))}),a({type:n.SET_TASKS,payload:{tasks:d}});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("err:fetchTasks",e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t,a,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_TASK_STATUSES){e.next=15;break}if(e.prev=1,c=r(),l=c.url,u=t.payload.project,!l||!u){e.next=10;break}return e.next=7,L(l,"task-statuses",{params:{project:u}});case 7:s=e.sent,o=s.data,a({type:n.SET_TASK_STATUSES,payload:{task_statuses:o}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("err:fetchTaskStatuses",e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_CUSTOM_ATTRS){e.next=15;break}if(e.prev=1,c=r(),l=c.url,u=t.payload.project,!l||!u){e.next=10;break}return e.next=7,L(l,"task-custom-attributes",{params:{project:u}});case 7:s=e.sent,o=s.data,a({type:n.SET_CUSTOM_ATTRS,payload:{custom_attrs:o}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("err:fetchCustomAttrs",e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_CUSTOM_VALUE_MAP){e.next=16;break}if(e.prev=1,c=r(),l=c.url,u=c.custom_eid,s=c.custom_rid,o=t.payload.tasks,!(l&&o.length&&u&&s)){e.next=11;break}return e.t0=WeakMap,e.next=8,Promise.all(o.map(function(){var e=Object(A.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(l,"tasks/custom-attributes-values/".concat(t.id));case 2:return a=e.sent,n=a.data,e.abrupt("return",[t,n]);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 8:e.t1=e.sent,i=new e.t0(e.t1),a({type:n.SET_CUSTOM_VALUE_MAP,payload:{custom_value_map:i}});case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(1),console.log("err:fetchCustomValueMap",e.t2);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t,a,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.FETCH_USER){e.next=15;break}if(e.prev=1,c=r(),l=c.url,u=t.payload.uid,!l||!u){e.next=10;break}return e.next=7,L(l,"users/".concat(u));case 7:s=e.sent,o=s.data,a({type:n.SET_USER,payload:{user:o}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("err:fetchUser",e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),w=a(50),F=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o,i,m,d,E,_,p,f;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.PATCH_CUSTOM_VALUE){e.next=17;break}if(e.prev=1,c=r(),l=c.url,u=c.custom_value_map,s=c.tasks,o=t.payload,i=o.id,m=o.key,d=o.value,E=o.version,_=s.find(function(e){return e.id===i}),!(l&&i&&m&&d&&_&&u.has(_))){e.next=12;break}if(!(p=u.get(_))){e.next=12;break}return f=p.attributes_values,e.next=11,Y(l,"tasks/custom-attributes-values/".concat(i),{attributes_values:Object(v.a)({},f,Object(w.a)({},m,String(d))),version:E});case 11:a({type:n.UPDATE_DATA});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("err:patchCustomValue",e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t,a,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(A.a)(g.a.mark(function e(t,a,r){var c,l,u,s,o,i,m;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==n.SIGN_IN){e.next=16;break}if(e.prev=1,c=r(),l=c.url,u=t.payload,s=u.username,o=u.password,!(l&&s&&o)){e.next=10;break}return e.next=7,K(l,"auth",{username:s,password:o,type:"normal"});case 7:i=e.sent,m=i.data.auth_token,a({type:n.SET_AUTH_TOKEN,payload:{auth_token:m}});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),a({type:n.SET_AUTH_ERROR}),console.log("err:signIn",e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),L=function(e,t,a){return h.a.get("".concat(V(e),"/").concat(t),a)},K=function(e,t,a,n){return h.a.post("".concat(V(e),"/").concat(t),a,n)},Y=function(e,t,a,n){return h.a.patch("".concat(V(e),"/").concat(t),a,n)},J=function(e,t,a){switch(e.type){case n.FETCH_PROJECTS:return void U(e,t,a);case n.FETCH_PROJECT:return void x(e,t,a);case n.FETCH_MILESTONES:return void R(e,t,a);case n.FETCH_TASKS:return void N(e,t,a);case n.FETCH_TASK_STATUSES:return void D(e,t,a);case n.FETCH_CUSTOM_ATTRS:return void I(e,t,a);case n.FETCH_CUSTOM_VALUE_MAP:return void M(e,t,a);case n.FETCH_USER:return void P(e,t,a);case n.PATCH_CUSTOM_VALUE:return F(e,t,a),void console.log("patch",e);case n.SIGN_IN:return H(e,t,a),void console.log("signin",e)}},V=function(e){return"".concat(e.replace(/[\xa5\/]$/,""),"/api/v1")},z=S(),B=Object(c.createContext)({state:z,dispatch:function(e){}}),Z=function(e){var t=e.children,a=function(e,t){var a=Object(o.a)(e,2),n=a[0],r=a[1],l=null,u=Object(c.useCallback)(function(e){l&&l(e)},[l]);_=n;return[n,l=Object(c.useCallback)(k(function(){return _},r,t,u),[])]}(Object(c.useReducer)(j,z),J),r=Object(o.a)(a,2),u=r[0],s=r[1],i={state:u,dispatch:s};return Object(c.useEffect)(function(){u.url&&s({type:n.FETCH_PROJECTS})},[s,u.url]),Object(c.useEffect)(function(){u.url&&u.pid&&(s({type:n.FETCH_MILESTONES,payload:{project:u.pid}}),s({type:n.FETCH_CUSTOM_ATTRS,payload:{project:u.pid}}),s({type:n.FETCH_TASK_STATUSES,payload:{project:u.pid}}),s({type:n.FETCH_PROJECT,payload:{pid:u.pid}}))},[u.url,u.pid,s]),Object(c.useEffect)(function(){u.url&&u.mid&&s({type:n.FETCH_TASKS,payload:{milestone:u.mid,reject_task_status_ids:u.reject_task_status_ids}})},[u.url,u.mid,u.updated_time,u.reject_task_status_ids,s]),Object(c.useEffect)(function(){s({type:n.FETCH_CUSTOM_VALUE_MAP,payload:{tasks:u.tasks}})},[s,u.tasks,u.custom_eid,u.custom_rid]),l.a.createElement(B.Provider,{value:i},t)},G=a(446),W=a(447),q=a(450),$=a(451),Q=a(452),X=a(441),ee=a(442),te=a(443),ae=a(453),ne=a(17),re=a(15),ce=function(){var e=Object(c.useContext)(B),t=e.state,a=t.pid,r=t.projects,u=e.dispatch,s=Object(c.useCallback)(function(e){var t=e.target.value;t&&u({type:n.SET_PID,payload:{pid:t}})},[u]);return l.a.createElement(X.a,{className:"col"},l.a.createElement(ee.a,{addonType:"prepend"},"Project"),l.a.createElement(te.a,{value:a,type:"select",onChange:s},l.a.createElement("option",{value:""}," --- "),r.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)})))},le=function(){var e=Object(c.useContext)(B),t=e.state,a=t.milestones,r=t.mid,u=e.dispatch,s=Object(c.useCallback)(function(e){var t=e.target.value;t&&u({type:n.SET_MID,payload:{mid:t}})},[u]);return l.a.createElement(X.a,{className:"col"},l.a.createElement(ee.a,{addonType:"prepend"},"Sprint"),l.a.createElement(te.a,{type:"select",value:r,onChange:s},l.a.createElement("option",{value:""}," --- "),a.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)})))},ue=function(){var e=Object(c.useContext)(B),t=e.state,a=t.custom_attrs,r=t.custom_eid,u=t.custom_rid,s=e.dispatch,o=Object(c.useCallback)(function(e){var t=e.target.value;if(t)switch(e.target.name){case"eid":s({type:n.SET_CUSTOM_EID,payload:{custom_eid:t}});break;case"rid":s({type:n.SET_CUSTOM_RID,payload:{custom_rid:t}});break;default:console.log("other id")}},[s]);return l.a.createElement("div",{className:"row"},l.a.createElement(X.a,{className:"col"},l.a.createElement(ee.a,{addonType:"prepend"},"Estimate"),l.a.createElement(te.a,{value:r,name:"eid",type:"select",onChange:o},l.a.createElement("option",{value:""}," --- "),a.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)}))),l.a.createElement(X.a,{className:"col"},l.a.createElement(ee.a,{addonType:"prepend"},"Result"),l.a.createElement(te.a,{value:u,name:"rid",type:"select",onChange:o},l.a.createElement("option",null," --- "),a.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)}))))},se=a(444),oe=a(445),ie=a(462),me=a(448),de=a(20),Ee=a.n(de),_e=a(85),pe=a.n(_e),fe=function(e,t){return-1===t?"":0===t?"Planning":"Day ".concat(t)},Te=function(e,t){return t.find(function(t){return String(t.id)===e})},be=function(e){return{"text-danger":0===e,"text-info":6===e}},Se=function(e){var t=e.item,a=e.biz_days,r=e.idx,u=Object(c.useContext)(B).dispatch,s=Object(c.useCallback)(function(e){var t=e.target.value;e.target.checked?u({type:n.ADD_BIZ_DAY,payload:{biz_day:t}}):u({type:n.REMOVE_BIZ_DAY,payload:{biz_day:t}})},[u]);if(!t)return l.a.createElement("td",null,l.a.createElement("br",null));var o=t.format("YYYY-MM-DD"),i=o===a[0],d="biz-day-".concat(o);return l.a.createElement(l.a.Fragment,null,l.a.createElement("td",{className:E()(be(r),{"table-info":i}),id:d},pe.a.isWeekDay(t)?l.a.createElement(se.a,{check:!0,inline:!0},l.a.createElement(oe.a,{check:!0},l.a.createElement(te.a,{onChange:s,disabled:pe.a.isWeekendDay(t),value:o,type:"checkbox",checked:m.a.includes(a,o),className:"form-check-input"}),o)):l.a.createElement("span",null,o)),m.a.includes(a,o)?l.a.createElement(ie.a,{target:d},function(e,t){var a=t.indexOf(e);return fe(0,a)}(o,a)):null)},Oe=function(){var e=Object(c.useContext)(B),t=e.state,a=t.mid,r=t.milestones,u=t.biz_days,s=e.dispatch,i=Object(c.useState)([]),d=Object(o.a)(i,2),_=d[0],p=d[1];if(Object(c.useEffect)(function(){var e,t=Te(a,r);if(t){var c=function(e){var t=Ee()(e.estimated_start).local(),a=Ee()(e.estimated_finish).local().diff(t,"days");return m.a.times(a).map(function(e){return t.clone().add(e,"days")})}(t);p(c),u.length<=1&&s({type:n.SET_BIZ_DAYS,payload:{biz_days:(e=c,e.filter(function(e){return pe.a.isWeekDay(e)}).map(function(e){return e.format("YYYY-MM-DD")}))}})}},[a,r,u,s]),0===_.length)return null;var f=m.a.chunk([].concat(Object(O.a)(m.a.times(_[0].day(),function(){return null})),Object(O.a)(_)),7);return l.a.createElement(G.a,null,l.a.createElement(W.a,null,"Business Days"),l.a.createElement(me.a,{bordered:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,Ee.a.weekdays().map(function(e,t){return l.a.createElement("th",{key:t,className:E()("text-center",be(t))},e)}))),l.a.createElement("tbody",null,f.map(function(e,t){return l.a.createElement("tr",{key:t},e.map(function(e,t){return l.a.createElement(Se,{idx:t,key:t,item:e,biz_days:u})}))}))))},ve=a(449),ye=function(e){var t=e.item,a=Object(c.useContext)(B),r=a.state.reject_task_status_ids,u=a.dispatch,s=Object(c.useCallback)(function(e){var t=e.target.value;e.target.checked?u({type:n.REMOVE_REJECT_TASK_STATUS_ID,payload:{reject_task_status_id:t}}):u({type:n.ADD_REJECT_TASK_STATUS_ID,payload:{reject_task_status_id:t}})},[u]);return l.a.createElement(se.a,{check:!0,inline:!0},l.a.createElement(oe.a,{check:!0},l.a.createElement(te.a,{onChange:s,type:"checkbox",value:t.id,defaultChecked:!m.a.includes(r,String(t.id))}),t.name))},he=function(){var e=Object(c.useContext)(B).state.task_statuses;return 0===e.length?null:l.a.createElement(G.a,null,l.a.createElement(W.a,null,"Task status"),l.a.createElement(ve.a,null,e.map(function(e){return l.a.createElement(ye,{key:e.id,item:e})})))},je=a(182),ke=a.n(je),Ce=function(e){var t=e.isOpen?90:void 0;return l.a.createElement(ne.a,{className:"text-muted mr-2",rotation:t,icon:re.b})},ge=function(){var e=Object(c.useContext)(B),t=e.state,a=t.url,r=t.isOpen,u=t.mid,s=t.milestones,i=t.biz_days,d=e.dispatch,_=Object(c.useState)(""),p=Object(o.a)(_,2),f=p[0],T=p[1],b=Object(c.useCallback)(function(e){T(e.target.value)},[T]),S=Object(c.useCallback)(function(e){f&&d({type:n.SET_URL,payload:{url:f}}),e.preventDefault()},[f,d]),O=Object(c.useCallback)(function(e){e.stopPropagation()},[]),v=Object(c.useCallback)(function(){d(r?{type:n.CLOSE_CONTROLLER}:{type:n.OPEN_CONTROLLER})},[d,r]),y=function(e,t,a){var n=Te(t,a);return e&&n?"".concat(e,"/project/").concat(n.project_extra_info.slug,"/taskboard/").concat(n.slug):""}(a,u,s);return l.a.createElement(G.a,null,l.a.createElement(W.a,{className:E()(ke.a.header),onClick:v},l.a.createElement(Ce,{isOpen:r}),l.a.createElement(q.a,{color:"primary",pill:!0,className:"p-1 m-1"},l.a.createElement("span",null,function(e,t){return m.a.get(Te(e,t),"name","")}(u,s))),l.a.createElement(q.a,{className:"p-1 m-1"},l.a.createElement("span",null,function(e){return e.length>1?"[".concat(m.a.head(e)," - ").concat(m.a.last(e),"]"):""}(i))),y?l.a.createElement("a",{target:"_blank",onClick:O,className:"float-right",href:y,rel:"noopener noreferrer"},l.a.createElement(ne.a,{className:"mr-1",icon:re.g}),"Taskboard"):null),l.a.createElement($.a,{isOpen:r},l.a.createElement(Q.a,{onSubmit:S},l.a.createElement(X.a,null,l.a.createElement(ee.a,{addonType:"prepend"},"URL"),l.a.createElement(te.a,{defaultValue:a,onChange:b,placeholder:"http://hostname:port"}),l.a.createElement(ee.a,{addonType:"append"},l.a.createElement(ae.a,null,"Set")))),l.a.createElement("div",{className:"row"},l.a.createElement(ce,null),l.a.createElement(le,null)),l.a.createElement(ue,null),l.a.createElement(Oe,null),l.a.createElement(he,null)))},Ae=a(59),Ue=a(44),xe=a(454),Re=a(455),Ne=a(178),De=a(64),Ie=a.n(De),Me=["success","warning","info","danger"],Pe=function(e){return m.a.groupBy(e,"assigned_to")},we=function(e,t,a){return e.has(t)?(n=m.a.get(e.get(t),"attributes_values.".concat(a),"0"),m.a.chain(n).replace(/[^0-9.+,]/g,"").replace(/[+]/g,",").split(",").compact().map(Number).sum().value()):0;var n},Fe=function(e,t){return e.has(t)?m.a.get(e.get(t),"version"):void 0},He=function(e,t,a){return a&&t===e},Le=function(e,t){return t>e},Ke=function(e){var t=e.username,a=e.val,n=e.total,r=e.imgSrc;if(!a)return l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,l.a.createElement("img",{className:Ie.a.avator,src:r,alt:t})," ",t),l.a.createElement("td",null));var c,u,s=(a-n)/n;return s<-.1?(c=re.h,u=""):s<=.1?(u="table-success",c=re.h):s<=.2?(u="table-warning",c=re.i):(u="table-danger",c=re.d),l.a.createElement(l.a.Fragment,null,l.a.createElement("td",{className:u},l.a.createElement("img",{className:Ie.a.avator,src:r,alt:t})," ",t,l.a.createElement(ne.a,{className:"mx-1",icon:c})),l.a.createElement("td",{className:E()(u,"text-right")},a))},Ye=function(e){var t=function(e,t){if(m.a.isNumber(e)&&m.a.isNumber(t)&&e>0){var a=Math.abs(e-t)/e;if(a<=.05)return["gold",3];if(a<=.1)return["silver",2];if(a<.2)return["bronze",1]}return[null,0]}(e.e,e.r),a=Object(o.a)(t,2),n=a[0],r=a[1];return n?l.a.createElement(l.a.Fragment,null,m.a.times(r).map(function(e){return l.a.createElement(ne.a,{key:e,className:Ie.a[n],icon:re.l})})):null},Je=function(e){var t=e.item,a=e.sums,n=e.isPast,r=e.total,u=e.hpd,s=e.closedTasks,i=Object(c.useContext)(B).state,d=i.custom_value_map,E=i.custom_eid,_=i.reject_task_status_ids,p=i.task_statuses,f=Object(c.useState)(0),T=Object(o.a)(f,2),b=T[0],S=T[1],O=Object(c.useState)([]),y=Object(o.a)(O,2),h=y[0],j=y[1],k=Object(c.useCallback)(function(e){S(Number(e.target.value)||0)},[S]),C=m.a.get(a,t.id),g=m.a.get(C,"e"),A=m.a.get(C,"r"),U=b||r,x=String(U),R=t.photo||"http://i.pravatar.cc/80?u=".concat(Math.random());return Object(c.useEffect)(function(){var e=m.a.chain(p).filter(function(e){return e.is_closed}).reject(function(e){return m.a.includes(_,String(e.id))}).orderBy("id").reverse().map(function(e){return e.id}).value(),t=m.a.chain(s).groupBy("status").mapValues(function(e){return m.a.reduce(e,function(e,t){return e.status=t.status,e.total+=we(d,t,Number(E)),e.label=t.status_extra_info.name,e},{status:0,total:0,label:"",style:""})}).value(),a=m.a.orderBy(t,"status").reverse().map(function(t){return Object(v.a)({},t,{style:Me[e.indexOf(t.status)]})});j(a)},[j,E,d,s,p,_]),l.a.createElement("tr",{key:t.id},r>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke,{username:t.username,val:g,total:U,imgSrc:R}),l.a.createElement("td",{className:"text-right"},r),l.a.createElement("td",{className:Ie.a.custom_input_td},l.a.createElement(te.a,{bsSize:"sm",type:"number",className:"text-right",value:x,step:u,onChange:k}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,l.a.createElement("img",{className:Ie.a.avator,src:R,alt:t.username})," ",l.a.createElement(Ae.b,{to:"/".concat(t.id)},t.username)),l.a.createElement("td",{className:"text-right"},g),l.a.createElement("td",{className:"text-right"},A),l.a.createElement("td",null,m.a.isNumber(g)&&l.a.createElement(xe.a,{multi:!0},h.map(function(e,t){return l.a.createElement(xe.a,{bar:!0,key:t,value:e.total,color:e.style,max:g},e.label)})))),n?l.a.createElement("td",null,l.a.createElement(Ye,{e:g,r:A})):null)},Ve=function(e,t){return e.find(function(e){return e.id===t})},ze=function(){var e=Object(c.useContext)(B),t=e.state,a=t.tasks,r=t.custom_value_map,u=t.custom_attrs,s=t.custom_eid,i=t.custom_rid,d=t.biz_days,E=t.project.members,_=e.dispatch,p=Object(c.useState)(0),f=Object(o.a)(p,2),T=f[0],b=f[1],S=Object(c.useState)(0),O=Object(o.a)(S,2),v=O[0],y=O[1],h=d.length-1,j=Object(c.useCallback)(function(){_({type:n.UPDATE_DATA})},[_]),k=Object(c.useCallback)(function(e){b(Number(e.target.value)||0)},[b]),C=Object(c.useCallback)(function(e){e.preventDefault(),e.stopPropagation()},[]);Object(c.useEffect)(function(){y(T*h)},[T,h,y]);var g=function(e,t,a,n){var r=Number(a),c=Number(n);return m.a.mapValues(Pe(e),function(e){return m.a.chain(e).map(function(e){return{e:we(t,e,r),r:we(t,e,c)}}).reduce(function(e,t){return{e:e.e+t.e,r:e.r+t.r}},{e:0,r:0}).value()})}(a,r,s,i),A=Ve(u,Number(s)),U=Ve(u,Number(i));if(!A||!U||d.length<=1)return null;var x=m.a.get(g,"null.e",0),R=v>0,N=!R&&Ee()().diff(Ee()(m.a.last(d)).local().endOf("days"))>0,D=Pe(a.filter(function(e){return e.is_closed}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Re.a,{color:"light",light:!0},l.a.createElement(Q.a,{inline:!0,className:"mr-auto",onSubmit:C},l.a.createElement(X.a,null,l.a.createElement(te.a,{type:"number",step:"0.5",placeholder:"hours / day",className:"text-right",onChange:k}),l.a.createElement(ee.a,{addonType:"append"},l.a.createElement(Ne.a,null,l.a.createElement(ne.a,{className:"mx-2",icon:re.q}),h," [days]",l.a.createElement(ne.a,{className:"mx-2",icon:re.f})),v>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne.a,{className:"bg-white"},l.a.createElement("strong",null,v)),l.a.createElement(Ne.a,null,"hours / sprint")):null))),l.a.createElement(ae.a,{onClick:j},l.a.createElement(ne.a,{icon:re.p}))),l.a.createElement(me.a,{bordered:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,A.name),R?l.a.createElement(l.a.Fragment,null,l.a.createElement("th",null,"Total")," ",l.a.createElement("th",null,"Custom")):l.a.createElement(l.a.Fragment,null,l.a.createElement("th",null,U.name),l.a.createElement("th",null,"Progress")),N?l.a.createElement("th",null,"Grade"):null)),l.a.createElement("tbody",null,(E||[]).map(function(e){return l.a.createElement(Je,{key:e.id,isPast:N,item:e,sums:g,total:v,hpd:T,closedTasks:D[e.id]||[]})}),l.a.createElement("tr",{key:"null"},l.a.createElement("td",null,"unassigned"),l.a.createElement("td",{className:"text-right text-danger"},x),l.a.createElement("td",null),l.a.createElement("td",null),N?l.a.createElement("td",null):null))))},Be=a(456),Ze=a(457),Ge=function(e){var t=e.url,a=e.item,n=a.project_extra_info.slug,r="".concat(t,"/project/").concat(n,"/task/").concat(a.ref);return l.a.createElement(Be.a,{tag:"a",target:"_blank",href:r},l.a.createElement(ne.a,{icon:re.g})," ",a.subject)},We=function(){var e=Object(c.useContext)(B).state,t=e.url,a=e.tasks,n=e.custom_value_map,r=e.custom_eid,u=Object(c.useState)([]),s=Object(o.a)(u,2),i=s[0],m=s[1];return Object(c.useEffect)(function(){if(a.length>0&&r){var e=Number(r),t=a.filter(function(t){return 0===we(n,t,e)});a.length>t.length&&m(t)}},[a,n,r]),0===i.length?null:l.a.createElement(G.a,null,l.a.createElement(W.a,null,"Un estimated tasks"),l.a.createElement(Ze.a,null,i.map(function(e){return l.a.createElement(Ge,{url:t,key:e.id,item:e})})))},qe=a(48),$e=function(e,t){return e.filter(function(e){return Ee()(t).endOf("days").diff(Ee()(e.created_date))>0})},Qe=function(e,t,a){return m.a.chain(t).map(function(t){return we(e,t,Number(a))}).sum().value()},Xe=function(e){var t=e.tasks,a=Object(c.useState)([]),n=Object(o.a)(a,2),r=n[0],u=n[1],s=Object(c.useContext)(B).state,i=s.biz_days,m=s.custom_value_map,d=s.custom_eid;return Object(c.useEffect)(function(){var e=i.length;if(e>0&&t.length>0&&d){var a=Qe(m,$e(t,i[0]),d),n=i.map(function(n,r){var c=fe(0,r),l=a-a*r/(e-1);if(Ee()().local().endOf("days").diff(Ee()(n))>0){var u=0===r?0:Qe(m,function(e,t){return e.filter(function(e){return Ee()(t).local().format("YYYY-MM-DD")===Ee()(e.created_date).local().format("YYYY-MM-DD")})}(t,n),d);return{label:c,estimate:l,result:Qe(m,$e(t,n),d)-u-Qe(m,function(e,t){return e.filter(function(e){return!!e.finished_date&&Ee()(t).local().endOf("days").diff(Ee()(e.finished_date))>0})}(t,n),d),add:u}}return{label:c,estimate:l}});u(n)}else u([])},[t,i,d,m,u]),0===r.length?null:l.a.createElement(G.a,null,l.a.createElement(W.a,null,"Burn down chart"),l.a.createElement(qe.b,{data:r,width:800,height:400},l.a.createElement(qe.f,null),l.a.createElement(qe.e,{dataKey:"label"}),l.a.createElement(qe.d,null),l.a.createElement(qe.a,{dataKey:"result",fill:"#8884d8",stackId:"a"}),l.a.createElement(qe.a,{dataKey:"add",fill:"#82ca9d",stackId:"a"}),l.a.createElement(qe.c,{dataKey:"estimate"})))},et=function(){var e=Object(c.useContext)(B).state.tasks;return l.a.createElement(Xe,{tasks:e})},tt=function(){return c.createElement(c.Fragment,null,c.createElement(ze,null),c.createElement(We,null),c.createElement(et,null))},at=a(460),nt=a(461),rt=a(458),ct=a(459),lt=function(){return l.a.createElement(ee.a,{addonType:"append"},l.a.createElement(Ne.a,null,l.a.createElement(ne.a,{icon:re.o,className:"fa-pulse"})))},ut=a(197),st=a.n(ut),ot=a(196),it=a.n(ot),mt=a(52),dt=a.n(mt),Et=a(200),_t=a(87),pt=a.n(_t),ft=function(e){var t=e.url,a=e.item,n=a.user_story_extra_info,r=a.project_extra_info.slug,c=n?"#".concat(n.ref," ").concat(n.subject):void 0,u=n?"".concat(t,"/project/").concat(r,"/us/").concat(n.ref):"#";return c?l.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer",title:c},l.a.createElement(ne.a,{icon:re.g})," ",c):l.a.createElement(l.a.Fragment,null,"(Unassigned tasks)")},Tt=function(e){var t=e.url,a=e.item,n="#".concat(a.ref," ").concat(a.subject),r="".concat(t,"/project/").concat(a.project_extra_info.slug,"/task/").concat(a.ref);return l.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:n},l.a.createElement(ne.a,{icon:re.g})," ",n)},bt=function(e){var t=e.label,a=e.value,n=e.onSubmit,r=e.valid,u=e.invalid,s=e.disabled,i=e.loading,m=Object(c.useState)(!1),d=Object(o.a)(m,2),E=d[0],_=d[1],p=Object(c.useState)(""),f=Object(o.a)(p,2),T=f[0],b=f[1],S=Object(c.useCallback)(function(e){_(e.currentTarget.checked)},[_]),O=Object(c.useCallback)(function(e){b(e.target.value)},[b]),v=Object(c.useCallback)(function(){var e=Number(T);""!==T&&e>=0&&n&&(n(e),_(!1))},[T,n,_]);Object(c.useEffect)(function(){s&&_(!1)},[_,s]);var y=s?"Need sign in!":"";return l.a.createElement(X.a,{className:dt.a.toggle_input},l.a.createElement(ee.a,{addonType:"prepend"},t),i?l.a.createElement(lt,null):l.a.createElement(l.a.Fragment,null,E?l.a.createElement(l.a.Fragment,null,l.a.createElement(ee.a,{addonType:"prepend"},l.a.createElement(pt.a,null,a)),l.a.createElement(ee.a,{addonType:"prepend"},l.a.createElement(pt.a,null,l.a.createElement(ne.a,{className:"text-info",icon:re.j}))),l.a.createElement(te.a,{onInput:O,onChange:O,defaultValue:String(a),type:"number",step:"0.5",min:"0"}),l.a.createElement(ee.a,{addonType:"append"},l.a.createElement(ae.a,{color:"info",onClick:v},l.a.createElement(ne.a,{icon:re.c})))):l.a.createElement(te.a,{valid:r,invalid:u,readOnly:!0,value:a}),l.a.createElement(ee.a,{addonType:"append",title:y},l.a.createElement(Et.a,{disabled:s,checked:E,onChange:S},l.a.createElement(ne.a,{className:"text-info",icon:re.e})))))},St=function(e){var t=e.e,a=e.r;return l.a.createElement(X.a,{className:dt.a.display_medal},l.a.createElement(ee.a,{addonType:"prepend"},"Grade"),l.a.createElement(pt.a,{className:dt.a.medal},l.a.createElement(Ye,{e:t,r:a})))},Ot=function(e){var t=e.item,a=Object(c.useContext)(B),r=a.state,u=r.url,s=r.custom_attrs,o=r.custom_eid,i=r.custom_rid,m=r.custom_value_map,d=r.auth_token,_=a.dispatch,p=Fe(m,t),f=Object(c.useCallback)(function(e){p&&_({type:n.PATCH_CUSTOM_VALUE,payload:{id:t.id,key:o,value:e,version:p}})},[_,t.id,o,p]),T=Object(c.useCallback)(function(e){p&&_({type:n.PATCH_CUSTOM_VALUE,payload:{id:t.id,key:i,value:e,version:p}})},[i,_,t.id,p]),b=Ve(s,Number(o)),S=Ve(s,Number(i));if(!b||!S)return null;var O=we(m,t,b.id),v=we(m,t,S.id),y=He(O,v,t.is_closed),h=Le(O,v),j=""===d,k=!p;return l.a.createElement(it.a,{className:E()(Object(w.a)({},dt.a.is_closed,t.is_closed))},l.a.createElement("div",{className:"d-flex mb-1"},l.a.createElement("div",{className:"mr-auto text-truncate"},l.a.createElement(Tt,{url:u,item:t})),l.a.createElement("h5",null,l.a.createElement(q.a,null,t.status_extra_info.name))),l.a.createElement(rt.a,null,l.a.createElement(ct.a,null,l.a.createElement(bt,{onSubmit:f,label:b.name,value:O,disabled:j,loading:k})),l.a.createElement(ct.a,null,l.a.createElement(bt,{onSubmit:T,label:S.name,value:v,valid:y,invalid:h,disabled:j,loading:k})),l.a.createElement(ct.a,null,l.a.createElement(St,{e:O,r:v}))))},vt=function(e){var t=e.item,a=Object(c.useContext)(B).state.url,n=Object(c.useState)(!1),r=Object(o.a)(n,2),u=r[0],s=r[1],i=Object(c.useCallback)(function(){s(!u)},[u,s]);return Object(c.useEffect)(function(){s(!t.is_closed)},[t.is_closed,s]),l.a.createElement(G.a,null,l.a.createElement(W.a,{className:E()(dt.a.header,"text-truncate",Object(w.a)({},dt.a.is_closed,t.is_closed)),onClick:i},l.a.createElement(Ce,{isOpen:u}),l.a.createElement(ft,{url:a,item:t.tasks[0]})),l.a.createElement($.a,{isOpen:u},l.a.createElement(st.a,null,t.tasks.map(function(e){return l.a.createElement(Ot,{item:e,key:e.id})}))))},yt=function(e){var t=e.userInfo,a=Object(c.useContext)(B).state,n=a.tasks,r=a.custom_attrs,u=a.custom_value_map,s=a.custom_eid,i=a.custom_rid,d=a.biz_days,_=Object(c.useState)([]),p=Object(o.a)(_,2),f=p[0],T=p[1],b=Object(c.useState)([]),S=Object(o.a)(b,2),O=S[0],v=S[1];Object(c.useEffect)(function(){var e=n.filter(function(e){return e.assigned_to===t.id}).sort(function(e,t){return e.user_story-t.user_story});T(e);var a=m.a.chain(n).filter({assigned_to:t.id}).groupBy("user_story").map(function(e,t){return{user_story:Number(t),user_story_extra_info:e[0].user_story_extra_info,tasks:e,is_closed:e.every(function(e){return e.is_closed})}}).value();v(a)},[n,t.id]);var y=Ve(r,Number(s)),h=Ve(r,Number(i));if(!y||!h||d.length<=1)return null;var j=f.reduce(function(e,t){return[e[0]+we(u,t,y.id),e[1]+we(u,t,h.id)]},[0,0]),k=Object(o.a)(j,2),C=k[0],g=k[1],A=He(C,g,O.every(function(e){return e.is_closed})),U=Le(C,g),x=f.some(function(e){return!Fe(u,e)});return l.a.createElement(l.a.Fragment,null,O.map(function(e){return l.a.createElement(vt,{item:e,key:e.user_story})}),l.a.createElement(G.a,null,l.a.createElement(W.a,{className:E()("bg-info","text-light")},"Total"),l.a.createElement(ve.a,null,l.a.createElement(rt.a,null,l.a.createElement(ct.a,null,l.a.createElement(X.a,null,l.a.createElement(ee.a,{addonType:"prepend"},y.name),x?l.a.createElement(lt,null):l.a.createElement(te.a,{readOnly:!0,value:C}))),l.a.createElement(ct.a,null,l.a.createElement(X.a,null,l.a.createElement(ee.a,{addonType:"prepend"},h.name),x?l.a.createElement(lt,null):l.a.createElement(te.a,{readOnly:!0,value:g,invalid:U,valid:A}))),l.a.createElement(ct.a,null,l.a.createElement(St,{e:C,r:g}))))))},ht=a(198),jt=a.n(ht),kt=function(e){var t=e.userInfo,a=t.photo||"http://i.pravatar.cc/80?u=".concat(Math.random());return l.a.createElement(G.a,null,l.a.createElement(W.a,null,l.a.createElement("img",{className:jt.a.avator,src:a,alt:t.username})," ".concat(t.username,"'s tasks")))},Ct=function(e){var t=e.userInfo,a=Object(c.useState)([]),n=Object(o.a)(a,2),r=n[0],u=n[1],s=Object(c.useContext)(B).state.tasks;return Object(c.useEffect)(function(){var e=s.filter(function(e){return e.assigned_to===t.id}).sort(function(e,t){return e.user_story-t.user_story});u(e)},[s,t.id]),l.a.createElement(Xe,{tasks:r})},gt=a(199),At=a.n(gt),Ut=function(){var e=Object(c.useContext)(B),t=e.state,a=t.auth_token,r=t.auth_error,u=t.username,s=e.dispatch,i=Object(c.useState)(""),m=Object(o.a)(i,2),d=m[0],E=m[1],_=Object(c.useState)(""),p=Object(o.a)(_,2),f=p[0],T=p[1],b=Object(c.useState)(!1),S=Object(o.a)(b,2),O=S[0],v=S[1],y=Object(c.useCallback)(function(e){d&&f&&(v(!0),s({type:n.SIGN_IN,payload:{username:d,password:f}})),e.preventDefault()},[f,d,s,v]),h=Object(c.useCallback)(function(e){E(e.target.value)},[E]),j=Object(c.useCallback)(function(e){T(e.target.value)},[T]),k=Object(c.useCallback)(function(e){e.preventDefault()},[]),C=Object(c.useCallback)(function(){s({type:n.SIGN_OUT})},[s]);return Object(c.useEffect)(function(){(r||a)&&v(!1)},[r,a,v]),l.a.createElement(l.a.Fragment,null,a?l.a.createElement(Q.a,{inline:!0,onSubmit:k},l.a.createElement(X.a,null,l.a.createElement(ee.a,{addonType:"prepend"},l.a.createElement(Ne.a,null,l.a.createElement(ne.a,{icon:re.r}))),l.a.createElement(te.a,{readOnly:!0,valid:!0,value:u}),l.a.createElement(ee.a,{addonType:"append"},l.a.createElement(ae.a,{onClick:C},l.a.createElement(ne.a,{icon:re.n}))))):l.a.createElement(Q.a,{inline:!0,onSubmit:y},l.a.createElement(X.a,null,l.a.createElement(ee.a,{addonType:"prepend"},l.a.createElement(Ne.a,null,l.a.createElement(ne.a,{icon:re.r}))),l.a.createElement(te.a,{disabled:O,onInput:h,onChange:h,name:"username",placeholder:"username",invalid:r})),l.a.createElement(X.a,null,l.a.createElement(ee.a,{addonType:"prepend"},l.a.createElement(Ne.a,null,l.a.createElement(ne.a,{icon:re.k}))),l.a.createElement(te.a,{disabled:O,onInput:j,onChange:j,name:"password",placeholder:"password",type:"password",invalid:r})),l.a.createElement(ae.a,{color:"primary"},O?l.a.createElement(at.a,{size:"sm",type:"grow"}):l.a.createElement(ne.a,{icon:re.m}))))},xt=function(e){var t=Object(c.useContext)(B),a=t.state.user,r=t.dispatch,u=At()().match.params.uid,s=Object(c.useCallback)(function(){r({type:n.UPDATE_DATA})},[r]);return Object(c.useEffect)(function(){return u&&r({type:n.FETCH_USER,payload:{uid:u}}),function(){r({type:n.RESET_USER})}},[r,u]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Re.a,{color:"light",light:!0},l.a.createElement(ae.a,{tag:Ae.b,to:"/"},l.a.createElement(ne.a,{icon:re.a})," Go back"),l.a.createElement(Ut,null),l.a.createElement(ae.a,{onClick:s},l.a.createElement(ne.a,{icon:re.p}))),a?l.a.createElement(l.a.Fragment,null,l.a.createElement(kt,{userInfo:a}),l.a.createElement("br",null),l.a.createElement(yt,{userInfo:a}),l.a.createElement("br",null),l.a.createElement(Ct,{userInfo:a})):l.a.createElement(nt.a,{color:"danger"},"This user does not exist."))},Rt=function(){return l.a.createElement("div",{className:"container"},l.a.createElement(Ae.a,null,l.a.createElement(Z,null,l.a.createElement(ge,null),l.a.createElement(Ue.Route,{exact:!0,path:"/",component:tt}),l.a.createElement(Ue.Route,{exact:!0,path:"/:uid",component:xt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(Rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,a){e.exports={header:"UserStory_header__1tc8G",toggle_input:"UserStory_toggle_input__JHXrr",display_medal:"UserStory_display_medal__22hJs",medal:"UserStory_medal__ap0c_",is_closed:"UserStory_is_closed__3W_SB"}},64:function(e,t,a){e.exports={gold:"UserTasks_gold__196BT",silver:"UserTasks_silver__1ViV4",bronze:"UserTasks_bronze__mYN2N",custom_input_td:"UserTasks_custom_input_td__y-1Rp",avator:"UserTasks_avator__3R6Qm"}}},[[224,1,2]]]);
//# sourceMappingURL=main.147a1b35.chunk.js.map