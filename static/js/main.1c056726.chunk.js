(this["webpackJsonptaiga-extention"]=this["webpackJsonptaiga-extention"]||[]).push([[0],{104:function(e,t,a){e.exports={fresh:"Tomato_fresh__2s5Ye",stale:"Tomato_stale__3bjHh",bl:"Tomato_bl__2-LRw",br:"Tomato_br__2_ZQQ"}},105:function(e,t,a){e.exports={header:"UserStory_header__3lGFX",display_medal:"UserStory_display_medal__3t53K",medal:"UserStory_medal__2Zi1f",is_closed:"UserStory_is_closed__2ABQp"}},145:function(e,t,a){e.exports={btn:"TaskTimerButton_btn__3yv2h"}},184:function(e,t,a){e.exports={gold:"UserTasks_gold__3HGjY",silver:"UserTasks_silver__1pI-2",bronze:"UserTasks_bronze__3Y2bu",custom_input_td:"UserTasks_custom_input_td__2hLT8"}},188:function(e,t,a){e.exports={total:"TaskTotalHours_total__sFAJH",is_over:"TaskTotalHours_is_over__3dHJn"}},273:function(e,t,a){e.exports={header:"Controller_header__33lvE"}},275:function(e,t,a){e.exports={input_group:"ToggleNumberInput_input_group__1wkB8"}},284:function(e,t,a){e.exports=a.p+"static/media/tomato.c392a271.png"},318:function(e,t,a){e.exports=a(580)},323:function(e,t,a){},352:function(e,t,a){},580:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),o=a(33),s=a.n(o),l=(a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(23)),i=a(38),u=a(22),m=a(623),_=a(44),d=a(8),E={setUrl:Object(u.b)("/setting/setUrl")},p=Object(u.c)({url:"",pid:"",mid:"",custom_eid:"",custom_rid:""},(function(e){return e.addCase(E.setUrl,(function(e,t){var a=t.payload;return Object(d.a)({},e,{url:a})}))})),O=function(e){return e.setting.url},f=function(){return Object(l.c)(O)},b={fetchList:Object(u.b)("/project/fetchList"),setList:Object(u.b)("/project/setList")},T=Object(u.c)({list:[],loading:!1,current:null},(function(e){return e.addCase(b.fetchList,(function(e){return Object(d.a)({},e,{loading:!0})})).addCase(b.setList,(function(e,t){var a=t.payload;return Object(d.a)({},e,{list:a,loading:!1})}))})),S=function(e){return e.project.list},v=function(){return Object(l.c)(S)},y={fetchList:Object(u.b)("/userStory/fetchList"),setList:Object(u.b)("/userStory/setList"),addTag:Object(u.b)("/userStory/addTag"),removeTag:Object(u.b)("/userStory/removeTag")},k=Object(u.c)({list:[],loading:!1},(function(e){return e.addCase(y.fetchList,(function(e){return Object(d.a)({},e,{loading:!0})})).addCase(y.setList,(function(e,t){var a=t.payload;return Object(d.a)({},e,{loading:!1,list:a})}))})),j=function(e){return e.userStory.list},h=function(){return Object(l.c)(j)},g={setMid:Object(u.b)("/milestone/setMid")},C=Object(u.c)({mid:""},(function(e){return e.addCase(g.setMid,(function(e,t){var a=t.payload;return Object(d.a)({},e,{mid:String(a)})}))})),A=function(e){return e.milestone.mid},D=function(){return Object(l.c)(A)},M={epicDone:Object(u.b)("/common/epicDone"),updateData:Object(u.b)("/common/updateData")},R=Object(u.c)({updatedTime:0},(function(e){return e.addCase(M.updateData,(function(e){return Object(d.a)({},e,{updatedTime:Date.now()})}))})),I=function(e){return e.common.updatedTime},N=function(){return Object(l.c)(I)},x={play:Object(u.b)("/alarm/play")},U=Object(u.c)({emitAt:0,type:""},(function(e){return e.addCase(x.play,(function(e,t){var a=t.payload.type;return Object(d.a)({},e,{emitAt:Date.now(),type:a})}))})),P=function(e){return e.alarm},L=function(){return Object(l.c)(P)},w=Object(_.combineReducers)({setting:p,project:T,userStory:k,milestone:C,common:R,alarm:U}),K=a(624),F=a(290),H=a(591),B=a(128),z=a(592),Y=a(265),V={common:M,project:b,setting:E,userStory:y},G=a(263),J=a(264),Z=function(e,t,a){return Object(G.fromFetch)(function(e,t){return"".concat(e.replace(/[\xa5/]$/,""),"/api/v1/").concat(t)}(e,t),Object(d.a)({},a,{headers:Object(d.a)({"x-disable-pagination":"true"},null===a||void 0===a?void 0:a.headers)})).pipe(Object(J.a)((function(e){return e.json()})))},W=[function(e,t){return e.pipe(Object(F.a)("/project/fetchList"),Object(H.a)((function(){var e=t.value.setting.url;return Z(e,"projects")})),Object(B.a)((function(e){return V.project.setList(e)})),Object(z.a)((function(e){return console.log("err",e),Object(Y.a)(M.epicDone())})))}],q=[function(e,t){return e.pipe(Object(F.a)("/userStory/fetchList"),Object(H.a)((function(e){var a=t.value.setting.url;if("/userStory/fetchList"===e.type){var n=e.payload.milestone;return Z(a,"userstories?milestone=".concat(n))}return[]})),Object(B.a)((function(e){return V.userStory.setList(e)})),Object(z.a)((function(e){return console.log("err",e),Object(Y.a)(M.epicDone())})))}],Q=K.a.apply(void 0,Object(i.a)(W).concat(Object(i.a)(q))),X=Object(m.a)(),$=Object(u.a)({reducer:w,middleware:[].concat(Object(i.a)(Object(u.d)()),[X])});X.run(Q),function(e){e.URL="taiga_url",e.TIMER_ID="taiga_timer_id",e.PID="taiga_pid",e.MID="taiga_mid",e.TASK_ID="taiga_task_id",e.CUSTOM_EID="taiga_custom_eid",e.CUSTOM_RID="taiga_custom_rid",e.BIZ_DAYS="taiga_biz_days",e.REJECT_TASK_STATUS_IDS="reject_task_status_ids",e.USERNAME="taiga_username",e.PASSWORD="taiga_password",e.POMODORO_DATE="taiga_pomodoro_date",e.POMODORO_NUMBER="taiga_pomodoro_number",e.POMODORO_USED_NUMBER="taiga_pomodoro_used_number",e.TIMELIMIT_CLOSE_TASK="taiga_timelimit_close_task"}(n||(n={}));var ee,te=function(e){return localStorage.getItem(e)||""},ae=function(e){return te(e)},ne=(a(352),a(69)),re=a(12),ce=a(6),oe=a.n(ce),se=a(3),le=a.n(se),ie=a(14),ue=a.n(ie),me=a(18),_e=a.n(me);!function(e){e.SET_TOKEN="SET_TOKEN",e.SET_TIMER_ID="SET_TIMER_ID",e.ADD_FB_TIMER="ADD_FB_TIMER",e.DEL_FB_TIMER="DEL_FB_TIMER",e.SET_URL="SET_URL",e.SIGN_IN="SIGN_IN",e.SET_AUTH_TOKEN="SET_AUTH_TOKEN",e.SET_AUTH_ERROR="SET_AUTH_ERROR",e.SIGN_OUT="SIGN_OUT",e.SET_PID="SET_PID",e.FETCH_PROJECT="FETCH_PROJECT",e.SET_PROJECT="SET_PROJECT",e.FETCH_MILESTONES="FETCH_MILESTONES",e.SET_MID="SET_MID",e.SET_MILESTONES="SET_MILESTONES",e.SET_MILESTONE="SET_MILESTONE",e.SET_CUSTOM_EID="SET_CUSTOM_EID",e.SET_CUSTOM_RID="SET_CUSTOM_RID",e.FETCH_CUSTOM_ATTRS="FETCH_CUSTOM_ATTRS",e.SET_CUSTOM_ATTRS="SET_CUSTOM_ATTRS",e.SET_CUSTOM_ATTR_E="SET_CUSTOM_ATTR_E",e.SET_CUSTOM_ATTR_R="SET_CUSTOM_ATTR_R",e.SET_BIZ_DAYS="SET_BIZ_DAYS",e.ADD_BIZ_DAY="ADD_BIZ_DAY",e.REMOVE_BIZ_DAY="REMOVE_BIZ_DAY",e.FETCH_TASKS="FETCH_TASKS",e.SET_TASKS="SET_TASKS",e.SET_TASK_ID="SET_TASK_ID",e.RESET_TASK_ID="RESET_TASK_ID",e.SET_TASK="SET_TASK",e.SET_USER_TASKS="SET_USER_TASKS",e.PATCH_TASK="PATCH_TASK",e.FETCH_TASK_STATUSES="FETCH_TASK_STATUSES",e.SET_TASK_STATUSES="SET_TASK_STATUSES",e.SET_ACTIVE_TASK_STATUSES="SET_ACTIVE_TASK_STATUSES",e.FETCH_CUSTOM_VALUE_MAP="FETCH_CUSTOM_VALUE_MAP",e.SET_CUSTOM_VALUE_MAP="SET_CUSTOM_VALUE_MAP",e.PATCH_CUSTOM_VALUE="PATCH_CUSTOM_VALUE",e.FETCH_USER="FETCH_USER",e.SET_USER="SET_USER",e.RESET_USER="RESET_USER",e.SET_REJECT_TASK_STATUS_IDS="SET_REJECT_TASK_STATUS_IDS",e.ADD_REJECT_TASK_STATUS_ID="ADD_REJECT_TASK_STATUS_ID",e.REMOVE_REJECT_TASK_STATUS_ID="REMOVE_REJECT_TASK_STATUS_ID",e.OPEN_CONTROLLER="OPEN_CONTROLLER",e.CLOSE_CONTROLLER="CLOSE_CONTROLLER",e.UPDATE_DATA="UPDATE_DATA",e.ADD_POMODORO="ADD_POMODORO",e.USE_POMODORO="USE_POMODORO",e.RESET_POMODORO="RESET_POMODORO",e.RESTORE_POMODORO="RESTORE_POMODORO",e.CALC_POMODORO_TOTAL="CALC_POMODORO_TOTAL",e.LOAD_POMODORO_TOTALS="LOAD_POMODORO_TOTALS",e.SET_POMODORO_TOTALS="SET_POMODORO_TOTALS",e.LOADED="LOADED",e.SET_POMODORO_STATE="SET_POMODORO_STATE",e.SET_POMODORO_MODE="SET_POMODORO_MODE",e.SET_TIMELIMIT_CLOSE_TASK="SET_TIMELIMIT_CLOSE_TASK",e.SET_IN_PROGRESS_TASK_STATUS_ID="SET_IN_PROGRESS_TASK_STATUS_ID",e.SET_POMODORO_LIVE_COUNT="SET_POMODORO_LIVE_COUNT"}(ee||(ee={}));var de,Ee,pe,Oe=a(20),fe=a(131),be=a(266),Te=a(141),Se=a(66),ve=a(190),ye=a(142),ke=a(132);!function(e){e.STOPPED="stopped",e.RUNNING="running",e.PAUSED="paused"}(Ee||(Ee={})),function(e){e.FOCUS="Focusing",e.SHORT="Short break",e.LONG="Long break"}(pe||(pe={}));var je,he=(de={},Object(Oe.a)(de,pe.FOCUS,25),Object(Oe.a)(de,pe.SHORT,5),Object(Oe.a)(de,pe.LONG,15),de);!function(e){e.STATE="pomodoro_state",e.MODE="pomodoro_mode",e.CHECKPOINT_START_AT="pomodoro_checkpoint_start_at",e.CHECKPOINT_ELAPSED="pomodoro_checkpoint_elapsed"}(je||(je={}));var ge,Ce,Ae=new(function(e){function t(e){var a;return Object(fe.a)(this,t),(a=Object(Te.a)(this,Object(Se.a)(t).call(this))).state=Ee.STOPPED,a.mode=pe.FOCUS,a.duration=60*he[pe.FOCUS],a.tick=60,a.checkpointStartAt=NaN,a.checkpointElapsed=0,a.expireTimeout=null,a.tickInterval=null,a.tickOffsetTimeout=null,a.restoreExpired=!1,a.estimateCompletedAt=new Date,a.tick=e,a.restoreStorage(),a}return Object(ye.a)(t,e),Object(be.a)(t,[{key:"on",value:function(e,a){return Object(ve.a)(Object(Se.a)(t.prototype),"on",this).call(this,e,a)}},{key:"once",value:function(e,a){return Object(ve.a)(Object(Se.a)(t.prototype),"once",this).call(this,e,a)}},{key:"start",value:function(){this.isStopped&&(this.setExpireTimeout(this.duration),this.setTickInterval(this.tick),this.state=Ee.RUNNING,this.checkpointStartAt=Date.now(),this.checkpointElapsed=0,this.emit("start",this.status),this.saveStorage())}},{key:"stop",value:function(){this.isStopped||(this.clearExpireTimeout(),this.clearTickInterval(),this.checkpointStartAt=NaN,this.checkpointElapsed=0,this.state=Ee.STOPPED,this.emit("stop",this.status),this.saveStorage())}},{key:"pause",value:function(){if(this.isRunning){this.clearExpireTimeout(),this.clearTickInterval();var e=(Date.now()-this.checkpointStartAt)/1e3;this.checkpointElapsed+=e,this.state=Ee.PAUSED,this.emit("pause",this.status),this.saveStorage()}}},{key:"resume",value:function(){this.isPaused&&(this.setExpireTimeout(this.remaining),this.setTickInterval(this.tick),this.state=Ee.RUNNING,this.checkpointStartAt=Date.now(),this.emit("resume",this.status),this.saveStorage())}},{key:"restart",value:function(){this.stop(),this.start()}},{key:"changeMode",value:function(e,t){var a=this;this.stop(),this.mode=e,this.duration=60*he[e],this.emit("change_mode",this.status),this.saveStorage(),t&&oe.a.defer((function(){a.start()}))}},{key:"setExpireTimeout",value:function(e){var t=this;this.expireTimeout=setTimeout((function(){t.emit("expire",t.status),t.stop()}),1e3*e)}},{key:"clearExpireTimeout",value:function(){this.expireTimeout&&clearTimeout(this.expireTimeout),this.expireTimeout=null}},{key:"setTickInterval",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r=this.status.remaining;if(r<=n)this.setSecTickInterval();else{var c=r%e;c>1&&!a?this.tickOffsetTimeout=setTimeout((function(){t.emit("tick",t.status),t.setTickInterval(e,!0)}),1e3*c):this.tickInterval=setInterval((function(){var e=t.status;t.emit("tick",e),e.remaining<n&&(t.clearTickInterval(),t.setSecTickInterval())}),1e3*e)}}},{key:"setSecTickInterval",value:function(){var e=this;this.tickInterval=setInterval((function(){e.emit("tick",e.status)}),1e3)}},{key:"clearTickInterval",value:function(){this.tickInterval&&clearInterval(this.tickInterval),this.tickInterval=null,this.tickOffsetTimeout&&clearTimeout(this.tickOffsetTimeout),this.tickOffsetTimeout=null}},{key:"saveStorage",value:function(){localStorage.setItem(je.STATE,this.state),localStorage.setItem(je.MODE,this.mode),localStorage.setItem(je.CHECKPOINT_START_AT,Number.isNaN(this.checkpointStartAt)?"":String(this.checkpointStartAt)),localStorage.setItem(je.CHECKPOINT_ELAPSED,String(this.checkpointElapsed))}},{key:"restoreStorage",value:function(){var e,t=localStorage.getItem(je.STATE),a=localStorage.getItem(je.MODE),n=localStorage.getItem(je.CHECKPOINT_START_AT),r=localStorage.getItem(je.CHECKPOINT_ELAPSED);if(e=t,oe.a.includes(oe.a.values(Ee),e)&&function(e){return oe.a.includes(oe.a.values(pe),e)}(a)){var c=t,o=a,s=60*he[o];switch(c){case Ee.STOPPED:this.changeMode(o);break;case Ee.PAUSED:var l=Number(r);l<1e3*s&&(this.state=c,this.mode=o,this.duration=s,this.checkpointElapsed=l);break;case Ee.RUNNING:var i=Number(n),u=Number(r);if(i>0)this.mode=o,this.duration=s,Date.now()-i+1e3*u<1e3*s?(this.state=Ee.RUNNING,this.checkpointStartAt=i,this.checkpointElapsed=u,this.setExpireTimeout(this.remaining),this.setTickInterval(this.tick)):(this.stop(),this.estimateCompletedAt=new Date(i+1e3*(s-u)),this.restoreExpired=!0)}}}},{key:"isStopped",get:function(){return this.state===Ee.STOPPED}},{key:"isRunning",get:function(){return this.state===Ee.RUNNING}},{key:"isPaused",get:function(){return this.state===Ee.PAUSED}},{key:"remaining",get:function(){return Math.max(this.duration-this.elapsed,0)}},{key:"elapsed",get:function(){var e=0;return this.checkpointStartAt&&this.isRunning&&(e=(Date.now()-this.checkpointStartAt)/1e3),this.checkpointElapsed+e}},{key:"status",get:function(){return{state:this.state,duration:this.duration,elapsed:this.elapsed,remaining:this.remaining,checkpointElapsed:this.checkpointElapsed,checkpointStartAt:this.checkpointStartAt,mode:this.mode}}}]),t}(ke.EventEmitter))(60);!function(e){e.URL="taiga_url",e.TIMER_ID="taiga_timer_id",e.PID="taiga_pid",e.MID="taiga_mid",e.TASK_ID="taiga_task_id",e.CUSTOM_EID="taiga_custom_eid",e.CUSTOM_RID="taiga_custom_rid",e.BIZ_DAYS="taiga_biz_days",e.REJECT_TASK_STATUS_IDS="reject_task_status_ids",e.USERNAME="taiga_username",e.PASSWORD="taiga_password",e.POMODORO_DATE="taiga_pomodoro_date",e.POMODORO_NUMBER="taiga_pomodoro_number",e.POMODORO_USED_NUMBER="taiga_pomodoro_used_number",e.TIMELIMIT_CLOSE_TASK="taiga_timelimit_close_task"}(Ce||(Ce={}));var De=function(e){return localStorage.getItem(e)||""},Me=function(e){return De(e)},Re=function(e,t){return t?De("".concat(t,"/").concat(e)):""},Ie=function(e,t){localStorage.setItem(e,t)},Ne=function(e,t,a){return t?Ie("".concat(t,"/").concat(e),a):null},xe={token:null,timer_id:null,url:"",auth_token:"",auth_error:!1,username:"",password:"",user:null,pid:"",project:{},mid:"",custom_eid:"",custom_rid:"",custom_attrs:[],custom_attr_e:{},custom_attr_r:{},biz_days:[],milestones:[],milestone:{},tasks:[],task_id:"",task:null,user_tasks:[],task_statuses:[],active_task_statuses:[],custom_value_map:new WeakMap,reject_task_status_ids:[],updated_time:0,isOpen:!1,pomodoro_date:"",pomodoro_number:0,pomodoro_used_number:0,loaded:!1,pomodoro_daily_totals:[],pomodoro_state:Ee.STOPPED,pomodoro_mode:pe.FOCUS,timelimit_close_task:"",in_progress_task_status_id:"",pomodoro_live_counts:(ge={},Object(Oe.a)(ge,pe.FOCUS,0),Object(Oe.a)(ge,pe.SHORT,0),Object(Oe.a)(ge,pe.LONG,0),ge)},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee.SET_TOKEN:var a=t.payload.token;return Object(d.a)({},e,{token:a});case ee.SET_TIMER_ID:var n=t.payload.timer_id;return Object(d.a)({},e,{timer_id:n});case ee.SET_URL:var r=t.payload.url;return Object(d.a)({},e,{url:r});case ee.SET_PID:var c=t.payload.pid;return Object(d.a)({},e,{pid:c,project:{},mid:"",biz_days:[],custom_attrs:[],milestones:[],custom_value_map:new WeakMap});case ee.SET_PROJECT:var o=t.payload.project;return Object(d.a)({},e,{project:o});case ee.SET_MID:var s=t.payload.mid;return Object(d.a)({},e,{mid:s,milestone:{},tasks:[]});case ee.SET_MILESTONES:var l=t.payload.milestones;return Object(d.a)({},e,{milestones:l});case ee.SET_MILESTONE:var u=t.payload.milestone;return Object(d.a)({},e,{milestone:u});case ee.SET_CUSTOM_EID:var m=t.payload.custom_eid;return Object(d.a)({},e,{custom_eid:m});case ee.SET_CUSTOM_ATTRS:var _=t.payload.custom_attrs;return Object(d.a)({},e,{custom_attrs:_});case ee.SET_CUSTOM_ATTR_E:var E=t.payload.custom_attr_e;return Object(d.a)({},e,{custom_attr_e:E});case ee.SET_CUSTOM_ATTR_R:var p=t.payload.custom_attr_r;return Object(d.a)({},e,{custom_attr_r:p});case ee.SET_CUSTOM_RID:var O=t.payload.custom_rid;return Object(d.a)({},e,{custom_rid:O});case ee.SET_BIZ_DAYS:var f=t.payload.biz_days;return Object(d.a)({},e,{biz_days:f});case ee.ADD_BIZ_DAY:var b=t.payload.biz_day,T=oe.a.chain([].concat(Object(i.a)(e.biz_days),[b])).uniq().sort().value();return Object(d.a)({},e,{biz_days:T});case ee.REMOVE_BIZ_DAY:var S=t.payload.biz_day,v=oe.a.reject(Object(i.a)(e.biz_days),(function(e){return e===S}));return Object(d.a)({},e,{biz_days:v});case ee.SET_TASKS:var y=t.payload.tasks;return Object(d.a)({},e,{tasks:y});case ee.SET_TASK_ID:var k=t.payload.task_id;return Object(d.a)({},e,{task_id:k,task:null});case ee.RESET_TASK_ID:return Object(d.a)({},e,{task_id:"",task:null});case ee.SET_TASK:var j=t.payload.task;return Object(d.a)({},e,{task:j});case ee.SET_USER_TASKS:var h=t.payload.user_tasks;return Object(d.a)({},e,{user_tasks:h});case ee.SET_TASK_STATUSES:var g=t.payload.task_statuses;return Object(d.a)({},e,{task_statuses:g});case ee.SET_ACTIVE_TASK_STATUSES:var C=t.payload.active_task_statuses;return Object(d.a)({},e,{active_task_statuses:C});case ee.SET_CUSTOM_VALUE_MAP:var A=t.payload.custom_value_map;return Object(d.a)({},e,{custom_value_map:A});case ee.SET_USER:var D=t.payload.user;return Object(d.a)({},e,{user:D});case ee.RESET_USER:return Object(d.a)({},e,{user:null,user_tasks:[]});case ee.SET_REJECT_TASK_STATUS_IDS:var M=t.payload.reject_task_status_ids;return Object(d.a)({},e,{reject_task_status_ids:M});case ee.ADD_REJECT_TASK_STATUS_ID:var R=t.payload.reject_task_status_id,I=oe.a.chain([].concat(Object(i.a)(e.reject_task_status_ids),[R])).compact().uniq().value();return Object(d.a)({},e,{reject_task_status_ids:I});case ee.REMOVE_REJECT_TASK_STATUS_ID:var N=t.payload.reject_task_status_id,x=oe.a.reject(Object(i.a)(e.reject_task_status_ids),(function(e){return e===N}));return Object(d.a)({},e,{reject_task_status_ids:x});case ee.OPEN_CONTROLLER:return Object(d.a)({},e,{isOpen:!0});case ee.CLOSE_CONTROLLER:return Object(d.a)({},e,{isOpen:!1});case ee.UPDATE_DATA:return Object(d.a)({},e,{updated_time:Date.now()});case ee.SIGN_IN:var U=t.payload,P=U.username,L=U.password;return Object(d.a)({},e,{username:P,password:L,auth_error:!1});case ee.SET_AUTH_TOKEN:var w=t.payload.auth_token;return Object(d.a)({},e,{auth_token:w});case ee.SET_AUTH_ERROR:return Object(d.a)({},e,{auth_error:!0});case ee.SIGN_OUT:return Object(d.a)({},e,{auth_token:"",username:"",password:""});case ee.ADD_POMODORO:var K=e.pomodoro_number+1;return Object(d.a)({},e,{pomodoro_number:K});case ee.USE_POMODORO:var F=t.payload.used_number,H=Math.max(0,e.pomodoro_used_number+F);return Object(d.a)({},e,{pomodoro_used_number:H});case ee.RESET_POMODORO:var B=t.payload.pomodoro_date;return Object(d.a)({},e,{pomodoro_number:0,pomodoro_used_number:0,pomodoro_date:B});case ee.RESTORE_POMODORO:var z=t.payload,Y=z.pomodoro_date,V=z.pomodoro_number,G=z.pomodoro_used_number;return Object(d.a)({},e,{pomodoro_date:Y,pomodoro_number:V,pomodoro_used_number:G});case ee.SET_POMODORO_TOTALS:var J=t.payload.pomodoro_daily_totals;return Object(d.a)({},e,{pomodoro_daily_totals:J});case ee.LOADED:return Object(d.a)({},e,{loaded:!0});case ee.SET_POMODORO_STATE:var Z=t.payload.pomodoro_state;return Object(d.a)({},e,{pomodoro_state:Z});case ee.SET_POMODORO_MODE:var W=t.payload.pomodoro_mode;return Object(d.a)({},e,{pomodoro_mode:W});case ee.SET_TIMELIMIT_CLOSE_TASK:var q=t.payload.timelimit_close_task;return Object(d.a)({},e,{timelimit_close_task:q});case ee.SET_IN_PROGRESS_TASK_STATUS_ID:var Q=t.payload.task_status_id;return Object(d.a)({},e,{in_progress_task_status_id:Q});case ee.SET_POMODORO_LIVE_COUNT:var X=t.payload,$=X.mode,te=X.value;return Object(d.a)({},e,{pomodoro_live_counts:Object(d.a)({},e.pomodoro_live_counts,Object(Oe.a)({},$,te))});default:return e}},Pe=function(e,t,a,n){return function(r){t(r),a(r,n,e)}},Le=a(13),we=a(11),Ke=function(e){var t=e.icon,a=e.message;return c.a.createElement("div",{className:"d-flex"},c.a.createElement("h2",{className:"mr-2"},c.a.createElement(Le.a,{icon:t})),c.a.createElement("div",null,a))},Fe=function(e){var t=e.title,a=e.body,n=e.icon;return c.a.createElement("div",{className:"d-flex"},c.a.createElement("img",{src:n,style:{width:"48px",height:"48px"},alt:""}),c.a.createElement("div",{className:"ml-2"},c.a.createElement("h5",null,t),c.a.createElement("p",null,a)))},He=function(e){ne.b.success(c.a.createElement(Ke,{icon:we.d,message:e}))},Be=function(e){ne.b.error(c.a.createElement(Ke,{icon:we.e,message:e}))},ze=function(e){var t=e.title,a=e.body,n=e.icon;Object(ne.b)(c.a.createElement(Fe,{title:t,body:a,icon:n}))},Ye=a(57),Ve=a.n(Ye),Ge=function(e,t,a){oe.a.defer((function(){var e=a(),t=e.pomodoro_date,n=e.pomodoro_number,r=e.pomodoro_used_number;Ie(Ce.POMODORO_DATE,t),Ie(Ce.POMODORO_NUMBER,String(n)),Ie(Ce.POMODORO_USED_NUMBER,String(r))}))},Je=new(function(e){function t(){var e;return Object(fe.a)(this,t),(e=Object(Te.a)(this,Object(Se.a)(t).call(this,"TaigaPomodoroDatabase"))).items=void 0,e.totals=void 0,e.version(1).stores({items:"++id, completedAt, duration, pure, dateKey",totals:"++id, date, value, pureValue, &dateKey, dayOfWeek"}),e.items=e.table("items"),e.totals=e.table("totals"),e}return Object(ye.a)(t,e),t}(a(267).a)),Ze=a(268),We=a.n(Ze),qe=a(143),Qe=a.n(qe);a(581),a(373);We.a.config();var Xe=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_apiKey:"AIzaSyDscSWT2haNjkDvdx29dz1mIxX0LX3PLJM",REACT_APP_authDomain:"taiga-ext.firebaseapp.com",REACT_APP_databaseURL:"https://taiga-ext.firebaseio.com",REACT_APP_projectId:"taiga-ext",REACT_APP_storageBucket:"taiga-ext.appspot.com",REACT_APP_messagingSenderId:"670370401412",REACT_APP_appId:"1:670370401412:web:c1a69635a444ff4f",REACT_APP_VapidKey:"BOOlMIIx0P4qjkh4KEwpEunUeeuVvaYelqqcsUGnimb7LBc6GyDECYhUwe7vCdJEDDiNExg-annFh4kXrqiIank"}),$e=Xe.REACT_APP_apiKey,et=Xe.REACT_APP_VapidKey,tt={apiKey:$e,authDomain:Xe.REACT_APP_authDomain,databaseURL:Xe.REACT_APP_databaseURL,projectId:Xe.REACT_APP_projectId,storageBucket:Xe.REACT_APP_storageBucket,messagingSenderId:Xe.REACT_APP_messagingSenderId,appId:Xe.REACT_APP_appId};Qe.a.initializeApp(tt);var at=null;try{at=Qe.a.messaging()}catch(hr){console.log(hr)}var nt=at;navigator.serviceWorker&&nt&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){oe.a.get(nt,"registrationToUse")||nt.useServiceWorker(e),nt.usePublicVapidKey(et||""),nt.onTokenRefresh((function(){return ue.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.a.awrap(nt.getToken());case 2:e.sent;case 3:case"end":return e.stop()}}))})),nt.getToken().then((function(e){e}))}));var rt=Qe.a.firestore().collection("timers");nt&&nt.requestPermission().then((function(){console.log("Notification permission granted.")})).catch((function(e){console.log("Unable to get permission to notify.",e)}));var ct=function(e,t,a,n,r){var c,o;return ue.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ue.a.awrap(rt.add({title:e,body:t,remaining:a,token:n,icon:"./tomato.png",click_action:window.location.href,mode:r}));case 2:return c=s.sent,o=c.id,s.abrupt("return",o);case 5:case"end":return s.stop()}}))},ot=function(e,t,a){if(e.type===ee.DEL_FB_TIMER){var n=a().timer_id;n&&(r=n,rt.doc(r).delete(),t({type:ee.SET_TIMER_ID,payload:{timer_id:null}}))}var r},st=function(e,t,a){return Ve.a.get("".concat(dt(e),"/").concat(t),a)},lt=function(e,t,a,n){return Ve.a.post("".concat(dt(e),"/").concat(t),a,n)},it=function(e,t,a,n){return Ve.a.patch("".concat(dt(e),"/").concat(t),a,n)},ut=function(e){var t;try{t=e.response?e.response.data._error_message:"error"}catch(hr){t=hr.message||hr}Be(t)},mt=function(e,t,a){switch(e.type){case ee.FETCH_PROJECT:return void function(e,t,a){var n,r,c,o,s;ue.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==ee.FETCH_PROJECT){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.pid,!r||!c){l.next=10;break}return l.next=7,ue.a.awrap(st(r,"projects/".concat(c)));case 7:o=l.sent,s=o.data,t({type:ee.SET_PROJECT,payload:{project:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ut(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case ee.FETCH_MILESTONES:return void function(e,t,a){var n,r,c,o,s;ue.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==ee.FETCH_MILESTONES){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.project,!r||!c){l.next=10;break}return l.next=7,ue.a.awrap(st(r,"milestones",{params:{project:c}}));case 7:o=l.sent,s=o.data,t({type:ee.SET_MILESTONES,payload:{milestones:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ut(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case ee.FETCH_TASKS:return void function(e,t,a){var n,r,c,o,s,l,i,u,m,_;ue.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e.type!==ee.FETCH_TASKS){d.next=17;break}if(d.prev=1,n=a(),r=n.url,c=e.payload,o=c.milestone,s=c.reject_task_status_ids,l=c.timelimit_close_task,!(r&&o&&l)){d.next=12;break}return i=_e()(l),d.next=8,ue.a.awrap(st(r,"tasks",{headers:{"x-disable-pagination":!0},params:{milestone:o}}));case 8:u=d.sent,m=u.data,_=oe.a.chain(m).reject((function(e){return oe.a.includes(s,String(e.status))})).reject((function(e){return e.is_closed&&_e()(e.finished_date).diff(i)<0})).value(),t({type:ee.SET_TASKS,payload:{tasks:_}});case 12:d.next=17;break;case 14:d.prev=14,d.t0=d.catch(1),ut(d.t0);case 17:case"end":return d.stop()}}),null,null,[[1,14]])}(e,t,a);case ee.FETCH_TASK_STATUSES:return void function(e,t,a){var n,r,c,o,s;ue.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==ee.FETCH_TASK_STATUSES){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.project,!r||!c){l.next=10;break}return l.next=7,ue.a.awrap(st(r,"task-statuses",{params:{project:c}}));case 7:o=l.sent,s=o.data,t({type:ee.SET_TASK_STATUSES,payload:{task_statuses:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ut(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case ee.FETCH_CUSTOM_ATTRS:return void function(e,t,a){var n,r,c,o,s;ue.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==ee.FETCH_CUSTOM_ATTRS){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.project,!r||!c){l.next=10;break}return l.next=7,ue.a.awrap(st(r,"task-custom-attributes",{params:{project:c}}));case 7:o=l.sent,s=o.data,t({type:ee.SET_CUSTOM_ATTRS,payload:{custom_attrs:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ut(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case ee.FETCH_CUSTOM_VALUE_MAP:return void function(e,t,a){var n,r,c,o,s,l;ue.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.type!==ee.FETCH_CUSTOM_VALUE_MAP){i.next=16;break}if(i.prev=1,n=a(),r=n.url,c=n.custom_eid,o=n.custom_rid,s=e.payload.tasks,!(r&&s.length&&c&&o)){i.next=11;break}return i.t0=WeakMap,i.next=8,ue.a.awrap(Promise.all(s.map((function(e){var t,a;return ue.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ue.a.awrap(st(r,"tasks/custom-attributes-values/".concat(e.id)));case 2:return t=n.sent,a=t.data,n.abrupt("return",[e,a]);case 5:case"end":return n.stop()}}))}))));case 8:i.t1=i.sent,l=new i.t0(i.t1),t({type:ee.SET_CUSTOM_VALUE_MAP,payload:{custom_value_map:l}});case 11:i.next=16;break;case 13:i.prev=13,i.t2=i.catch(1),ut(i.t2);case 16:case"end":return i.stop()}}),null,null,[[1,13]])}(e,t,a);case ee.FETCH_USER:return void function(e,t,a){var n,r,c,o,s;ue.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==ee.FETCH_USER){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.uid,!r||!c){l.next=10;break}return l.next=7,ue.a.awrap(st(r,"users/".concat(c)));case 7:o=l.sent,s=o.data,t({type:ee.SET_USER,payload:{user:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ut(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case ee.PATCH_CUSTOM_VALUE:return void function(e,t,a){var n,r,c,o,s,l,i,u,m,_,E,p,O,f;ue.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(e.type!==ee.PATCH_CUSTOM_VALUE){b.next=20;break}if(b.prev=1,n=a(),r=n.url,c=n.custom_value_map,o=n.tasks,s=n.in_progress_task_status_id,l=e.payload,i=l.id,u=l.key,m=l.value,_=l.version,E=o.find((function(e){return e.id===i})),!(r&&i&&u&&E&&c.has(E))){b.next=15;break}if(!(p=c.get(E))){b.next=15;break}return O=p.attributes_values,b.next=11,ue.a.awrap(it(r,"tasks/custom-attributes-values/".concat(i),{attributes_values:Object(d.a)({},O,Object(Oe.a)({},u,String(m))),version:_}));case 11:e.meta&&e.meta.update_status&&m>0&&s&&!E.is_closed&&E.status!==Number(s)&&t({type:ee.PATCH_TASK,payload:{key:"status",value:s,id:E.id}}),e.meta&&e.meta.use_pomodoro&&(f=e.meta.use_pomodoro.used_number,t({type:ee.USE_POMODORO,payload:{used_number:f}})),t({type:ee.UPDATE_DATA}),He("Custom value updated. [".concat(m,"]"));case 15:b.next=20;break;case 17:b.prev=17,b.t0=b.catch(1),ut(b.t0);case 20:case"end":return b.stop()}}),null,null,[[1,17]])}(e,t,a);case ee.SIGN_IN:return void function(e,t,a){var n,r,c,o,s,l,i;ue.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e.type!==ee.SIGN_IN){u.next=20;break}if(u.prev=1,n=a(),r=n.url,c=e.payload,o=c.username,s=c.password,!(r&&o&&s)){u.next=13;break}return u.next=7,ue.a.awrap(lt(r,"auth",{username:o,password:s,type:"normal"}));case 7:l=u.sent,i=l.data.auth_token,t({type:ee.SET_AUTH_TOKEN,payload:{auth_token:i}}),Ie(Ce.USERNAME,o),Ie(Ce.PASSWORD,s),He("".concat(o," signed in."));case 13:u.next=20;break;case 15:u.prev=15,u.t0=u.catch(1),t({type:ee.SET_AUTH_ERROR}),oe.a.get(u.t0,"response.data._err_message")&&t({type:ee.SIGN_OUT}),ut(u.t0);case 20:case"end":return u.stop()}}),null,null,[[1,15]])}(e,t,a);case ee.PATCH_TASK:return void function(e,t,a){var n,r,c,o,s,l,i,u,m;ue.a.async((function(_){for(;;)switch(_.prev=_.next){case 0:if(e.type!==ee.PATCH_TASK){_.next=15;break}if(_.prev=1,n=a(),r=n.url,c=n.tasks,o=e.payload,s=o.id,l=o.key,i=o.value,u=c.find((function(e){return e.id===s})),!(r&&s&&l&&u)){_.next=10;break}return _.next=8,ue.a.awrap(it(r,"tasks/".concat(s),(m={},Object(Oe.a)(m,l,i),Object(Oe.a)(m,"version",u.version),m)));case 8:t({type:ee.UPDATE_DATA}),He("Task updated. [".concat(l,"=").concat(i,"]"));case 10:_.next=15;break;case 12:_.prev=12,_.t0=_.catch(1),ut(_.t0);case 15:case"end":return _.stop()}}),null,null,[[1,12]])}(e,t,a);case ee.SIGN_OUT:return localStorage.removeItem(Ce.USERNAME),localStorage.removeItem(Ce.PASSWORD),void(Ve.a.defaults.headers.common.Authorization&&delete Ve.a.defaults.headers.common.Authorization);case ee.SET_AUTH_TOKEN:return void function(e,t,a){if(e.type===ee.SET_AUTH_TOKEN){var n=e.payload.auth_token;Ve.a.defaults.headers.common.Authorization="Bearer ".concat(n)}}(e);case ee.SET_URL:return void function(e,t,a){if(e.type===ee.SET_URL){var n=e.payload.url;Ie(Ce.URL,n)}}(e);case ee.SET_PID:!function(e,t,a){if(e.type===ee.SET_PID){var n=e.payload.pid;Ie(Ce.PID,n),localStorage.removeItem(Ce.MID);var r=Re(Ce.CUSTOM_EID,n),c=Re(Ce.CUSTOM_RID,n);t({type:ee.SET_CUSTOM_EID,payload:{custom_eid:r}}),t({type:ee.SET_CUSTOM_RID,payload:{custom_rid:c}})}}(e,t);break;case ee.SET_MID:!function(e,t,a){if(e.type===ee.SET_MID){var n=e.payload.mid,r=a().mid;Ie(Ce.MID,n);var c=oe.a.compact(Re(Ce.BIZ_DAYS,n).split(",")).sort();t({type:ee.SET_BIZ_DAYS,payload:{biz_days:c}}),r&&n!==r&&t({type:ee.RESET_TASK_ID});var o=Re(Ce.TIMELIMIT_CLOSE_TASK,n);t({type:ee.SET_TIMELIMIT_CLOSE_TASK,payload:{timelimit_close_task:o}})}}(e,t,a);break;case ee.SET_CUSTOM_EID:!function(e,t,a){if(e.type===ee.SET_CUSTOM_EID){var n=e.payload.custom_eid,r=Me(Ce.PID);Ne(Ce.CUSTOM_EID,r,n)}}(e);break;case ee.SET_CUSTOM_RID:!function(e,t,a){if(e.type===ee.SET_CUSTOM_RID){var n=e.payload.custom_rid,r=Me(Ce.PID);Ne(Ce.CUSTOM_RID,r,n)}}(e);break;case ee.SET_BIZ_DAYS:case ee.ADD_BIZ_DAY:case ee.REMOVE_BIZ_DAY:!function(e,t,a){oe.a.defer((function(){var e=a(),t=e.mid,n=e.biz_days;Ne(Ce.BIZ_DAYS,t,n.join(","))}))}(0,0,a);break;case ee.ADD_REJECT_TASK_STATUS_ID:case ee.REMOVE_REJECT_TASK_STATUS_ID:!function(e,t,a){oe.a.defer((function(){var e=a(),t=e.pid,n=e.reject_task_status_ids;Ne(Ce.REJECT_TASK_STATUS_IDS,t,n.join(","))}))}(0,0,a);break;case ee.ADD_POMODORO:!function(e,t,a){var n,r,c,o,s,l,i,u,m,_,d,E,p;ue.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(e.type!==ee.ADD_POMODORO||!e.meta){O.next=15;break}return n=a(),r=n.url,c=n.task_id,o=n.custom_rid,s=e.meta,l=s.completedAt,i=s.duration,u=s.pure,m=_e()(l).format("YYYY-MM-DD"),O.next=6,ue.a.awrap(Je.items.put({completedAt:l,duration:i,pure:u,dateKey:m}));case 6:if(t({type:ee.CALC_POMODORO_TOTAL,payload:{dateKey:m}}),!c||!o){O.next=15;break}return O.next=10,ue.a.awrap(st(r,"tasks/custom-attributes-values/".concat(c)));case 10:_=O.sent,d=_.data,E=Number(oe.a.get(d,"attributes_values.".concat(o),"0"))+.5,p=d.version,d&&p&&t({type:ee.PATCH_CUSTOM_VALUE,payload:{id:Number(c),key:o,value:E,version:p},meta:{use_pomodoro:{used_number:1},update_status:!0}});case 15:case"end":return O.stop()}}))}(e,t,a),Ge(0,0,a);break;case ee.USE_POMODORO:case ee.RESET_POMODORO:Ge(0,0,a);break;case ee.CALC_POMODORO_TOTAL:!function(e,t,a){var n,r,c,o,s,l,i;ue.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.type!==ee.CALC_POMODORO_TOTAL){a.next=14;break}return n=e.payload,a.next=4,ue.a.awrap(Je.totals.get(n));case 4:return r=a.sent,a.next=7,ue.a.awrap(Je.items.where(n).toArray());case 7:c=a.sent,o=c.length,s=oe.a.filter(c,{pure:!0}).length,l=_e()(n.dateKey,"YYYY-MM-DD").day(),i=_e()(n.dateKey,"YYYY-MM-DD").toDate(),Je.totals.put(Object(d.a)({},r,{},n,{date:i,value:o,pureValue:s,dayOfWeek:l})),t({type:ee.LOAD_POMODORO_TOTALS});case 14:case"end":return a.stop()}}))}(e,t);break;case ee.LOAD_POMODORO_TOTALS:!function(e,t,a){var n;ue.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.a.awrap(Je.totals.toArray());case 2:n=e.sent,t({type:ee.SET_POMODORO_TOTALS,payload:{pomodoro_daily_totals:n}});case 4:case"end":return e.stop()}}))}(0,t);break;case ee.SET_TASK_ID:case ee.RESET_TASK_ID:!function(e,t,a){oe.a.defer((function(){var e=a().task_id;e?Ie(Ce.TASK_ID,e):localStorage.removeItem(Ce.TASK_ID)}))}(0,0,a);break;case ee.SET_TIMELIMIT_CLOSE_TASK:!function(e,t,a){if(e.type===ee.SET_TIMELIMIT_CLOSE_TASK){var n=e.payload.timelimit_close_task,r=!!e.meta&&e.meta.customize,c=a().mid;n&&r&&Ne(Ce.TIMELIMIT_CLOSE_TASK,c,n)}}(e,0,a);break;case ee.ADD_FB_TIMER:!function(e,t,a){var n,r,c,o,s,l,i,u;ue.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e.type!==ee.ADD_FB_TIMER){m.next=7;break}return n=a(),r=n.token,c=n.pomodoro_mode,o=e.payload,s=o.title,l=o.body,i=o.remaining,m.next=5,ue.a.awrap(ct(s,l,i,r,c));case 5:u=m.sent,t({type:ee.SET_TIMER_ID,payload:{timer_id:u}});case 7:case"end":return m.stop()}}))}(e,t,a);break;case ee.DEL_FB_TIMER:ot(e,t,a);break;case ee.SET_TIMER_ID:!function(e,t,a){if(e.type===ee.SET_TIMER_ID){var n=e.payload.timer_id;n?Ie(Ce.TIMER_ID,n):localStorage.removeItem(Ce.TIMER_ID)}}(e)}},_t=function(e){!function(e){var t=Me(Ce.URL),a=Me(Ce.TIMER_ID),n=Me(Ce.PID),r=Me(Ce.MID),c=Re(Ce.CUSTOM_EID,n),o=Re(Ce.CUSTOM_RID,n),s=oe.a.compact(Re(Ce.BIZ_DAYS,r).split(",")).sort(),l=oe.a.compact(Re(Ce.REJECT_TASK_STATUS_IDS,n).split(",")),i=!(t&&n&&r&&c&&o),u=Me(Ce.POMODORO_DATE),m=Number(Me(Ce.POMODORO_NUMBER)||"0"),_=Number(Me(Ce.POMODORO_USED_NUMBER)||"0"),d=Me(Ce.TASK_ID);a&&e({type:ee.SET_TIMER_ID,payload:{timer_id:a}}),t&&e({type:ee.SET_URL,payload:{url:t}}),n&&e({type:ee.SET_PID,payload:{pid:n}}),r&&e({type:ee.SET_MID,payload:{mid:r}}),c&&e({type:ee.SET_CUSTOM_EID,payload:{custom_eid:c}}),o&&e({type:ee.SET_CUSTOM_RID,payload:{custom_rid:o}}),s.length&&e({type:ee.SET_BIZ_DAYS,payload:{biz_days:s}}),l.length&&e({type:ee.SET_REJECT_TASK_STATUS_IDS,payload:{reject_task_status_ids:l}}),d&&e({type:ee.SET_TASK_ID,payload:{task_id:d}}),i&&e({type:ee.OPEN_CONTROLLER}),u&&e({type:ee.RESTORE_POMODORO,payload:{pomodoro_date:u,pomodoro_number:m,pomodoro_used_number:_}}),e({type:ee.LOADED}),e({type:ee.LOAD_POMODORO_TOTALS})}(e),oe.a.defer((function(){!function(e){var t=Me(Ce.USERNAME),a=Me(Ce.PASSWORD);e({type:ee.SIGN_IN,payload:{username:t,password:a}})}(e)}))},dt=function(e){return"".concat(e.replace(/[\xa5/]$/,""),"/api/v1")},Et=function(e,t){return oe.a.find(e,{id:t})},pt=Object(r.createContext)({state:xe,dispatch:function(e){}}),Ot=function(e){var t=e.children,a=f(),n=function(e,t){var a=Object(re.a)(e,2),n=a[0],c=a[1],o=null,s=Object(r.useCallback)((function(e){o&&o(e)}),[o]),l=Object(r.useMemo)((function(){return function(){var e;return{getter:function(){return e},setter:function(t){e=t}}}()}),[]);return l.setter(n),[n,o=Object(r.useCallback)(Pe(l.getter,c,t,s),[])]}(Object(r.useReducer)(Ue,xe),mt),o=Object(re.a)(n,2),s=o[0],l=o[1],i={state:s,dispatch:l};return Object(r.useEffect)((function(){a&&s.pid&&(l({type:ee.FETCH_MILESTONES,payload:{project:s.pid}}),l({type:ee.FETCH_CUSTOM_ATTRS,payload:{project:s.pid}}),l({type:ee.FETCH_TASK_STATUSES,payload:{project:s.pid}}),l({type:ee.FETCH_PROJECT,payload:{pid:s.pid}}))}),[a,s.pid,l]),Object(r.useEffect)((function(){a&&s.mid&&s.milestone.id&&s.timelimit_close_task&&l({type:ee.FETCH_TASKS,payload:{milestone:s.mid,reject_task_status_ids:s.reject_task_status_ids,timelimit_close_task:s.timelimit_close_task}})}),[a,s.mid,s.updated_time,s.reject_task_status_ids,l,s.milestone.id,s.timelimit_close_task]),Object(r.useEffect)((function(){l({type:ee.FETCH_CUSTOM_VALUE_MAP,payload:{tasks:s.tasks}})}),[l,s.tasks,s.custom_eid,s.custom_rid]),Object(r.useEffect)((function(){var e=oe.a.chain(s.task_statuses).reject((function(e){return oe.a.includes(s.reject_task_status_ids,String(e.id))})).orderBy((function(e){return e.order})).value();l({type:ee.SET_ACTIVE_TASK_STATUSES,payload:{active_task_statuses:e}})}),[s.task_statuses,s.reject_task_status_ids,l]),Object(r.useEffect)((function(){var e=Et(s.custom_attrs,Number(s.custom_eid));e&&l({type:ee.SET_CUSTOM_ATTR_E,payload:{custom_attr_e:e}})}),[l,s.custom_attrs,s.custom_eid]),Object(r.useEffect)((function(){var e=Et(s.custom_attrs,Number(s.custom_rid));e&&l({type:ee.SET_CUSTOM_ATTR_R,payload:{custom_attr_r:e}})}),[l,s.custom_attrs,s.custom_rid]),Object(r.useEffect)((function(){var e,t,a=(e=s.milestones,t=s.mid,e.find((function(e){return String(e.id)===t})));a&&l({type:ee.SET_MILESTONE,payload:{milestone:a}})}),[l,s.mid,s.milestones]),Object(r.useEffect)((function(){if(s.tasks.length>0&&s.user){var e=(t=s.tasks,a=s.user.id,oe.a.chain(t).filter({assigned_to:a}).sortBy("user_story").value());l({type:ee.SET_USER_TASKS,payload:{user_tasks:e}})}var t,a}),[l,s.tasks,s.user]),Object(r.useEffect)((function(){_t(l)}),[l]),Object(r.useEffect)((function(){if(s.task_id){var e=s.tasks.find((function(e){return e.id===Number(s.task_id)}));e&&l({type:ee.SET_TASK,payload:{task:e}})}}),[l,s.task_id,s.tasks]),Object(r.useEffect)((function(){var e=s.biz_days[0];if(e&&!s.timelimit_close_task){var t="".concat(_e()(e).local().startOf("day").format("YYYY-MM-DD"),"T12:00");l({type:ee.SET_TIMELIMIT_CLOSE_TASK,payload:{timelimit_close_task:t}})}}),[l,s.biz_days,s.milestone,s.timelimit_close_task]),Object(r.useEffect)((function(){if(s.task_statuses.length>0){var e=s.task_statuses.find((function(e){return"in-progress"===e.slug}));e&&l({type:ee.SET_IN_PROGRESS_TASK_STATUS_ID,payload:{task_status_id:String(e.id)}})}}),[l,s.task_statuses,s.task_statuses.length]),Object(r.useEffect)((function(){nt&&(nt.onTokenRefresh((function(){var e;return ue.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!nt){t.next=5;break}return t.next=3,ue.a.awrap(nt.getToken());case 3:e=t.sent,l({type:ee.SET_TOKEN,payload:{token:e}});case 5:case"end":return t.stop()}}))})),nt.getToken().then((function(e){l({type:ee.SET_TOKEN,payload:{token:e}})})))}),[l]),Object(r.useEffect)((function(){Object.values(pe).forEach((function(e){rt.where("mode","==",e).onSnapshot((function(t){l({type:ee.SET_POMODORO_LIVE_COUNT,payload:{mode:e,value:t.size}})}))}))}),[l]),c.a.createElement(pt.Provider,{value:i},t)},ft=a(599),bt=a(600),Tt=a(603),St=a(604),vt=a(602),yt=a(593),kt=a(594),jt=a(595),ht=a(272),gt=function(e){e.preventDefault()},Ct=function(e){e.stopPropagation()},At=a(139),Dt=function(){return c.a.createElement(At.a,{progress:0,buffer:0,className:"my-auto mx-2 border-0 form-control"})},Mt=function(){var e=v(),t=Object(r.useContext)(pt),a=t.state.pid,n=t.dispatch,o=Object(r.useCallback)((function(e){var t=e.target.value;t&&n({type:ee.SET_PID,payload:{pid:t}})}),[n]);return c.a.createElement(yt.a,{className:"col"},c.a.createElement(kt.a,{addonType:"prepend"},"Project"),oe.a.isEmpty(e)?c.a.createElement(Dt,null):c.a.createElement(jt.a,{value:a,type:"select",onChange:o},c.a.createElement("option",{value:""}," --- "),e.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))},Rt=function(){var e=Object(l.b)(),t=D(),a=Object(r.useContext)(pt),n=a.state.milestones,o=a.dispatch,s=Object(r.useCallback)((function(t){var a=t.target.value;a&&(o({type:ee.SET_MID,payload:{mid:a}}),e(g.setMid(a)))}),[o,e]);return c.a.createElement(yt.a,{className:"col"},c.a.createElement(kt.a,{addonType:"prepend"},"Sprint"),oe.a.isEmpty(n)?c.a.createElement(Dt,null):c.a.createElement(jt.a,{type:"select",value:t,onChange:s},c.a.createElement("option",{value:""}," --- "),n.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))},It=function(){var e=Object(r.useContext)(pt),t=e.state,a=t.custom_attrs,n=t.custom_eid,o=t.custom_rid,s=e.dispatch,l=Object(r.useCallback)((function(e){var t=e.target.value;if(t)switch(e.target.name){case"eid":s({type:ee.SET_CUSTOM_EID,payload:{custom_eid:t}});break;case"rid":s({type:ee.SET_CUSTOM_RID,payload:{custom_rid:t}})}}),[s]);return c.a.createElement("div",{className:"row"},c.a.createElement(yt.a,{className:"col"},c.a.createElement(kt.a,{addonType:"prepend"},"Estimate"),oe.a.isEmpty(a)?c.a.createElement(Dt,null):c.a.createElement(jt.a,{value:n,name:"eid",type:"select",onChange:l},c.a.createElement("option",{value:""}," --- "),a.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))),c.a.createElement(yt.a,{className:"col"},c.a.createElement(kt.a,{addonType:"prepend"},"Result"),oe.a.isEmpty(a)?c.a.createElement(Dt,null):c.a.createElement(jt.a,{value:o,name:"rid",type:"select",onChange:l},c.a.createElement("option",null," --- "),a.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))))},Nt=a(596),xt=a(597),Ut=a(625),Pt=a(598),Lt=a(144),wt=a.n(Lt),Kt=function(e,t){return-1===t?"":0===t?"Planning":"Day ".concat(t)},Ft=function(e){return e.filter((function(e){return wt.a.isWeekDay(e)})).map((function(e){return e.format("YYYY-MM-DD")}))},Ht=function(e){return{"text-danger":0===e,"text-info":6===e}},Bt=function(e){var t=e.item,a=e.idx,n=Object(r.useContext)(pt),o=n.state.biz_days,s=n.dispatch,l=Object(r.useCallback)((function(e){var t=e.target.value;e.target.checked?s({type:ee.ADD_BIZ_DAY,payload:{biz_day:t}}):s({type:ee.REMOVE_BIZ_DAY,payload:{biz_day:t}})}),[s]);if(!t)return c.a.createElement("td",null,c.a.createElement("br",null));var i=t.format("YYYY-MM-DD"),u=i===o[0],m="biz-day-".concat(i),_=oe.a.includes(o,i);return c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:le()(Ht(a),{"table-info":u}),id:m},wt.a.isWeekDay(t)?c.a.createElement(Nt.a,{check:!0,inline:!0},c.a.createElement(xt.a,{check:!0},c.a.createElement(jt.a,{onChange:l,disabled:wt.a.isWeekendDay(t),value:i,type:"checkbox",checked:_,className:"form-check-input"}),i)):c.a.createElement("span",null,i)),_?c.a.createElement(Ut.a,{target:m},function(e,t){var a=t.indexOf(e);return Kt(0,a)}(i,o)):null)},zt=function(){var e=Object(r.useContext)(pt),t=e.state,a=t.biz_days,n=t.milestone,o=e.dispatch,s=Object(r.useState)([]),l=Object(re.a)(s,2),u=l[0],m=l[1],_=Object(r.useState)([]),d=Object(re.a)(_,2),E=d[0],p=d[1];return Object(r.useEffect)((function(){if(n){var e=function(e){var t=_e()(e.estimated_start).local(),a=_e()(e.estimated_finish).local().diff(t,"days");return oe.a.times(a).map((function(e){return t.clone().add(e,"days")}))}(n);m(e),a.length<=1&&o({type:ee.SET_BIZ_DAYS,payload:{biz_days:Ft(e)}})}}),[n,a,o]),Object(r.useEffect)((function(){if(u.length>0){var e=oe.a.chunk([].concat(Object(i.a)(oe.a.times(u[0].day(),(function(){return null}))),Object(i.a)(u)),7);p(e)}}),[u]),c.a.createElement(Pt.a,{bordered:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,_e.a.weekdays().map((function(e,t){return c.a.createElement("th",{key:t,className:le()("text-center",Ht(t))},e)})))),c.a.createElement("tbody",null,E.map((function(e,t){return c.a.createElement("tr",{key:t},e.map((function(e,t){return c.a.createElement(Bt,{idx:t,key:t,item:e})})))}))))},Yt=function(){var e=Object(r.useContext)(pt).state.milestone;return c.a.createElement(ft.a,null,c.a.createElement(bt.a,null,"Business Days"),oe.a.isEmpty(e)?c.a.createElement(yt.a,null,c.a.createElement(Dt,null)):c.a.createElement(zt,null))},Vt=a(601),Gt=function(e){var t=e.item,a=Object(r.useContext)(pt),n=a.state.reject_task_status_ids,o=a.dispatch,s=Object(r.useCallback)((function(e){var t=e.target.value;e.target.checked?o({type:ee.REMOVE_REJECT_TASK_STATUS_ID,payload:{reject_task_status_id:t}}):o({type:ee.ADD_REJECT_TASK_STATUS_ID,payload:{reject_task_status_id:t}})}),[o]);return c.a.createElement(Nt.a,{check:!0,inline:!0},c.a.createElement(xt.a,{check:!0},c.a.createElement(jt.a,{onChange:s,type:"checkbox",value:t.id,defaultChecked:!oe.a.includes(n,String(t.id))}),t.name))},Jt=function(){var e=Object(r.useContext)(pt).state.task_statuses;return 0===e.length?null:c.a.createElement(ft.a,null,c.a.createElement(bt.a,null,"Task status"),c.a.createElement(Vt.a,null,e.map((function(e){return c.a.createElement(Gt,{key:e.id,item:e})}))))},Zt=a(270),Wt=function(){return c.a.createElement(kt.a,{addonType:"append"},c.a.createElement(Zt.a,null,c.a.createElement(Le.a,{icon:we.G,className:"fa-pulse"})))},qt=function(){var e=Object(r.useContext)(pt),t=e.state.timelimit_close_task,a=e.dispatch,n=Object(r.useState)(""),o=Object(re.a)(n,2),s=o[0],l=o[1],i=Object(r.useState)(!1),u=Object(re.a)(i,2),m=u[0],_=u[1],d=Object(r.useCallback)((function(e){l(e.target.value)}),[]),E=Object(r.useCallback)((function(e){s&&a({type:ee.SET_TIMELIMIT_CLOSE_TASK,payload:{timelimit_close_task:s},meta:{customize:!0}}),e.preventDefault()}),[s,a]);return Object(r.useEffect)((function(){t&&(_(!0),oe.a.defer(_,!1))}),[t]),c.a.createElement(vt.a,{onSubmit:E},c.a.createElement(yt.a,null,c.a.createElement(kt.a,{addonType:"prepend"},"Timelimit for closing old tasks"),m?c.a.createElement(Wt,null):c.a.createElement(jt.a,{defaultValue:t,onChange:d,type:"datetime-local"}),c.a.createElement(kt.a,{addonType:"append"},c.a.createElement(ht.a,null,"Set"))))},Qt=a(273),Xt=a.n(Qt),$t=function(e){var t=e.isOpen?90:void 0;return c.a.createElement(Le.a,{className:"text-muted mr-2",rotation:t,icon:we.f})},ea=function(){var e=Object(l.b)(),t=f(),a=Object(r.useContext)(pt),n=a.state,o=n.isOpen,s=n.biz_days,i=n.milestone,u=a.dispatch,m=Object(r.useState)(""),_=Object(re.a)(m,2),d=_[0],p=_[1],O=Object(r.useCallback)((function(e){p(e.target.value)}),[p]),b=Object(r.useCallback)((function(t){d&&e(E.setUrl(d)),t.preventDefault()}),[d,e]),T=Object(r.useCallback)((function(){u(o?{type:ee.CLOSE_CONTROLLER}:{type:ee.OPEN_CONTROLLER})}),[u,o]),S=Object(r.useMemo)((function(){return function(e,t){return e&&t.project_extra_info?"".concat(e,"/project/").concat(t.project_extra_info.slug,"/taskboard/").concat(t.slug):""}(t,i)}),[i,t]),v=i.name,y=Object(r.useMemo)((function(){return function(e){return e.length>1?"[".concat(oe.a.head(e)," - ").concat(oe.a.last(e),"]"):""}(s)}),[s]);return c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:le()(Xt.a.header),onClick:T},c.a.createElement($t,{isOpen:o}),v&&c.a.createElement(Tt.a,{color:"primary",pill:!0,className:"p-1 m-1"},c.a.createElement("span",null,v)),y&&c.a.createElement(Tt.a,{className:"p-1 m-1"},c.a.createElement("span",null,y)),S?c.a.createElement("a",{target:"_blank",onClick:Ct,className:"float-right",href:S,rel:"noopener noreferrer"},c.a.createElement(Le.a,{className:"mr-1",icon:we.o}),"Taskboard"):null),c.a.createElement(St.a,{isOpen:o},c.a.createElement(vt.a,{onSubmit:b},c.a.createElement(yt.a,null,c.a.createElement(kt.a,{addonType:"prepend"},"URL"),c.a.createElement(jt.a,{defaultValue:t,onChange:O,placeholder:"http://hostname:port"}),c.a.createElement(kt.a,{addonType:"append"},c.a.createElement(ht.a,null,"Set")))),c.a.createElement("div",{className:"row"},c.a.createElement(Mt,null),c.a.createElement(Rt,null)),c.a.createElement(It,null),c.a.createElement(qt,null),c.a.createElement(Yt,null),c.a.createElement(Jt,null)))},ta=a(49),aa=a(67),na=a(134),ra=a(606),ca=a(607),oa=function(e){var t=e.size,a=Object(l.b)(),n=Object(r.useContext)(pt).dispatch,o=Object(r.useCallback)((function(){n({type:ee.UPDATE_DATA}),a(M.updateData())}),[n,a]);return c.a.createElement(ht.a,{onClick:o,size:t,className:"mx-1"},c.a.createElement(Le.a,{icon:we.H}))},sa=a(184),la=a.n(sa),ia=a(605),ua=function(){var e=Object(r.useContext)(pt),t=e.state,a=t.auth_token,n=t.auth_error,o=t.username,s=e.dispatch,l=Object(r.useState)(""),i=Object(re.a)(l,2),u=i[0],m=i[1],_=Object(r.useState)(""),d=Object(re.a)(_,2),E=d[0],p=d[1],O=Object(r.useState)(!1),f=Object(re.a)(O,2),b=f[0],T=f[1],S=Object(r.useCallback)((function(e){u&&E&&(T(!0),s({type:ee.SIGN_IN,payload:{username:u,password:E}})),e.preventDefault()}),[E,u,s,T]),v=Object(r.useCallback)((function(e){m(e.target.value)}),[m]),y=Object(r.useCallback)((function(e){p(e.target.value)}),[p]),k=Object(r.useCallback)((function(){s({type:ee.SIGN_OUT})}),[s]);return Object(r.useEffect)((function(){(n||a)&&T(!1)}),[n,a,T]),c.a.createElement(c.a.Fragment,null,a?c.a.createElement(vt.a,{inline:!0,onSubmit:gt,className:"mr-1"},c.a.createElement(yt.a,null,c.a.createElement(kt.a,{addonType:"prepend"},c.a.createElement(Zt.a,null,c.a.createElement(Le.a,{icon:we.K}))),c.a.createElement(kt.a,{addonType:"prepend",className:"border border-success"},c.a.createElement(Zt.a,null,o)),c.a.createElement(kt.a,{addonType:"append"},c.a.createElement(ht.a,{title:"Sign out",onClick:k,color:"danger"},c.a.createElement(Le.a,{icon:we.F}))))):c.a.createElement(vt.a,{inline:!0,onSubmit:S,className:"mr-1"},c.a.createElement(yt.a,null,c.a.createElement(kt.a,{addonType:"prepend"},c.a.createElement(Zt.a,null,c.a.createElement(Le.a,{icon:we.K}))),c.a.createElement(jt.a,{disabled:b,onInput:v,onChange:v,name:"username",placeholder:"username",invalid:n})),c.a.createElement(yt.a,null,c.a.createElement(kt.a,{addonType:"prepend"},c.a.createElement(Zt.a,null,c.a.createElement(Le.a,{icon:we.v}))),c.a.createElement(jt.a,{disabled:b,onInput:y,onChange:y,name:"password",placeholder:"password",type:"password",invalid:n})),c.a.createElement(ht.a,{color:"info"},b?c.a.createElement(ia.a,{size:"sm",type:"grow"}):c.a.createElement(Le.a,{icon:we.E}))))},ma=["success","warning","info","danger"],_a=function(e){return oe.a.groupBy(e,"assigned_to")},da=function(e){var t=e.src||"http://i.pravatar.cc/80?u=".concat(Math.random());return c.a.createElement(na.a,Object.assign({},e,{src:t,square:!0,className:"mr-1"}))},Ea=function(e,t,a){return e.has(t)?(n=oe.a.get(e.get(t),"attributes_values.".concat(a),"0"),oe.a.chain(n).replace(/[^0-9.+,]/g,"").replace(/[+]/g,",").split(",").compact().map(Number).sum().value()):0;var n},pa=function(e,t,a){return oe.a.chain(t).map((function(t){return Ea(e,t,a)})).sum().value()},Oa=function(e,t,a){return pa(e,t.filter((function(e){return e.is_closed})),a)},fa=function(e,t){return e.has(t)?oe.a.get(e.get(t),"version"):void 0},ba=function(e,t,a){return a&&t===e},Ta=function(e,t){return t>e},Sa=function(e){var t=e.photo,a=e.id,n=e.username,r=e.total_hours,o="/users/".concat(a);return r&&(o="".concat(o,"/").concat(r)),c.a.createElement(c.a.Fragment,null,c.a.createElement(da,{src:t}),c.a.createElement(ta.b,{to:o},n))},va=function(e){var t=e.username,a=e.val,n=e.total,o=e.imgSrc,s=e.id,l=Object(r.useMemo)((function(){var e=n>0?(a-n)/n:0;return e<-.1?[we.q,""]:e<=.1?[we.q,"table-success"]:e<=.2?[we.r,"table-warning"]:[we.j,"table-danger"]}),[n,a]),i=Object(re.a)(l,2),u=i[0],m=i[1];return a?c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:m},c.a.createElement(Sa,{id:s,photo:o,username:t,total_hours:n}),c.a.createElement(Le.a,{className:"mx-1",icon:u})),c.a.createElement("td",{className:le()(m,"text-right")},a)):c.a.createElement(c.a.Fragment,null,c.a.createElement("td",null,c.a.createElement(da,{src:o})," ",t),c.a.createElement("td",null))},ya=function(e){var t=e.e,a=e.r,n=Object(r.useMemo)((function(){return function(e,t){if(oe.a.isNumber(e)&&oe.a.isNumber(t)&&e>0){var a=Math.abs(e-t)/e;if(a<=.05)return["gold",3];if(a<=.1)return["silver",2];if(a<.2)return["bronze",1]}return[null,0]}(t,a)}),[t,a]),o=Object(re.a)(n,2),s=o[0],l=o[1];return s?c.a.createElement(c.a.Fragment,null,oe.a.times(l).map((function(e){return c.a.createElement(Le.a,{key:e,className:la.a[s],icon:we.y})}))):null},ka=function(e){var t=e.tasks,a=Object(r.useContext)(pt).state,n=a.active_task_statuses,o=a.custom_eid,s=a.custom_value_map,l=Number(o),i=Object(r.useMemo)((function(){return oe.a.chain(n).filter({is_closed:!0}).reverse().map((function(e,a){return{status:e.id,total:pa(s,oe.a.filter(t,{status:e.id}),l),style:ma[a],label:e.name}})).value()}),[n,s,l,t]),u=Object(r.useMemo)((function(){return pa(s,t,l)}),[s,l,t]);return c.a.createElement(ra.a,{multi:!0},i.map((function(e){return c.a.createElement(ra.a,{key:e.label,bar:!0,max:u,value:e.total,color:e.style},e.label)})))},ja=function(e){var t=e.item,a=e.sums,n=e.isPast,o=e.total,s=e.hpd,l=e.tasks,i=Object(r.useState)(0),u=Object(re.a)(i,2),m=u[0],_=u[1],d=Object(r.useCallback)((function(e){_(Number(e.target.value)||0)}),[_]),E=oe.a.get(a,t.id),p=oe.a.get(E,"e"),O=oe.a.get(E,"r"),f=m||o,b=String(f);return c.a.createElement("tr",{key:t.id},o>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(va,{username:t.username,val:p,total:f,imgSrc:t.photo,id:t.id}),c.a.createElement("td",{className:"text-right"},o),c.a.createElement("td",{className:la.a.custom_input_td},c.a.createElement(jt.a,{bsSize:"sm",type:"number",className:"text-right",value:b,step:s,onChange:d}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("td",null,c.a.createElement(Sa,{photo:t.photo,id:t.id,username:t.username})),c.a.createElement("td",{className:"text-right"},t.closed||""),c.a.createElement("td",{className:"text-right"},p),c.a.createElement("td",{className:"text-right"},O),c.a.createElement("td",null,oe.a.isNumber(p)&&c.a.createElement(ka,{tasks:l}))),n?c.a.createElement("td",null,c.a.createElement(ya,{e:p,r:O})):null)},ha=function(){var e=Object(r.useContext)(pt).state,t=e.tasks,a=e.custom_value_map,n=e.custom_eid,o=e.custom_rid,s=e.biz_days,l=e.custom_attr_e,i=e.custom_attr_r,u=e.project.members,m=Object(r.useState)(0),_=Object(re.a)(m,2),E=_[0],p=_[1],O=s.length-1,f=Object(r.useCallback)((function(e){p(Number(e.target.value)||0)}),[p]),b=E*O,T=Object(r.useMemo)((function(){return function(e,t,a,n){var r=Number(a),c=Number(n);return oe.a.mapValues(_a(e),(function(e){return oe.a.chain(e).map((function(e){return{e:Ea(t,e,r),r:Ea(t,e,c)}})).reduce((function(e,t){return{e:e.e+t.e,r:e.r+t.r}}),{e:0,r:0}).value()}))}(t,a,n,o)}),[n,o,a,t]),S=oe.a.get(T,"null.e",0),v=b>0,y=Object(r.useMemo)((function(){return!v&&_e()().diff(_e()(oe.a.last(s)).local().endOf("days"))>0}),[s,v]),k=Object(r.useMemo)((function(){return _a(t)}),[t]),j=Object(r.useMemo)((function(){return oe.a.chain(u).reject((function(e){return oe.a.isEmpty(k[e.id])})).map((function(e){return Object(d.a)({},e,{closed:Oa(a,k[e.id]||[],Number(n))})})).sortBy("closed").reverse().value()}),[n,a,u,k]);return!l.id||!i.id||s.length<=1?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(ca.a,{color:"light",light:!0},c.a.createElement(vt.a,{inline:!0,className:"mr-auto",onSubmit:gt},c.a.createElement(yt.a,null,c.a.createElement(jt.a,{type:"number",step:"0.5",placeholder:"hours / day",className:"text-right",onChange:f}),c.a.createElement(kt.a,{addonType:"append"},c.a.createElement(Zt.a,null,c.a.createElement(Le.a,{className:"mx-2",icon:we.J}),O," [days]",c.a.createElement(Le.a,{className:"mx-2",icon:we.l})),b>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(Zt.a,{className:"bg-white"},c.a.createElement("strong",null,b)),c.a.createElement(Zt.a,null,"hours / sprint")):null))),c.a.createElement(ua,null),c.a.createElement(oa,null)),c.a.createElement(Pt.a,{bordered:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name"),!v&&c.a.createElement("th",{className:"text-success"},"Completed"),c.a.createElement("th",null,l.name),v?c.a.createElement(c.a.Fragment,null,c.a.createElement("th",null,"Total"),c.a.createElement("th",null,"Custom")):c.a.createElement(c.a.Fragment,null,c.a.createElement("th",null,i.name),c.a.createElement("th",null,"Progress")),y?c.a.createElement("th",null,"Grade"):null)),c.a.createElement("tbody",null,(j||[]).map((function(e){return c.a.createElement(ja,{key:e.id,isPast:y,item:e,sums:T,total:b,hpd:E,tasks:k[e.id]||[]})})),c.a.createElement("tr",{key:"null"},c.a.createElement("td",{className:"text-danger"},c.a.createElement(Le.a,{icon:we.p,className:"ml-1 mr-2 fa-lg"}),"Not assigned"),!v&&c.a.createElement("td",null),c.a.createElement("td",{className:"text-right text-danger"},S),c.a.createElement("td",null),c.a.createElement("td",null),y?c.a.createElement("td",null):null))))},ga=a(609),Ca=a(610),Aa=a(626),Da=a(611),Ma=a(612),Ra=a(613),Ia=a(614),Na=a(615),xa=a(616),Ua=a(617),Pa=a(288),La=a(275),wa=a.n(La),Ka=function(e){var t=e.label,a=e.value,n=e.onSubmit,o=e.onEditable,s=e.onValueChange,l=e.valid,i=e.invalid,u=e.disabled,m=e.loading,_=e.id,d=e.submitting,E=e.disabledMessage,p=void 0===E?"":E,O=Object(r.useState)(!1),f=Object(re.a)(O,2),b=f[0],T=f[1],S=Object(r.useState)(""),v=Object(re.a)(S,2),y=v[0],k=v[1],j=Object(r.useState)(!1),h=Object(re.a)(j,2),g=h[0],C=h[1],A=Object(r.useCallback)((function(e){T(e.currentTarget.checked)}),[T]),D=Object(r.useCallback)((function(e){var t=e.target.value;k(t),s&&s(Number(t))}),[s]),M=Object(r.useCallback)((function(e){var t=Number(y);b&&""!==y&&t>=0&&n&&(n(t),T(!1),C(!0)),e.preventDefault()}),[b,y,n,T]);return Object(r.useEffect)((function(){u&&T(!1)}),[T,u]),Object(r.useEffect)((function(){C(!1)}),[a]),Object(r.useEffect)((function(){o&&o(b)}),[b,o]),Object(r.useEffect)((function(){d&&(T(!1),C(!0))}),[d]),Object(r.useEffect)((function(){m&&T(!1)}),[m]),c.a.createElement(vt.a,{inline:!0,onSubmit:M},c.a.createElement(yt.a,{className:wa.a.input_group},c.a.createElement(kt.a,{addonType:"prepend"},t),m?c.a.createElement(Wt,null):c.a.createElement(c.a.Fragment,null,b?c.a.createElement(c.a.Fragment,null,c.a.createElement(kt.a,{addonType:"prepend"},c.a.createElement(Zt.a,null,a)),c.a.createElement(kt.a,{addonType:"prepend"},c.a.createElement(Zt.a,null,c.a.createElement(Le.a,{className:"text-info",icon:we.s}))),c.a.createElement(jt.a,{onInput:D,onChange:D,defaultValue:String(a),type:"number",step:"0.5",min:"0",id:_}),c.a.createElement(kt.a,{addonType:"append"},c.a.createElement(ht.a,{color:"info"},c.a.createElement(Le.a,{icon:we.g})))):c.a.createElement(c.a.Fragment,null,g?c.a.createElement(Wt,null):c.a.createElement(jt.a,{valid:l,invalid:i,readOnly:!0,value:a,className:"text-right"})),c.a.createElement(kt.a,{addonType:"append",title:u?p:""},c.a.createElement(Pa.a,{disabled:u,checked:b,onChange:A},c.a.createElement(Le.a,{className:"text-info",icon:we.k}))))))};function Fa(){return(Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ha(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ba,za=c.a.createElement("g",null,c.a.createElement("path",{fill:"currentColor",className:"leaf",d:"M115.343,123.839c0.814,1.256,3.343,2.605,7.23,4.014c7.586-1.069,14.943-1.586,21.885-1.586 c15.579,0,30.166,2.469,42.438,7.145c17.87-5.567,43.412-11.694,69.108-11.694c25.694,0,51.228,6.126,69.108,11.694 c12.262-4.676,26.848-7.145,42.42-7.145c7.001,0,14.418,0.518,22.063,1.604c3.471-1.341,6.296-2.699,8.325-4.031 c42.2-28.139,53.036-81.183,47.41-69.931c-4.218,8.418-60.309,35.581-100.004,52.222c14.68-17.769,31.677-44.134,43.438-80.309 c0,0-60.978,52.382-98.867,74.887c-11.974-20.816-33.892-86.589-33.892-86.589s-18.567,49.515-20.358,81.412 c-30.21-16.929-63.354-51.474-72.485-74.538c-10.752-27.189-13.78,53.545,15.436,89.396c-1.095,0.162-2.206,0.315-3.344,0.476 c-39.111-16.072-100.454-47.91-104.926-54.86C64.708,47.255,73.143,101.954,115.343,123.839z M290.531,107.181l0.747,0.857 l-3.098-0.746L290.531,107.181z"}),c.a.createElement("path",{fill:"currentColor",className:"tomato",d:"M485.83,198.564c-38.169-57.253-117.544-70.584-160.338-52.195c-18.27-5.906-43.872-12.27-69.49-12.27 c-25.619,0-51.228,6.364-69.499,12.27c-42.794-18.388-122.168-5.058-160.338,52.195c-64.136,96.203-18.711,299.318,229.836,299.318 C504.541,497.882,549.974,294.767,485.83,198.564z M101.172,262.929c-17.099,0-30.947-13.857-30.947-30.948 c0-17.09,13.848-30.947,30.947-30.947c17.082,0,30.947,13.857,30.947,30.947C132.119,249.071,118.253,262.929,101.172,262.929z"})),Ya=function(e){var t=e.svgRef,a=e.title,n=Ha(e,["svgRef","title"]);return c.a.createElement("svg",Fa({id:"_x32_",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve",ref:t},n),a?c.a.createElement("title",null,a):null,za)},Va=c.a.forwardRef((function(e,t){return c.a.createElement(Ya,Fa({svgRef:t},e))})),Ga=(a.p,a(104)),Ja=a.n(Ga);!function(e){e.FRESH="fresh",e.STALE="stale"}(Ba||(Ba={}));var Za=function(e){var t,a=e.state,n=e.bl,r=e.br;return c.a.createElement(Va,{className:le()("fa-fw","svg-inline--fa",(t={},Object(Oe.a)(t,Ja.a.fresh,a===Ba.FRESH),Object(Oe.a)(t,Ja.a.stale,a===Ba.STALE),Object(Oe.a)(t,Ja.a.bl,n),Object(Oe.a)(t,Ja.a.br,r),t))})},Wa=a(145),qa=a.n(Wa),Qa=function(e){var t=e.item,a=Object(r.useContext)(pt),n=a.state,o=n.task_id,s=n.pomodoro_mode,l=n.pomodoro_state,i=a.dispatch,u=Object(r.useCallback)((function(){Number(o)!==t.id&&i({type:ee.SET_TASK_ID,payload:{task_id:String(t.id)}}),l===Ee.STOPPED?Ae.changeMode(pe.FOCUS,!0):s===pe.FOCUS?Ae.resume():Ae.changeMode(pe.FOCUS,!0)}),[i,t.id,s,l,o]),m=Object(r.useCallback)((function(){Ae.pause()}),[]);return Number(o)===t.id?s===pe.FOCUS&&l===Ee.RUNNING?c.a.createElement(ht.a,{className:le()("mr-2",qa.a.btn),color:"danger",onClick:m},c.a.createElement(Le.a,{icon:we.A}),c.a.createElement(Za,null)):c.a.createElement(ht.a,{onClick:u,color:"primary",className:le()("mr-2",qa.a.btn)},c.a.createElement(Le.a,{icon:we.B}),c.a.createElement(Za,null)):""===o?s===pe.FOCUS&&l!==Ee.STOPPED?null:c.a.createElement(ht.a,{onClick:u,color:"primary",className:le()("mr-2",qa.a.btn)},c.a.createElement(Le.a,{icon:we.B}),c.a.createElement(Za,null)):null},Xa=function(e){var t=e.label,a=e.value,n=e.loading,r=e.size,o=e.invalid,s=e.valid;return c.a.createElement(yt.a,{size:r,className:"my-n1"},c.a.createElement(kt.a,{addonType:"prepend"},t),n?c.a.createElement(Wt,null):c.a.createElement(jt.a,{invalid:o,valid:s,readOnly:!0,value:a,className:"text-right"}))},$a=a(147),en=a.n($a),tn=a(146),an=a.n(tn),nn=a(105),rn=a.n(nn),cn=a(276),on=a.n(cn),sn=function(e){return oe.a.chain(e).groupBy("user_story").map((function(e,t){return{user_story:Number(t),user_story_extra_info:e[0].user_story_extra_info,project_extra_info:e[0].project_extra_info,tasks:e,is_closed:e.every((function(e){return e.is_closed}))}})).value()},ln=function(e){return e?"Need sign in!":""},un=function(e){var t=e.user_story_extra_info,a=e.project_extra_info,n=f(),r=a.slug,o=t?"#".concat(t.ref," ").concat(t.subject):void 0,s=t?"".concat(n,"/project/").concat(r,"/us/").concat(t.ref):"#";return o?c.a.createElement("a",{href:s,onClick:Ct,target:"_blank",rel:"noopener noreferrer",title:o},c.a.createElement(Le.a,{icon:we.o})," ",o):c.a.createElement(c.a.Fragment,null,"(Unassigned tasks)")},mn=function(e){var t=e.item,a=f(),n="#".concat(t.ref," ").concat(t.subject),r="".concat(a,"/project/").concat(t.project_extra_info.slug,"/task/").concat(t.ref);return c.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:n},c.a.createElement(Le.a,{icon:we.o})," ",n)},_n=function(e){var t=e.e,a=e.r;return c.a.createElement(yt.a,{className:rn.a.display_medal},c.a.createElement(kt.a,{addonType:"prepend"},"Grade"),c.a.createElement(on.a,{className:rn.a.medal},c.a.createElement(ya,{e:t,r:a})))},dn=function(e){var t=e.item,a=e.task,n=e.onSelect,o=Object(r.useContext)(pt).dispatch,s=Object(r.useCallback)((function(){o({type:ee.PATCH_TASK,payload:{key:"status",value:t.id,id:a.id}}),n&&n(t.id)}),[o,t.id,a.id,n]);return c.a.createElement(ga.a,{onClick:s},t.name)},En=function(e){var t=e.task,a=e.disabled,n=Object(r.useState)(!1),o=Object(re.a)(n,2),s=o[0],l=o[1],i=Object(r.useContext)(pt).state.active_task_statuses,u=Object(r.useCallback)((function(){l(!0)}),[l]);return Object(r.useEffect)((function(){l(!1)}),[t.version,l]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(ia.a,{type:"grow",color:"info"}):c.a.createElement(Ca.a,null,c.a.createElement(Aa.a,{title:ln(a),disabled:a,caret:!a},t.status_extra_info.name),c.a.createElement(Da.a,null,i.map((function(e){return c.a.createElement(dn,{item:e,key:e.id,task:t,onSelect:u})})))))},pn=function(e){var t=e.item,a=e.onSelect,n=Object(r.useCallback)((function(){a&&a(t.id)}),[t.id,a]);return c.a.createElement(ga.a,{onClick:n},c.a.createElement(da,{src:t.photo}),t.username)},On=function(e){var t=e.task,a=e.disabled,n=Object(r.useState)(!1),o=Object(re.a)(n,2),s=o[0],l=o[1],i=Object(r.useContext)(pt),u=i.state.project.members,m=i.dispatch,_=Object(r.useCallback)((function(e){l(!0),m({type:ee.PATCH_TASK,payload:{key:"assigned_to",value:e,id:t.id}})}),[m,t.id]);return Object(r.useEffect)((function(){l(!1)}),[t.version,l]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(ia.a,{type:"grow",color:"info"}):c.a.createElement(Ca.a,null,c.a.createElement(Aa.a,{title:ln(a),size:"sm",disabled:a,caret:!a},"Assign To"),c.a.createElement(Da.a,null,(u||[]).map((function(e){return c.a.createElement(pn,{item:e,onSelect:_,key:e.id})})))))},fn=function(e){var t=e.task,a=Object(r.useState)(!1),n=Object(re.a)(a,2),o=n[0],s=n[1],l=Object(r.useContext)(pt).dispatch,i=Object(r.useCallback)((function(){s(!0),l({type:ee.PATCH_TASK,payload:{key:"assigned_to",value:null,id:t.id}})}),[l,t.id]);return Object(r.useEffect)((function(){s(!1)}),[t.version,s]),c.a.createElement(c.a.Fragment,null,o?c.a.createElement(ia.a,{type:"grow",color:"danger"}):c.a.createElement(ht.a,{className:"mr-2",title:"Not assigned",color:"danger",onClick:i},c.a.createElement(Le.a,{icon:we.M})))},bn=function(e){var t=e.item,a=Object(r.useContext)(pt),n=a.state,o=n.custom_eid,s=n.custom_value_map,l=n.auth_token,i=n.custom_attr_e,u=a.dispatch,m=fa(s,t),_=Object(r.useCallback)((function(e){m&&u({type:ee.PATCH_CUSTOM_VALUE,payload:{id:t.id,key:o,value:e,version:m}})}),[u,t.id,o,m]),d=Object(r.useMemo)((function(){return Ea(s,t,i.id)}),[i.id,s,t]);if(!i.id)return null;var E=!d,p=d>4,O=""===l,f=!m;return c.a.createElement(Ka,{onSubmit:_,label:i.name,value:d,invalid:E||p,disabled:O,loading:f,disabledMessage:"Need sign in!"})},Tn=function(e){var t=e.item,a=Object(r.useState)(!1),n=Object(re.a)(a,2),o=n[0],s=n[1],l=Object(r.useState)(0),i=Object(re.a)(l,2),u=i[0],m=i[1],_=Object(r.useState)(!1),d=Object(re.a)(_,2),E=d[0],p=d[1],O=Object(r.useState)(!1),f=Object(re.a)(O,2),b=f[0],T=f[1],S=Object(r.useContext)(pt),v=S.state,y=v.custom_rid,k=v.custom_value_map,j=v.custom_attr_e,h=v.custom_attr_r,g=v.auth_token,C=v.pomodoro_number,A=v.pomodoro_used_number,D=S.dispatch,M=fa(k,t),R=Object(r.useCallback)((function(){s(!o)}),[o]),I=Object(r.useCallback)((function(e,a){var n=e>0,r=a?{used_number:a}:void 0;M&&(D({type:ee.PATCH_CUSTOM_VALUE,payload:{id:t.id,key:y,value:e,version:M},meta:{use_pomodoro:r,update_status:n}}),T(!0))}),[y,D,t.id,M]),N=Object(r.useCallback)((function(){m(u+1)}),[u]),x=Object(r.useCallback)((function(){m(u-1)}),[u]),U=Object(r.useCallback)((function(){m(0)}),[]),P=Object(r.useCallback)((function(e){p(e)}),[]),L=Object(r.useMemo)((function(){return Ea(k,t,j.id)}),[j.id,k,t]),w=Object(r.useMemo)((function(){return Ea(k,t,h.id)}),[h.id,k,t]),K=Object(r.useCallback)((function(e){p(w===e)}),[w]),F=Object(r.useCallback)((function(){I(w+u/2,u),s(!1),m(0)}),[I,w,u]),H=Object(r.useMemo)((function(){return ba(L,w,t.is_closed)}),[L,t.is_closed,w]),B=Object(r.useMemo)((function(){return Ta(L,w)}),[L,w]);if(Object(r.useEffect)((function(){M||T(!1)}),[M]),Object(r.useEffect)((function(){m(0)}),[A]),!h.id)return null;var z=""===g,Y=!M,V="rusult-input-".concat(t.id),G=C-A,J=u>0,Z=u===G;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ka,{onSubmit:I,onEditable:P,onValueChange:K,label:h.name,value:w,valid:H,invalid:B,disabled:z,loading:Y,id:V,submitting:b}),E&&G>0&&c.a.createElement(Ma.a,{className:le()("popover-wide"),target:V,placement:"top",isOpen:o,toggle:R,trigger:"click hover"},c.a.createElement(Ra.a,null,"Pomodoro"),c.a.createElement(Ia.a,null,c.a.createElement(Na.a,null,c.a.createElement(ht.a,{disabled:Z,onClick:N},c.a.createElement(Le.a,{icon:we.C})),c.a.createElement(ht.a,{disabled:!J,onClick:x},c.a.createElement(Le.a,{icon:we.z})),c.a.createElement(ht.a,{disabled:!0,className:"bg-light"},oe.a.times(G).map((function(e){return c.a.createElement(Za,{key:e,state:e>=u?Ba.FRESH:Ba.STALE})}))),c.a.createElement(ht.a,{disabled:!J,onClick:F},c.a.createElement(Le.a,{icon:we.g})),c.a.createElement(ht.a,{disabled:!J,onClick:U},c.a.createElement(Le.a,{icon:we.m}))))))},Sn=function(e){var t,a=e.item,n=Object(r.useContext)(pt).state,o=n.custom_value_map,s=n.custom_attr_e,l=n.custom_attr_r,i=n.auth_token,u=Object(r.useMemo)((function(){return fa(o,a)}),[o,a]),m=Object(r.useMemo)((function(){return Ea(o,a,s.id)}),[s.id,o,a]),_=Object(r.useMemo)((function(){return Ea(o,a,l.id)}),[l.id,o,a]);if(!s.id||!l.id)return null;var d=""===i,E=!u,p=0===_&&!a.is_closed&&!d&&!E;return c.a.createElement(an.a,{className:le()((t={},Object(Oe.a)(t,rn.a.is_closed,a.is_closed),Object(Oe.a)(t,"bg-warning",a.is_iocaine),t))},c.a.createElement("div",{className:"d-flex mb-1"},c.a.createElement("div",{className:"mr-auto text-truncate"},a.is_iocaine&&c.a.createElement(Le.a,{icon:we.b,className:"mr-1 text-dark fa-2x"}),c.a.createElement(mn,{item:a})),p&&c.a.createElement(fn,{task:a}),c.a.createElement(Qa,{item:a}),c.a.createElement(En,{task:a,disabled:d})),c.a.createElement(xa.a,null,c.a.createElement(Ua.a,null,c.a.createElement(bn,{item:a})),c.a.createElement(Ua.a,null,c.a.createElement(Tn,{item:a})),c.a.createElement(Ua.a,null,c.a.createElement(_n,{e:m,r:_}))))},vn=function(e){var t=e.item;return c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:"text-truncate"},c.a.createElement(un,{user_story_extra_info:t.user_story_extra_info,project_extra_info:t.project_extra_info})),c.a.createElement(en.a,null,t.tasks.map((function(e){return c.a.createElement(an.a,{key:e.id,className:"text-truncate"},c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"mr-auto text-truncate"},c.a.createElement(mn,{item:e})),c.a.createElement(bn,{item:e})))}))))},yn=function(e){var t=e.item,a=""===Object(r.useContext)(pt).state.auth_token;return c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:"text-truncate"},c.a.createElement(un,{user_story_extra_info:t.user_story_extra_info,project_extra_info:t.project_extra_info})),c.a.createElement(St.a,{isOpen:!0},c.a.createElement(en.a,null,t.tasks.map((function(e){return c.a.createElement(an.a,{key:e.id},c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"mr-auto text-truncate"},c.a.createElement(mn,{item:e})),c.a.createElement(On,{task:e,disabled:a})))})))))},kn=function(e){var t=e.label;return c.a.createElement(Tt.a,{color:"warning",className:"mr-1",title:t},t)},jn=function(e){var t=e.item,a=e.tags,n=e.totalHours,o=void 0===n?0:n,s=e.onSelect,l=Object(r.useState)(!1),i=Object(re.a)(l,2),u=i[0],m=i[1],_=Object(r.useContext)(pt).state,d=_.custom_value_map,E=_.custom_attr_e,p=_.custom_attr_r,O=Object(r.useCallback)((function(){m(!u)}),[u,m]);Object(r.useEffect)((function(){m(!t.is_closed)}),[t.is_closed,m]);var f=Object(r.useMemo)((function(){return pa(d,t.tasks,E.id)}),[E.id,d,t.tasks]),b=Object(r.useMemo)((function(){return pa(d,t.tasks,p.id)}),[p.id,d,t.tasks]),T=Object(r.useCallback)((function(e){null===s||void 0===s||s(t.user_story,e.target.checked?0:f)}),[s,f,t.user_story]),S=!d.has(t.tasks[0]);return c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:le()(rn.a.header,"text-truncate",{"alert-primary":t.is_closed}),onClick:O},c.a.createElement(xa.a,null,c.a.createElement(Ua.a,{xs:12,md:8,className:"text-truncate"},o>0&&c.a.createElement(Nt.a,{inline:!0,check:!0},c.a.createElement(jt.a,{type:"checkbox",defaultChecked:!0,onChange:T,onClick:Ct})),c.a.createElement($t,{isOpen:u}),c.a.createElement(un,{user_story_extra_info:t.user_story_extra_info,project_extra_info:t.project_extra_info})),c.a.createElement(Ua.a,{xs:6,md:2},c.a.createElement(Xa,{label:E.name,loading:S,value:f,size:"sm"})),c.a.createElement(Ua.a,{xs:6,md:2},c.a.createElement(Xa,{label:p.name,loading:S,value:b,size:"sm"}))),null===a||void 0===a?void 0:a.map((function(e,t){return c.a.createElement(kn,{key:t,label:e})}))),c.a.createElement(St.a,{isOpen:u},c.a.createElement(en.a,null,t.tasks.map((function(e){return c.a.createElement(Sn,{item:e,key:e.id})})))))},hn=function(){var e=Object(r.useContext)(pt).state,t=e.tasks,a=e.custom_value_map,n=e.custom_eid,o=Object(r.useMemo)((function(){return Number(n)}),[n]),s=Object(r.useMemo)((function(){return o?t.filter((function(e){return fa(a,e)&&0===Ea(a,e,o)})):[]}),[a,o,t]),l=Object(r.useMemo)((function(){return sn(s)}),[s]);return 0===s.length?null:c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:"alert-danger"},"Un estimated tasks"),c.a.createElement(Vt.a,null,l.map((function(e){return c.a.createElement(vn,{item:e,key:e.user_story})}))))},gn=function(){var e=Object(r.useContext)(pt).state.tasks,t=Object(r.useMemo)((function(){return oe.a.filter(e,{assigned_to:null})}),[e]),a=Object(r.useMemo)((function(){return sn(t)}),[t]);return 0===t.length?null:c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:"alert-danger"},"Not assigned tasks"),c.a.createElement(Vt.a,null,a.map((function(e){return c.a.createElement(yn,{item:e,key:e.user_story})}))))},Cn=a(627),An=function(e){var t=e.type,a="Burn down"===t?we.w:we.x;return c.a.createElement("span",null,t,c.a.createElement(Le.a,{className:"fa-fw",icon:a}))},Dn=function(e){var t=e.type,a=e.onSelect,n=Object(r.useCallback)((function(){a(t)}),[a,t]);return c.a.createElement(ga.a,{onClick:n},c.a.createElement(An,{type:t}))},Mn=function(e){var t=e.type,a=e.onSelect;return c.a.createElement(Cn.a,null,c.a.createElement(Aa.a,{size:"sm",caret:!0},c.a.createElement(An,{type:t})),c.a.createElement(Da.a,null,c.a.createElement(Dn,{type:"Burn up",onSelect:a}),c.a.createElement(Dn,{type:"Burn down",onSelect:a})))},Rn=a(28),In=function(e){var t=e.tasks,a=e.size,n=void 0===a?"lg":a,o=Object(r.useState)([]),s=Object(re.a)(o,2),l=s[0],i=s[1],u=Object(r.useContext)(pt).state,m=u.biz_days,_=u.custom_value_map,d=u.custom_eid,E=u.custom_rid,p=Ln(n),O=p.width,f=p.height,b=Object(r.useMemo)((function(){return pa(_,t,Number(E))}),[_,t,E]);Object(r.useEffect)((function(){var e=m.length,a=Number(d),n=Number(E);if(e>0&&t.length>0&&d&&E){var r=pa(_,t,a),c=m.map((function(c,o){var s=Kt(0,o),l=r*o/(e-1),i=pa(_,Pn(t,c),a);if(_e()().local().endOf("days").diff(_e()(c))>0){var u=pa(_,xn(t,c),a),m=pa(_,xn(t,c),n);return 0===_e()().local().startOf("days").diff(_e()(c))?{label:s,ideal:l,completed:u,actual:m,total:i,"in progress":b-m}:{label:s,ideal:l,completed:u,actual:m,total:i}}return{label:s,ideal:l,total:i}}));i(c)}else i([])}),[t,m,d,E,_,i,b]);var T=Object(r.useCallback)((function(e,t){return[Number(e).toFixed(1),oe.a.upperFirst(t)]}),[]);return 0===l.length?null:c.a.createElement(Rn.b,{data:l,width:O,height:f},c.a.createElement(Rn.g,null),c.a.createElement(Rn.f,{dataKey:"label"}),c.a.createElement(Rn.e,{formatter:T}),"lg"===n&&c.a.createElement(Rn.c,{formatter:oe.a.upperFirst}),c.a.createElement(Rn.a,{dataKey:"completed",fill:"#28a745"}),c.a.createElement(Rn.a,{dataKey:"actual",fill:"#17a2b8",stackId:"a"}),c.a.createElement(Rn.a,{dataKey:"in progress",fill:"#ffc107",stackId:"a"}),c.a.createElement(Rn.d,{dataKey:"ideal",stroke:"#007bff",strokeDasharray:"5 5"}),c.a.createElement(Rn.d,{dataKey:"total",stroke:"#dc3545"}))},Nn=function(e){var t=e.tasks,a=e.size,n=void 0===a?"lg":a,o=Object(r.useState)([]),s=Object(re.a)(o,2),l=s[0],i=s[1],u=Object(r.useContext)(pt).state,m=u.biz_days,_=u.custom_value_map,d=u.custom_eid,E=Ln(n),p=E.width,O=E.height;Object(r.useEffect)((function(){var e=m.length,a=Number(d);if(e>0&&t.length>0&&d){var n=pa(_,Pn(t,m[0]),a),r=m.map((function(r,c){var o=Kt(0,c),s=n-n*c/(e-1);if(_e()().local().endOf("days").diff(_e()(r))>0){var l=0===c?0:pa(_,Un(t,r),a);return{label:o,ideal:s,remaining:Math.max(pa(_,Pn(t,r),a)-l-pa(_,xn(t,r),a),0),add:l}}return{label:o,ideal:s}}));i(r)}else i([])}),[t,m,d,_,i]);var f=Object(r.useCallback)((function(e,t){return[Number(e).toFixed(1),oe.a.upperFirst(t)]}),[]);return 0===l.length?null:c.a.createElement(Rn.b,{data:l,width:p,height:O},c.a.createElement(Rn.g,null),c.a.createElement(Rn.f,{dataKey:"label"}),c.a.createElement(Rn.e,{formatter:f}),"lg"===n&&c.a.createElement(Rn.c,{formatter:oe.a.upperFirst}),c.a.createElement(Rn.a,{dataKey:"remaining",fill:"#8884d8",stackId:"a"}),c.a.createElement(Rn.a,{dataKey:"add",fill:"#82ca9d",stackId:"a"}),c.a.createElement(Rn.d,{dataKey:"ideal"}))},xn=function(e,t){return e.filter((function(e){return!!e.finished_date&&_e()(t).local().endOf("days").diff(_e()(e.finished_date))>0}))},Un=function(e,t){return e.filter((function(e){return _e()(t).local().format("YYYY-MM-DD")===_e()(e.created_date).local().format("YYYY-MM-DD")}))},Pn=function(e,t){return e.filter((function(e){return _e()(t).local().endOf("days").diff(_e()(e.created_date))>0}))},Ln=function(e){return"sm"===e?{width:250,height:200}:{width:800,height:400}},wn=function(e){var t=e.tasks,a=Object(r.useState)("Burn up"),n=Object(re.a)(a,2),o=n[0],s=n[1],l=Object(r.useCallback)((function(e){s(e)}),[s]);return 0===t.length?null:c.a.createElement(ft.a,{className:"mb-2"},c.a.createElement(bt.a,{className:"d-flex"},c.a.createElement("div",{className:"mr-auto"},c.a.createElement(ht.a,{size:"sm",tag:ta.b,to:"/board",color:"primary",className:"mr-2",title:"Board"},c.a.createElement(Le.a,{icon:we.c})),"Chart"),c.a.createElement(Mn,{onSelect:l,type:o})),"Burn down"===o?c.a.createElement(Nn,{tasks:t}):c.a.createElement(In,{tasks:t}))},Kn=function(){var e=Object(r.useContext)(pt).state.tasks;return c.a.createElement(c.a.Fragment,null,c.a.createElement(wn,{tasks:e}),c.a.createElement(ha,null),c.a.createElement(gn,null),c.a.createElement("br",null),c.a.createElement(hn,null))},Fn=a(619),Hn=a(618),Bn=a(188),zn=a.n(Bn),Yn=function(e){var t=e.tasks,a=e.totalHours,n=e.rejectVal,o=Object(r.useContext)(pt).state,s=o.custom_eid,l=o.custom_value_map,i=Object(r.useMemo)((function(){return pa(l,t,Number(s))}),[s,l,t])-n,u=1.5*a,m=i>a;return c.a.createElement(ra.a,{multi:!0,style:{position:"relative"}},c.a.createElement(ra.a,{bar:!0,value:i,max:u,color:m?"danger":"success"},i," / ",a),c.a.createElement(ra.a,{className:le()(zn.a.total,Object(Oe.a)({},zn.a.is_over,m)),bar:!0,color:"success",value:a,max:u}," ",m?"".concat(i," / ").concat(a," "):""))},Vn=function(e){var t=e.totalHours,a=void 0===t?0:t,n=Object(r.useState)({}),o=Object(re.a)(n,2),s=o[0],l=o[1],i=h(),u=Object(r.useContext)(pt).state,m=u.custom_value_map,_=u.biz_days,E=u.user_tasks,p=u.custom_attr_e,O=u.custom_attr_r,f=Object(r.useMemo)((function(){return new Map(i.map((function(e){return[e.id,e]})))}),[i]),b=Object(r.useMemo)((function(){return sn(E)}),[E]),T=Object(r.useMemo)((function(){return oe.a.chain(b).map((function(e){return{item:e,tags:oe.a.chain(f.get(e.user_story)).get("tags",[]).map((function(e){return oe.a.first(e)})).compact().value()}})).sortBy((function(e){return Number.isNaN(e.item.user_story)?-1:e.tags.length})).reverse().value()}),[b,f]),S=Object(r.useMemo)((function(){return pa(m,E,p.id)}),[p.id,m,E]),v=Object(r.useMemo)((function(){return pa(m,E,O.id)}),[O.id,m,E]),y=Object(r.useMemo)((function(){return ba(S,v,b.every((function(e){return e.is_closed})))}),[S,v,b]),k=Object(r.useMemo)((function(){return Ta(S,v)}),[S,v]),j=Object(r.useMemo)((function(){return E.some((function(e){return!fa(m,e)}))}),[m,E]),g=Object(r.useCallback)((function(e,t){l(Object(d.a)({},s,Object(Oe.a)({},e,t)))}),[s,l]);if(!p.id||!O.id||_.length<=1)return null;var C=oe.a.sum(Object.values(s));return c.a.createElement(c.a.Fragment,null,T.map((function(e){var t=e.item,n=e.tags;return c.a.createElement(jn,{item:t,key:t.user_story,tags:n,onSelect:g,totalHours:a})})),c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:le()("alert-info")},"Total"),c.a.createElement(Vt.a,null,c.a.createElement(xa.a,null,c.a.createElement(Ua.a,null,c.a.createElement(Xa,{label:p.name,value:S-C,loading:j})),c.a.createElement(Ua.a,null,c.a.createElement(Xa,{label:O.name,value:v,invalid:k,valid:y,loading:j})),c.a.createElement(Ua.a,null,c.a.createElement(_n,{e:S,r:v})))),c.a.createElement(Hn.a,null,a>0?c.a.createElement(Yn,{tasks:E,rejectVal:C,totalHours:a||1}):c.a.createElement(ka,{tasks:E}))))},Gn=function(){var e=Object(r.useContext)(pt).state.user;return c.a.createElement(ft.a,null,e&&c.a.createElement(bt.a,null,c.a.createElement(da,{src:e.photo,size:"xlarge"}),e.username," 's task"))},Jn=function(){var e=f(),t=Object(r.useContext)(pt),a=t.state,n=a.user,o=a.user_tasks,s=t.dispatch,l=Object(aa.f)(),i=l.uid,u=l.total_hours,m=Number(u||0),_=Object(aa.e)(),d=Object(r.useCallback)((function(){_.goBack()}),[_]);return Object(r.useEffect)((function(){return i&&e&&s({type:ee.FETCH_USER,payload:{uid:i}}),function(){s({type:ee.RESET_USER})}}),[s,i,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ca.a,{color:"light",light:!0},c.a.createElement(ht.a,{onClick:d,className:"mr-auto"},c.a.createElement(Le.a,{icon:we.a})," Go back"),c.a.createElement(ua,null),c.a.createElement(oa,null)),n?c.a.createElement(c.a.Fragment,null,c.a.createElement(Gn,null),c.a.createElement("br",null),0===m&&c.a.createElement(c.a.Fragment,null,c.a.createElement(wn,{tasks:o}),c.a.createElement("br",null)),c.a.createElement(Vn,{totalHours:m})):c.a.createElement(Fn.a,{color:"danger"},"This user does not exist."))},Zn=a(289),Wn=a(189),qn=a(620),Qn=a(70),Xn=a.n(Qn),$n=a(284),er=a.n($n),tr=a(285),ar=a.n(tr),nr=a(286),rr=a.n(nr),cr=function(){var e=Object(r.useContext)(pt).state.pomodoro_daily_totals,t=Object(r.useMemo)((function(){return e.map((function(e){return{date:e.dateKey,value:e.value,pureValue:e.pureValue}}))}),[e]),a=(oe.a.maxBy(t,"value")||{value:1}).value,n=Object(r.useCallback)((function(e){return e?"style-pomodoro color-pomodoro-".concat(Math.ceil(8*(e.value||0)/a)):"style-pomodoro empty-pomodoro"}),[a]),o=Object(r.useCallback)((function(e){return e&&e.date?{"data-tip":"".concat(e.value," Pomodoros on ").concat(e.date)}:null}),[]),s=Object(r.useMemo)((function(){return _e()().subtract(12,"month").toDate()}),[]);return 0===e.length?c.a.createElement(Fn.a,{color:"warning"},"No pomodoro history!"):c.a.createElement(c.a.Fragment,null,c.a.createElement(rr.a,{startDate:s,showWeekdayLabels:!0,values:t,classForValue:n,tooltipDataAttrs:o}),c.a.createElement(ar.a,null))},or=new(a(579))({type:"rectangle"}),sr=function(e){return Math.ceil(e/60)},lr=function(e){switch(e.mode){case pe.SHORT:return c.a.createElement(Le.a,{className:le()("fa-fw",Xn.a.short_break_icon),icon:we.h});case pe.LONG:return c.a.createElement(Le.a,{className:le()("fa-fw",Xn.a.long_break_icon),icon:we.i});default:return c.a.createElement(Za,{state:Ba.FRESH})}},ir=function(e){var t=e.mode,a=e.onSelect,n=Object(r.useCallback)((function(){a(t)}),[t,a]);return c.a.createElement(ga.a,{onClick:n},c.a.createElement(lr,{mode:t}),t)},ur=function(e){Ae.start(),e()},mr=function(e){Ae.start(),e(2)},_r=function(e){Ae.changeMode(pe.FOCUS),Ae.start(),e()},dr=function(){var e=Object(l.b)(),t=Object(r.useContext)(pt),a=t.state,n=a.loaded,o=a.pomodoro_date,s=a.pomodoro_number,i=a.pomodoro_used_number,u=a.task_id,m=a.task,_=a.auth_token,d=a.pomodoro_live_counts,E=t.dispatch,p=Object(r.useState)(!1),O=Object(re.a)(p,2),f=O[0],b=O[1],T=Object(r.useState)(!1),S=Object(re.a)(T,2),v=S[0],y=S[1],k=Object(r.useState)(he[pe.FOCUS]),j=Object(re.a)(k,2),h=j[0],g=j[1],C=Object(r.useState)(Ee.STOPPED),A=Object(re.a)(C,2),D=A[0],R=A[1],I=Object(r.useState)(pe.FOCUS),N=Object(re.a)(I,2),U=N[0],P=N[1],L=Object(r.useState)(0),w=Object(re.a)(L,2),K=w[0],F=w[1],H=Object(r.useState)("min"),B=Object(re.a)(H,2),z=B[0],Y=B[1],V=Object(r.useCallback)((function(){y((function(e){return!e}))}),[]),G=Object(r.useCallback)((function(e){Ae.changeMode(e)}),[]),J=Object(r.useCallback)((function(){switch(D){case Ee.RUNNING:Ae.pause();break;case Ee.PAUSED:Ae.resume();break;case Ee.STOPPED:Ae.start()}}),[D]),Z=Object(r.useCallback)((function(e){var t=function(e){return e>=60?[sr(e),"min"]:[Math.ceil(e),"sec"]}(e),a=Object(re.a)(t,2),n=a[0],r=a[1];g(n),Y(r)}),[]),W=Object(r.useCallback)((function(e){R(e.state),Z(e.remaining)}),[Z]),q=Object(r.useCallback)((function(e){P(e.mode),Z(e.duration)}),[Z]),Q=Object(r.useCallback)((function(e){Z(e.remaining)}),[Z]),X=Object(r.useCallback)((function(t,a){var n=s;W(t),t.mode===pe.FOCUS?(e(x.play({type:"end"})),E({type:ee.ADD_POMODORO,meta:{completedAt:a||new Date,duration:t.duration,pure:0===t.checkpointElapsed}}),++n%4===0?Ae.changeMode(pe.LONG):Ae.changeMode(pe.SHORT),e(M.updateData())):(e(x.play({type:"start"})),Ae.changeMode(pe.FOCUS));var r,c="",o=void 0,l=ur,i=void 0;switch(r="".concat(n," Pomodoros today!"),Ae.mode){case pe.FOCUS:c="Start Focusing.";break;case pe.SHORT:c="Take a Short Break.",o="Retry focusing if double click.",l=mr,i=_r;break;case pe.LONG:c="Take a Long Break.",o="Retry focusing if double click.",l=mr,i=_r}!function(e){var t=e.title,a=e.body,n=e.option,r=void 0===n?"":n,c=e.icon,o=e.onClick,s=e.onDblclick,l=0,i=null;if("granted"===Notification.permission){var u=new Notification(t,{body:"".concat(a," ").concat(r),icon:c}),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?i=setTimeout((function(){u.close(),i=null}),1e3*e):u.close()};u.onclick=function(){0===l?(l++,o(m)):(i&&clearTimeout(i),s&&s(m))}}else ze({title:t,body:a,icon:c})}({title:c,body:r,option:o,icon:er.a,onClick:l,onDblclick:i})}),[E,W,s,e]),$=Object(r.useCallback)((function(){Ae.changeMode(pe.FOCUS,!0)}),[]),te=Object(r.useCallback)((function(){E({type:ee.RESET_TASK_ID})}),[E]),ae=Object(r.useCallback)((function(e){var t=" from firebase!",a=s,n=e.remaining;t=e.mode===pe.FOCUS?++a%4===0?"Take a Long Break ".concat(t):"Take a Short Break ".concat(t):"Start Focusing ".concat(t);var r="".concat(a," Pomodoros today!");E({type:ee.ADD_FB_TIMER,payload:{title:t,body:r,remaining:n}})}),[E,s]),ne=Object(r.useCallback)((function(e){E({type:ee.DEL_FB_TIMER})}),[E]);Object(r.useEffect)((function(){return Ae.on("tick",Q),Ae.on("start",W),Ae.on("start",ae),Ae.on("stop",W),Ae.on("stop",ne),Ae.on("pause",W),Ae.on("pause",ne),Ae.on("resume",W),Ae.on("resume",ae),Ae.on("expire",X),Ae.on("change_mode",q),function(){Ae.removeAllListeners()}}),[X,q,W,Q,ae,ne]),Object(r.useEffect)((function(){P(Ae.mode),R(Ae.state),Z(Ae.remaining),Ae.restoreExpired&&_&&(oe.a.defer((function(){X(Ae.status)})),Ae.restoreExpired=!1)}),[_,X,Z]),Object(r.useEffect)((function(){var e=_e()().format("YYYY-MM-DD");n&&o!==e&&(E({type:ee.RESET_POMODORO,payload:{pomodoro_date:e}}),Ae.changeMode(pe.FOCUS))}),[E,n,o]),Object(r.useEffect)((function(){"denied"!==Notification.permission&&Notification.requestPermission()}),[]),Object(r.useEffect)((function(){var e=U===pe.FOCUS?"#f00":"#0f0",t=U===pe.FOCUS?"#fff":"#000",a="fade";if("sec"===z){var n=[t,e];e=n[0],t=n[1],a="none"}switch(D){case Ee.RUNNING:or.badge(h,{bgColor:e,textColor:t,animation:a});break;case Ee.PAUSED:or.badge("-",{bgColor:e,textColor:t,animation:a});break;default:or.reset()}}),[U,h,D,z]),Object(r.useEffect)((function(){var e=60*he[U];F(.01+99*(e-("min"===z?60*h:h))/e/100)}),[U,h,z]),Object(r.useEffect)((function(){E({type:ee.SET_POMODORO_STATE,payload:{pomodoro_state:D}})}),[E,D]),Object(r.useEffect)((function(){E({type:ee.SET_POMODORO_MODE,payload:{pomodoro_mode:U}})}),[E,U]);var ce=Object(r.useCallback)((function(){b((function(e){return!e}))}),[]),se=D===Ee.RUNNING?K:1;if(!_)return null;var ie=m?"#".concat(m.ref," ").concat(oe.a.get(m,"user_story_extra_info.subject","Unassigned tasks")," / ").concat(m.subject):"",ue=m?oe.a.truncate("#".concat(m.ref," ").concat(m.subject),{length:10}):"",me=Object.values(d).some((function(e){return e>0}));return c.a.createElement(ft.a,{className:le()(Xn.a.top,"sticky-top")},c.a.createElement(Zn.a,{options:{primary:U===pe.FOCUS?"red":"green"}},c.a.createElement(At.a,{buffer:se,progress:K,closed:D===Ee.STOPPED})),c.a.createElement(bt.a,{onClick:ce},c.a.createElement("div",{className:"d-flex"},c.a.createElement($t,{isOpen:f}),c.a.createElement(yt.a,{className:le()(Xn.a.button_group,"ml-1")},c.a.createElement(qn.a,{onClick:Ct,isOpen:v,toggle:V,addonType:"prepend"},c.a.createElement(Aa.a,{color:"light",size:"sm",caret:!0},c.a.createElement(lr,{mode:U})),c.a.createElement(Da.a,null,c.a.createElement(ir,{mode:pe.FOCUS,onSelect:G}),c.a.createElement(ir,{mode:pe.SHORT,onSelect:G}),c.a.createElement(ir,{mode:pe.LONG,onSelect:G}))),c.a.createElement(kt.a,{addonType:"prepend",onClick:Ct},c.a.createElement(Zt.a,{className:le()(Xn.a.fix_w,{"font-weight-bold":D===Ee.RUNNING})},h)),c.a.createElement(kt.a,{onClick:Ct,addonType:"prepend"},z),c.a.createElement(kt.a,{addonType:"append",onClick:Ct},D===Ee.RUNNING?c.a.createElement(ht.a,{color:"danger",onClick:J},c.a.createElement(Le.a,{icon:we.A})):c.a.createElement(ht.a,{color:"primary",onClick:J},c.a.createElement(Le.a,{icon:we.B}))),U!==pe.FOCUS&&c.a.createElement(kt.a,{addonType:"append",onClick:Ct},c.a.createElement(ht.a,{color:"light",onClick:$,title:"Retry focusing"},c.a.createElement(Le.a,{icon:we.D,className:"text-muted"}),c.a.createElement(Za,{state:Ba.STALE}))),u&&c.a.createElement(Wn.b,{onClick:Ct,className:le()(Xn.a.chip_set)},c.a.createElement(Wn.a,{icon:c.a.createElement(Le.a,{icon:we.I}),onRemove:te,title:ie,trailingIcon:c.a.createElement(Le.a,{icon:we.J})},ue||c.a.createElement(ia.a,{type:"grow"}))),me&&c.a.createElement("div",{className:"ml-1"},c.a.createElement("div",{className:le()("w-100","text-light","bg-danger","text-center","rounded","shadow","font-weight-bold",Xn.a.live)},c.a.createElement(Le.a,{className:"ml-1",icon:we.L}),c.a.createElement("span",{className:"mx-1"},"LIVE")),c.a.createElement("div",null,Object.entries(d).filter((function(e){var t=Object(re.a)(e,2);t[0];return t[1]>0})).map((function(e){var t=Object(re.a)(e,2),a=t[0],n=t[1];return c.a.createElement(Tt.a,{key:a,color:"light",className:"border"},c.a.createElement(lr,{mode:a}),":",n)}))))),s>0&&c.a.createElement(Tt.a,{color:"danger",className:"mr-2"},c.a.createElement(Za,null)," ",c.a.createElement(Le.a,{icon:we.J})," ",s),oe.a.times(s).map((function(e){return c.a.createElement(Za,{key:e,state:e<i?Ba.STALE:Ba.FRESH,br:e%2!==s%2&&e<s-1})})))),c.a.createElement(St.a,{isOpen:f},c.a.createElement(Vt.a,{className:"bg-grass"},c.a.createElement(cr,null))))},Er=a(621),pr=a(622),Or=function(e,t,a){return e.has(t)?(n=oe.a.get(e.get(t),"attributes_values.".concat(a),"0"),oe.a.chain(n).replace(/[^0-9.+,]/g,"").replace(/[+]/g,",").split(",").compact().map(Number).sum().value()):0;var n},fr=function(e,t,a){return function(e,t,a){return oe.a.chain(t).map((function(t){return Or(e,t,a)})).sum().value()}(e,t.filter((function(e){return e.is_closed})),a)},br=function(e){var t=e.src||"http://i.pravatar.cc/80?u=".concat(Math.random());return c.a.createElement(na.a,Object.assign({},e,{src:t,square:!0,className:"mr-1"}))},Tr=function(e){var t=e.user,a=e.tasks,n=e.type;return c.a.createElement(Ua.a,{sm:"12",md:"6",lg:"4"},c.a.createElement(ft.a,null,c.a.createElement(bt.a,{className:"text-truncate",title:t.username},c.a.createElement(br,{src:t.photo}),c.a.createElement(ta.b,{to:"/users/".concat(t.id)},t.username)),c.a.createElement(Vt.a,null,"Burn down"===n?c.a.createElement(Nn,{tasks:a,size:"sm"}):c.a.createElement(In,{tasks:a,size:"sm"}))))},Sr=function(){var e=Object(r.useContext)(pt).state,t=e.tasks,a=e.project.members,n=e.custom_value_map,o=e.custom_eid,s=Object(r.useState)("Burn up"),l=Object(re.a)(s,2),i=l[0],u=l[1],m=Object(r.useMemo)((function(){return e=t,oe.a.chain(e).reject((function(e){return!e.assigned_to})).groupBy("assigned_to").value();var e}),[t]),_=Object(r.useMemo)((function(){return oe.a.chain(a).filter((function(e){return oe.a.has(m,e.id)})).map((function(e){return{user:e,tasks:m[e.id],closed:fr(n,m[e.id],Number(o))}})).sortBy("closed").value()}),[m,a,n,o]),d=Object(r.useCallback)((function(e){u(e)}),[u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Er.a,{tag:"nav"},c.a.createElement(pr.a,{title:"Home",tag:ta.b,to:"/"},c.a.createElement(Le.a,{icon:we.t})),c.a.createElement(pr.a,{className:"mr-auto",tag:"span",active:!0},c.a.createElement(Le.a,{icon:we.c}),"  Board"),c.a.createElement(Mn,{type:i,onSelect:d}),c.a.createElement(oa,{size:"sm"})),c.a.createElement(xa.a,{className:"mt-1"},_.map((function(e,t){var a=e.user,n=e.tasks;return c.a.createElement(Tr,{key:t,user:a,tasks:n,type:i})}))))},vr=function(){Object(l.b)();var e=f(),t=Object(r.useContext)(pt).dispatch;return Object(r.useEffect)((function(){e&&t&&t({type:ee.SET_URL,payload:{url:e}})}),[t,e]),c.a.createElement(c.a.Fragment,null)},yr=a(287),kr=a.n(yr),jr=function(){var e=Object(r.useState)(Date.now()),t=Object(re.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),s=Object(re.a)(o,2),l=s[0],i=s[1],u=Object(r.useState)(""),m=Object(re.a)(u,2),_=m[0],d=m[1],E=L(),p=Object(r.useCallback)((function(){i(!1)}),[i]);return Object(r.useEffect)((function(){a<E.emitAt&&(i(!0),n(E.emitAt),d("".concat(".","/").concat(E.type,".mp3")))}),[a,E]),l?c.a.createElement(kr.a,{autoPlay:l,src:_,onEnded:p}):c.a.createElement(c.a.Fragment,null)};s.a.render(c.a.createElement(l.a,{store:$},c.a.createElement((function(){return c.a.createElement("div",{className:"container-xl"},c.a.createElement(ne.a,{className:"toast-top"}),c.a.createElement(ta.a,null,c.a.createElement(Ot,null,c.a.createElement(dr,null),c.a.createElement(jr,null),c.a.createElement(ea,null),c.a.createElement(aa.a,{exact:!0,path:"/",component:Kn}),c.a.createElement(aa.a,{exact:!0,path:"/board",component:Sr}),c.a.createElement(aa.a,{exact:!0,path:"/users/:uid",component:Jn}),c.a.createElement(aa.a,{exact:!0,path:"/users/:uid/:total_hours",component:Jn}),c.a.createElement(vr,null))))}),null),c.a.createElement((function(){var e=Object(l.b)(),t=f(),a=D(),n=N();return Object(r.useEffect)((function(){t&&e(b.fetchList())}),[t,e]),Object(r.useEffect)((function(){t&&a&&e(y.fetchList({milestone:Number(a)}))}),[t,a,e,n]),c.a.createElement(c.a.Fragment,null)}),null)),document.getElementById("root")),function(){var e=$.dispatch,t=ae(n.URL),a=ae(n.MID);t&&e(E.setUrl(t)),a&&e(g.setMid(a))}()},70:function(e,t,a){e.exports={top:"Pomodoro_top__2KPBC",button_group:"Pomodoro_button_group__25QhE",chip_set:"Pomodoro_chip_set__UcFix",fix_w:"Pomodoro_fix_w__26hsb",short_break_icon:"Pomodoro_short_break_icon__3e20m",long_break_icon:"Pomodoro_long_break_icon__1CgqS",live:"Pomodoro_live__293Tt"}}},[[318,1,2]]]);
//# sourceMappingURL=main.1c056726.chunk.js.map