{"version":3,"sources":["components/UserTasks.module.css","components/Controller.module.css","tomato.png","actions.ts","util/timer.ts","store.ts","reducer.ts","util/useSideEffector.ts","sideEffectors/fetchProjects.ts","sideEffectors/fetchProject.ts","sideEffectors/fetchMilestones.ts","sideEffectors/fetchTasks.ts","sideEffectors/fetchTaskStatuses.ts","sideEffectors/fetchCustomAttrs.ts","sideEffectors/fetchCustomValueMap.ts","sideEffectors/fetchUser.ts","util/toastr.tsx","sideEffectors/patchCustomValue.ts","sideEffectors/patchTask.ts","sideEffectors/signIn.ts","sideEffectors/syncPomodoro.ts","AppDb.ts","sideEffectors/addPomodoro.ts","sideEffectors/calcPomodoroTotal.ts","sideEffectors/loadPomodoroTotals.ts","sideEffectors/index.ts","sideEffectors/signOut.ts","sideEffectors/setAuthToken.ts","sideEffectors/setUrl.ts","sideEffectors/setPid.ts","sideEffectors/setMid.ts","sideEffectors/setCustomEid.ts","sideEffectors/setCustomRid.ts","sideEffectors/syncBizDays.ts","sideEffectors/syncRejectTaskStatusIds.ts","sideEffectors/syncTaskId.ts","init.ts","Provider.tsx","util/handler.ts","components/ProjectSelector.tsx","components/MilestoneSelector.tsx","components/CustomValuesSelector.tsx","components/DaysSelector.tsx","components/TaskStatusSelector.tsx","components/Controller.tsx","components/UpdateButton.tsx","components/SignInForm.tsx","components/UserTasks.tsx","components/InputGroupSpinner.tsx","tomato.svg","components/Tomato.tsx","components/UserStory.tsx","components/UnEstimatedTasks.tsx","components/NotAssignedTasks.tsx","components/Chart.tsx","components/OverView.tsx","components/PersonalTasks.tsx","components/PersonalInfo.tsx","components/PersonalPage.tsx","components/PomodoroHeatmap.tsx","components/Pomodoro.tsx","App.tsx","serviceWorker.ts","index.tsx","components/Pomodoro.module.css","components/UserStory.module.css","components/Tomato.module.css"],"names":["module","exports","gold","silver","bronze","custom_input_td","header","__webpack_require__","p","ActionTypes","TimerState","TimerMode","StorageKey","TimerDurationMin","_TimerDurationMin","Object","defineProperty","FOCUS","SHORT","LONG","timer","Timer","tick","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","STOPPED","mode","duration","checkpointStartAt","NaN","checkpointElapsed","expireTimeout","tickInterval","tickOffsetTimeout","restoreExpired","estimateCompletedAt","Date","restoreStorage","event","listener","get","prototype","isStopped","setExpireTimeout","setTickInterval","RUNNING","now","emit","status","saveStorage","clearExpireTimeout","clearTickInterval","isRunning","periodElapsed","PAUSED","isPaused","remaining","stop","start","seconds","_this2","setTimeout","clearTimeout","_this3","adjusted","arguments","length","undefined","limit","setSecTickInterval","offset","setInterval","_this4","clearInterval","localStorage","setItem","STATE","MODE","CHECKPOINT_START_AT","Number","isNaN","String","CHECKPOINT_ELAPSED","val","lsState","getItem","lsMode","lsCpStartAt","lsCpElapsed","_","includes","values","isValidMode","changeMode","cpElapsed","cpStartAt","Math","max","elapsed","EventEmitter","_getFromStorage","key","getFromStorage","getFromStorageWithSubkey","subkey","concat","setToStorage","item","setToStorageWithSubkey","initialState","url","auth_token","auth_error","username","password","user","projects","pid","project","mid","custom_eid","custom_rid","custom_attrs","custom_attr_e","custom_attr_r","biz_days","milestones","milestone","tasks","task_id","task","user_tasks","task_statuses","active_task_statuses","custom_value_map","WeakMap","reject_task_status_ids","updated_time","isOpen","pomodoro_date","pomodoro_number","pomodoro_used_number","loaded","isNotifable","pomodoro_daily_totals","pomodoro_state","pomodoro_mode","reducer","action","type","SET_URL","payload","objectSpread","SET_PROJECTS","SET_PID","SET_PROJECT","SET_MID","SET_MILESTONES","SET_MILESTONE","SET_CUSTOM_EID","SET_CUSTOM_ATTRS","SET_CUSTOM_ATTR_E","SET_CUSTOM_ATTR_R","SET_CUSTOM_RID","SET_BIZ_DAYS","ADD_BIZ_DAY","biz_day","chain","toConsumableArray","uniq","sort","value","REMOVE_BIZ_DAY","reject","SET_TASKS","SET_TASK_ID","RESET_TASK_ID","SET_TASK","SET_USER_TASKS","SET_TASK_STATUSES","SET_ACTIVE_TASK_STATUSES","SET_CUSTOM_VALUE_MAP","SET_USER","RESET_USER","SET_REJECT_TASK_STATUS_IDS","ADD_REJECT_TASK_STATUS_ID","reject_task_status_id","compact","REMOVE_REJECT_TASK_STATUS_ID","OPEN_CONTROLLER","CLOSE_CONTROLLER","UPDATE_DATA","SIGN_IN","_action$payload","SET_AUTH_TOKEN","SET_AUTH_ERROR","SIGN_OUT","ADD_POMODORO","USE_POMODORO","used_number","RESET_POMODORO","RESTORE_POMODORO","_action$payload2","SET_POMODORO_TOTALS","LOADED","ALLOW_NOTIFICATION","SET_POMODORO_STATE","SET_POMODORO_MODE","dispatchSideEffector","dispatch","sideEffector","dispatchSECaller","fetchProjecs","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_state","_ref2","wrap","_context","prev","next","fetchData","sent","data","t0","errToastr","_x","_x2","_x3","apply","fetchProject","FETCH_PROJECT","fetchMilestones","FETCH_MILESTONES","params","fetchTasks","FETCH_TASKS","headers","x-disable-pagination","filter","fetchTaskStatuses","FETCH_TASK_STATUSES","fetchCustomAttrs","FETCH_CUSTOM_ATTRS","fetchCustomValueMap","_callee2","_context2","FETCH_CUSTOM_VALUE_MAP","Promise","all","map","_ref3","custom_attr_val","id","abrupt","_x4","t1","t2","fetchUser","uid","FETCH_USER","MessageWithIcon","icon","message","react_default","createElement","className","index_es","toastr","toast","success","toastr_MessageWithIcon","faCheck","error","faCheckCircle","patchCustomValue","version","custom_value","attributes_values","PATCH_CUSTOM_VALUE","find","has","patchData","meta","use_pomodoro","patchTask","_patchData","PATCH_TASK","signIn","postData","USERNAME","PASSWORD","syncPomodoro","dispatchm","defer","POMODORO_DATE","POMODORO_NUMBER","POMODORO_USED_NUMBER","db","_Dexie","AppDatabase","items","totals","stores","table","inherits","Dexie","addPomodoro","_action$meta","completedAt","pure","dateKey","moment","format","put","CALC_POMODORO_TOTAL","calcPomodoroTotal","query","totalDoc","pureValue","dayOfWeek","date","where","toArray","day","toDate","LOAD_POMODORO_TOTALS","loadPomodoroTotals","path","config","axios","baseUrl","post","patch","err","response","_error_message","e","rootSideEffector","FETCH_PROJECTS","removeItem","defaults","common","setAuthToken","URL","setUrl","PID","MID","CUSTOM_EID","CUSTOM_RID","setPid","BIZ_DAYS","split","setMid","setCustomEid","setCustomRid","dispathc","join","syncBizDays","REJECT_TASK_STATUS_IDS","syncRejectTaskStatusIds","TASK_ID","syncTaskId","init","syncStorage","replace","getCustomAttr","RootContext","createContext","Provider","children","_useSideEffector","slicedToArray","dispatchSE","useCallback","stateStore","useMemo","getter","setter","newState","stateStoreFactory","useSideEffector","useReducer","_useSideEffector2","useEffect","orderBy","order","assigned_to","sortBy","preventDefault","stopPropagation","ProjectSelector","_useContext","useContext","_useContext$state","handleChange","target","InputGroup","InputGroupAddon","addonType","Input","onChange","name","MilestoneSelector","CustomValuesSelector","dayNameFromIdx","idx","weekClassName","text-danger","text-info","DayItem","checked","isPlanning","eleId","Fragment","classNames","table-info","biz","isWeekDay","FormGroup","check","inline","Label","disabled","isWeekendDay","UncontrolledTooltip","indexOf","dayName","DaysSelector","_useContext2","_useContext2$state","_useState","useState","_useState2","setItems","startM","estimated_start","local","daysInSprint","estimated_finish","diff","times","i","clone","add","getDays","weekdays","chunk","Card","CardHeader","Table","bordered","days","DaysSelector_DayItem","StatusItem","defaultChecked","TaskStatusSelector","CardBody","TaskStatusSelector_StatusItem","ToggleIcon","rotation","faChevronCircleRight","Controller","stateUrl","handleUrl","handleSubmit","toggle","taskboardUrl","project_extra_info","slug","getTaskboardUrl","spName","range","head","last","getRange","styles","onClick","Controller_ToggleIcon","Badge","color","pill","href","rel","faExternalLinkAlt","Collapse","Form","onSubmit","defaultValue","placeholder","Button","ProjectSelector_ProjectSelector","MilestoneSelector_MilestoneSelector","CustomValuesSelector_CustomValuesSelector","DaysSelector_DaysSelector","TaskStatusSelector_TaskStatusSelector","UpdateButton","updateData","faSyncAlt","SignInForm","sign_in_username","setUsername","_useState3","_useState4","setPassword","_useState5","_useState6","loading","setLoading","handleUsername","handlePassword","handleSignOut","InputGroupText","faUser","title","faSignOutAlt","onInput","invalid","faKey","Spinner","size","faSignInAlt","barStyles","getTasksByUser","groupBy","AvatarSquare","props","src","random","assign","square","getCustomVal","sum","getSumCustomVal","getCustomValVersion","custon_value_map","isCustomValValid","r","is_closed","isCustomValInvalid","NameAndWorkLoad","total","imgSrc","_useMemo","faGrinBeam","faGrinBeamSweat","faDizzy","_useMemo2","tblCls","UserTasks_AvatarSquare","Medal","_useMemo3","isNumber","abs","getGrade","_useMemo4","grade","num","faMedal","TaskProgress","eid","reverse","style","label","allSum","Progress","multi","bar","UserRow","_ref4","sums","isPast","hpd","customTotal","setTotal","sumItem","margedTotal","totalStr","UserTasks_NameAndWorkLoad","photo","bsSize","step","react_router_dom","to","UserTasks_TaskProgress","UserTasks_Medal","UserTasks","members","setHpd","activeLen","taskSumByUser","rid","mapValues","reduce","result","getTaskSumByUser","notAssignedSum","endOf","tasksByUser","Navbar","light","faTimes","faEquals","SignInForm_SignInForm","UpdateButton_UpdateButton","UserTasks_UserRow","faGhost","InputGroupSpinner","faSpinner","_extends","source","hasOwnProperty","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","TomatoState","tomato_ref2","fill","d","tomato_SvgTomato","svgRef","x","y","viewBox","xmlSpace","ref","ForwardRef","forwardRef","Tomato","_classNames","bl","br","fresh","FRESH","stale","STALE","convToTasksByUserStory","user_story","user_story_extra_info","every","needAuthMsg","UserStoryLink","usName","subject","TaskLink","taskName","ToggleNumberInput","onEditable","onValueChange","valid","submitting","setChecked","setVal","running","setRunning","evt","currentTarget","handleVal","toggle_input","InputGroupSpinner_InputGroupSpinner","InputGroupText_default","faHandPointRight","min","faCloudUploadAlt","readOnly","switch_next","faEdit","Grade","display_medal","medal","TaskStatusItem","_ref5","onSelect","handleClick","DropdownItem","_ref6","_useState7","_useState8","handleSelect","UncontrolledDropdown","DropdownToggle","caret","status_extra_info","DropdownMenu","UserStory_TaskStatusItem","UserItem","_ref7","TaskUserSelector","_ref8","_useState9","_useState10","_useContext5","UserStory_UserItem","NotAssignedButton","_ref9","_useState11","_useState12","faUserTimes","EstimateInput","_ref10","_useContext7","_useContext7$state","unEstimated","UserStory_ToggleNumberInput","ResultInput","_ref11","_useState13","_useState14","setIsOpen","_useState15","_useState16","set_used_number","_useState17","_useState18","editable","setEditable","_useState19","_useState20","setSubmitting","_useContext8","_useContext8$state","handleToggle","handlePluse","handleMinus","handleReset","handleEditable","handleValueChange","handleUsePomodoro","elId","usableNumber","submittable","isMax","Popover","placement","trigger","PopoverHeader","PopoverBody","ButtonGroup","faPlus","faMinus","Tomato_Tomato","faEraser","TaskTimerButton","_ref12","_useContext9","_useContext9$state","handleStart","resume","handlePause","pause","faPause","faPlay","TaskItem","_ref13","_useContext10$state","inactive","ListGroupItem_default","UserStory_TaskLink","UserStory_NotAssignedButton","UserStory_TaskTimerButton","UserStory_TaskStatusSelector","Row","Col","UserStory_EstimateInput","UserStory_ResultInput","UserStory_Grade","UserStoryWithEstimate","_ref14","UserStory_UserStoryLink","ListGroup_default","UserStoryWithTaskUser","_ref15","UserStory_TaskUserSelector","UserStory","_ref16","_useState21","_useState22","alert-primary","UserStory_TaskItem","UnEstimatedTasks","userStories","UserStory_UserStoryWithEstimate","NotAssignedTasks","UserStory_UserStoryWithTaskUser","getTaskCreated","created_date","getSumVal","Chart","setData","days_len","allTaskVal","estimate","getTaskCreatedToday","finished_date","getTaskFinished","labelFormatter","formatter","toFixed","es6","width","height","dataKey","stackId","OverView","UserTasks_UserTasks","Chart_Chart","NotAssignedTasks_NotAssignedTasks","UnEstimatedTasks_UnEstimatedTasks","PersonalTasks","some","UserStory_UserStory","CardFooter","PersonalInfo","PersonalPage","useRouter","match","tag","Link","faArrowCircleLeft","PersonalInfo_PersonalInfo","PersonalTasks_PersonalTasks","Alert","PomodoroHeatmap","maxVal","maxBy","classForValue","ceil","tooltipDataAttrs","data-tip","startDate","subtract","react_calendar_heatmap_umd_default","showWeekdayLabels","dist_default","favico","require","secToMin","TimerIcon","short_break_icon","faCoffee","long_break_icon","faCookie","TimerItem","Pomodoro_TimerIcon","Pomodoro","isOpenDropdown","setIsOpenDropdown","setRemaining","setState","setMode","progress","setProgress","unit","setUnit","toggleDropdown","setRemainingAndUnit","_toValueAndUnit","toValueAndUnit","_toValueAndUnit2","handleState","handleMode","handleTick","handleExpire","body","clickCount","closeTimer","notify","Notification","tomatoIcon","onclick","close","handleRetry","handleRemove","on","removeAllListeners","today","permission","requestPermission","bgColor","textColor","animation","badge","reset","buffer","taskTitle","taskSubject","truncate","top","theme_next","options","primary","linear_progress_next","closed","button_group","InputGroupButtonDropdown","Pomodoro_TimerItem","fix_w","font-weight-bold","faRedo","chip_next","chip_set","faTasks","onRemove","trailingIcon","PomodoroHeatmap_PomodoroHeatmap","App","react_toastify","Provider_Provider","Pomodoro_Pomodoro","Controller_Controller","react_router","exact","component","Boolean","window","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.68d6d2a2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"gold\":\"UserTasks_gold__1MP40\",\"silver\":\"UserTasks_silver__GpK9Y\",\"bronze\":\"UserTasks_bronze__1aHZc\",\"custom_input_td\":\"UserTasks_custom_input_td__1JWmj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Controller_header__33lvE\"};","module.exports = __webpack_public_path__ + \"static/media/tomato.c392a271.png\";","import {\n  IProject,\n  IMilestone,\n  ICustomAttr,\n  ITask,\n  ICustomValueMap,\n  ITaskStatus,\n  IUser\n} from \"./store\";\nimport { IPomodoroHistory, IDailyTotal } from \"./AppDb\";\nimport { TimerState, TimerMode } from \"./util/timer\";\n\nexport enum ActionTypes {\n  SET_URL = \"SET_URL\",\n  SIGN_IN = \"SIGN_IN\",\n  SET_AUTH_TOKEN = \"SET_AUTH_TOKEN\",\n  SET_AUTH_ERROR = \"SET_AUTH_ERROR\",\n  SIGN_OUT = \"SIGN_OUT\",\n  FETCH_PROJECTS = \"FETCH_PROJECTS\",\n  SET_PROJECTS = \"SET_PROJECTS\",\n  SET_PID = \"SET_PID\",\n  FETCH_PROJECT = \"FETCH_PROJECT\",\n  SET_PROJECT = \"SET_PROJECT\",\n  FETCH_MILESTONES = \"FETCH_MILESTONES\",\n  SET_MID = \"SET_MID\",\n  SET_MILESTONES = \"SET_MILESTONES\",\n  SET_MILESTONE = \"SET_MILESTONE\",\n  SET_CUSTOM_EID = \"SET_CUSTOM_EID\",\n  SET_CUSTOM_RID = \"SET_CUSTOM_RID\",\n  FETCH_CUSTOM_ATTRS = \"FETCH_CUSTOM_ATTRS\",\n  SET_CUSTOM_ATTRS = \"SET_CUSTOM_ATTRS\",\n  SET_CUSTOM_ATTR_E = \"SET_CUSTOM_ATTR_E\",\n  SET_CUSTOM_ATTR_R = \"SET_CUSTOM_ATTR_R\",\n  SET_BIZ_DAYS = \"SET_BIZ_DAYS\",\n  ADD_BIZ_DAY = \"ADD_BIZ_DAY\",\n  REMOVE_BIZ_DAY = \"REMOVE_BIZ_DAY\",\n  FETCH_TASKS = \"FETCH_TASKS\",\n  SET_TASKS = \"SET_TASKS\",\n  SET_TASK_ID = \"SET_TASK_ID\",\n  RESET_TASK_ID = \"RESET_TASK_ID\",\n  SET_TASK = \"SET_TASK\",\n  SET_USER_TASKS = \"SET_USER_TASKS\",\n  PATCH_TASK = \"PATCH_TASK\",\n  FETCH_TASK_STATUSES = \"FETCH_TASK_STATUSES\",\n  SET_TASK_STATUSES = \"SET_TASK_STATUSES\",\n  SET_ACTIVE_TASK_STATUSES = \"SET_ACTIVE_TASK_STATUSES\",\n  FETCH_CUSTOM_VALUE_MAP = \"FETCH_CUSTOM_VALUE_MAP\",\n  SET_CUSTOM_VALUE_MAP = \"SET_CUSTOM_VALUE_MAP\",\n  PATCH_CUSTOM_VALUE = \"PATCH_CUSTOM_VALUE\",\n  FETCH_USER = \"FETCH_USER\",\n  SET_USER = \"SET_USER\",\n  RESET_USER = \"RESET_USER\",\n  SET_REJECT_TASK_STATUS_IDS = \"SET_REJECT_TASK_STATUS_IDS\",\n  ADD_REJECT_TASK_STATUS_ID = \"ADD_REJECT_TASK_STATUS_ID\",\n  REMOVE_REJECT_TASK_STATUS_ID = \"REMOVE_REJECT_TASK_STATUS_ID\",\n  OPEN_CONTROLLER = \"OPEN_CONTROLLER\",\n  CLOSE_CONTROLLER = \"CLOSE_CONTROLLER\",\n  UPDATE_DATA = \"UPDATE_DATA\",\n  ADD_POMODORO = \"ADD_POMODORO\",\n  USE_POMODORO = \"USE_POMODORO\",\n  RESET_POMODORO = \"RESET_POMODORO\",\n  RESTORE_POMODORO = \"RESTORE_POMODORO\",\n  CALC_POMODORO_TOTAL = \"CALC_POMODORO_TOTAL\",\n  LOAD_POMODORO_TOTALS = \"LOAD_POMODORO_TOTALS\",\n  SET_POMODORO_TOTALS = \"SET_POMODORO_TOTALS\",\n  LOADED = \"LOADED\",\n  ALLOW_NOTIFICATION = \"ALLOW_NOTIFICATION\",\n  SET_POMODORO_STATE = \"SET_POMODORO_STATE\",\n  SET_POMODORO_MODE = \"SET_POMODORO_MODE\"\n}\n\nexport interface IAction {\n  type: ActionTypes;\n  payload?: any;\n  meta?: { [key: string]: any };\n}\n\nexport interface SET_URL extends IAction {\n  type: ActionTypes.SET_URL;\n  payload: { url: string };\n}\nexport interface SIGN_IN extends IAction {\n  type: ActionTypes.SIGN_IN;\n  payload: { username: string; password: string };\n}\nexport interface SET_AUTH_TOKEN extends IAction {\n  type: ActionTypes.SET_AUTH_TOKEN;\n  payload: { auth_token: string };\n}\nexport interface SET_AUTH_ERROR extends IAction {\n  type: ActionTypes.SET_AUTH_ERROR;\n}\nexport interface SIGN_OUT extends IAction {\n  type: ActionTypes.SIGN_OUT;\n}\nexport interface FETCH_PROJECTS extends IAction {\n  type: ActionTypes.FETCH_PROJECTS;\n}\nexport interface SET_PROJECTS extends IAction {\n  type: ActionTypes.SET_PROJECTS;\n  payload: { projects: IProject[] };\n}\n\nexport interface SET_PID extends IAction {\n  type: ActionTypes.SET_PID;\n  payload: { pid: string };\n}\nexport interface FETCH_PROJECT extends IAction {\n  type: ActionTypes.FETCH_PROJECT;\n  payload: { pid: string };\n}\nexport interface SET_PROJECT extends IAction {\n  type: ActionTypes.SET_PROJECT;\n  payload: { project: IProject };\n}\nexport interface FETCH_MILESTONES extends IAction {\n  type: ActionTypes.FETCH_MILESTONES;\n  payload: { project: string };\n}\nexport interface SET_MILESTONES extends IAction {\n  type: ActionTypes.SET_MILESTONES;\n  payload: { milestones: IMilestone[] };\n}\n\nexport interface SET_MID extends IAction {\n  type: ActionTypes.SET_MID;\n  payload: { mid: string };\n}\nexport interface SET_MILESTONE extends IAction {\n  type: ActionTypes.SET_MILESTONE;\n  payload: { milestone: IMilestone };\n}\n\nexport interface SET_CUSTOM_EID extends IAction {\n  type: ActionTypes.SET_CUSTOM_EID;\n  payload: { custom_eid: string };\n}\n\nexport interface SET_CUSTOM_RID extends IAction {\n  type: ActionTypes.SET_CUSTOM_RID;\n  payload: { custom_rid: string };\n}\n\nexport interface FETCH_CUSTOM_ATTRS extends IAction {\n  type: ActionTypes.FETCH_CUSTOM_ATTRS;\n  payload: { project: string };\n}\nexport interface SET_CUSTOM_ATTRS extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTRS;\n  payload: { custom_attrs: ICustomAttr[] };\n}\nexport interface SET_CUSTOM_ATTR_E extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTR_E;\n  payload: { custom_attr_e: ICustomAttr };\n}\nexport interface SET_CUSTOM_ATTR_R extends IAction {\n  type: ActionTypes.SET_CUSTOM_ATTR_R;\n  payload: { custom_attr_r: ICustomAttr };\n}\nexport interface SET_BIZ_DAYS extends IAction {\n  type: ActionTypes.SET_BIZ_DAYS;\n  payload: { biz_days: string[] };\n}\n\nexport interface ADD_BIZ_DAY extends IAction {\n  type: ActionTypes.ADD_BIZ_DAY;\n  payload: { biz_day: string };\n}\n\nexport interface REMOVE_BIZ_DAY extends IAction {\n  type: ActionTypes.REMOVE_BIZ_DAY;\n  payload: { biz_day: string };\n}\n\nexport interface FETCH_TASKS extends IAction {\n  type: ActionTypes.FETCH_TASKS;\n  payload: { milestone: string; reject_task_status_ids: string[] };\n}\nexport interface SET_TASKS extends IAction {\n  type: ActionTypes.SET_TASKS;\n  payload: { tasks: ITask[] };\n}\nexport interface SET_TASK_ID extends IAction {\n  type: ActionTypes.SET_TASK_ID;\n  payload: { task_id: string };\n}\nexport interface RESET_TASK_ID extends IAction {\n  type: ActionTypes.RESET_TASK_ID;\n}\n\nexport interface SET_TASK extends IAction {\n  type: ActionTypes.SET_TASK;\n  payload: { task: ITask };\n}\n\nexport interface SET_USER_TASKS extends IAction {\n  type: ActionTypes.SET_USER_TASKS;\n  payload: { user_tasks: ITask[] };\n}\n\nexport interface PATCH_TASK extends IAction {\n  type: ActionTypes.PATCH_TASK;\n  payload: { key: keyof ITask; value: ITask[keyof ITask]; id: number };\n}\nexport interface FETCH_CUSTOM_VALUE_MAP extends IAction {\n  type: ActionTypes.FETCH_CUSTOM_VALUE_MAP;\n  payload: { tasks: ITask[] };\n}\nexport interface SET_CUSTOM_VALUE_MAP extends IAction {\n  type: ActionTypes.SET_CUSTOM_VALUE_MAP;\n  payload: { custom_value_map: ICustomValueMap };\n}\nexport interface PATCH_CUSTOM_VALUE extends IAction {\n  type: ActionTypes.PATCH_CUSTOM_VALUE;\n  payload: {\n    id: string | number;\n    key: string;\n    value: string | number;\n    version: number;\n  };\n  meta?: {\n    use_pomodoro?: {\n      used_number: number;\n    };\n  };\n}\nexport interface FETCH_TASK_STATUSES extends IAction {\n  type: ActionTypes.FETCH_TASK_STATUSES;\n  payload: { project: string };\n}\nexport interface SET_TASK_STATUSES extends IAction {\n  type: ActionTypes.SET_TASK_STATUSES;\n  payload: { task_statuses: ITaskStatus[] };\n}\nexport interface SET_ACTIVE_TASK_STATUSES extends IAction {\n  type: ActionTypes.SET_ACTIVE_TASK_STATUSES;\n  payload: { active_task_statuses: ITaskStatus[] };\n}\n\nexport interface FETCH_USER extends IAction {\n  type: ActionTypes.FETCH_USER;\n  payload: { uid: string };\n}\nexport interface SET_USER extends IAction {\n  type: ActionTypes.SET_USER;\n  payload: { user: IUser };\n}\nexport interface RESET_USER extends IAction {\n  type: ActionTypes.RESET_USER;\n}\nexport interface SET_REJECT_TASK_STATUS_IDS extends IAction {\n  type: ActionTypes.SET_REJECT_TASK_STATUS_IDS;\n  payload: { reject_task_status_ids: string[] };\n}\nexport interface ADD_REJECT_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.ADD_REJECT_TASK_STATUS_ID;\n  payload: { reject_task_status_id: string };\n}\n\nexport interface REMOVE_REJECT_TASK_STATUS_ID extends IAction {\n  type: ActionTypes.REMOVE_REJECT_TASK_STATUS_ID;\n  payload: { reject_task_status_id: string };\n}\n\nexport interface OPEN_CONTROLLER extends IAction {\n  type: ActionTypes.OPEN_CONTROLLER;\n}\n\nexport interface CLOSE_CONTROLLER extends IAction {\n  type: ActionTypes.CLOSE_CONTROLLER;\n}\n\nexport interface UPDATE_DATA extends IAction {\n  type: ActionTypes.UPDATE_DATA;\n}\nexport interface ADD_POMODORO extends IAction {\n  type: ActionTypes.ADD_POMODORO;\n  meta?: Pick<IPomodoroHistory, \"completedAt\" | \"duration\" | \"pure\">;\n}\nexport interface USE_POMODORO extends IAction {\n  type: ActionTypes.USE_POMODORO;\n  payload: { used_number: number };\n}\nexport interface RESET_POMODORO extends IAction {\n  type: ActionTypes.RESET_POMODORO;\n  payload: { pomodoro_date: string };\n}\nexport interface RESTORE_POMODORO extends IAction {\n  type: ActionTypes.RESTORE_POMODORO;\n  payload: {\n    pomodoro_date: string;\n    pomodoro_number: number;\n    pomodoro_used_number: number;\n  };\n}\nexport interface CALC_POMODORO_TOTAL extends IAction {\n  type: ActionTypes.CALC_POMODORO_TOTAL;\n  payload: {\n    dateKey: string;\n  };\n}\nexport interface LOAD_POMODORO_TOTALS extends IAction {\n  type: ActionTypes.LOAD_POMODORO_TOTALS;\n}\nexport interface SET_POMODORO_TOTALS extends IAction {\n  type: ActionTypes.SET_POMODORO_TOTALS;\n  payload: {\n    pomodoro_daily_totals: IDailyTotal[];\n  };\n}\nexport interface LOADED extends IAction {\n  type: ActionTypes.LOADED;\n}\nexport interface ALLOW_NOTIFICATION extends IAction {\n  type: ActionTypes.ALLOW_NOTIFICATION;\n}\nexport interface SET_POMODORO_STATE extends IAction {\n  type: ActionTypes.SET_POMODORO_STATE;\n  payload: {\n    pomodoro_state: TimerState;\n  };\n}\nexport interface SET_POMODORO_MODE extends IAction {\n  type: ActionTypes.SET_POMODORO_MODE;\n  payload: {\n    pomodoro_mode: TimerMode;\n  };\n}\n\nexport type Actions =\n  | SET_URL\n  | SIGN_IN\n  | SET_AUTH_TOKEN\n  | SET_AUTH_ERROR\n  | SIGN_OUT\n  | FETCH_PROJECTS\n  | SET_PROJECTS\n  | SET_PID\n  | FETCH_PROJECT\n  | SET_PROJECT\n  | FETCH_MILESTONES\n  | SET_MILESTONES\n  | SET_MID\n  | SET_MILESTONE\n  | SET_CUSTOM_EID\n  | SET_CUSTOM_RID\n  | FETCH_CUSTOM_ATTRS\n  | SET_CUSTOM_ATTRS\n  | SET_CUSTOM_ATTR_E\n  | SET_CUSTOM_ATTR_R\n  | PATCH_CUSTOM_VALUE\n  | SET_BIZ_DAYS\n  | SET_BIZ_DAYS\n  | ADD_BIZ_DAY\n  | REMOVE_BIZ_DAY\n  | FETCH_TASKS\n  | SET_TASKS\n  | SET_TASK_ID\n  | RESET_TASK_ID\n  | SET_TASK\n  | SET_USER_TASKS\n  | PATCH_TASK\n  | FETCH_CUSTOM_VALUE_MAP\n  | SET_CUSTOM_VALUE_MAP\n  | FETCH_TASK_STATUSES\n  | SET_TASK_STATUSES\n  | SET_ACTIVE_TASK_STATUSES\n  | FETCH_USER\n  | SET_USER\n  | RESET_USER\n  | SET_REJECT_TASK_STATUS_IDS\n  | ADD_REJECT_TASK_STATUS_ID\n  | REMOVE_REJECT_TASK_STATUS_ID\n  | OPEN_CONTROLLER\n  | CLOSE_CONTROLLER\n  | UPDATE_DATA\n  | ADD_POMODORO\n  | USE_POMODORO\n  | RESET_POMODORO\n  | RESTORE_POMODORO\n  | CALC_POMODORO_TOTAL\n  | LOAD_POMODORO_TOTALS\n  | SET_POMODORO_TOTALS\n  | LOADED\n  | ALLOW_NOTIFICATION\n  | SET_POMODORO_STATE\n  | SET_POMODORO_MODE;\n","import { EventEmitter } from \"events\";\nimport _ from \"lodash\";\nexport enum TimerState {\n  STOPPED = \"stopped\",\n  RUNNING = \"running\",\n  PAUSED = \"paused\"\n}\nexport enum TimerMode {\n  FOCUS = \"Focusing\",\n  SHORT = \"Short break\",\n  LONG = \"Long break\"\n}\nexport const TimerDurationMin = {\n  [TimerMode.FOCUS]: 25,\n  [TimerMode.SHORT]: 5,\n  [TimerMode.LONG]: 15\n};\nenum StorageKey {\n  STATE = \"pomodoro_state\",\n  MODE = \"pomodoro_mode\",\n  CHECKPOINT_START_AT = \"pomodoro_checkpoint_start_at\",\n  CHECKPOINT_ELAPSED = \"pomodoro_checkpoint_elapsed\"\n}\nconst isValidState = (val: string | null) =>\n  _.includes(_.values(TimerState), val);\n\nconst isValidMode = (val: string | null) =>\n  _.includes(_.values(TimerMode), val);\n\ntype TimerEvents =\n  | \"start\"\n  | \"stop\"\n  | \"pause\"\n  | \"resume\"\n  | \"expire\"\n  | \"tick\"\n  | \"change_mode\";\ninterface ITimerStatus {\n  state: TimerState;\n  duration: number;\n  elapsed: number;\n  remaining: number;\n  checkpointElapsed: number;\n  checkpointStartAt: number;\n  mode: TimerMode;\n}\nexport type TimerEventListener = (status: ITimerStatus) => void;\nclass Timer extends EventEmitter {\n  state: TimerState = TimerState.STOPPED;\n  mode: TimerMode = TimerMode.FOCUS;\n  duration: number = TimerDurationMin[TimerMode.FOCUS] * 60;\n  tick: number = 60;\n  checkpointStartAt: number = NaN;\n  checkpointElapsed: number = 0;\n  expireTimeout: NodeJS.Timeout | null = null;\n  tickInterval: NodeJS.Timeout | null = null;\n  tickOffsetTimeout: NodeJS.Timeout | null = null;\n  restoreExpired = false;\n  estimateCompletedAt: Date = new Date();\n  constructor(tick: number) {\n    super();\n    this.tick = tick;\n    this.restoreStorage();\n  }\n  get isStopped() {\n    return this.state === TimerState.STOPPED;\n  }\n  get isRunning() {\n    return this.state === TimerState.RUNNING;\n  }\n  get isPaused() {\n    return this.state === TimerState.PAUSED;\n  }\n  get remaining() {\n    return Math.max(this.duration - this.elapsed, 0);\n  }\n\n  get elapsed() {\n    let periodElapsed = 0;\n    if (this.checkpointStartAt && this.isRunning) {\n      periodElapsed = (Date.now() - this.checkpointStartAt) / 1000;\n    }\n    return this.checkpointElapsed + periodElapsed;\n  }\n  get status(): ITimerStatus {\n    return {\n      state: this.state,\n      duration: this.duration,\n      elapsed: this.elapsed,\n      remaining: this.remaining,\n      checkpointElapsed: this.checkpointElapsed,\n      checkpointStartAt: this.checkpointStartAt,\n      mode: this.mode\n    };\n  }\n  on(event: TimerEvents, listener: TimerEventListener) {\n    return super.on(event, listener);\n  }\n  once(event: TimerEvents, listener: TimerEventListener) {\n    return super.once(event, listener);\n  }\n  start() {\n    if (!this.isStopped) {\n      return;\n    }\n    this.setExpireTimeout(this.duration);\n    this.setTickInterval(this.tick);\n\n    this.state = TimerState.RUNNING;\n    this.checkpointStartAt = Date.now();\n    this.checkpointElapsed = 0;\n\n    this.emit(\"start\", this.status);\n\n    this.saveStorage();\n  }\n  stop() {\n    if (this.isStopped) {\n      return;\n    }\n    this.clearExpireTimeout();\n    this.clearTickInterval();\n\n    this.checkpointStartAt = NaN;\n    this.checkpointElapsed = 0;\n\n    this.state = TimerState.STOPPED;\n\n    this.emit(\"stop\", this.status);\n\n    this.saveStorage();\n  }\n  pause() {\n    if (!this.isRunning) {\n      return;\n    }\n\n    this.clearExpireTimeout();\n    this.clearTickInterval();\n\n    let periodElapsed = (Date.now() - this.checkpointStartAt) / 1000;\n    this.checkpointElapsed += periodElapsed;\n\n    this.state = TimerState.PAUSED;\n\n    this.emit(\"pause\", this.status);\n\n    this.saveStorage();\n  }\n  resume() {\n    if (!this.isPaused) {\n      return;\n    }\n    this.setExpireTimeout(this.remaining);\n    this.setTickInterval(this.tick);\n\n    this.state = TimerState.RUNNING;\n    this.checkpointStartAt = Date.now();\n\n    this.emit(\"resume\", this.status);\n\n    this.saveStorage();\n  }\n  restart() {\n    this.stop();\n    this.start();\n  }\n  changeMode(mode: TimerMode) {\n    this.stop();\n    this.mode = mode;\n    this.duration = TimerDurationMin[mode] * 60;\n\n    this.emit(\"change_mode\", this.status);\n\n    this.saveStorage();\n  }\n  setExpireTimeout(seconds: number) {\n    this.expireTimeout = setTimeout(() => {\n      this.emit(\"expire\", this.status);\n      this.stop();\n    }, seconds * 1000);\n  }\n  clearExpireTimeout() {\n    if (this.expireTimeout) {\n      clearTimeout(this.expireTimeout);\n    }\n    this.expireTimeout = null;\n  }\n  setTickInterval(seconds: number, adjusted = false, limit = 60) {\n    const { remaining } = this.status;\n    if (remaining <= limit) {\n      this.setSecTickInterval();\n    } else {\n      const offset = remaining % seconds;\n      if (offset > 1 && !adjusted) {\n        this.tickOffsetTimeout = setTimeout(() => {\n          this.emit(\"tick\", this.status);\n          this.setTickInterval(seconds, true);\n        }, offset * 1000);\n      } else {\n        this.tickInterval = setInterval(() => {\n          const status = this.status;\n          this.emit(\"tick\", status);\n          if (status.remaining < limit) {\n            this.clearTickInterval();\n            this.setSecTickInterval();\n          }\n        }, seconds * 1000);\n      }\n    }\n  }\n  setSecTickInterval() {\n    this.tickInterval = setInterval(() => {\n      this.emit(\"tick\", this.status);\n    }, 1000);\n  }\n  clearTickInterval() {\n    if (this.tickInterval) {\n      clearInterval(this.tickInterval);\n    }\n    this.tickInterval = null;\n    if (this.tickOffsetTimeout) {\n      clearTimeout(this.tickOffsetTimeout);\n    }\n    this.tickOffsetTimeout = null;\n  }\n  saveStorage() {\n    localStorage.setItem(StorageKey.STATE, this.state);\n    localStorage.setItem(StorageKey.MODE, this.mode);\n    localStorage.setItem(\n      StorageKey.CHECKPOINT_START_AT,\n      Number.isNaN(this.checkpointStartAt) ? \"\" : String(this.checkpointStartAt)\n    );\n    localStorage.setItem(\n      StorageKey.CHECKPOINT_ELAPSED,\n      String(this.checkpointElapsed)\n    );\n  }\n  restoreStorage() {\n    const lsState = localStorage.getItem(StorageKey.STATE);\n    const lsMode = localStorage.getItem(StorageKey.MODE);\n    const lsCpStartAt = localStorage.getItem(StorageKey.CHECKPOINT_START_AT);\n    const lsCpElapsed = localStorage.getItem(StorageKey.CHECKPOINT_ELAPSED);\n    if (isValidState(lsState) && isValidMode(lsMode)) {\n      const state = lsState as TimerState;\n      const mode = lsMode as TimerMode;\n      const duration = TimerDurationMin[mode] * 60;\n      switch (state) {\n        case TimerState.STOPPED: {\n          this.changeMode(mode);\n          break;\n        }\n        case TimerState.PAUSED: {\n          const cpElapsed = Number(lsCpElapsed);\n          if (cpElapsed < duration * 1000) {\n            this.state = state;\n            this.mode = mode;\n            this.duration = duration;\n            this.checkpointElapsed = cpElapsed;\n          }\n          break;\n        }\n        case TimerState.RUNNING: {\n          const cpStartAt = Number(lsCpStartAt);\n          const cpElapsed = Number(lsCpElapsed);\n          if (cpStartAt > 0) {\n            this.mode = mode;\n            this.duration = duration;\n            const elapsedMsec = Date.now() - cpStartAt + cpElapsed * 1000;\n            if (elapsedMsec < duration * 1000) {\n              this.state = TimerState.RUNNING;\n\n              this.checkpointStartAt = cpStartAt;\n              this.checkpointElapsed = cpElapsed;\n\n              this.setExpireTimeout(this.remaining);\n              this.setTickInterval(this.tick);\n            } else {\n              this.stop();\n\n              this.estimateCompletedAt = new Date(\n                cpStartAt + (duration - cpElapsed) * 1000\n              );\n              this.restoreExpired = true;\n            }\n          }\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport const timer = new Timer(60);\n","import { IDailyTotal } from \"./AppDb\";\nimport { TimerMode, TimerState } from \"./util/timer\";\nexport interface ICustomAttr {\n  id: number;\n  name: string;\n}\nexport interface IAuthToken {\n  auth_token: string;\n}\nexport interface IMilestone {\n  id: number;\n  name: string;\n  estimated_start: string;\n  estimated_finish: string;\n  slug: string;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n}\nexport interface IProjectExtraInfo {\n  id: number;\n  name: string;\n  slug: string;\n}\ninterface IStatusExtraInfo {\n  name: string;\n  is_closed: boolean;\n}\nexport interface IUserStoryExtraInfo {\n  id: number;\n  subject: string;\n  epics: any;\n  ref: number;\n}\nexport interface ITask {\n  id: number;\n  assigned_to: number | null;\n  created_date: string;\n  finished_date: string;\n  is_closed: boolean;\n  subject: string;\n  ref: number;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n  status: number;\n  status_extra_info: IStatusExtraInfo;\n  user_story: number;\n  user_story_extra_info: IUserStoryExtraInfo;\n  version: number;\n}\nexport interface ITasksByUserStory {\n  user_story: number;\n  user_story_extra_info: IUserStoryExtraInfo;\n  project_extra_info: IProjectExtraInfo;\n  tasks: ITask[];\n  is_closed: boolean;\n}\nexport interface ITaskStatus {\n  id: number;\n  color: string;\n  name: string;\n  order: number;\n  project: number;\n  is_closed: boolean;\n  slug: string;\n}\nexport interface IAttrValue {}\nexport interface ICustomValue {\n  attributes_values: {\n    [key: number]: string;\n  };\n  version: number;\n}\nexport interface IUser {\n  id: number;\n  username: string;\n  full_name: string;\n  full_name_display: string;\n  photo: string;\n}\nexport interface IProject {\n  id: number;\n  name: string;\n  members: IUser[];\n}\nexport type ICustomValueMap = WeakMap<ITask, ICustomValue>;\nexport interface IState {\n  url: string;\n  auth_token: string;\n  auth_error: boolean;\n  username: string;\n  password: string;\n  user: IUser | null;\n  projects: IProject[];\n  pid: string; // url\n  project: IProject;\n  mid: string; // url\n  custom_eid: string; //  pid\n  custom_rid: string; // pid\n  custom_attrs: ICustomAttr[]; // pid\n  custom_attr_e: ICustomAttr;\n  custom_attr_r: ICustomAttr;\n  biz_days: string[]; //mid\n  milestones: IMilestone[]; // pid\n  milestone: IMilestone;\n  tasks: ITask[]; //mid\n  task_id: string;\n  task: ITask | null;\n  user_tasks: ITask[];\n  task_statuses: ITaskStatus[];\n  active_task_statuses: ITaskStatus[];\n  custom_value_map: ICustomValueMap; // pid\n  reject_task_status_ids: string[]; // pid\n  updated_time: number;\n  isOpen: boolean;\n  pomodoro_number: number;\n  pomodoro_date: string;\n  pomodoro_used_number: number;\n  loaded: boolean;\n  isNotifable: boolean;\n  pomodoro_daily_totals: IDailyTotal[];\n  pomodoro_state: TimerState;\n  pomodoro_mode: TimerMode;\n}\n\nexport enum StorageKey {\n  URL = \"taiga_url\",\n  PID = \"taiga_pid\",\n  MID = \"taiga_mid\",\n  TASK_ID = \"taiga_task_id\",\n  CUSTOM_EID = \"taiga_custom_eid\",\n  CUSTOM_RID = \"taiga_custom_rid\",\n  BIZ_DAYS = \"taiga_biz_days\",\n  REJECT_TASK_STATUS_IDS = \"reject_task_status_ids\",\n  USERNAME = \"taiga_username\",\n  PASSWORD = \"taiga_password\",\n  POMODORO_DATE = \"taiga_pomodoro_date\",\n  POMODORO_NUMBER = \"taiga_pomodoro_number\",\n  POMODORO_USED_NUMBER = \"taiga_pomodoro_used_number\"\n}\n\nconst _getFromStorage = (key: string) => localStorage.getItem(key) || \"\";\nexport const getFromStorage = (key: StorageKey) => _getFromStorage(key);\nexport const getFromStorageWithSubkey = (key: StorageKey, subkey: string) =>\n  subkey ? _getFromStorage(`${subkey}/${key}`) : \"\";\n\nexport const setToStorage = (key: string, item: string) => {\n  localStorage.setItem(key, item);\n};\nexport const setToStorageWithSubkey = (\n  key: StorageKey,\n  subkey: string,\n  item: string\n) => (subkey ? setToStorage(`${subkey}/${key}`, item) : null);\nexport const initialState: IState = {\n  url: \"\",\n  auth_token: \"\",\n  auth_error: false,\n  username: \"\",\n  password: \"\",\n  user: null,\n  projects: [],\n  pid: \"\",\n  project: {} as IProject,\n  mid: \"\",\n  custom_eid: \"\",\n  custom_rid: \"\",\n  custom_attrs: [],\n  custom_attr_e: {} as ICustomAttr,\n  custom_attr_r: {} as ICustomAttr,\n  biz_days: [],\n  milestones: [],\n  milestone: {} as IMilestone,\n  tasks: [],\n  task_id: \"\",\n  task: null,\n  user_tasks: [],\n  task_statuses: [],\n  active_task_statuses: [],\n  custom_value_map: new WeakMap(),\n  reject_task_status_ids: [],\n  updated_time: 0,\n  isOpen: false,\n  pomodoro_date: \"\",\n  pomodoro_number: 0,\n  pomodoro_used_number: 0,\n  loaded: false,\n  isNotifable: false,\n  pomodoro_daily_totals: [],\n  pomodoro_state: TimerState.STOPPED,\n  pomodoro_mode: TimerMode.FOCUS\n};\n","import _ from \"lodash\";\nimport { initialState, IProject, ICustomValueMap, IMilestone } from \"./store\";\nimport { ActionTypes, Actions } from \"./actions\";\nexport const reducer = (state = initialState, action: Actions) => {\n  switch (action.type) {\n    case ActionTypes.SET_URL: {\n      const { url } = action.payload;\n      return { ...state, url };\n    }\n    case ActionTypes.SET_PROJECTS: {\n      const { projects } = action.payload;\n      return {\n        ...state,\n        projects\n      };\n    }\n    case ActionTypes.SET_PID: {\n      const { pid } = action.payload;\n      return {\n        ...state,\n        pid,\n        project: {} as IProject,\n        mid: \"\",\n        biz_days: [],\n        custom_attrs: [],\n        milestones: [],\n        custom_value_map: new WeakMap() as ICustomValueMap\n      };\n    }\n    case ActionTypes.SET_PROJECT: {\n      const { project } = action.payload;\n      return {\n        ...state,\n        project\n      };\n    }\n    case ActionTypes.SET_MID: {\n      const { mid } = action.payload;\n      return {\n        ...state,\n        mid,\n        milestone: {} as IMilestone,\n        tasks: []\n      };\n    }\n    case ActionTypes.SET_MILESTONES: {\n      const { milestones } = action.payload;\n      return { ...state, milestones };\n    }\n    case ActionTypes.SET_MILESTONE: {\n      const { milestone } = action.payload;\n      return { ...state, milestone };\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      const { custom_eid } = action.payload;\n      return { ...state, custom_eid };\n    }\n    case ActionTypes.SET_CUSTOM_ATTRS: {\n      const { custom_attrs } = action.payload;\n      return { ...state, custom_attrs };\n    }\n    case ActionTypes.SET_CUSTOM_ATTR_E: {\n      const { custom_attr_e } = action.payload;\n      return { ...state, custom_attr_e };\n    }\n    case ActionTypes.SET_CUSTOM_ATTR_R: {\n      const { custom_attr_r } = action.payload;\n      return { ...state, custom_attr_r };\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      const { custom_rid } = action.payload;\n      return { ...state, custom_rid };\n    }\n    case ActionTypes.SET_BIZ_DAYS: {\n      const { biz_days } = action.payload;\n      return { ...state, biz_days };\n    }\n    case ActionTypes.ADD_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.chain([...state.biz_days, biz_day])\n        .uniq()\n        .sort()\n        .value();\n      return { ...state, biz_days };\n    }\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.reject([...state.biz_days], item => item === biz_day);\n      return { ...state, biz_days };\n    }\n    case ActionTypes.SET_TASKS: {\n      const { tasks } = action.payload;\n      return { ...state, tasks };\n    }\n    case ActionTypes.SET_TASK_ID: {\n      const { task_id } = action.payload;\n      return { ...state, task_id, task: null };\n    }\n    case ActionTypes.RESET_TASK_ID: {\n      return { ...state, task_id: \"\", task: null };\n    }\n    case ActionTypes.SET_TASK: {\n      const { task } = action.payload;\n      return { ...state, task };\n    }\n    case ActionTypes.SET_USER_TASKS: {\n      const { user_tasks } = action.payload;\n      return { ...state, user_tasks };\n    }\n    case ActionTypes.SET_TASK_STATUSES: {\n      const { task_statuses } = action.payload;\n      return { ...state, task_statuses };\n    }\n    case ActionTypes.SET_ACTIVE_TASK_STATUSES: {\n      const { active_task_statuses } = action.payload;\n      return { ...state, active_task_statuses };\n    }\n    case ActionTypes.SET_CUSTOM_VALUE_MAP: {\n      const { custom_value_map } = action.payload;\n      return { ...state, custom_value_map };\n    }\n    case ActionTypes.SET_USER: {\n      const { user } = action.payload;\n      return { ...state, user };\n    }\n    case ActionTypes.RESET_USER: {\n      return { ...state, user: null, user_tasks: [] };\n    }\n    case ActionTypes.SET_REJECT_TASK_STATUS_IDS: {\n      const { reject_task_status_ids } = action.payload;\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.chain([\n        ...state.reject_task_status_ids,\n        reject_task_status_id\n      ])\n        .compact()\n        .uniq()\n        .value();\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.reject(\n        [...state.reject_task_status_ids],\n        item => item === reject_task_status_id\n      );\n      return { ...state, reject_task_status_ids };\n    }\n    case ActionTypes.OPEN_CONTROLLER: {\n      return { ...state, isOpen: true };\n    }\n    case ActionTypes.CLOSE_CONTROLLER: {\n      return { ...state, isOpen: false };\n    }\n    case ActionTypes.UPDATE_DATA: {\n      return { ...state, updated_time: Date.now() };\n    }\n    case ActionTypes.SIGN_IN: {\n      const { username, password } = action.payload;\n      return { ...state, username, password, auth_error: false };\n    }\n    case ActionTypes.SET_AUTH_TOKEN: {\n      const { auth_token } = action.payload;\n      return { ...state, auth_token };\n    }\n    case ActionTypes.SET_AUTH_ERROR: {\n      return { ...state, auth_error: true };\n    }\n    case ActionTypes.SIGN_OUT: {\n      return { ...state, auth_token: \"\", username: \"\", password: \"\" };\n    }\n    case ActionTypes.ADD_POMODORO: {\n      const pomodoro_number = state.pomodoro_number + 1;\n      return {\n        ...state,\n        pomodoro_number\n      };\n    }\n    case ActionTypes.USE_POMODORO: {\n      const { used_number } = action.payload;\n      const pomodoro_used_number = Math.max(\n        0,\n        state.pomodoro_used_number + used_number\n      );\n      return {\n        ...state,\n        pomodoro_used_number\n      };\n    }\n    case ActionTypes.RESET_POMODORO: {\n      const { pomodoro_date } = action.payload;\n      return {\n        ...state,\n        pomodoro_number: 0,\n        pomodoro_used_number: 0,\n        pomodoro_date\n      };\n    }\n    case ActionTypes.RESTORE_POMODORO: {\n      const {\n        pomodoro_date,\n        pomodoro_number,\n        pomodoro_used_number\n      } = action.payload;\n      return {\n        ...state,\n        pomodoro_date,\n        pomodoro_number,\n        pomodoro_used_number\n      };\n    }\n    case ActionTypes.SET_POMODORO_TOTALS: {\n      const { pomodoro_daily_totals } = action.payload;\n      return {\n        ...state,\n        pomodoro_daily_totals\n      };\n    }\n    case ActionTypes.LOADED: {\n      return {\n        ...state,\n        loaded: true\n      };\n    }\n    case ActionTypes.ALLOW_NOTIFICATION: {\n      return {\n        ...state,\n        isNotifable: true\n      };\n    }\n    case ActionTypes.SET_POMODORO_STATE: {\n      const { pomodoro_state } = action.payload;\n      return {\n        ...state,\n        pomodoro_state\n      };\n    }\n\n    case ActionTypes.SET_POMODORO_MODE: {\n      const { pomodoro_mode } = action.payload;\n      return {\n        ...state,\n        pomodoro_mode\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { Dispatch, useCallback, useMemo } from \"react\";\n\nexport type SideEffector<S, A> = (\n  action: A,\n  dispatch: Dispatch<A>,\n  state: () => S\n) => void;\nconst stateStoreFactory = <S>() => {\n  let state: S;\n  return {\n    getter: () => state,\n    setter: (newState: S) => {\n      state = newState;\n    }\n  };\n};\nexport const useSideEffector = <S, A>(\n  [state, dispatch]: [S, Dispatch<A>],\n  sideEffector: SideEffector<S, A>\n): [S, Dispatch<A>] => {\n  let dispatchSE: Dispatch<A> | null = null;\n\n  const dispatchSECaller = useCallback(\n    (action: A) => {\n      dispatchSE && dispatchSE(action);\n    },\n    [dispatchSE]\n  );\n  const stateStore = useMemo(() => stateStoreFactory<S>(), []);\n\n  stateStore.setter(state);\n  dispatchSE = useCallback(\n    dispatchSideEffector<S, A>(\n      stateStore.getter,\n      dispatch,\n      sideEffector,\n      dispatchSECaller\n    ),\n    []\n  );\n  return [state, dispatchSE];\n};\n\nconst dispatchSideEffector = <S, A>(\n  state: () => S,\n  dispatch: Dispatch<A>,\n  sideEffector: SideEffector<S, A>,\n  dispatchSECaller: Dispatch<A>\n) => (action: A) => {\n  dispatch(action);\n  sideEffector(action, dispatchSECaller, state);\n};\n","import { IProject } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchProjecs: ISideEffector = async (action, dispatch, state) => {\n  try {\n    const { url } = state();\n    if (url) {\n      const { data: projects } = await fetchData<IProject[]>(url, \"projects\");\n      dispatch({ type: ActionTypes.SET_PROJECTS, payload: { projects } });\n    }\n  } catch (e) {\n    errToastr(e);\n  }\n};\n","import { IProject } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchProject: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_PROJECT) {\n    try {\n      const { url } = state();\n      const { pid } = action.payload;\n      if (url && pid) {\n        const { data: project } = await fetchData<IProject>(\n          url,\n          `projects/${pid}`\n        );\n        dispatch({\n          type: ActionTypes.SET_PROJECT,\n          payload: { project }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IMilestone } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchMilestones: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_MILESTONES) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: milestones } = await fetchData<IMilestone[]>(\n          url,\n          \"milestones\",\n          { params: { project } }\n        );\n        dispatch({ type: ActionTypes.SET_MILESTONES, payload: { milestones } });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITask } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nimport _ from \"lodash\";\nexport const fetchTasks: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_TASKS) {\n    try {\n      const { url, reject_task_status_ids } = state();\n      const { milestone } = action.payload;\n      if (url && milestone) {\n        const { data } = await fetchData<ITask[]>(url, \"tasks\", {\n          headers: { \"x-disable-pagination\": true },\n          params: { milestone }\n        });\n        const tasks = data.filter(\n          item => !_.includes(reject_task_status_ids, String(item.status))\n        );\n        dispatch({ type: ActionTypes.SET_TASKS, payload: { tasks } });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITaskStatus } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchTaskStatuses: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_TASK_STATUSES) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: task_statuses } = await fetchData<ITaskStatus[]>(\n          url,\n          \"task-statuses\",\n          { params: { project } }\n        );\n        dispatch({\n          type: ActionTypes.SET_TASK_STATUSES,\n          payload: { task_statuses }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ICustomAttr } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchCustomAttrs: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_CUSTOM_ATTRS) {\n    try {\n      const { url } = state();\n      const { project } = action.payload;\n      if (url && project) {\n        const { data: custom_attrs } = await fetchData<ICustomAttr[]>(\n          url,\n          \"task-custom-attributes\",\n          { params: { project } }\n        );\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_ATTRS,\n          payload: { custom_attrs }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ITask, ICustomValue } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchCustomValueMap: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.FETCH_CUSTOM_VALUE_MAP) {\n    try {\n      const { url, custom_eid, custom_rid } = state();\n      const { tasks } = action.payload;\n      if (url && tasks.length && custom_eid && custom_rid) {\n        const custom_value_map = new WeakMap(\n          await Promise.all(\n            tasks.map(async item => {\n              const { data: custom_attr_val } = await fetchData<ICustomValue>(\n                url,\n                `tasks/custom-attributes-values/${item.id}`\n              );\n              return [item, custom_attr_val] as [ITask, ICustomValue];\n            })\n          )\n        );\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_VALUE_MAP,\n          payload: { custom_value_map }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IUser } from \"../store\";\nimport { ISideEffector, fetchData, ActionTypes, errToastr } from \".\";\nexport const fetchUser: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.FETCH_USER) {\n    try {\n      const { url } = state();\n      const { uid } = action.payload;\n      if (url && uid) {\n        const { data: user } = await fetchData<IUser>(url, `users/${uid}`);\n        dispatch({\n          type: ActionTypes.SET_USER,\n          payload: { user }\n        });\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faInfoCircle,\n  faCheck,\n  faCheckCircle,\n  faExclamationTriangle\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { IconProp } from \"@fortawesome/fontawesome-svg-core\";\ninterface MessageWithIconProps {\n  icon: IconProp;\n  message: string;\n}\nconst MessageWithIcon: React.FC<MessageWithIconProps> = ({ icon, message }) => {\n  return (\n    <div className=\"d-flex\">\n      <h2 className=\"mr-2\">\n        <FontAwesomeIcon icon={icon} />\n      </h2>\n      <div>{message}</div>\n    </div>\n  );\n};\nexport const toastr = {\n  info: (message: string) => {\n    toast.info(<MessageWithIcon icon={faInfoCircle} message={message} />);\n  },\n  success: (message: string) => {\n    toast.success(<MessageWithIcon icon={faCheck} message={message} />);\n  },\n  warn: (message: string) => {\n    toast.warn(\n      <MessageWithIcon icon={faExclamationTriangle} message={message} />\n    );\n  },\n  error: (message: string) => {\n    toast.error(<MessageWithIcon icon={faCheckCircle} message={message} />);\n  }\n};\n","import { ISideEffector, patchData, ActionTypes, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nexport const patchCustomValue: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.PATCH_CUSTOM_VALUE) {\n    try {\n      const { url, custom_value_map, tasks } = state();\n      const { id, key, value, version } = action.payload;\n      const task = tasks.find(task => task.id === id);\n      if (url && id && key && task && custom_value_map.has(task)) {\n        const custom_value = custom_value_map.get(task);\n        if (custom_value) {\n          const { attributes_values } = custom_value;\n          await patchData(url, `tasks/custom-attributes-values/${id}`, {\n            attributes_values: {\n              ...attributes_values,\n              [key]: String(value)\n            },\n            version\n          });\n          if (action.meta && action.meta.use_pomodoro) {\n            const { used_number } = action.meta.use_pomodoro;\n            dispatch({\n              type: ActionTypes.USE_POMODORO,\n              payload: { used_number }\n            });\n          }\n          dispatch({ type: ActionTypes.UPDATE_DATA });\n          toastr.success(`Custom value updated. [${value}]`);\n        }\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { ActionTypes, ISideEffector, patchData, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nexport const patchTask: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.PATCH_TASK) {\n    try {\n      const { url, tasks } = state();\n      const { id, key, value } = action.payload;\n      const task = tasks.find(task => task.id === id);\n      if (url && id && key && task) {\n        await patchData(url, `tasks/${id}`, {\n          [key]: value,\n          version: task.version\n        });\n        dispatch({ type: ActionTypes.UPDATE_DATA });\n        toastr.success(`Task updated. [${key}=${value}]`);\n      }\n    } catch (e) {\n      errToastr(e);\n    }\n  }\n};\n","import { IAuthToken, StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, postData, ActionTypes, errToastr } from \".\";\nimport { toastr } from \"../util/toastr\";\nexport const signIn: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.SIGN_IN) {\n    try {\n      const { url } = state();\n      const { username, password } = action.payload;\n      if (url && username && password) {\n        const {\n          data: { auth_token }\n        } = await postData<IAuthToken>(url, \"auth\", {\n          username,\n          password,\n          type: \"normal\"\n        });\n        dispatch({ type: ActionTypes.SET_AUTH_TOKEN, payload: { auth_token } });\n        setToStorage(StorageKey.USERNAME, username);\n        setToStorage(StorageKey.PASSWORD, password);\n        toastr.success(`${username} signed in.`);\n      }\n    } catch (e) {\n      dispatch({ type: ActionTypes.SET_AUTH_ERROR });\n      dispatch({ type: ActionTypes.SIGN_OUT });\n      errToastr(e);\n    }\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncPomodoro: ISideEffector = (action, dispatchm, state) => {\n  _.defer(() => {\n    const { pomodoro_date, pomodoro_number, pomodoro_used_number } = state();\n    setToStorage(StorageKey.POMODORO_DATE, pomodoro_date);\n    setToStorage(StorageKey.POMODORO_NUMBER, String(pomodoro_number));\n    setToStorage(StorageKey.POMODORO_USED_NUMBER, String(pomodoro_used_number));\n  });\n};\n","import Dexie from \"dexie\";\nexport interface IPomodoroHistory {\n  id?: number;\n  completedAt: Date;\n  duration: number;\n  pure: boolean;\n  dateKey: string;\n}\nexport interface IDailyTotal {\n  id?: number;\n  date: Date;\n  value: number;\n  pureValue: number;\n  dateKey: string;\n  dayOfWeek: number;\n}\nexport class AppDatabase extends Dexie {\n  items: Dexie.Table<IPomodoroHistory, number>;\n  totals: Dexie.Table<IDailyTotal, number>;\n  constructor() {\n    super(\"TaigaPomodoroDatabase\");\n    this.version(1).stores({\n      items: \"++id, completedAt, duration, pure, dateKey\",\n      totals: \"++id, date, value, pureValue, &dateKey, dayOfWeek\"\n    });\n    this.items = this.table(\"items\");\n    this.totals = this.table(\"totals\");\n  }\n}\nexport const db = new AppDatabase();\n","import moment from \"moment\";\nimport _ from \"lodash\";\nimport { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes, fetchData } from \".\";\nimport { ICustomValue } from \"../store\";\nexport const addPomodoro: ISideEffector = async (action, dispatch, state) => {\n  if (action.type === ActionTypes.ADD_POMODORO && action.meta) {\n    const { url, task_id, custom_rid } = state();\n    const { completedAt, duration, pure } = action.meta;\n    const dateKey = moment(completedAt).format(\"YYYY-MM-DD\");\n    await db.items.put({ completedAt, duration, pure, dateKey });\n    dispatch({ type: ActionTypes.CALC_POMODORO_TOTAL, payload: { dateKey } });\n    if (task_id && custom_rid) {\n      const { data: custom_attr_val } = await fetchData<ICustomValue>(\n        url,\n        `tasks/custom-attributes-values/${task_id}`\n      );\n      const value =\n        Number(_.get(custom_attr_val, `attributes_values.${custom_rid}`, \"0\")) +\n        0.5;\n      const { version } = custom_attr_val;\n      if (custom_attr_val && version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: Number(task_id),\n            key: custom_rid,\n            value,\n            version\n          },\n          meta: { use_pomodoro: { used_number: 1 } }\n        });\n      }\n    }\n  }\n};\n","import moment from \"moment\";\nimport _ from \"lodash\";\nimport { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const calcPomodoroTotal: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  if (action.type === ActionTypes.CALC_POMODORO_TOTAL) {\n    const query = action.payload;\n    const totalDoc = await db.totals.get(query);\n    const values = await db.items.where(query).toArray();\n    const value = values.length;\n    const pureValue = _.filter(values, { pure: true }).length;\n    const dayOfWeek = moment(query.dateKey, \"YYYY-MM-DD\").day();\n    const date = moment(query.dateKey, \"YYYY-MM-DD\").toDate();\n    db.totals.put({ ...totalDoc, ...query, date, value, pureValue, dayOfWeek });\n    dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n  }\n};\n","import { db } from \"../AppDb\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const loadPomodoroTotals: ISideEffector = async (\n  action,\n  dispatch,\n  state\n) => {\n  const pomodoro_daily_totals = await db.totals.toArray();\n  dispatch({\n    type: ActionTypes.SET_POMODORO_TOTALS,\n    payload: { pomodoro_daily_totals }\n  });\n};\n","import { Dispatch } from \"react\";\nimport { Actions, ActionTypes } from \"../actions\";\nimport { IState } from \"../store\";\nimport { baseUrl } from \"../Provider\";\nimport { fetchProjecs } from \"./fetchProjects\";\nimport { fetchProject } from \"./fetchProject\";\nimport { fetchMilestones } from \"./fetchMilestones\";\nimport { fetchTasks } from \"./fetchTasks\";\nimport { fetchTaskStatuses } from \"./fetchTaskStatuses\";\nimport { fetchCustomAttrs } from \"./fetchCustomAttrs\";\nimport { fetchCustomValueMap } from \"./fetchCustomValueMap\";\nimport { fetchUser } from \"./fetchUser\";\nimport { patchCustomValue } from \"./patchCustomValue\";\nimport { patchTask } from \"./patchTask\";\nimport { signIn } from \"./signIn\";\nimport { signOut } from \"./signOut\";\nimport { setAuthToken } from \"./setAuthToken\";\nimport { setUrl } from \"./setUrl\";\nimport { setPid } from \"./setPid\";\nimport { setMid } from \"./setMid\";\nimport { setCustomEid } from \"./setCustomEid\";\nimport { setCustomRid } from \"./setCustomRid\";\nimport { syncBizDays } from \"./syncBizDays\";\nimport { syncRejectTaskStatusIds } from \"./syncRejectTaskStatusIds\";\nimport { syncPomodoro } from \"./syncPomodoro\";\nimport { addPomodoro } from \"./addPomodoro\";\nimport { calcPomodoroTotal } from \"./calcPomodoroTotal\";\nimport { loadPomodoroTotals } from \"./loadPomodoroTotals\";\nimport { syncTaskId } from \"./syncTaskId\";\nimport axios, { AxiosRequestConfig, AxiosError } from \"axios\";\nimport { toastr } from \"../util/toastr\";\nexport { ActionTypes };\nexport type ISideEffector = (\n  action: Actions,\n  dispatch: Dispatch<Actions>,\n  state: () => IState\n) => void;\nexport const fetchData = <T>(\n  url: string,\n  path: string,\n  config?: AxiosRequestConfig\n) => axios.get<T>(`${baseUrl(url)}/${path}`, config);\nexport const postData = <T>(\n  url: string,\n  path: string,\n  data: object,\n  config?: AxiosRequestConfig\n) => axios.post<T>(`${baseUrl(url)}/${path}`, data, config);\nexport const patchData = (\n  url: string,\n  path: string,\n  data: object,\n  config?: AxiosRequestConfig\n) => axios.patch(`${baseUrl(url)}/${path}`, data, config);\nexport const errToastr = (err: AxiosError) => {\n  let message: string;\n  try {\n    message = err.response ? err.response.data._error_message : \"error\";\n  } catch (e) {\n    message = e.message || e;\n  }\n  toastr.error(message);\n};\nexport const rootSideEffector = (\n  action: Actions,\n  dispatch: Dispatch<Actions>,\n  state: () => IState\n) => {\n  switch (action.type) {\n    case ActionTypes.FETCH_PROJECTS: {\n      fetchProjecs(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_PROJECT: {\n      fetchProject(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_MILESTONES: {\n      fetchMilestones(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_TASKS: {\n      fetchTasks(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_TASK_STATUSES: {\n      fetchTaskStatuses(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_CUSTOM_ATTRS: {\n      fetchCustomAttrs(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_CUSTOM_VALUE_MAP: {\n      fetchCustomValueMap(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.FETCH_USER: {\n      fetchUser(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.PATCH_CUSTOM_VALUE: {\n      patchCustomValue(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SIGN_IN: {\n      signIn(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.PATCH_TASK: {\n      patchTask(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SIGN_OUT: {\n      signOut(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_AUTH_TOKEN: {\n      setAuthToken(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_URL: {\n      setUrl(action, dispatch, state);\n      return;\n    }\n    case ActionTypes.SET_PID: {\n      setPid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_MID: {\n      setMid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      setCustomEid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      setCustomRid(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_BIZ_DAYS:\n    case ActionTypes.ADD_BIZ_DAY:\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      syncBizDays(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID:\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      syncRejectTaskStatusIds(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.ADD_POMODORO: {\n      addPomodoro(action, dispatch, state);\n      syncPomodoro(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.USE_POMODORO:\n    case ActionTypes.RESET_POMODORO: {\n      syncPomodoro(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.CALC_POMODORO_TOTAL: {\n      calcPomodoroTotal(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.LOAD_POMODORO_TOTALS: {\n      loadPomodoroTotals(action, dispatch, state);\n      break;\n    }\n    case ActionTypes.SET_TASK_ID:\n    case ActionTypes.RESET_TASK_ID: {\n      syncTaskId(action, dispatch, state);\n      break;\n    }\n    default: {\n    }\n  }\n};\n","import { StorageKey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport axios from \"axios\";\nexport const signOut: ISideEffector = (action, dispatch, state) => {\n  localStorage.removeItem(StorageKey.USERNAME);\n  localStorage.removeItem(StorageKey.PASSWORD);\n  if (axios.defaults.headers.common[\"Authorization\"]) {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};\n","import { ISideEffector, ActionTypes } from \".\";\nimport axios from \"axios\";\nexport const setAuthToken: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_AUTH_TOKEN) {\n    const { auth_token } = action.payload;\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${auth_token}`;\n  }\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setUrl: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_URL) {\n    const { url } = action.payload;\n    setToStorage(StorageKey.URL, url);\n  }\n};\n","import { StorageKey, setToStorage, getFromStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setPid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_PID) {\n    const { pid } = action.payload;\n    setToStorage(StorageKey.PID, pid);\n    localStorage.removeItem(StorageKey.MID);\n    const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n    const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n    dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n    dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  }\n};\n","import { StorageKey, setToStorage, getFromStorageWithSubkey } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nimport _ from \"lodash\";\nexport const setMid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_MID) {\n    const { mid } = action.payload;\n    setToStorage(StorageKey.MID, mid);\n    const biz_days = _.compact(\n      getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n    ).sort();\n    dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n  }\n};\n","import { StorageKey, setToStorageWithSubkey, getFromStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setCustomEid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_CUSTOM_EID) {\n    const { custom_eid } = action.payload;\n    const pid = getFromStorage(StorageKey.PID);\n    setToStorageWithSubkey(StorageKey.CUSTOM_EID, pid, custom_eid);\n  }\n};\n","import { StorageKey, setToStorageWithSubkey, getFromStorage } from \"../store\";\nimport { ISideEffector, ActionTypes } from \".\";\nexport const setCustomRid: ISideEffector = (action, dispatch, state) => {\n  if (action.type === ActionTypes.SET_CUSTOM_RID) {\n    const { custom_rid } = action.payload;\n    const pid = getFromStorage(StorageKey.PID);\n    setToStorageWithSubkey(StorageKey.CUSTOM_RID, pid, custom_rid);\n  }\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncBizDays: ISideEffector = (action, dispathc, state) => {\n  _.defer(() => {\n    const { mid, biz_days } = state();\n    setToStorageWithSubkey(StorageKey.BIZ_DAYS, mid, biz_days.join(\",\"));\n  });\n};\n","import { StorageKey, setToStorageWithSubkey } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncRejectTaskStatusIds: ISideEffector = (\n  action,\n  dispatch,\n  state\n) => {\n  _.defer(() => {\n    const { pid, reject_task_status_ids } = state();\n    setToStorageWithSubkey(\n      StorageKey.REJECT_TASK_STATUS_IDS,\n      pid,\n      reject_task_status_ids.join(\",\")\n    );\n  });\n};\n","import { StorageKey, setToStorage } from \"../store\";\nimport { ISideEffector } from \".\";\nimport _ from \"lodash\";\nexport const syncTaskId: ISideEffector = (action, dispatch, state) => {\n  _.defer(() => {\n    const { task_id } = state();\n    if (task_id) {\n      setToStorage(StorageKey.TASK_ID, task_id);\n    } else {\n      localStorage.removeItem(StorageKey.TASK_ID);\n    }\n  });\n};\n","import { Dispatch } from \"react\";\nimport { Actions, ActionTypes } from \"./actions\";\nimport { getFromStorage, getFromStorageWithSubkey, StorageKey } from \"./store\";\nimport _ from \"lodash\";\nconst signIn = (dispatch: Dispatch<Actions>) => {\n  const username = getFromStorage(StorageKey.USERNAME);\n  const password = getFromStorage(StorageKey.PASSWORD);\n  dispatch({ type: ActionTypes.SIGN_IN, payload: { username, password } });\n};\nconst syncStorage = (dispatch: Dispatch<Actions>) => {\n  const url = getFromStorage(StorageKey.URL);\n  const pid = getFromStorage(StorageKey.PID);\n  const mid = getFromStorage(StorageKey.MID);\n  const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n  const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n  const biz_days = _.compact(\n    getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(\",\")\n  ).sort();\n  const reject_task_status_ids = _.compact(\n    getFromStorageWithSubkey(StorageKey.REJECT_TASK_STATUS_IDS, pid).split(\",\")\n  );\n\n  const isOpen = !(url && pid && mid && custom_eid && custom_rid);\n\n  const pomodoro_date = getFromStorage(StorageKey.POMODORO_DATE);\n  const pomodoro_number = Number(\n    getFromStorage(StorageKey.POMODORO_NUMBER) || \"0\"\n  );\n  const pomodoro_used_number = Number(\n    getFromStorage(StorageKey.POMODORO_USED_NUMBER) || \"0\"\n  );\n  const task_id = getFromStorage(StorageKey.TASK_ID);\n  url && dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n  pid && dispatch({ type: ActionTypes.SET_PID, payload: { pid } });\n  mid && dispatch({ type: ActionTypes.SET_MID, payload: { mid } });\n  custom_eid &&\n    dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n  custom_rid &&\n    dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n  biz_days.length &&\n    dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n  reject_task_status_ids.length &&\n    dispatch({\n      type: ActionTypes.SET_REJECT_TASK_STATUS_IDS,\n      payload: { reject_task_status_ids }\n    });\n\n  task_id && dispatch({ type: ActionTypes.SET_TASK_ID, payload: { task_id } });\n  isOpen && dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n  pomodoro_date &&\n    dispatch({\n      type: ActionTypes.RESTORE_POMODORO,\n      payload: { pomodoro_date, pomodoro_number, pomodoro_used_number }\n    });\n  dispatch({ type: ActionTypes.LOADED });\n  dispatch({ type: ActionTypes.LOAD_POMODORO_TOTALS });\n};\nexport const init = (dispatch: Dispatch<Actions>) => {\n  syncStorage(dispatch);\n  _.defer(() => {\n    signIn(dispatch);\n  });\n};\n","import React, { createContext, useReducer, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport { ActionTypes } from \"./actions\";\nimport { initialState, ICustomAttr, IMilestone, ITask } from \"./store\";\nimport { reducer } from \"./reducer\";\nimport { Actions } from \"./actions\";\nimport { useSideEffector } from \"./util/useSideEffector\";\nimport { rootSideEffector } from \"./sideEffectors\";\nimport { init } from \"./init\";\nexport const baseUrl = (url: string) => `${url.replace(/[/]$/, \"\")}/api/v1`;\nconst getCustomAttr = (items: ICustomAttr[], id: number) =>\n  _.find(items, { id });\nconst getMilestone = (items: IMilestone[], mid: string) =>\n  items.find(item => String(item.id) === mid);\nconst getUserTasks = (items: ITask[], uid: number) =>\n  _.chain(items)\n    .filter({ assigned_to: uid })\n    .sortBy(\"user_story\")\n    .value();\n\nexport const RootContext = createContext({\n  state: initialState,\n  dispatch: (action: Actions) => {}\n});\nexport const Provider = ({ children }: { children: React.ReactNode }) => {\n  const [state, dispatch] = useSideEffector(\n    useReducer(reducer, initialState),\n    rootSideEffector\n  );\n  const value = {\n    state,\n    dispatch\n  };\n\n  useEffect(() => {\n    if (state.url) {\n      dispatch({ type: ActionTypes.FETCH_PROJECTS });\n    }\n  }, [dispatch, state.url]);\n  useEffect(() => {\n    if (state.url && state.pid) {\n      dispatch({\n        type: ActionTypes.FETCH_MILESTONES,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_CUSTOM_ATTRS,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_TASK_STATUSES,\n        payload: { project: state.pid }\n      });\n      dispatch({\n        type: ActionTypes.FETCH_PROJECT,\n        payload: { pid: state.pid }\n      });\n    }\n  }, [state.url, state.pid, dispatch]);\n  useEffect(() => {\n    if (state.url && state.mid) {\n      dispatch({\n        type: ActionTypes.FETCH_TASKS,\n        payload: {\n          milestone: state.mid,\n          reject_task_status_ids: state.reject_task_status_ids\n        }\n      });\n    }\n  }, [\n    state.url,\n    state.mid,\n    state.updated_time,\n    state.reject_task_status_ids,\n    dispatch\n  ]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.FETCH_CUSTOM_VALUE_MAP,\n      payload: {\n        tasks: state.tasks\n      }\n    });\n  }, [dispatch, state.tasks, state.custom_eid, state.custom_rid]);\n  useEffect(() => {\n    const active_task_statuses = _.chain(state.task_statuses)\n      .reject(item => _.includes(state.reject_task_status_ids, String(item.id)))\n      .orderBy(item => item.order)\n      .value();\n    dispatch({\n      type: ActionTypes.SET_ACTIVE_TASK_STATUSES,\n      payload: { active_task_statuses }\n    });\n  }, [state.task_statuses, state.reject_task_status_ids, dispatch]);\n  useEffect(() => {\n    const custom_attr_e = getCustomAttr(\n      state.custom_attrs,\n      Number(state.custom_eid)\n    );\n    if (custom_attr_e) {\n      dispatch({\n        type: ActionTypes.SET_CUSTOM_ATTR_E,\n        payload: { custom_attr_e }\n      });\n    }\n  }, [dispatch, state.custom_attrs, state.custom_eid]);\n  useEffect(() => {\n    const custom_attr_r = getCustomAttr(\n      state.custom_attrs,\n      Number(state.custom_rid)\n    );\n    if (custom_attr_r) {\n      dispatch({\n        type: ActionTypes.SET_CUSTOM_ATTR_R,\n        payload: { custom_attr_r }\n      });\n    }\n  }, [dispatch, state.custom_attrs, state.custom_rid]);\n  useEffect(() => {\n    const milestone = getMilestone(state.milestones, state.mid);\n    if (milestone) {\n      dispatch({\n        type: ActionTypes.SET_MILESTONE,\n        payload: { milestone }\n      });\n    }\n  }, [dispatch, state.mid, state.milestones]);\n  useEffect(() => {\n    if (state.tasks.length > 0 && state.user) {\n      const user_tasks = getUserTasks(state.tasks, state.user.id);\n      dispatch({ type: ActionTypes.SET_USER_TASKS, payload: { user_tasks } });\n    }\n  }, [dispatch, state.tasks, state.user]);\n\n  useEffect(() => {\n    init(dispatch);\n  }, [dispatch]);\n  useEffect(() => {\n    if (state.task_id) {\n      const task = state.tasks.find(item => item.id === Number(state.task_id));\n      if (task) {\n        dispatch({ type: ActionTypes.SET_TASK, payload: { task } });\n      }\n    }\n  }, [dispatch, state.task_id, state.tasks]);\n  return <RootContext.Provider value={value}>{children}</RootContext.Provider>;\n};\n","import React from \"react\";\nexport const preventDefault = (e: React.FormEvent) => {\n  e.preventDefault();\n};\nexport const stopPropagation = (e: React.FormEvent) => {\n  e.stopPropagation();\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nexport const ProjectSelector = () => {\n  const {\n    state: { pid, projects },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        dispatch({ type: ActionTypes.SET_PID, payload: { pid: id } });\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Project</InputGroupAddon>\n      <Input value={pid} type=\"select\" onChange={handleChange}>\n        <option value=\"\"> --- </option>\n        {projects.map(item => (\n          <option key={item.id} value={item.id}>\n            {item.name}\n          </option>\n        ))}\n      </Input>\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\n\nexport const MilestoneSelector = () => {\n  const {\n    state: { milestones, mid },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        dispatch({ type: ActionTypes.SET_MID, payload: { mid: id } });\n      }\n    },\n    [dispatch]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Sprint</InputGroupAddon>\n      <Input type=\"select\" value={mid} onChange={handleChange}>\n        <option value=\"\"> --- </option>\n        {milestones.map(item => (\n          <option key={item.id} value={item.id}>\n            {item.name}\n          </option>\n        ))}\n      </Input>\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\nimport { Input, InputGroup, InputGroupAddon } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\n\nexport const CustomValuesSelector = () => {\n  const {\n    state: { custom_attrs, custom_eid, custom_rid },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        switch (e.target.name) {\n          case \"eid\": {\n            dispatch({\n              type: ActionTypes.SET_CUSTOM_EID,\n              payload: { custom_eid: id }\n            });\n            break;\n          }\n          case \"rid\": {\n            dispatch({\n              type: ActionTypes.SET_CUSTOM_RID,\n              payload: { custom_rid: id }\n            });\n            break;\n          }\n        }\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <div className=\"row\">\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Estimate</InputGroupAddon>\n        <Input\n          value={custom_eid}\n          name=\"eid\"\n          type=\"select\"\n          onChange={handleChange}\n        >\n          <option value=\"\"> --- </option>\n          {custom_attrs.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      </InputGroup>\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Result</InputGroupAddon>\n        <Input\n          value={custom_rid}\n          name=\"rid\"\n          type=\"select\"\n          onChange={handleChange}\n        >\n          <option> --- </option>\n          {custom_attrs.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      </InputGroup>\n    </div>\n  );\n};\n","import React, { useEffect, useState, useContext, useCallback } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  UncontrolledTooltip,\n  Table,\n  Card,\n  CardHeader,\n  Input,\n  Label,\n  FormGroup\n} from \"reactstrap\";\nimport { IMilestone } from \"../store\";\nimport { RootContext } from \"../Provider\";\nimport moment, { Moment } from \"moment\";\nimport biz from \"moment-business\";\nimport _ from \"lodash\";\nimport { ActionTypes } from \"../actions\";\nexport const isToday = (date: string) =>\n  moment()\n    .local()\n    .format(\"YYYY-MM-DD\") ===\n  moment(date)\n    .local()\n    .format(\"YYYY-MM-DD\");\n\nexport const dayNameFromIdx = (date: string, idx: number) => {\n  if (idx === -1) {\n    return \"\";\n  }\n  if (idx === 0) {\n    return \"Planning\";\n  }\n  return `Day ${idx}`;\n};\n\nexport const dayName = (date: string, biz_days: string[]) => {\n  const idx = biz_days.indexOf(date);\n  return dayNameFromIdx(date, idx);\n};\nconst getDays = (item: IMilestone) => {\n  const startM = moment(item.estimated_start).local();\n  const finishM = moment(item.estimated_finish).local();\n  const daysInSprint = finishM.diff(startM, \"days\");\n  return _.times(daysInSprint).map(i => startM.clone().add(i, \"days\"));\n};\nconst getDefaultBizDays = (items: Moment[]) =>\n  items\n    .filter(item => biz.isWeekDay(item))\n    .map(item => item.format(\"YYYY-MM-DD\"));\n\nconst weekClassName = (day: number) => ({\n  \"text-danger\": day === 0,\n  \"text-info\": day === 6\n});\n\ninterface DayItemProps {\n  item: Moment | null;\n  idx: number;\n}\nconst DayItem: React.FC<DayItemProps> = ({ item, idx }) => {\n  const {\n    state: { biz_days },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const biz_day = e.target.value;\n      if (e.target.checked) {\n        dispatch({ type: ActionTypes.ADD_BIZ_DAY, payload: { biz_day } });\n      } else {\n        dispatch({ type: ActionTypes.REMOVE_BIZ_DAY, payload: { biz_day } });\n      }\n    },\n    [dispatch]\n  );\n  if (!item) {\n    return (\n      <td>\n        <br />\n      </td>\n    );\n  }\n  const value = item.format(\"YYYY-MM-DD\");\n  const isPlanning = value === biz_days[0];\n  const eleId = `biz-day-${value}`;\n  const checked = _.includes(biz_days, value);\n  return (\n    <>\n      <td\n        className={classNames(weekClassName(idx), { \"table-info\": isPlanning })}\n        id={eleId}\n      >\n        {biz.isWeekDay(item) ? (\n          <FormGroup check inline>\n            <Label check>\n              <Input\n                onChange={handleChange}\n                disabled={biz.isWeekendDay(item)}\n                value={value}\n                type=\"checkbox\"\n                checked={checked}\n                className=\"form-check-input\"\n              />\n              {value}\n            </Label>\n          </FormGroup>\n        ) : (\n          <span>{value}</span>\n        )}\n      </td>\n      {checked ? (\n        <UncontrolledTooltip target={eleId}>\n          {dayName(value, biz_days)}\n        </UncontrolledTooltip>\n      ) : null}\n    </>\n  );\n};\n\nexport const DaysSelector: React.FC = () => {\n  const {\n    state: { biz_days, milestone },\n    dispatch\n  } = useContext(RootContext);\n  const [items, setItems] = useState<Moment[]>([]);\n  useEffect(() => {\n    if (milestone) {\n      const items = getDays(milestone);\n      setItems(items);\n      if (biz_days.length <= 1) {\n        dispatch({\n          type: ActionTypes.SET_BIZ_DAYS,\n          payload: { biz_days: getDefaultBizDays(items) }\n        });\n      }\n    }\n  }, [milestone, biz_days, dispatch]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    const weekdays = _.chunk(\n      [..._.times(items[0].day(), () => null), ...items],\n      7\n    );\n    return (\n      <Card>\n        <CardHeader>Business Days</CardHeader>\n        <Table bordered>\n          <thead>\n            <tr>\n              {moment.weekdays().map((item, idx) => (\n                <th\n                  key={idx}\n                  className={classNames(\"text-center\", weekClassName(idx))}\n                >\n                  {item}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {weekdays.map((days, i) => (\n              <tr key={i}>\n                {days.map((item, idx) => (\n                  <DayItem idx={idx} key={idx} item={item} />\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </Card>\n    );\n  }\n};\n","import React, { useCallback, useContext } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Input,\n  FormGroup,\n  Label\n} from \"reactstrap\";\nimport { ITaskStatus } from \"../store\";\nimport { ActionTypes } from \"../actions\";\nconst StatusItem = ({ item }: { item: ITaskStatus }) => {\n  const {\n    state: { reject_task_status_ids },\n    dispatch\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const reject_task_status_id = e.target.value;\n      if (e.target.checked) {\n        dispatch({\n          type: ActionTypes.REMOVE_REJECT_TASK_STATUS_ID,\n          payload: { reject_task_status_id }\n        });\n      } else {\n        dispatch({\n          type: ActionTypes.ADD_REJECT_TASK_STATUS_ID,\n          payload: { reject_task_status_id }\n        });\n      }\n    },\n    [dispatch]\n  );\n  return (\n    <FormGroup check inline>\n      <Label check>\n        <Input\n          onChange={handleChange}\n          type=\"checkbox\"\n          value={item.id}\n          defaultChecked={!_.includes(reject_task_status_ids, String(item.id))}\n        />\n        {item.name}\n      </Label>\n    </FormGroup>\n  );\n};\nexport const TaskStatusSelector = () => {\n  const {\n    state: { task_statuses }\n  } = useContext(RootContext);\n  if (task_statuses.length === 0) {\n    return null;\n  }\n  return (\n    <Card>\n      <CardHeader>Task status</CardHeader>\n      <CardBody>\n        {task_statuses.map(item => (\n          <StatusItem key={item.id} item={item} />\n        ))}\n      </CardBody>\n    </Card>\n  );\n};\n","import React, { useContext, useState, useCallback, useMemo } from \"react\";\nimport _ from \"lodash\";\nimport classNames from \"classnames\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  Collapse,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  Button,\n  Badge\n} from \"reactstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faChevronCircleRight,\n  faExternalLinkAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { stopPropagation } from \"../util/handler\";\nimport { ProjectSelector } from \"./ProjectSelector\";\nimport { MilestoneSelector } from \"./MilestoneSelector\";\nimport { CustomValuesSelector } from \"./CustomValuesSelector\";\nimport { DaysSelector } from \"./DaysSelector\";\nimport { TaskStatusSelector } from \"./TaskStatusSelector\";\nimport { IMilestone } from \"../store\";\nimport styles from \"./Controller.module.css\";\nimport { ActionTypes } from \"../actions\";\nconst getTaskboardUrl = (url: string, milestone: IMilestone) => {\n  if (url && milestone.project_extra_info) {\n    return `${url}/project/${milestone.project_extra_info.slug}/taskboard/${\n      milestone.slug\n    }`;\n  } else {\n    return \"\";\n  }\n};\n\nconst getRange = (biz_days: string[]) => {\n  if (biz_days.length > 1) {\n    return `[${_.head(biz_days)} - ${_.last(biz_days)}]`;\n  } else {\n    return \"\";\n  }\n};\nexport const ToggleIcon = ({ isOpen }: { isOpen: boolean }) => {\n  const rotation = isOpen ? 90 : undefined;\n  return (\n    <FontAwesomeIcon\n      className=\"text-muted mr-2\"\n      rotation={rotation}\n      icon={faChevronCircleRight}\n    />\n  );\n};\nexport const Controller = () => {\n  const {\n    state: { url: stateUrl, isOpen, biz_days, milestone },\n    dispatch\n  } = useContext(RootContext);\n  const [url, setUrl] = useState(\"\");\n  const handleUrl = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUrl(e.target.value);\n    },\n    [setUrl]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (url) {\n        dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n      }\n      e.preventDefault();\n    },\n    [url, dispatch]\n  );\n  const toggle = useCallback(() => {\n    if (isOpen) {\n      dispatch({ type: ActionTypes.CLOSE_CONTROLLER });\n    } else {\n      dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n    }\n  }, [dispatch, isOpen]);\n  const taskboardUrl = useMemo(() => getTaskboardUrl(stateUrl, milestone), [\n    milestone,\n    stateUrl\n  ]);\n  const spName = milestone.name;\n  const range = useMemo(() => getRange(biz_days), [biz_days]);\n  return (\n    <Card>\n      <CardHeader className={classNames(styles.header)} onClick={toggle}>\n        <ToggleIcon isOpen={isOpen} />\n        {spName && (\n          <Badge color=\"primary\" pill className=\"p-1 m-1\">\n            <span>{spName}</span>\n          </Badge>\n        )}\n        {range && (\n          <Badge className=\"p-1 m-1\">\n            <span>{range}</span>\n          </Badge>\n        )}\n        {taskboardUrl ? (\n          <a\n            target=\"_blank\"\n            onClick={stopPropagation}\n            className=\"float-right\"\n            href={taskboardUrl}\n            rel=\"noopener noreferrer\"\n          >\n            <FontAwesomeIcon className=\"mr-1\" icon={faExternalLinkAlt} />\n            Taskboard\n          </a>\n        ) : null}\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <Form onSubmit={handleSubmit}>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">URL</InputGroupAddon>\n            <Input\n              defaultValue={stateUrl}\n              onChange={handleUrl}\n              placeholder=\"http://hostname:port\"\n            />\n            <InputGroupAddon addonType=\"append\">\n              <Button>Set</Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <div className=\"row\">\n          <ProjectSelector />\n          <MilestoneSelector />\n        </div>\n        <CustomValuesSelector />\n        <DaysSelector />\n        <TaskStatusSelector />\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useCallback } from \"react\";\nimport { Button } from \"reactstrap\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { RootContext } from \"../Provider\";\nimport { ActionTypes } from \"../actions\";\nexport const UpdateButton: React.FC = () => {\n  const { dispatch } = useContext(RootContext);\n  const updateData = useCallback(() => {\n    dispatch({ type: ActionTypes.UPDATE_DATA });\n  }, [dispatch]);\n  return (\n    <Button onClick={updateData}>\n      <FontAwesomeIcon icon={faSyncAlt} />\n    </Button>\n  );\n};\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport {\n  Button,\n  Form,\n  InputGroup,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  Spinner\n} from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faUser,\n  faKey,\n  faSignInAlt,\n  faSignOutAlt\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { ActionTypes } from \"../actions\";\nimport { preventDefault } from \"../util/handler\";\nexport const SignInForm: React.FC = () => {\n  const {\n    state: { auth_token, auth_error, username: sign_in_username },\n    dispatch\n  } = useContext(RootContext);\n\n  const [username, setUsername] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (username && password) {\n        setLoading(true);\n        dispatch({\n          type: ActionTypes.SIGN_IN,\n          payload: {\n            username,\n            password\n          }\n        });\n      }\n      e.preventDefault();\n    },\n    [password, username, dispatch, setLoading]\n  );\n  const handleUsername = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setUsername(e.target.value);\n    },\n    [setUsername]\n  );\n  const handlePassword = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setPassword(e.target.value);\n    },\n    [setPassword]\n  );\n  const handleSignOut = useCallback(() => {\n    dispatch({ type: ActionTypes.SIGN_OUT });\n  }, [dispatch]);\n  useEffect(() => {\n    if (auth_error || auth_token) {\n      setLoading(false);\n    }\n  }, [auth_error, auth_token, setLoading]);\n  return (\n    <>\n      {auth_token ? (\n        <Form inline onSubmit={preventDefault} className=\"mr-1\">\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faUser} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon\n              addonType=\"prepend\"\n              className=\"border border-success\"\n            >\n              <InputGroupText>{sign_in_username}</InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon addonType=\"append\">\n              <Button title=\"Sign out\" onClick={handleSignOut} color=\"danger\">\n                <FontAwesomeIcon icon={faSignOutAlt} />\n              </Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n      ) : (\n        <Form inline onSubmit={handleSubmit} className=\"mr-1\">\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faUser} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <Input\n              disabled={loading}\n              onInput={handleUsername}\n              onChange={handleUsername}\n              name=\"username\"\n              placeholder=\"username\"\n              invalid={auth_error}\n            />\n          </InputGroup>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">\n              <InputGroupText>\n                <FontAwesomeIcon icon={faKey} />\n              </InputGroupText>\n            </InputGroupAddon>\n            <Input\n              disabled={loading}\n              onInput={handlePassword}\n              onChange={handlePassword}\n              name=\"password\"\n              placeholder=\"password\"\n              type=\"password\"\n              invalid={auth_error}\n            />\n          </InputGroup>\n          <Button color=\"info\">\n            {loading ? (\n              <Spinner size=\"sm\" type=\"grow\" />\n            ) : (\n              <FontAwesomeIcon icon={faSignInAlt} />\n            )}\n          </Button>\n        </Form>\n      )}\n    </>\n  );\n};\n","import React, { useCallback, useContext, useState, useMemo } from \"react\";\nimport { Avatar, AvatarProps } from \"@rmwc/avatar\";\nimport { ICustomValueMap, IUser, ITask } from \"../store\";\nimport { RootContext } from \"../Provider\";\nimport classNames from \"classnames\";\nimport {\n  Table,\n  Navbar,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Progress\n} from \"reactstrap\";\nimport _ from \"lodash\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMedal,\n  faTimes,\n  faEquals,\n  faGrinBeam,\n  faGrinBeamSweat,\n  faDizzy,\n  faGhost\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { UpdateButton } from \"./UpdateButton\";\nimport styles from \"./UserTasks.module.css\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport { preventDefault } from \"../util/handler\";\nimport { SignInForm } from \"./SignInForm\";\n\nconst barStyles = [\"success\", \"warning\", \"info\", \"danger\"];\nconst getTasksByUser = (items: ITask[]) => _.groupBy(items, \"assigned_to\");\nconst getClosedTasks = (items: ITask[]) => items.filter(item => item.is_closed);\nexport const AvatarSquare: React.FC<AvatarProps> = props => {\n  const src = props.src || `http://i.pravatar.cc/80?u=${Math.random()}`;\n  return <Avatar {...props} src={src} square className=\"mr-1\" />;\n};\nexport const parseCustomVal = (val: string) =>\n  _.chain(val)\n    .replace(/[^0-9.+,]/g, \"\")\n    .replace(/[+]/g, \",\")\n    .split(\",\")\n    .compact()\n    .map(Number)\n    .sum()\n    .value();\n\nexport const getCustomVal = (\n  custom_value_map: ICustomValueMap,\n  task: ITask,\n  id: number\n) => {\n  if (custom_value_map.has(task)) {\n    return parseCustomVal(\n      _.get(custom_value_map.get(task), `attributes_values.${id}`, \"0\")\n    );\n  } else {\n    return 0;\n  }\n};\nexport const getSumCustomVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  id: number\n) =>\n  _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, id))\n    .sum()\n    .value();\n\nexport const getCustomValVersion = (\n  custon_value_map: ICustomValueMap,\n  task: ITask\n) => {\n  if (custon_value_map.has(task)) {\n    return _.get(custon_value_map.get(task), \"version\");\n  } else {\n    return undefined;\n  }\n};\nexport const isCustomValValid = (e: number, r: number, is_closed: boolean) =>\n  is_closed && r === e;\nexport const isCustomValInvalid = (e: number, r: number) => r > e;\nconst getGrade = (e: number, r: number): [string | null, number] => {\n  if (_.isNumber(e) && _.isNumber(r) && e > 0) {\n    const diff = Math.abs(e - r) / e;\n    if (diff <= 0.05) {\n      return [\"gold\", 3];\n    }\n    if (diff <= 0.1) {\n      return [\"silver\", 2];\n    }\n    if (diff < 0.2) {\n      return [\"bronze\", 1];\n    }\n  }\n  return [null, 0];\n};\nconst NameAndWorkLoad = ({\n  username,\n  val,\n  total,\n  imgSrc\n}: {\n  username: string;\n  val: number;\n  total: number;\n  imgSrc: string;\n}) => {\n  const [icon, tblCls] = useMemo(() => {\n    const diff = total > 0 ? (val - total) / total : 0;\n    if (diff < -0.1) {\n      return [faGrinBeam, \"\"];\n    } else if (diff <= 0.1) {\n      return [faGrinBeam, \"table-success\"];\n    } else if (diff <= 0.2) {\n      return [faGrinBeamSweat, \"table-warning\"];\n    } else {\n      return [faDizzy, \"table-danger\"];\n    }\n  }, [total, val]);\n\n  if (!val) {\n    return (\n      <>\n        <td>\n          <AvatarSquare src={imgSrc} /> {username}\n        </td>\n        <td />\n      </>\n    );\n  }\n  return (\n    <>\n      <td className={tblCls}>\n        <AvatarSquare src={imgSrc} /> {username}\n        <FontAwesomeIcon className=\"mx-1\" icon={icon} />\n      </td>\n      <td className={classNames(tblCls, \"text-right\")}>{val}</td>\n    </>\n  );\n};\n\nexport const Medal = ({ e, r }: { e: number; r: number }) => {\n  const [grade, num] = useMemo(() => getGrade(e, r), [e, r]);\n  if (grade) {\n    return (\n      <>\n        {_.times(num).map(i => (\n          <FontAwesomeIcon key={i} className={styles[grade]} icon={faMedal} />\n        ))}\n      </>\n    );\n  } else {\n    return null;\n  }\n};\ninterface IProgressTotal {\n  status: number;\n  total: number;\n  style?: string;\n  label: string;\n}\ninterface TaskProgressProps {\n  tasks: ITask[];\n}\n\nexport const TaskProgress: React.FC<TaskProgressProps> = ({ tasks }) => {\n  const {\n    state: { active_task_statuses, custom_eid, custom_value_map }\n  } = useContext(RootContext);\n  const eid = Number(custom_eid);\n  const items = useMemo(\n    () =>\n      _.chain(active_task_statuses)\n        .filter({ is_closed: true })\n        .reverse()\n        .map((item, idx) => ({\n          status: item.id,\n          total: getSumCustomVal(\n            custom_value_map,\n            _.filter(tasks, { status: item.id }),\n            eid\n          ),\n          style: barStyles[idx],\n          label: item.name\n        }))\n        .value(),\n    [active_task_statuses, custom_value_map, eid, tasks]\n  );\n\n  const allSum = useMemo(() => getSumCustomVal(custom_value_map, tasks, eid), [\n    custom_value_map,\n    eid,\n    tasks\n  ]);\n\n  return (\n    <Progress multi>\n      {items.map(item => (\n        <Progress\n          key={item.label}\n          bar\n          max={allSum}\n          value={item.total}\n          color={item.style}\n        >\n          {item.label}\n        </Progress>\n      ))}\n    </Progress>\n  );\n};\nconst UserRow = ({\n  item,\n  sums,\n  isPast,\n  total,\n  hpd,\n  tasks\n}: {\n  item: IUser;\n  sums: { [key: string]: { e: number; r: number } };\n  isPast: boolean;\n  total: number;\n  hpd: number;\n  tasks: ITask[];\n}) => {\n  const [customTotal, setTotal] = useState<number>(0);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setTotal(Number(e.target.value) || 0);\n    },\n    [setTotal]\n  );\n  const sumItem = _.get(sums, item.id);\n  const e = _.get(sumItem, \"e\");\n  const r = _.get(sumItem, \"r\");\n  const margedTotal = customTotal || total;\n  const totalStr = String(margedTotal);\n  return (\n    <tr key={item.id}>\n      {total > 0 ? (\n        <>\n          <NameAndWorkLoad\n            username={item.username}\n            val={e}\n            total={margedTotal}\n            imgSrc={item.photo}\n          />\n          <td className=\"text-right\">{total}</td>\n          <td className={styles.custom_input_td}>\n            <Input\n              bsSize=\"sm\"\n              type=\"number\"\n              className=\"text-right\"\n              value={totalStr}\n              step={hpd}\n              onChange={handleChange}\n            />\n          </td>\n        </>\n      ) : (\n        <>\n          <td>\n            <AvatarSquare src={item.photo} />\n            <Link to={`/${item.id}`}>{item.username}</Link>\n          </td>\n          <td className=\"text-right\">{e}</td>\n          <td className=\"text-right\">{r}</td>\n          <td>{_.isNumber(e) && <TaskProgress tasks={tasks} />}</td>\n        </>\n      )}\n\n      {isPast ? (\n        <td>\n          <Medal e={e} r={r} />\n        </td>\n      ) : null}\n    </tr>\n  );\n};\nconst getTaskSumByUser = (\n  items: ITask[],\n  custom_value_map: ICustomValueMap,\n  custom_eid: string,\n  custom_rid: string\n) => {\n  const eid = Number(custom_eid);\n  const rid = Number(custom_rid);\n  const tasksByUser = _.mapValues(getTasksByUser(items), tasks =>\n    _.chain(tasks)\n      .map(task => ({\n        e: getCustomVal(custom_value_map, task, eid),\n        r: getCustomVal(custom_value_map, task, rid)\n      }))\n      .reduce((result, val) => ({ e: result.e + val.e, r: result.r + val.r }), {\n        e: 0,\n        r: 0\n      })\n      .value()\n  );\n  return tasksByUser;\n};\nexport const UserTasks = () => {\n  const {\n    state: {\n      tasks,\n      custom_value_map,\n      custom_eid,\n      custom_rid,\n      biz_days,\n      custom_attr_e,\n      custom_attr_r,\n      project: { members }\n    }\n  } = useContext(RootContext);\n  const [hpd, setHpd] = useState<number>(0);\n  const activeLen = biz_days.length - 1;\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setHpd(Number(e.target.value) || 0);\n    },\n    [setHpd]\n  );\n  const total = hpd * activeLen;\n  const taskSumByUser = useMemo(\n    () => getTaskSumByUser(tasks, custom_value_map, custom_eid, custom_rid),\n    [custom_eid, custom_rid, custom_value_map, tasks]\n  );\n  const notAssignedSum = _.get(taskSumByUser, \"null.e\", 0);\n  const isPlanning = total > 0;\n  const isPast = useMemo(\n    () =>\n      !isPlanning &&\n      moment().diff(\n        moment(_.last(biz_days))\n          .local()\n          .endOf(\"days\")\n      ) > 0,\n    [biz_days, isPlanning]\n  );\n  const tasksByUser = useMemo(() => getTasksByUser(getClosedTasks(tasks)), [\n    tasks\n  ]);\n  if (!custom_attr_e.id || !custom_attr_r.id || biz_days.length <= 1) {\n    return null;\n  }\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Form inline={true} className=\"mr-auto\" onSubmit={preventDefault}>\n          <InputGroup>\n            <Input\n              type=\"number\"\n              step=\"0.5\"\n              placeholder=\"hours / day\"\n              className=\"text-right\"\n              onChange={handleChange}\n            />\n            <InputGroupAddon addonType=\"append\">\n              <InputGroupText>\n                <FontAwesomeIcon className=\"mx-2\" icon={faTimes} />\n                {activeLen} [days]\n                <FontAwesomeIcon className=\"mx-2\" icon={faEquals} />\n              </InputGroupText>\n              {total > 0 ? (\n                <>\n                  <InputGroupText className=\"bg-white\">\n                    <strong>{total}</strong>\n                  </InputGroupText>\n                  <InputGroupText>hours / sprint</InputGroupText>\n                </>\n              ) : null}\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <SignInForm />\n        <UpdateButton />\n      </Navbar>\n      <Table bordered>\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>{custom_attr_e.name}</th>\n            {isPlanning ? (\n              <>\n                <th>Total</th> <th>Custom</th>\n              </>\n            ) : (\n              <>\n                <th>{custom_attr_r.name}</th>\n                <th>Progress</th>\n              </>\n            )}\n            {isPast ? <th>Grade</th> : null}\n          </tr>\n        </thead>\n        <tbody>\n          {(members || []).map(item => (\n            <UserRow\n              key={item.id}\n              isPast={isPast}\n              item={item}\n              sums={taskSumByUser}\n              total={total}\n              hpd={hpd}\n              tasks={tasksByUser[item.id] || []}\n            />\n          ))}\n          <tr key=\"null\">\n            <td className=\"text-danger\">\n              <FontAwesomeIcon icon={faGhost} className=\"ml-1 mr-2 fa-lg\" />\n              Not assigned\n            </td>\n            <td className=\"text-right text-danger\">{notAssignedSum}</td>\n            <td />\n            <td />\n            {isPast ? <td /> : null}\n          </tr>\n        </tbody>\n      </Table>\n    </>\n  );\n};\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport { InputGroupAddon, InputGroupText } from \"reactstrap\";\nexport const InputGroupSpinner: React.FC = () => {\n  return (\n    <InputGroupAddon addonType=\"append\">\n      <InputGroupText>\n        <FontAwesomeIcon icon={faSpinner} className=\"fa-pulse\" />\n      </InputGroupText>\n    </InputGroupAddon>\n  );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"currentColor\",\n  className: \"leaf\",\n  d: \"M115.343,123.839c0.814,1.256,3.343,2.605,7.23,4.014c7.586-1.069,14.943-1.586,21.885-1.586 c15.579,0,30.166,2.469,42.438,7.145c17.87-5.567,43.412-11.694,69.108-11.694c25.694,0,51.228,6.126,69.108,11.694 c12.262-4.676,26.848-7.145,42.42-7.145c7.001,0,14.418,0.518,22.063,1.604c3.471-1.341,6.296-2.699,8.325-4.031 c42.2-28.139,53.036-81.183,47.41-69.931c-4.218,8.418-60.309,35.581-100.004,52.222c14.68-17.769,31.677-44.134,43.438-80.309 c0,0-60.978,52.382-98.867,74.887c-11.974-20.816-33.892-86.589-33.892-86.589s-18.567,49.515-20.358,81.412 c-30.21-16.929-63.354-51.474-72.485-74.538c-10.752-27.189-13.78,53.545,15.436,89.396c-1.095,0.162-2.206,0.315-3.344,0.476 c-39.111-16.072-100.454-47.91-104.926-54.86C64.708,47.255,73.143,101.954,115.343,123.839z M290.531,107.181l0.747,0.857 l-3.098-0.746L290.531,107.181z\"\n}), React.createElement(\"path\", {\n  fill: \"currentColor\",\n  className: \"tomato\",\n  d: \"M485.83,198.564c-38.169-57.253-117.544-70.584-160.338-52.195c-18.27-5.906-43.872-12.27-69.49-12.27 c-25.619,0-51.228,6.364-69.499,12.27c-42.794-18.388-122.168-5.058-160.338,52.195c-64.136,96.203-18.711,299.318,229.836,299.318 C504.541,497.882,549.974,294.767,485.83,198.564z M101.172,262.929c-17.099,0-30.947-13.857-30.947-30.948 c0-17.09,13.848-30.947,30.947-30.947c17.082,0,30.947,13.857,30.947,30.947C132.119,249.071,118.253,262.929,101.172,262.929z\"\n}));\n\nvar SvgTomato = function SvgTomato(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"_x32_\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTomato, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/tomato.998f40c5.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { ReactComponent as TomatoIcon } from \"../tomato.svg\";\nimport classNames from \"classnames\";\nimport styles from \"./Tomato.module.css\";\nexport enum TomatoState {\n  FRESH = \"fresh\",\n  STALE = \"stale\"\n}\ninterface TomatoProps {\n  state?: TomatoState;\n  bl?: boolean;\n  br?: boolean;\n}\nexport const Tomato: React.FC<TomatoProps> = ({ state, bl,br }) => {\n  return (\n    <TomatoIcon\n      className={classNames(\"fa-fw\", \"svg-inline--fa\", {\n        [styles.fresh]: state === TomatoState.FRESH,\n        [styles.stale]: state === TomatoState.STALE,\n        [styles.bl]: bl,\n        [styles.br]: br,\n      })}\n    />\n  );\n};\n","import React, {\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  useMemo\n} from \"react\";\nimport {\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  Collapse,\n  Row,\n  Col,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownItem,\n  DropdownMenu,\n  Spinner,\n  Form,\n  Popover,\n  PopoverHeader,\n  PopoverBody\n} from \"reactstrap\";\nimport classNames from \"classnames\";\nimport {\n  ITasksByUserStory,\n  ITask,\n  ITaskStatus,\n  IUserStoryExtraInfo,\n  IProjectExtraInfo,\n  IUser\n} from \"../store\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faExternalLinkAlt,\n  faCloudUploadAlt,\n  faEdit,\n  faHandPointRight,\n  faUserTimes,\n  faPlus,\n  faMinus,\n  faEraser,\n  faPause,\n  faPlay\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { InputGroupSpinner } from \"./InputGroupSpinner\";\nimport { RootContext } from \"../Provider\";\nimport { Tomato, TomatoState } from \"./Tomato\";\nimport {\n  getCustomVal,\n  getCustomValVersion,\n  isCustomValInvalid,\n  isCustomValValid,\n  Medal,\n  AvatarSquare\n} from \"./UserTasks\";\nimport { ToggleIcon } from \"./Controller\";\nimport ListGroup from \"reactstrap/lib/ListGroup\";\nimport ListGroupItem from \"reactstrap/lib/ListGroupItem\";\nimport styles from \"./UserStory.module.css\";\nimport { Switch } from \"@rmwc/switch\";\nimport InputGroupText from \"reactstrap/lib/InputGroupText\";\nimport { ActionTypes } from \"../actions\";\nimport _ from \"lodash\";\nimport { stopPropagation } from \"../util/handler\";\nimport { timer, TimerMode, TimerState } from \"../util/timer\";\nexport const convToTasksByUserStory = (tasks: ITask[]) =>\n  _.chain(tasks)\n    .groupBy(\"user_story\")\n    .map((items, key) => ({\n      user_story: Number(key),\n      user_story_extra_info: items[0].user_story_extra_info,\n      project_extra_info: items[0].project_extra_info,\n      tasks: items,\n      is_closed: items.every(task => task.is_closed)\n    }))\n    .value();\nconst needAuthMsg = (disabled: boolean | undefined) =>\n  disabled ? \"Need sign in!\" : \"\";\nconst UserStoryLink = ({\n  user_story_extra_info,\n  project_extra_info\n}: {\n  user_story_extra_info: IUserStoryExtraInfo;\n  project_extra_info: IProjectExtraInfo;\n}) => {\n  const {\n    state: { url }\n  } = useContext(RootContext);\n  const { slug } = project_extra_info;\n  const usName = user_story_extra_info\n    ? `#${user_story_extra_info.ref} ${user_story_extra_info.subject}`\n    : undefined;\n  const href = user_story_extra_info\n    ? `${url}/project/${slug}/us/${user_story_extra_info.ref}`\n    : \"#\";\n\n  if (usName) {\n    return (\n      <a\n        href={href}\n        onClick={stopPropagation}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        title={usName}\n      >\n        <FontAwesomeIcon icon={faExternalLinkAlt} /> {usName}\n      </a>\n    );\n  } else {\n    return <>(Unassigned tasks)</>;\n  }\n};\n\nconst TaskLink = ({ item }: { item: ITask }) => {\n  const {\n    state: { url }\n  } = useContext(RootContext);\n  const taskName = `#${item.ref} ${item.subject}`;\n  const href = `${url}/project/${item.project_extra_info.slug}/task/${\n    item.ref\n  }`;\n  return (\n    <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" title={taskName}>\n      <FontAwesomeIcon icon={faExternalLinkAlt} /> {taskName}\n    </a>\n  );\n};\n\ninterface ToggleNumberInputProps {\n  label: string;\n  value: number;\n  onSubmit?: (value: number) => void;\n  onEditable?: (value: boolean) => void;\n  onValueChange?: (value: number) => void;\n  valid?: boolean;\n  invalid?: boolean;\n  disabled?: boolean;\n  loading?: boolean;\n  id?: string;\n  submitting?: boolean;\n}\nconst ToggleNumberInput: React.FC<ToggleNumberInputProps> = ({\n  label,\n  value,\n  onSubmit,\n  onEditable,\n  onValueChange,\n  valid,\n  invalid,\n  disabled,\n  loading,\n  id,\n  submitting\n}) => {\n  const [checked, setChecked] = useState(false);\n  const [val, setVal] = useState(\"\");\n  const [running, setRunning] = useState(false);\n  const onChange = useCallback(\n    (evt: React.FormEvent<any>) => {\n      setChecked(evt.currentTarget.checked);\n    },\n    [setChecked]\n  );\n  const handleVal = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = e.target;\n      setVal(value);\n      onValueChange && onValueChange(Number(value));\n    },\n    [onValueChange]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      const num = Number(val);\n      if (checked && val !== \"\" && num >= 0 && onSubmit) {\n        onSubmit(num);\n        setChecked(false);\n        setRunning(true);\n      }\n      e.preventDefault();\n    },\n    [checked, val, onSubmit, setChecked]\n  );\n  useEffect(() => {\n    if (disabled) {\n      setChecked(false);\n    }\n  }, [setChecked, disabled]);\n  useEffect(() => {\n    setRunning(false);\n  }, [value]);\n  useEffect(() => {\n    onEditable && onEditable(checked);\n  }, [checked, onEditable]);\n  useEffect(() => {\n    if (submitting) {\n      setChecked(false);\n      setRunning(true);\n    }\n  }, [submitting]);\n  useEffect(() => {\n    if (loading) {\n      setChecked(false);\n    }\n  }, [loading]);\n  const title = needAuthMsg(disabled);\n  return (\n    <Form inline onSubmit={handleSubmit}>\n      <InputGroup className={styles.toggle_input}>\n        <InputGroupAddon addonType=\"prepend\">{label}</InputGroupAddon>\n        {loading ? (\n          <InputGroupSpinner />\n        ) : (\n          <>\n            {checked ? (\n              <>\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>{value}</InputGroupText>\n                </InputGroupAddon>\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>\n                    <FontAwesomeIcon\n                      className=\"text-info\"\n                      icon={faHandPointRight}\n                    />\n                  </InputGroupText>\n                </InputGroupAddon>\n                <Input\n                  onInput={handleVal}\n                  onChange={handleVal}\n                  defaultValue={String(value)}\n                  type=\"number\"\n                  step=\"0.5\"\n                  min=\"0\"\n                  id={id}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <Button color=\"info\">\n                    <FontAwesomeIcon icon={faCloudUploadAlt} />\n                  </Button>\n                </InputGroupAddon>\n              </>\n            ) : (\n              <>\n                {running ? (\n                  <InputGroupSpinner />\n                ) : (\n                  <Input\n                    valid={valid}\n                    invalid={invalid}\n                    readOnly\n                    value={value}\n                  />\n                )}\n              </>\n            )}\n            <InputGroupAddon addonType=\"append\" title={title}>\n              <Switch disabled={disabled} checked={checked} onChange={onChange}>\n                <FontAwesomeIcon className=\"text-info\" icon={faEdit} />\n              </Switch>\n            </InputGroupAddon>\n          </>\n        )}\n      </InputGroup>\n    </Form>\n  );\n};\ninterface GradeProps {\n  e: number;\n  r: number;\n}\nexport const Grade: React.FC<GradeProps> = ({ e, r }) => {\n  return (\n    <InputGroup className={styles.display_medal}>\n      <InputGroupAddon addonType=\"prepend\">Grade</InputGroupAddon>\n      <InputGroupText className={styles.medal}>\n        <Medal e={e} r={r} />\n      </InputGroupText>\n    </InputGroup>\n  );\n};\n\ninterface TaskStatusItemProps {\n  item: ITaskStatus;\n  task: ITask;\n  onSelect?: (id: number) => void;\n}\nconst TaskStatusItem: React.FC<TaskStatusItemProps> = ({\n  item,\n  task,\n  onSelect\n}) => {\n  const { dispatch } = useContext(RootContext);\n  const handleClick = useCallback(() => {\n    dispatch({\n      type: ActionTypes.PATCH_TASK,\n      payload: {\n        key: \"status\",\n        value: item.id,\n        id: task.id\n      }\n    });\n    onSelect && onSelect(item.id);\n  }, [dispatch, item.id, task.id, onSelect]);\n  return <DropdownItem onClick={handleClick}>{item.name}</DropdownItem>;\n};\ninterface TaskStatusSelectorProps {\n  task: ITask;\n  disabled?: boolean;\n}\nconst TaskStatusSelector: React.FC<TaskStatusSelectorProps> = ({\n  task,\n  disabled\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const {\n    state: { active_task_statuses }\n  } = useContext(RootContext);\n  const handleSelect = useCallback(() => {\n    setLoading(true);\n  }, [setLoading]);\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"info\" />\n      ) : (\n        <UncontrolledDropdown>\n          <DropdownToggle\n            title={needAuthMsg(disabled)}\n            disabled={disabled}\n            caret={!disabled}\n          >\n            {task.status_extra_info.name}\n          </DropdownToggle>\n          <DropdownMenu>\n            {active_task_statuses.map(item => (\n              <TaskStatusItem\n                item={item}\n                key={item.id}\n                task={task}\n                onSelect={handleSelect}\n              />\n            ))}\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      )}\n    </>\n  );\n};\ninterface UserItemProps {\n  item: IUser;\n  onSelect?: (id: number) => void;\n}\nconst UserItem: React.FC<UserItemProps> = ({ item, onSelect }) => {\n  const handleClick = useCallback(() => {\n    onSelect && onSelect(item.id);\n  }, [item.id, onSelect]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <AvatarSquare src={item.photo} />\n      {item.username}\n    </DropdownItem>\n  );\n};\ninterface TaskUserSelectorProps {\n  task: ITask;\n  disabled?: boolean;\n}\nexport const TaskUserSelector: React.FC<TaskUserSelectorProps> = ({\n  task,\n  disabled\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const {\n    state: {\n      project: { members }\n    },\n    dispatch\n  } = useContext(RootContext);\n  const handleSelect = useCallback(\n    (id: number) => {\n      setLoading(true);\n      dispatch({\n        type: ActionTypes.PATCH_TASK,\n        payload: {\n          key: \"assigned_to\",\n          value: id,\n          id: task.id\n        }\n      });\n    },\n    [dispatch, task.id]\n  );\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"info\" />\n      ) : (\n        <UncontrolledDropdown>\n          <DropdownToggle\n            title={needAuthMsg(disabled)}\n            size=\"sm\"\n            disabled={disabled}\n            caret={!disabled}\n          >\n            Assign To\n          </DropdownToggle>\n          <DropdownMenu>\n            {(members || []).map(item => (\n              <UserItem item={item} onSelect={handleSelect} key={item.id} />\n            ))}\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      )}\n    </>\n  );\n};\ninterface NotAssignedButtonProps {\n  task: ITask;\n}\nconst NotAssignedButton: React.FC<NotAssignedButtonProps> = ({ task }) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const { dispatch } = useContext(RootContext);\n  const handleClick = useCallback(() => {\n    setLoading(true);\n    dispatch({\n      type: ActionTypes.PATCH_TASK,\n      payload: {\n        key: \"assigned_to\",\n        value: null,\n        id: task.id\n      }\n    });\n  }, [dispatch, task.id]);\n  useEffect(() => {\n    setLoading(false);\n  }, [task.version, setLoading]);\n  return (\n    <>\n      {loading ? (\n        <Spinner type=\"grow\" color=\"danger\" />\n      ) : (\n        <Button\n          className=\"mr-2\"\n          title=\"Not assigned\"\n          color=\"danger\"\n          onClick={handleClick}\n        >\n          <FontAwesomeIcon icon={faUserTimes} />\n        </Button>\n      )}\n    </>\n  );\n};\ninterface CustomValueInputProps {\n  item: ITask;\n}\n\nconst EstimateInput: React.FC<CustomValueInputProps> = ({ item }) => {\n  const {\n    state: { custom_eid, custom_value_map, auth_token, custom_attr_e },\n    dispatch\n  } = useContext(RootContext);\n  const version = getCustomValVersion(custom_value_map, item);\n  const handleSubmit = useCallback(\n    (value: number) => {\n      if (version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: item.id,\n            key: custom_eid,\n            value,\n            version\n          }\n        });\n      }\n    },\n    [dispatch, item.id, custom_eid, version]\n  );\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  if (!custom_attr_e.id) {\n    return null;\n  }\n  const unEstimated = !e;\n  const disabled = auth_token === \"\";\n  const loading = !version;\n\n  return (\n    <ToggleNumberInput\n      onSubmit={handleSubmit}\n      label={custom_attr_e.name}\n      value={e}\n      invalid={unEstimated}\n      disabled={disabled}\n      loading={loading}\n    />\n  );\n};\nconst ResultInput: React.FC<CustomValueInputProps> = ({ item }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [used_number, set_used_number] = useState(0);\n  const [editable, setEditable] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const {\n    state: {\n      custom_rid,\n      custom_value_map,\n      custom_attr_e,\n      custom_attr_r,\n      auth_token,\n      pomodoro_number,\n      pomodoro_used_number\n    },\n    dispatch\n  } = useContext(RootContext);\n  const version = getCustomValVersion(custom_value_map, item);\n  const handleToggle = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n  const handleSubmit = useCallback(\n    (value: number, used_number?: number) => {\n      if (version) {\n        dispatch({\n          type: ActionTypes.PATCH_CUSTOM_VALUE,\n          payload: {\n            id: item.id,\n            key: custom_rid,\n            value,\n            version\n          },\n          meta: used_number ? { use_pomodoro: { used_number } } : undefined\n        });\n        setSubmitting(true);\n      }\n    },\n    [custom_rid, dispatch, item.id, version]\n  );\n  const handlePluse = useCallback(() => {\n    set_used_number(used_number + 1);\n  }, [used_number]);\n  const handleMinus = useCallback(() => {\n    set_used_number(used_number - 1);\n  }, [used_number]);\n\n  const handleReset = useCallback(() => {\n    set_used_number(0);\n  }, []);\n  const handleEditable = useCallback((val: boolean) => {\n    setEditable(val);\n  }, []);\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  const r = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item]\n  );\n  const handleValueChange = useCallback(\n    (val: number) => {\n      setEditable(r === val);\n    },\n    [r]\n  );\n  const handleUsePomodoro = useCallback(() => {\n    const result = r + used_number / 2;\n    handleSubmit(result, used_number);\n    setIsOpen(false);\n    set_used_number(0);\n  }, [handleSubmit, r, used_number]);\n\n  const valid = useMemo(() => isCustomValValid(e, r, item.is_closed), [\n    e,\n    item.is_closed,\n    r\n  ]);\n  const invalid = useMemo(() => isCustomValInvalid(e, r), [e, r]);\n  useEffect(() => {\n    if (!version) {\n      setSubmitting(false);\n    }\n  }, [version]);\n  useEffect(() => {\n    set_used_number(0);\n  }, [pomodoro_used_number]);\n  if (!custom_attr_r.id) {\n    return null;\n  }\n\n  const disabled = auth_token === \"\";\n  const loading = !version;\n  const elId = `rusult-input-${item.id}`;\n  const usableNumber = pomodoro_number - pomodoro_used_number;\n  const submittable = used_number > 0;\n  const isMax = used_number === usableNumber;\n  return (\n    <>\n      <ToggleNumberInput\n        onSubmit={handleSubmit}\n        onEditable={handleEditable}\n        onValueChange={handleValueChange}\n        label={custom_attr_r.name}\n        value={r}\n        valid={valid}\n        invalid={invalid}\n        disabled={disabled}\n        loading={loading}\n        id={elId}\n        submitting={submitting}\n      />\n      {editable && usableNumber > 0 && (\n        <Popover\n          className={classNames(\"popover-wide\")}\n          target={elId}\n          placement=\"top\"\n          isOpen={isOpen}\n          toggle={handleToggle}\n          trigger=\"click hover\"\n        >\n          <PopoverHeader>Pomodoro</PopoverHeader>\n          <PopoverBody>\n            <ButtonGroup>\n              <Button disabled={isMax} onClick={handlePluse}>\n                <FontAwesomeIcon icon={faPlus} />\n              </Button>\n              <Button disabled={!submittable} onClick={handleMinus}>\n                <FontAwesomeIcon icon={faMinus} />\n              </Button>\n              <Button disabled className=\"bg-light\">\n                {_.times(usableNumber).map(i => (\n                  <Tomato\n                    key={i}\n                    state={\n                      i >= used_number ? TomatoState.FRESH : TomatoState.STALE\n                    }\n                  />\n                ))}\n              </Button>\n              <Button disabled={!submittable} onClick={handleUsePomodoro}>\n                <FontAwesomeIcon icon={faCloudUploadAlt} />\n              </Button>\n              <Button disabled={!submittable} onClick={handleReset}>\n                <FontAwesomeIcon icon={faEraser} />\n              </Button>\n            </ButtonGroup>\n          </PopoverBody>\n        </Popover>\n      )}\n    </>\n  );\n};\ninterface TaskItemProps {\n  item: ITask;\n}\n\nconst TaskTimerButton: React.FC<TaskItemProps> = ({ item }) => {\n  const {\n    state: { task_id, pomodoro_mode, pomodoro_state },\n    dispatch\n  } = useContext(RootContext);\n  const handleStart = useCallback(() => {\n    if (Number(task_id) !== item.id) {\n      dispatch({\n        type: ActionTypes.SET_TASK_ID,\n        payload: { task_id: String(item.id) }\n      });\n    }\n    if (pomodoro_state === TimerState.STOPPED) {\n      timer.changeMode(TimerMode.FOCUS);\n      timer.start();\n    } else {\n      if (pomodoro_mode === TimerMode.FOCUS) {\n        timer.resume();\n      } else {\n        timer.changeMode(TimerMode.FOCUS);\n        timer.start();\n      }\n    }\n  }, [dispatch, item.id, pomodoro_mode, pomodoro_state, task_id]);\n  const handlePause = useCallback(() => {\n    timer.pause();\n  }, []);\n  if (Number(task_id) === item.id) {\n    if (\n      pomodoro_mode === TimerMode.FOCUS &&\n      pomodoro_state === TimerState.RUNNING\n    ) {\n      return (\n        <Button className=\"mr-2\" color=\"danger\" onClick={handlePause}>\n          <FontAwesomeIcon icon={faPause} />\n          <Tomato />\n        </Button>\n      );\n    } else {\n      return (\n        <Button onClick={handleStart} color=\"primary\" className=\"mr-2\">\n          <FontAwesomeIcon icon={faPlay} />\n          <Tomato />\n        </Button>\n      );\n    }\n  } else if (task_id === \"\") {\n    if (\n      pomodoro_mode === TimerMode.FOCUS &&\n      pomodoro_state !== TimerState.STOPPED\n    ) {\n      return null;\n    } else {\n      return (\n        <Button onClick={handleStart} color=\"primary\" className=\"mr-2\">\n          <FontAwesomeIcon icon={faPlay} />\n          <Tomato />\n        </Button>\n      );\n    }\n  } else {\n    return null;\n  }\n};\nexport const TaskItem: React.FC<TaskItemProps> = ({ item }) => {\n  const {\n    state: { custom_value_map, custom_attr_e, custom_attr_r, auth_token }\n  } = useContext(RootContext);\n  const version = useMemo(() => getCustomValVersion(custom_value_map, item), [\n    custom_value_map,\n    item\n  ]);\n  const e = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_e.id),\n    [custom_attr_e.id, custom_value_map, item]\n  );\n  const r = useMemo(\n    () => getCustomVal(custom_value_map, item, custom_attr_r.id),\n    [custom_attr_r.id, custom_value_map, item]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id) {\n    return null;\n  }\n\n  const disabled = auth_token === \"\";\n  const loading = !version;\n  const inactive = r === 0 && !item.is_closed && !disabled && !loading;\n  return (\n    <ListGroupItem\n      className={classNames({ [styles.is_closed]: item.is_closed })}\n    >\n      <div className=\"d-flex mb-1\">\n        <div className=\"mr-auto text-truncate\">\n          <TaskLink item={item} />\n        </div>\n        {inactive && <NotAssignedButton task={item} />}\n        <TaskTimerButton item={item} />\n        <TaskStatusSelector task={item} disabled={disabled} />\n      </div>\n      <Row>\n        <Col>\n          <EstimateInput item={item} />\n        </Col>\n        <Col>\n          <ResultInput item={item} />\n        </Col>\n        <Col>\n          <Grade e={e} r={r} />\n        </Col>\n      </Row>\n    </ListGroupItem>\n  );\n};\ninterface UserStoryProps {\n  item: ITasksByUserStory;\n}\nexport const UserStoryWithEstimate: React.FC<UserStoryProps> = ({ item }) => {\n  return (\n    <Card>\n      <CardHeader className=\"text-truncate\">\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <ListGroup>\n        {item.tasks.map(task => (\n          <ListGroupItem key={task.id} className=\"text-truncate\">\n            <div className=\"d-flex\">\n              <div className=\"mr-auto text-truncate\">\n                <TaskLink item={task} />\n              </div>\n              <EstimateInput item={task} />\n            </div>\n          </ListGroupItem>\n        ))}\n      </ListGroup>\n    </Card>\n  );\n};\nexport const UserStoryWithTaskUser: React.FC<UserStoryProps> = ({ item }) => {\n  const {\n    state: { auth_token }\n  } = useContext(RootContext);\n  const disabled = auth_token === \"\";\n  return (\n    <Card>\n      <CardHeader className=\"text-truncate\">\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <Collapse isOpen={true}>\n        <ListGroup>\n          {item.tasks.map(task => (\n            <ListGroupItem key={task.id}>\n              <div className=\"d-flex\">\n                <div className=\"mr-auto text-truncate\">\n                  <TaskLink item={task} />\n                </div>\n                <TaskUserSelector task={task} disabled={disabled} />\n              </div>\n            </ListGroupItem>\n          ))}\n        </ListGroup>\n      </Collapse>\n    </Card>\n  );\n};\n\nexport const UserStory: React.FC<UserStoryProps> = ({ item }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const toggle = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen, setIsOpen]);\n  useEffect(() => {\n    setIsOpen(!item.is_closed);\n  }, [item.is_closed, setIsOpen]);\n  return (\n    <Card>\n      <CardHeader\n        className={classNames(styles.header, \"text-truncate\", {\n          \"alert-primary\": item.is_closed\n        })}\n        onClick={toggle}\n      >\n        <ToggleIcon isOpen={isOpen} />\n        <UserStoryLink\n          user_story_extra_info={item.user_story_extra_info}\n          project_extra_info={item.project_extra_info}\n        />\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <ListGroup>\n          {item.tasks.map(task => (\n            <TaskItem item={task} key={task.id} />\n          ))}\n        </ListGroup>\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useMemo } from \"react\";\nimport { RootContext } from \"../Provider\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nimport { getCustomVal, getCustomValVersion } from \"./UserTasks\";\nimport { UserStoryWithEstimate, convToTasksByUserStory } from \"./UserStory\";\nexport const UnEstimatedTasks = () => {\n  const {\n    state: { tasks, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  const eid = useMemo(() => Number(custom_eid), [custom_eid]);\n  const items = useMemo(\n    () =>\n      eid\n        ? tasks.filter(\n            task =>\n              getCustomValVersion(custom_value_map, task) &&\n              getCustomVal(custom_value_map, task, eid) === 0\n          )\n        : [],\n    [custom_value_map, eid, tasks]\n  );\n  const userStories = useMemo(() => convToTasksByUserStory(items), [items]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader className=\"alert-danger\">Un estimated tasks</CardHeader>\n        <CardBody>\n          {userStories.map(item => (\n            <UserStoryWithEstimate item={item} key={item.user_story} />\n          ))}\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useContext, useMemo } from \"react\";\nimport _ from \"lodash\";\nimport { RootContext } from \"../Provider\";\nimport { UserStoryWithTaskUser, convToTasksByUserStory } from \"./UserStory\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nexport const NotAssignedTasks: React.FC = () => {\n  const {\n    state: { tasks }\n  } = useContext(RootContext);\n  const items = useMemo(() => _.filter(tasks, { assigned_to: null }), [tasks]);\n  const userStories = useMemo(() => convToTasksByUserStory(items), [items]);\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader className=\"alert-danger\">Not assigned tasks</CardHeader>\n        <CardBody>\n          {userStories.map(item => (\n            <UserStoryWithTaskUser item={item} key={item.user_story} />\n          ))}\n        </CardBody>\n      </Card>\n    );\n  }\n};\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\nimport {\n  ComposedChart,\n  Tooltip,\n  Line,\n  XAxis,\n  YAxis,\n  Bar,\n  Legend,\n  TooltipFormatter,\n  LegendValueFormatter\n} from \"recharts\";\nimport { ITask, ICustomValueMap } from \"../store\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport { RootContext } from \"../Provider\";\nimport { dayNameFromIdx } from \"./DaysSelector\";\nimport { getCustomVal } from \"./UserTasks\";\nimport { Card, CardHeader } from \"reactstrap\";\ninterface IChartItem {\n  label: string;\n  estimate: number;\n  result?: number;\n  add?: number;\n}\n\nconst getTaskFinished = (tasks: ITask[], date: string) =>\n  tasks.filter(task =>\n    task.finished_date\n      ? moment(date)\n          .local()\n          .endOf(\"days\")\n          .diff(moment(task.finished_date)) > 0\n      : false\n  );\n\nconst getTaskCreatedToday = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .format(\"YYYY-MM-DD\") ===\n      moment(task.created_date)\n        .local()\n        .format(\"YYYY-MM-DD\")\n  );\n\nconst getTaskCreated = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .endOf(\"days\")\n        .diff(moment(task.created_date)) > 0\n  );\n\nconst getSumVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  custom_eid: string\n) => {\n  return _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, Number(custom_eid)))\n    .sum()\n    .value();\n};\nexport const Chart = ({ tasks }: { tasks: ITask[] }) => {\n  const [data, setData] = useState<IChartItem[]>([]);\n  const {\n    state: {\n      biz_days,\n      custom_value_map,\n      custom_eid,\n      custom_attr_e,\n      custom_attr_r\n    }\n  } = useContext(RootContext);\n  useEffect(() => {\n    const days_len = biz_days.length;\n    if (days_len > 0 && tasks.length > 0 && custom_eid) {\n      const allTaskVal = getSumVal(\n        custom_value_map,\n        getTaskCreated(tasks, biz_days[0]),\n        custom_eid\n      );\n      const data = biz_days.map((day, idx) => {\n        const label = dayNameFromIdx(day, idx);\n        const estimate = allTaskVal - (allTaskVal * idx) / (days_len - 1);\n        if (\n          moment()\n            .local()\n            .endOf(\"days\")\n            .diff(moment(day)) > 0\n        ) {\n          const add =\n            idx === 0\n              ? 0\n              : getSumVal(\n                  custom_value_map,\n                  getTaskCreatedToday(tasks, day),\n                  custom_eid\n                );\n          const result =\n            getSumVal(\n              custom_value_map,\n              getTaskCreated(tasks, day),\n              custom_eid\n            ) -\n            add -\n            getSumVal(\n              custom_value_map,\n              getTaskFinished(tasks, day),\n              custom_eid\n            );\n          return { label, estimate, result, add };\n        } else {\n          return { label, estimate };\n        }\n      });\n      setData(data);\n    } else {\n      setData([]);\n    }\n  }, [tasks, biz_days, custom_eid, custom_value_map, setData]);\n  const labelFormatter: LegendValueFormatter = useCallback(\n    (name: string) => {\n      switch (name) {\n        case \"estimate\": {\n          return custom_attr_e.name || name;\n        }\n        case \"result\": {\n          return custom_attr_r.name || name;\n        }\n        default: {\n          return name;\n        }\n      }\n    },\n    [custom_attr_e.name, custom_attr_r.name]\n  );\n  const formatter: TooltipFormatter = useCallback(\n    (value, name) => [Number(value).toFixed(1), labelFormatter(name)],\n    [labelFormatter]\n  );\n  if (data.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card className=\"mb-2\">\n        <CardHeader>Burn down chart</CardHeader>\n        <ComposedChart data={data} width={800} height={400}>\n          <YAxis />\n          <XAxis dataKey=\"label\" />\n          <Tooltip formatter={formatter} />\n          <Legend formatter={labelFormatter} />\n          <Bar dataKey=\"result\" fill=\"#8884d8\" stackId=\"a\" />\n          <Bar dataKey=\"add\" fill=\"#82ca9d\" stackId=\"a\" />\n          <Line dataKey=\"estimate\" />\n        </ComposedChart>\n      </Card>\n    );\n  }\n};\n","import React, { useContext } from \"react\";\nimport { UserTasks } from \"./UserTasks\";\nimport { UnEstimatedTasks } from \"./UnEstimatedTasks\";\nimport { NotAssignedTasks } from \"./NotAssignedTasks\";\nimport { Chart } from \"./Chart\";\nimport { RootContext } from \"../Provider\";\n\nexport const OverView: React.FC = () => {\n  const {\n    state: { tasks }\n  } = useContext(RootContext);\n  return (\n    <>\n      <UserTasks />\n      <Chart tasks={tasks} />\n      <NotAssignedTasks />\n      <br />\n      <UnEstimatedTasks />\n    </>\n  );\n};\n","import React, { useContext, useMemo } from \"react\";\nimport { RootContext } from \"../Provider\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  Row,\n  Col\n} from \"reactstrap\";\nimport classNames from \"classnames\";\nimport { InputGroupSpinner } from \"./InputGroupSpinner\";\nimport {\n  getCustomVal,\n  getCustomValVersion,\n  isCustomValInvalid,\n  isCustomValValid,\n  TaskProgress\n} from \"./UserTasks\";\nimport { UserStory, Grade, convToTasksByUserStory } from \"./UserStory\";\nexport const PersonalTasks: React.FC = () => {\n  const {\n    state: {\n      custom_value_map,\n      biz_days,\n      user_tasks,\n      custom_attr_e,\n      custom_attr_r\n    }\n  } = useContext(RootContext);\n  const userStories = useMemo(() => convToTasksByUserStory(user_tasks), [\n    user_tasks\n  ]);\n  const [e, r] = useMemo(\n    () =>\n      user_tasks.reduce(\n        (result, item) => {\n          return [\n            result[0] + getCustomVal(custom_value_map, item, custom_attr_e.id),\n            result[1] + getCustomVal(custom_value_map, item, custom_attr_r.id)\n          ];\n        },\n        [0, 0]\n      ),\n    [custom_attr_e.id, custom_attr_r.id, custom_value_map, user_tasks]\n  );\n  const valid = useMemo(\n    () => isCustomValValid(e, r, userStories.every(item => item.is_closed)),\n    [e, r, userStories]\n  );\n  const invalid = useMemo(() => isCustomValInvalid(e, r), [e, r]);\n  const loading = useMemo(\n    () => user_tasks.some(item => !getCustomValVersion(custom_value_map, item)),\n    [custom_value_map, user_tasks]\n  );\n  if (!custom_attr_e.id || !custom_attr_r.id || biz_days.length <= 1) {\n    return null;\n  }\n\n  return (\n    <>\n      {userStories.map(item => (\n        <UserStory item={item} key={item.user_story} />\n      ))}\n      <Card>\n        <CardHeader className={classNames(\"alert-info\")}>Total</CardHeader>\n        <CardBody>\n          <Row>\n            <Col>\n              <InputGroup>\n                <InputGroupAddon addonType=\"prepend\">\n                  {custom_attr_e.name}\n                </InputGroupAddon>\n                {loading ? <InputGroupSpinner /> : <Input readOnly value={e} />}\n              </InputGroup>\n            </Col>\n            <Col>\n              <InputGroup>\n                <InputGroupAddon addonType=\"prepend\">\n                  {custom_attr_r.name}\n                </InputGroupAddon>\n                {loading ? (\n                  <InputGroupSpinner />\n                ) : (\n                  <Input readOnly value={r} invalid={invalid} valid={valid} />\n                )}\n              </InputGroup>\n            </Col>\n            <Col>\n              <Grade e={e} r={r} />\n            </Col>\n          </Row>\n        </CardBody>\n        <CardFooter>\n          <TaskProgress tasks={user_tasks} />\n        </CardFooter>\n      </Card>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Card, CardHeader } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\n\nimport { AvatarSquare } from \"./UserTasks\";\nexport const PersonalInfo: React.FC = () => {\n  const {\n    state: { user }\n  } = useContext(RootContext);\n  return (\n    <Card>\n      {user && (\n        <CardHeader>\n          <AvatarSquare src={user.photo} size=\"xlarge\" />\n          {user.username} 's task\n        </CardHeader>\n      )}\n    </Card>\n  );\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { Button, Alert, Navbar } from \"reactstrap\";\nimport { PersonalTasks } from \"./PersonalTasks\";\nimport { PersonalInfo } from \"./PersonalInfo\";\nimport { RootContext } from \"../Provider\";\nimport { Chart } from \"./Chart\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { Link } from \"react-router-dom\";\nimport { ActionTypes } from \"../actions\";\nimport { UpdateButton } from \"./UpdateButton\";\nimport useRouter from \"use-react-router\";\nimport { SignInForm } from \"./SignInForm\";\n\nexport const PersonalPage: React.FC = () => {\n  const {\n    state: { user, user_tasks, url },\n    dispatch\n  } = useContext(RootContext);\n  const {\n    match: {\n      params: { uid }\n    }\n  } = useRouter();\n  useEffect(() => {\n    if (uid && url) {\n      dispatch({ type: ActionTypes.FETCH_USER, payload: { uid } });\n    }\n    return () => {\n      dispatch({ type: ActionTypes.RESET_USER });\n    };\n  }, [dispatch, uid, url]);\n\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Button tag={Link} to=\"/\" className=\"mr-auto\">\n          <FontAwesomeIcon icon={faArrowCircleLeft} /> Go back\n        </Button>\n        <SignInForm />\n        <UpdateButton />\n      </Navbar>\n      {user ? (\n        <>\n          <PersonalInfo />\n          <br />\n          <PersonalTasks />\n          <br />\n          <Chart tasks={user_tasks} />\n        </>\n      ) : (\n        <Alert color=\"danger\">This user does not exist.</Alert>\n      )}\n    </>\n  );\n};\n","import React, { useContext, useMemo, useCallback } from \"react\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport ReactTooltip from \"react-tooltip\";\nimport CalendarHeatmap from \"react-calendar-heatmap\";\nimport { Alert } from \"reactstrap\";\nimport { RootContext } from \"../Provider\";\ninterface IItem {\n  date: string;\n  value: number;\n  pureValue: number;\n}\nexport const PomodoroHeatmap: React.FC = () => {\n  const {\n    state: { pomodoro_daily_totals }\n  } = useContext(RootContext);\n  const values = useMemo(\n    () =>\n      pomodoro_daily_totals.map(item => ({\n        date: item.dateKey,\n        value: item.value,\n        pureValue: item.pureValue\n      })),\n    [pomodoro_daily_totals]\n  );\n  const maxVal = (_.maxBy(values, \"value\") || { value: 1 }).value;\n  const classForValue = useCallback(\n    (item: IItem) =>\n      item\n        ? `color-github-${Math.ceil(((item.value || 0) * 4) / maxVal)}`\n        : \"color-empty\",\n    [maxVal]\n  );\n  const tooltipDataAttrs = useCallback(\n    (item: IItem) =>\n      item && item.date\n        ? {\n            \"data-tip\": `${item.value} Pomodoros on ${item.date}`\n          }\n        : null,\n    []\n  );\n  const startDate = useMemo(\n    () =>\n      moment()\n        .subtract(12, \"month\")\n        .toDate(),\n    []\n  );\n  if (pomodoro_daily_totals.length === 0) {\n    return <Alert color=\"warning\">No pomodoro history!</Alert>;\n  } else {\n    return (\n      <>\n        <CalendarHeatmap\n          startDate={startDate}\n          showWeekdayLabels={true}\n          values={values}\n          classForValue={classForValue}\n          tooltipDataAttrs={tooltipDataAttrs}\n        />\n        <ReactTooltip />\n      </>\n    );\n  }\n};\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport { LinearProgress } from \"@rmwc/linear-progress\";\nimport { ThemeProvider } from \"@rmwc/theme\";\nimport { Chip, ChipSet } from \"@rmwc/chip\";\nimport {\n  Card,\n  Collapse,\n  CardHeader,\n  CardBody,\n  Badge,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroupButtonDropdown,\n  Button,\n  Spinner\n} from \"reactstrap\";\nimport styles from \"./Pomodoro.module.css\";\nimport classNames from \"classnames\";\nimport { Tomato, TomatoState } from \"./Tomato\";\nimport { ToggleIcon } from \"./Controller\";\nimport tomatoIcon from \"../tomato.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { stopPropagation } from \"../util/handler\";\nimport {\n  faCoffee,\n  faPlay,\n  faPause,\n  faRedo,\n  faCookie,\n  faTimes,\n  faTasks\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  TimerState,\n  TimerMode,\n  TimerDurationMin,\n  timer,\n  TimerEventListener\n} from \"../util/timer\";\nimport { RootContext } from \"../Provider\";\nimport { PomodoroHeatmap } from \"./PomodoroHeatmap\";\nimport { ActionTypes } from \"../sideEffectors\";\nconst Favico = require(\"favico.js-slevomat\");\nconst favico = new Favico({ type: \"rectangle\" });\nconst secToMin = (seconds: number) => Math.ceil(seconds / 60);\ninterface TimerIconProps {\n  mode: TimerMode;\n}\nconst toValueAndUnit = (seconds: number): [number, string] =>\n  seconds >= 60 ? [secToMin(seconds), \"min\"] : [Math.ceil(seconds), \"sec\"];\nconst TimerIcon: React.FC<TimerIconProps> = ({ mode }) => {\n  switch (mode) {\n    case TimerMode.SHORT: {\n      return (\n        <FontAwesomeIcon\n          className={classNames(\"fa-fw\", styles.short_break_icon)}\n          icon={faCoffee}\n        />\n      );\n    }\n    case TimerMode.LONG: {\n      return (\n        <FontAwesomeIcon\n          className={classNames(\"fa-fw\", styles.long_break_icon)}\n          icon={faCookie}\n        />\n      );\n    }\n    default: {\n      return <Tomato state={TomatoState.FRESH} />;\n    }\n  }\n};\ninterface TimerItemProps {\n  mode: TimerMode;\n  onSelect: (mode: TimerMode) => void;\n}\nconst TimerItem: React.FC<TimerItemProps> = ({ mode, onSelect }) => {\n  const handleClick = useCallback(() => {\n    onSelect(mode);\n  }, [mode, onSelect]);\n  return (\n    <DropdownItem onClick={handleClick}>\n      <TimerIcon mode={mode} />\n      {mode}\n    </DropdownItem>\n  );\n};\nexport const Pomodoro: React.FC = () => {\n  const {\n    state: {\n      loaded,\n      pomodoro_date,\n      pomodoro_number,\n      pomodoro_used_number,\n      task_id,\n      task,\n      auth_token,\n      isNotifable\n    },\n    dispatch\n  } = useContext(RootContext);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenDropdown, setIsOpenDropdown] = useState(false);\n  const [remaining, setRemaining] = useState(TimerDurationMin[TimerMode.FOCUS]);\n  const [state, setState] = useState<TimerState>(TimerState.STOPPED);\n  const [mode, setMode] = useState<TimerMode>(TimerMode.FOCUS);\n  const [progress, setProgress] = useState(0);\n  const [unit, setUnit] = useState(\"min\");\n\n  const toggleDropdown = useCallback(() => {\n    setIsOpenDropdown(prev => !prev);\n  }, []);\n  const handleSelect = useCallback((mode: TimerMode) => {\n    timer.changeMode(mode);\n  }, []);\n  const handleClick = useCallback(() => {\n    switch (state) {\n      case TimerState.RUNNING: {\n        timer.pause();\n        break;\n      }\n      case TimerState.PAUSED: {\n        timer.resume();\n        break;\n      }\n      case TimerState.STOPPED: {\n        timer.start();\n      }\n    }\n  }, [state]);\n  const setRemainingAndUnit = useCallback((seconds: number) => {\n    const [val, unit] = toValueAndUnit(seconds);\n    setRemaining(val);\n    setUnit(unit);\n  }, []);\n  const handleState: TimerEventListener = useCallback(\n    status => {\n      setState(status.state);\n      setRemainingAndUnit(status.remaining);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleMode: TimerEventListener = useCallback(\n    status => {\n      setMode(status.mode);\n      setRemainingAndUnit(status.duration);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleTick: TimerEventListener = useCallback(\n    status => {\n      setRemainingAndUnit(status.remaining);\n    },\n    [setRemainingAndUnit]\n  );\n  const handleExpire: TimerEventListener = useCallback(\n    (status, completedAt?: Date) => {\n      let num = pomodoro_number;\n      handleState(status);\n      if (status.mode === TimerMode.FOCUS) {\n        dispatch({\n          type: ActionTypes.ADD_POMODORO,\n          meta: {\n            completedAt: completedAt || new Date(),\n            duration: status.duration,\n            pure: status.checkpointElapsed === 0\n          }\n        });\n        num++;\n        if (num % 4 === 0) {\n          timer.changeMode(TimerMode.LONG);\n        } else {\n          timer.changeMode(TimerMode.SHORT);\n        }\n      } else {\n        timer.changeMode(TimerMode.FOCUS);\n      }\n      if (isNotifable) {\n        let title: string = \"\";\n        let body: string;\n        let clickCount = 0;\n        let closeTimer: NodeJS.Timeout | null = null;\n        body = `${num} Pomodoros today!`;\n        switch (timer.mode) {\n          case TimerMode.FOCUS: {\n            title = \"Start Focusing.\";\n            break;\n          }\n          case TimerMode.SHORT: {\n            title = \"Take a Short Break.\";\n            body = `${body} Retry focusing if double click.`;\n            break;\n          }\n          case TimerMode.LONG: {\n            title = \"Take a Long Break.\";\n            body = `${body} Retry focusing if double click.`;\n            break;\n          }\n        }\n        const notify = new Notification(title, {\n          body,\n          icon: tomatoIcon\n        });\n        notify.onclick = () => {\n          if (timer.mode === TimerMode.FOCUS) {\n            timer.start();\n            notify.close();\n          } else {\n            if (clickCount === 0) {\n              timer.start();\n              closeTimer = setTimeout(() => {\n                clickCount = 0;\n                closeTimer = null;\n                notify.close();\n              }, 2000);\n              clickCount++;\n            } else {\n              if (closeTimer) {\n                clearTimeout(closeTimer);\n                closeTimer = null;\n              }\n              clickCount = 0;\n              timer.changeMode(TimerMode.FOCUS);\n              timer.start();\n              notify.close();\n            }\n          }\n        };\n      }\n    },\n    [dispatch, handleState, isNotifable, pomodoro_number]\n  );\n  const handleRetry = useCallback(() => {\n    timer.changeMode(TimerMode.FOCUS);\n    timer.start();\n  }, []);\n  const handleRemove = useCallback(() => {\n    dispatch({ type: ActionTypes.RESET_TASK_ID });\n  }, [dispatch]);\n  useEffect(() => {\n    timer.on(\"tick\", handleTick);\n    timer.on(\"start\", handleState);\n    timer.on(\"stop\", handleState);\n    timer.on(\"pause\", handleState);\n    timer.on(\"resume\", handleState);\n    timer.on(\"expire\", handleExpire);\n    timer.on(\"change_mode\", handleMode);\n    return () => {\n      timer.removeAllListeners();\n    };\n  }, [handleExpire, handleMode, handleState, handleTick]);\n  useEffect(() => {\n    setMode(timer.mode);\n    setState(timer.state);\n    setRemainingAndUnit(timer.remaining);\n    if (timer.restoreExpired) {\n      _.defer(() => {\n        handleExpire(timer.status);\n      });\n      timer.restoreExpired = false;\n    }\n  }, [handleExpire, setRemainingAndUnit]);\n  useEffect(() => {\n    const today = moment().format(\"YYYY-MM-DD\");\n    if (loaded && pomodoro_date !== today) {\n      dispatch({\n        type: ActionTypes.RESET_POMODORO,\n        payload: { pomodoro_date: today }\n      });\n      timer.changeMode(TimerMode.FOCUS);\n    }\n  }, [dispatch, loaded, pomodoro_date]);\n  useEffect(() => {\n    if (Notification.permission !== \"denied\") {\n      Notification.requestPermission(permission => {\n        if (permission === \"granted\") {\n          dispatch({ type: ActionTypes.ALLOW_NOTIFICATION });\n        }\n      });\n    }\n  }, [dispatch]);\n  useEffect(() => {\n    let bgColor = mode === TimerMode.FOCUS ? \"#f00\" : \"#0f0\";\n    let textColor = mode === TimerMode.FOCUS ? \"#fff\" : \"#000\";\n    let animation = \"fade\";\n    if (unit === \"sec\") {\n      [bgColor, textColor] = [textColor, bgColor];\n      animation = \"none\";\n    }\n    switch (state) {\n      case TimerState.RUNNING: {\n        favico.badge(remaining, {\n          bgColor,\n          textColor,\n          animation\n        });\n        break;\n      }\n      case TimerState.PAUSED: {\n        favico.badge(\"-\", { bgColor, textColor, animation });\n        break;\n      }\n      default: {\n        favico.reset();\n      }\n    }\n  }, [mode, remaining, state, unit]);\n  useEffect(() => {\n    const duration = TimerDurationMin[mode] * 60;\n    const val = unit === \"min\" ? remaining * 60 : remaining;\n    setProgress(0.01 + ((duration - val) * 99) / duration / 100);\n  }, [mode, remaining, unit]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.SET_POMODORO_STATE,\n      payload: { pomodoro_state: state }\n    });\n  }, [dispatch, state]);\n  useEffect(() => {\n    dispatch({\n      type: ActionTypes.SET_POMODORO_MODE,\n      payload: { pomodoro_mode: mode }\n    });\n  }, [dispatch, mode]);\n  const handleToggle = useCallback(() => {\n    setIsOpen(prev => !prev);\n  }, []);\n  const buffer = state === TimerState.RUNNING ? progress : 1;\n  if (!auth_token) {\n    return null;\n  }\n  const taskTitle = task\n    ? `#${task.ref} ${task.user_story_extra_info.subject} / ${task.subject}`\n    : \"\";\n  const taskSubject = task\n    ? _.truncate(`#${task.ref} ${task.subject}`, { length: 10 })\n    : \"\";\n  return (\n    <Card className={classNames(styles.top)}>\n      <ThemeProvider\n        options={{ primary: mode === TimerMode.FOCUS ? \"red\" : \"green\" }}\n      >\n        <LinearProgress\n          buffer={buffer}\n          progress={progress}\n          closed={state === TimerState.STOPPED}\n        />\n      </ThemeProvider>\n      <CardHeader onClick={handleToggle}>\n        <div className=\"d-flex\">\n          <ToggleIcon isOpen={isOpen} />\n          <InputGroup className={classNames(styles.button_group, \"ml-1\")}>\n            <InputGroupButtonDropdown\n              onClick={stopPropagation}\n              isOpen={isOpenDropdown}\n              toggle={toggleDropdown}\n              addonType=\"prepend\"\n            >\n              <DropdownToggle color=\"light\" size=\"sm\" caret>\n                <TimerIcon mode={mode} />\n              </DropdownToggle>\n              <DropdownMenu>\n                <TimerItem mode={TimerMode.FOCUS} onSelect={handleSelect} />\n                <TimerItem mode={TimerMode.SHORT} onSelect={handleSelect} />\n                <TimerItem mode={TimerMode.LONG} onSelect={handleSelect} />\n              </DropdownMenu>\n            </InputGroupButtonDropdown>\n            <InputGroupAddon addonType=\"prepend\" onClick={stopPropagation}>\n              <InputGroupText\n                className={classNames(styles.fix_w, {\n                  \"font-weight-bold\": state === TimerState.RUNNING\n                })}\n              >\n                {remaining}\n              </InputGroupText>\n            </InputGroupAddon>\n            <InputGroupAddon onClick={stopPropagation} addonType=\"prepend\">\n              {unit}\n            </InputGroupAddon>\n            <InputGroupAddon addonType=\"append\" onClick={stopPropagation}>\n              {state === TimerState.RUNNING ? (\n                <Button color=\"danger\" onClick={handleClick}>\n                  <FontAwesomeIcon icon={faPause} />\n                </Button>\n              ) : (\n                <Button color=\"primary\" onClick={handleClick}>\n                  <FontAwesomeIcon icon={faPlay} />\n                </Button>\n              )}\n            </InputGroupAddon>\n\n            {mode !== TimerMode.FOCUS && (\n              <InputGroupAddon addonType=\"append\" onClick={stopPropagation}>\n                <Button\n                  color=\"light\"\n                  onClick={handleRetry}\n                  title=\"Retry focusing\"\n                >\n                  <FontAwesomeIcon icon={faRedo} className=\"text-muted\" />\n                  <Tomato state={TomatoState.STALE} />\n                </Button>\n              </InputGroupAddon>\n            )}\n\n            {task_id && (\n              <ChipSet\n                onClick={stopPropagation}\n                className={classNames(styles.chip_set)}\n              >\n                <Chip\n                  icon={<FontAwesomeIcon icon={faTasks} />}\n                  onRemove={handleRemove}\n                  title={taskTitle}\n                  trailingIcon={<FontAwesomeIcon icon={faTimes} />}\n                >\n                  {taskSubject ? taskSubject : <Spinner type=\"grow\" />}\n                </Chip>\n              </ChipSet>\n            )}\n          </InputGroup>\n          {pomodoro_number > 0 && (\n            <Badge color=\"danger\" className=\"mr-2\">\n              <Tomato /> <FontAwesomeIcon icon={faTimes} /> {pomodoro_number}\n            </Badge>\n          )}\n          {_.times(pomodoro_number).map(i => (\n            <Tomato\n              key={i}\n              state={\n                i < pomodoro_used_number ? TomatoState.STALE : TomatoState.FRESH\n              }\n              br={i % 2 !== pomodoro_number % 2 && i < pomodoro_number - 1}\n            />\n          ))}\n        </div>\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <CardBody>\n          <PomodoroHeatmap />\n        </CardBody>\n      </Collapse>\n    </Card>\n  );\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { ToastContainer } from \"react-toastify\";\nimport { Controller } from \"./components/Controller\";\nimport { Provider } from \"./Provider\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { OverView } from \"./components/OverView\";\nimport { PersonalPage } from \"./components/PersonalPage\";\nimport { Pomodoro } from \"./components/Pomodoro\";\nexport const App = () => (\n  <div className=\"container\">\n    <ToastContainer className=\"toast-top\" />\n    <HashRouter>\n      <Provider>\n        <Pomodoro />\n        <Controller />\n        <Route exact path=\"/\" component={OverView} />\n        <Route exact path=\"/:uid\" component={PersonalPage} />\n      </Provider>\n    </HashRouter>\n  </div>\n);\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap-css-only/css/bootstrap.css\";\nimport \"@material/switch/dist/mdc.switch.css\";\nimport \"@material/form-field/dist/mdc.form-field.css\";\nimport \"@rmwc/avatar/avatar.css\";\nimport \"@material/chips/dist/mdc.chips.css\";\nimport \"@material/linear-progress/dist/mdc.linear-progress.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"react-calendar-heatmap/dist/styles.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"top\":\"Pomodoro_top__2KPBC\",\"button_group\":\"Pomodoro_button_group__25QhE\",\"chip_set\":\"Pomodoro_chip_set__UcFix\",\"fix_w\":\"Pomodoro_fix_w__26hsb\",\"short_break_icon\":\"Pomodoro_short_break_icon__3e20m\",\"long_break_icon\":\"Pomodoro_long_break_icon__1CgqS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"UserStory_header__3lGFX\",\"toggle_input\":\"UserStory_toggle_input__ARa5d\",\"display_medal\":\"UserStory_display_medal__3t53K\",\"medal\":\"UserStory_medal__2Zi1f\",\"is_closed\":\"UserStory_is_closed__2ABQp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fresh\":\"Tomato_fresh__2s5Ye\",\"stale\":\"Tomato_stale__3bjHh\",\"bl\":\"Tomato_bl__2-LRw\",\"br\":\"Tomato_br__2_ZQQ\"};"],"sourceRoot":""}