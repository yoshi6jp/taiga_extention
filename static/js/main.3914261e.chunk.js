(this["webpackJsonptaiga-extention"]=this["webpackJsonptaiga-extention"]||[]).push([[0],{104:function(e,t,a){e.exports={fresh:"Tomato_fresh__2s5Ye",stale:"Tomato_stale__3bjHh",bl:"Tomato_bl__2-LRw",br:"Tomato_br__2_ZQQ"}},105:function(e,t,a){e.exports={header:"UserStory_header__3lGFX",display_medal:"UserStory_display_medal__3t53K",medal:"UserStory_medal__2Zi1f",is_closed:"UserStory_is_closed__2ABQp"}},145:function(e,t,a){e.exports={btn:"TaskTimerButton_btn__3yv2h"}},184:function(e,t,a){e.exports={gold:"UserTasks_gold__3HGjY",silver:"UserTasks_silver__1pI-2",bronze:"UserTasks_bronze__3Y2bu",custom_input_td:"UserTasks_custom_input_td__2hLT8"}},188:function(e,t,a){e.exports={total:"TaskTotalHours_total__sFAJH",is_over:"TaskTotalHours_is_over__3dHJn"}},273:function(e,t,a){e.exports={header:"Controller_header__33lvE"}},275:function(e,t,a){e.exports={input_group:"ToggleNumberInput_input_group__1wkB8"}},284:function(e,t,a){e.exports=a.p+"static/media/tomato.c392a271.png"},317:function(e,t,a){e.exports=a(579)},322:function(e,t,a){},351:function(e,t,a){},579:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),o=a(33),s=a.n(o),l=(a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(23)),i=a(38),u=a(24),m=a(622),_=a(44),d=a(8),E={setUrl:Object(u.b)("/setting/setUrl")},p=Object(u.c)({url:"",pid:"",mid:"",custom_eid:"",custom_rid:""},(function(e){return e.addCase(E.setUrl,(function(e,t){var a=t.payload;return Object(d.a)({},e,{url:a})}))})),O=function(e){return e.setting.url},f=function(){return Object(l.c)(O)},b={fetchList:Object(u.b)("/project/fetchList"),setList:Object(u.b)("/project/setList")},T=Object(u.c)({list:[],loading:!1,current:null},(function(e){return e.addCase(b.fetchList,(function(e){return Object(d.a)({},e,{loading:!0})})).addCase(b.setList,(function(e,t){var a=t.payload;return Object(d.a)({},e,{list:a,loading:!1})}))})),S=function(e){return e.project.list},v=function(){return Object(l.c)(S)},y={fetchList:Object(u.b)("/userStory/fetchList"),setList:Object(u.b)("/userStory/setList"),addTag:Object(u.b)("/userStory/addTag"),removeTag:Object(u.b)("/userStory/removeTag")},k=Object(u.c)({list:[],loading:!1},(function(e){return e.addCase(y.fetchList,(function(e){return Object(d.a)({},e,{loading:!0})})).addCase(y.setList,(function(e,t){var a=t.payload;return Object(d.a)({},e,{loading:!1,list:a})}))})),h=function(e){return e.userStory.list},j=function(){return Object(l.c)(h)},g={setMid:Object(u.b)("/milestone/setMid")},C=Object(u.c)({mid:""},(function(e){return e.addCase(g.setMid,(function(e,t){var a=t.payload;return Object(d.a)({},e,{mid:String(a)})}))})),A=function(e){return e.milestone.mid},D=function(){return Object(l.c)(A)},R={epicDone:Object(u.b)("/common/epicDone"),updateData:Object(u.b)("/common/updateData")},M=Object(u.c)({updatedTime:0},(function(e){return e.addCase(R.updateData,(function(e){return Object(d.a)({},e,{updatedTime:Date.now()})}))})),I=function(e){return e.common.updatedTime},N=function(){return Object(l.c)(I)},x=Object(_.combineReducers)({setting:p,project:T,userStory:k,milestone:C,common:M}),U=a(623),P=a(289),L=a(590),w=a(128),K=a(591),F=a(265),H={common:R,project:b,setting:E,userStory:y},B=a(263),z=a(264),Y=function(e,t,a){return Object(B.fromFetch)(function(e,t){return"".concat(e.replace(/[\xa5/]$/,""),"/api/v1/").concat(t)}(e,t),Object(d.a)({},a,{headers:Object(d.a)({"x-disable-pagination":"true"},null===a||void 0===a?void 0:a.headers)})).pipe(Object(z.a)((function(e){return e.json()})))},V=[function(e,t){return e.pipe(Object(P.a)("/project/fetchList"),Object(L.a)((function(){var e=t.value.setting.url;return Y(e,"projects")})),Object(w.a)((function(e){return H.project.setList(e)})),Object(K.a)((function(e){return console.log("err",e),Object(F.a)(R.epicDone())})))}],G=[function(e,t){return e.pipe(Object(P.a)("/userStory/fetchList"),Object(L.a)((function(e){var a=t.value.setting.url;if("/userStory/fetchList"===e.type){var n=e.payload.milestone;return Y(a,"userstories?milestone=".concat(n))}return[]})),Object(w.a)((function(e){return H.userStory.setList(e)})),Object(K.a)((function(e){return console.log("err",e),Object(F.a)(R.epicDone())})))}],J=U.a.apply(void 0,Object(i.a)(V).concat(Object(i.a)(G))),Z=Object(m.a)(),W=Object(u.a)({reducer:x,middleware:[].concat(Object(i.a)(Object(u.d)()),[Z])});Z.run(J),function(e){e.URL="taiga_url",e.TIMER_ID="taiga_timer_id",e.PID="taiga_pid",e.MID="taiga_mid",e.TASK_ID="taiga_task_id",e.CUSTOM_EID="taiga_custom_eid",e.CUSTOM_RID="taiga_custom_rid",e.BIZ_DAYS="taiga_biz_days",e.REJECT_TASK_STATUS_IDS="reject_task_status_ids",e.USERNAME="taiga_username",e.PASSWORD="taiga_password",e.POMODORO_DATE="taiga_pomodoro_date",e.POMODORO_NUMBER="taiga_pomodoro_number",e.POMODORO_USED_NUMBER="taiga_pomodoro_used_number",e.TIMELIMIT_CLOSE_TASK="taiga_timelimit_close_task"}(n||(n={}));var q,Q=function(e){return localStorage.getItem(e)||""},X=function(e){return Q(e)},$=(a(351),a(69)),ee=a(13),te=a(6),ae=a.n(te),ne=a(3),re=a.n(ne),ce=a(14),oe=a.n(ce),se=a(18),le=a.n(se);!function(e){e.SET_TOKEN="SET_TOKEN",e.SET_TIMER_ID="SET_TIMER_ID",e.ADD_FB_TIMER="ADD_FB_TIMER",e.DEL_FB_TIMER="DEL_FB_TIMER",e.SET_URL="SET_URL",e.SIGN_IN="SIGN_IN",e.SET_AUTH_TOKEN="SET_AUTH_TOKEN",e.SET_AUTH_ERROR="SET_AUTH_ERROR",e.SIGN_OUT="SIGN_OUT",e.SET_PID="SET_PID",e.FETCH_PROJECT="FETCH_PROJECT",e.SET_PROJECT="SET_PROJECT",e.FETCH_MILESTONES="FETCH_MILESTONES",e.SET_MID="SET_MID",e.SET_MILESTONES="SET_MILESTONES",e.SET_MILESTONE="SET_MILESTONE",e.SET_CUSTOM_EID="SET_CUSTOM_EID",e.SET_CUSTOM_RID="SET_CUSTOM_RID",e.FETCH_CUSTOM_ATTRS="FETCH_CUSTOM_ATTRS",e.SET_CUSTOM_ATTRS="SET_CUSTOM_ATTRS",e.SET_CUSTOM_ATTR_E="SET_CUSTOM_ATTR_E",e.SET_CUSTOM_ATTR_R="SET_CUSTOM_ATTR_R",e.SET_BIZ_DAYS="SET_BIZ_DAYS",e.ADD_BIZ_DAY="ADD_BIZ_DAY",e.REMOVE_BIZ_DAY="REMOVE_BIZ_DAY",e.FETCH_TASKS="FETCH_TASKS",e.SET_TASKS="SET_TASKS",e.SET_TASK_ID="SET_TASK_ID",e.RESET_TASK_ID="RESET_TASK_ID",e.SET_TASK="SET_TASK",e.SET_USER_TASKS="SET_USER_TASKS",e.PATCH_TASK="PATCH_TASK",e.FETCH_TASK_STATUSES="FETCH_TASK_STATUSES",e.SET_TASK_STATUSES="SET_TASK_STATUSES",e.SET_ACTIVE_TASK_STATUSES="SET_ACTIVE_TASK_STATUSES",e.FETCH_CUSTOM_VALUE_MAP="FETCH_CUSTOM_VALUE_MAP",e.SET_CUSTOM_VALUE_MAP="SET_CUSTOM_VALUE_MAP",e.PATCH_CUSTOM_VALUE="PATCH_CUSTOM_VALUE",e.FETCH_USER="FETCH_USER",e.SET_USER="SET_USER",e.RESET_USER="RESET_USER",e.SET_REJECT_TASK_STATUS_IDS="SET_REJECT_TASK_STATUS_IDS",e.ADD_REJECT_TASK_STATUS_ID="ADD_REJECT_TASK_STATUS_ID",e.REMOVE_REJECT_TASK_STATUS_ID="REMOVE_REJECT_TASK_STATUS_ID",e.OPEN_CONTROLLER="OPEN_CONTROLLER",e.CLOSE_CONTROLLER="CLOSE_CONTROLLER",e.UPDATE_DATA="UPDATE_DATA",e.ADD_POMODORO="ADD_POMODORO",e.USE_POMODORO="USE_POMODORO",e.RESET_POMODORO="RESET_POMODORO",e.RESTORE_POMODORO="RESTORE_POMODORO",e.CALC_POMODORO_TOTAL="CALC_POMODORO_TOTAL",e.LOAD_POMODORO_TOTALS="LOAD_POMODORO_TOTALS",e.SET_POMODORO_TOTALS="SET_POMODORO_TOTALS",e.LOADED="LOADED",e.SET_POMODORO_STATE="SET_POMODORO_STATE",e.SET_POMODORO_MODE="SET_POMODORO_MODE",e.SET_TIMELIMIT_CLOSE_TASK="SET_TIMELIMIT_CLOSE_TASK",e.SET_IN_PROGRESS_TASK_STATUS_ID="SET_IN_PROGRESS_TASK_STATUS_ID",e.SET_POMODORO_LIVE_COUNT="SET_POMODORO_LIVE_COUNT"}(q||(q={}));var ie,ue,me,_e=a(20),de=a(131),Ee=a(266),pe=a(141),Oe=a(66),fe=a(190),be=a(142),Te=a(132);!function(e){e.STOPPED="stopped",e.RUNNING="running",e.PAUSED="paused"}(ue||(ue={})),function(e){e.FOCUS="Focusing",e.SHORT="Short break",e.LONG="Long break"}(me||(me={}));var Se,ve=(ie={},Object(_e.a)(ie,me.FOCUS,25),Object(_e.a)(ie,me.SHORT,5),Object(_e.a)(ie,me.LONG,15),ie);!function(e){e.STATE="pomodoro_state",e.MODE="pomodoro_mode",e.CHECKPOINT_START_AT="pomodoro_checkpoint_start_at",e.CHECKPOINT_ELAPSED="pomodoro_checkpoint_elapsed"}(Se||(Se={}));var ye,ke,he=new(function(e){function t(e){var a;return Object(de.a)(this,t),(a=Object(pe.a)(this,Object(Oe.a)(t).call(this))).state=ue.STOPPED,a.mode=me.FOCUS,a.duration=60*ve[me.FOCUS],a.tick=60,a.checkpointStartAt=NaN,a.checkpointElapsed=0,a.expireTimeout=null,a.tickInterval=null,a.tickOffsetTimeout=null,a.restoreExpired=!1,a.estimateCompletedAt=new Date,a.tick=e,a.restoreStorage(),a}return Object(be.a)(t,e),Object(Ee.a)(t,[{key:"on",value:function(e,a){return Object(fe.a)(Object(Oe.a)(t.prototype),"on",this).call(this,e,a)}},{key:"once",value:function(e,a){return Object(fe.a)(Object(Oe.a)(t.prototype),"once",this).call(this,e,a)}},{key:"start",value:function(){this.isStopped&&(this.setExpireTimeout(this.duration),this.setTickInterval(this.tick),this.state=ue.RUNNING,this.checkpointStartAt=Date.now(),this.checkpointElapsed=0,this.emit("start",this.status),this.saveStorage())}},{key:"stop",value:function(){this.isStopped||(this.clearExpireTimeout(),this.clearTickInterval(),this.checkpointStartAt=NaN,this.checkpointElapsed=0,this.state=ue.STOPPED,this.emit("stop",this.status),this.saveStorage())}},{key:"pause",value:function(){if(this.isRunning){this.clearExpireTimeout(),this.clearTickInterval();var e=(Date.now()-this.checkpointStartAt)/1e3;this.checkpointElapsed+=e,this.state=ue.PAUSED,this.emit("pause",this.status),this.saveStorage()}}},{key:"resume",value:function(){this.isPaused&&(this.setExpireTimeout(this.remaining),this.setTickInterval(this.tick),this.state=ue.RUNNING,this.checkpointStartAt=Date.now(),this.emit("resume",this.status),this.saveStorage())}},{key:"restart",value:function(){this.stop(),this.start()}},{key:"changeMode",value:function(e,t){var a=this;this.stop(),this.mode=e,this.duration=60*ve[e],this.emit("change_mode",this.status),this.saveStorage(),t&&ae.a.defer((function(){a.start()}))}},{key:"setExpireTimeout",value:function(e){var t=this;this.expireTimeout=setTimeout((function(){t.emit("expire",t.status),t.stop()}),1e3*e)}},{key:"clearExpireTimeout",value:function(){this.expireTimeout&&clearTimeout(this.expireTimeout),this.expireTimeout=null}},{key:"setTickInterval",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r=this.status.remaining;if(r<=n)this.setSecTickInterval();else{var c=r%e;c>1&&!a?this.tickOffsetTimeout=setTimeout((function(){t.emit("tick",t.status),t.setTickInterval(e,!0)}),1e3*c):this.tickInterval=setInterval((function(){var e=t.status;t.emit("tick",e),e.remaining<n&&(t.clearTickInterval(),t.setSecTickInterval())}),1e3*e)}}},{key:"setSecTickInterval",value:function(){var e=this;this.tickInterval=setInterval((function(){e.emit("tick",e.status)}),1e3)}},{key:"clearTickInterval",value:function(){this.tickInterval&&clearInterval(this.tickInterval),this.tickInterval=null,this.tickOffsetTimeout&&clearTimeout(this.tickOffsetTimeout),this.tickOffsetTimeout=null}},{key:"saveStorage",value:function(){localStorage.setItem(Se.STATE,this.state),localStorage.setItem(Se.MODE,this.mode),localStorage.setItem(Se.CHECKPOINT_START_AT,Number.isNaN(this.checkpointStartAt)?"":String(this.checkpointStartAt)),localStorage.setItem(Se.CHECKPOINT_ELAPSED,String(this.checkpointElapsed))}},{key:"restoreStorage",value:function(){var e,t=localStorage.getItem(Se.STATE),a=localStorage.getItem(Se.MODE),n=localStorage.getItem(Se.CHECKPOINT_START_AT),r=localStorage.getItem(Se.CHECKPOINT_ELAPSED);if(e=t,ae.a.includes(ae.a.values(ue),e)&&function(e){return ae.a.includes(ae.a.values(me),e)}(a)){var c=t,o=a,s=60*ve[o];switch(c){case ue.STOPPED:this.changeMode(o);break;case ue.PAUSED:var l=Number(r);l<1e3*s&&(this.state=c,this.mode=o,this.duration=s,this.checkpointElapsed=l);break;case ue.RUNNING:var i=Number(n),u=Number(r);if(i>0)this.mode=o,this.duration=s,Date.now()-i+1e3*u<1e3*s?(this.state=ue.RUNNING,this.checkpointStartAt=i,this.checkpointElapsed=u,this.setExpireTimeout(this.remaining),this.setTickInterval(this.tick)):(this.stop(),this.estimateCompletedAt=new Date(i+1e3*(s-u)),this.restoreExpired=!0)}}}},{key:"isStopped",get:function(){return this.state===ue.STOPPED}},{key:"isRunning",get:function(){return this.state===ue.RUNNING}},{key:"isPaused",get:function(){return this.state===ue.PAUSED}},{key:"remaining",get:function(){return Math.max(this.duration-this.elapsed,0)}},{key:"elapsed",get:function(){var e=0;return this.checkpointStartAt&&this.isRunning&&(e=(Date.now()-this.checkpointStartAt)/1e3),this.checkpointElapsed+e}},{key:"status",get:function(){return{state:this.state,duration:this.duration,elapsed:this.elapsed,remaining:this.remaining,checkpointElapsed:this.checkpointElapsed,checkpointStartAt:this.checkpointStartAt,mode:this.mode}}}]),t}(Te.EventEmitter))(60);!function(e){e.URL="taiga_url",e.TIMER_ID="taiga_timer_id",e.PID="taiga_pid",e.MID="taiga_mid",e.TASK_ID="taiga_task_id",e.CUSTOM_EID="taiga_custom_eid",e.CUSTOM_RID="taiga_custom_rid",e.BIZ_DAYS="taiga_biz_days",e.REJECT_TASK_STATUS_IDS="reject_task_status_ids",e.USERNAME="taiga_username",e.PASSWORD="taiga_password",e.POMODORO_DATE="taiga_pomodoro_date",e.POMODORO_NUMBER="taiga_pomodoro_number",e.POMODORO_USED_NUMBER="taiga_pomodoro_used_number",e.TIMELIMIT_CLOSE_TASK="taiga_timelimit_close_task"}(ke||(ke={}));var je=function(e){return localStorage.getItem(e)||""},ge=function(e){return je(e)},Ce=function(e,t){return t?je("".concat(t,"/").concat(e)):""},Ae=function(e,t){localStorage.setItem(e,t)},De=function(e,t,a){return t?Ae("".concat(t,"/").concat(e),a):null},Re={token:null,timer_id:null,url:"",auth_token:"",auth_error:!1,username:"",password:"",user:null,pid:"",project:{},mid:"",custom_eid:"",custom_rid:"",custom_attrs:[],custom_attr_e:{},custom_attr_r:{},biz_days:[],milestones:[],milestone:{},tasks:[],task_id:"",task:null,user_tasks:[],task_statuses:[],active_task_statuses:[],custom_value_map:new WeakMap,reject_task_status_ids:[],updated_time:0,isOpen:!1,pomodoro_date:"",pomodoro_number:0,pomodoro_used_number:0,loaded:!1,pomodoro_daily_totals:[],pomodoro_state:ue.STOPPED,pomodoro_mode:me.FOCUS,timelimit_close_task:"",in_progress_task_status_id:"",pomodoro_live_counts:(ye={},Object(_e.a)(ye,me.FOCUS,0),Object(_e.a)(ye,me.SHORT,0),Object(_e.a)(ye,me.LONG,0),ye)},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.SET_TOKEN:var a=t.payload.token;return Object(d.a)({},e,{token:a});case q.SET_TIMER_ID:var n=t.payload.timer_id;return Object(d.a)({},e,{timer_id:n});case q.SET_URL:var r=t.payload.url;return Object(d.a)({},e,{url:r});case q.SET_PID:var c=t.payload.pid;return Object(d.a)({},e,{pid:c,project:{},mid:"",biz_days:[],custom_attrs:[],milestones:[],custom_value_map:new WeakMap});case q.SET_PROJECT:var o=t.payload.project;return Object(d.a)({},e,{project:o});case q.SET_MID:var s=t.payload.mid;return Object(d.a)({},e,{mid:s,milestone:{},tasks:[]});case q.SET_MILESTONES:var l=t.payload.milestones;return Object(d.a)({},e,{milestones:l});case q.SET_MILESTONE:var u=t.payload.milestone;return Object(d.a)({},e,{milestone:u});case q.SET_CUSTOM_EID:var m=t.payload.custom_eid;return Object(d.a)({},e,{custom_eid:m});case q.SET_CUSTOM_ATTRS:var _=t.payload.custom_attrs;return Object(d.a)({},e,{custom_attrs:_});case q.SET_CUSTOM_ATTR_E:var E=t.payload.custom_attr_e;return Object(d.a)({},e,{custom_attr_e:E});case q.SET_CUSTOM_ATTR_R:var p=t.payload.custom_attr_r;return Object(d.a)({},e,{custom_attr_r:p});case q.SET_CUSTOM_RID:var O=t.payload.custom_rid;return Object(d.a)({},e,{custom_rid:O});case q.SET_BIZ_DAYS:var f=t.payload.biz_days;return Object(d.a)({},e,{biz_days:f});case q.ADD_BIZ_DAY:var b=t.payload.biz_day,T=ae.a.chain([].concat(Object(i.a)(e.biz_days),[b])).uniq().sort().value();return Object(d.a)({},e,{biz_days:T});case q.REMOVE_BIZ_DAY:var S=t.payload.biz_day,v=ae.a.reject(Object(i.a)(e.biz_days),(function(e){return e===S}));return Object(d.a)({},e,{biz_days:v});case q.SET_TASKS:var y=t.payload.tasks;return Object(d.a)({},e,{tasks:y});case q.SET_TASK_ID:var k=t.payload.task_id;return Object(d.a)({},e,{task_id:k,task:null});case q.RESET_TASK_ID:return Object(d.a)({},e,{task_id:"",task:null});case q.SET_TASK:var h=t.payload.task;return Object(d.a)({},e,{task:h});case q.SET_USER_TASKS:var j=t.payload.user_tasks;return Object(d.a)({},e,{user_tasks:j});case q.SET_TASK_STATUSES:var g=t.payload.task_statuses;return Object(d.a)({},e,{task_statuses:g});case q.SET_ACTIVE_TASK_STATUSES:var C=t.payload.active_task_statuses;return Object(d.a)({},e,{active_task_statuses:C});case q.SET_CUSTOM_VALUE_MAP:var A=t.payload.custom_value_map;return Object(d.a)({},e,{custom_value_map:A});case q.SET_USER:var D=t.payload.user;return Object(d.a)({},e,{user:D});case q.RESET_USER:return Object(d.a)({},e,{user:null,user_tasks:[]});case q.SET_REJECT_TASK_STATUS_IDS:var R=t.payload.reject_task_status_ids;return Object(d.a)({},e,{reject_task_status_ids:R});case q.ADD_REJECT_TASK_STATUS_ID:var M=t.payload.reject_task_status_id,I=ae.a.chain([].concat(Object(i.a)(e.reject_task_status_ids),[M])).compact().uniq().value();return Object(d.a)({},e,{reject_task_status_ids:I});case q.REMOVE_REJECT_TASK_STATUS_ID:var N=t.payload.reject_task_status_id,x=ae.a.reject(Object(i.a)(e.reject_task_status_ids),(function(e){return e===N}));return Object(d.a)({},e,{reject_task_status_ids:x});case q.OPEN_CONTROLLER:return Object(d.a)({},e,{isOpen:!0});case q.CLOSE_CONTROLLER:return Object(d.a)({},e,{isOpen:!1});case q.UPDATE_DATA:return Object(d.a)({},e,{updated_time:Date.now()});case q.SIGN_IN:var U=t.payload,P=U.username,L=U.password;return Object(d.a)({},e,{username:P,password:L,auth_error:!1});case q.SET_AUTH_TOKEN:var w=t.payload.auth_token;return Object(d.a)({},e,{auth_token:w});case q.SET_AUTH_ERROR:return Object(d.a)({},e,{auth_error:!0});case q.SIGN_OUT:return Object(d.a)({},e,{auth_token:"",username:"",password:""});case q.ADD_POMODORO:var K=e.pomodoro_number+1;return Object(d.a)({},e,{pomodoro_number:K});case q.USE_POMODORO:var F=t.payload.used_number,H=Math.max(0,e.pomodoro_used_number+F);return Object(d.a)({},e,{pomodoro_used_number:H});case q.RESET_POMODORO:var B=t.payload.pomodoro_date;return Object(d.a)({},e,{pomodoro_number:0,pomodoro_used_number:0,pomodoro_date:B});case q.RESTORE_POMODORO:var z=t.payload,Y=z.pomodoro_date,V=z.pomodoro_number,G=z.pomodoro_used_number;return Object(d.a)({},e,{pomodoro_date:Y,pomodoro_number:V,pomodoro_used_number:G});case q.SET_POMODORO_TOTALS:var J=t.payload.pomodoro_daily_totals;return Object(d.a)({},e,{pomodoro_daily_totals:J});case q.LOADED:return Object(d.a)({},e,{loaded:!0});case q.SET_POMODORO_STATE:var Z=t.payload.pomodoro_state;return Object(d.a)({},e,{pomodoro_state:Z});case q.SET_POMODORO_MODE:var W=t.payload.pomodoro_mode;return Object(d.a)({},e,{pomodoro_mode:W});case q.SET_TIMELIMIT_CLOSE_TASK:var Q=t.payload.timelimit_close_task;return Object(d.a)({},e,{timelimit_close_task:Q});case q.SET_IN_PROGRESS_TASK_STATUS_ID:var X=t.payload.task_status_id;return Object(d.a)({},e,{in_progress_task_status_id:X});case q.SET_POMODORO_LIVE_COUNT:var $=t.payload,ee=$.mode,te=$.value;return Object(d.a)({},e,{pomodoro_live_counts:Object(d.a)({},e.pomodoro_live_counts,Object(_e.a)({},ee,te))});default:return e}},Ie=function(e,t,a,n){return function(r){t(r),a(r,n,e)}},Ne=a(12),xe=a(11),Ue=function(e){var t=e.icon,a=e.message;return c.a.createElement("div",{className:"d-flex"},c.a.createElement("h2",{className:"mr-2"},c.a.createElement(Ne.a,{icon:t})),c.a.createElement("div",null,a))},Pe=function(e){var t=e.title,a=e.body,n=e.icon;return c.a.createElement("div",{className:"d-flex"},c.a.createElement("img",{src:n,style:{width:"48px",height:"48px"},alt:""}),c.a.createElement("div",{className:"ml-2"},c.a.createElement("h5",null,t),c.a.createElement("p",null,a)))},Le=function(e){$.b.success(c.a.createElement(Ue,{icon:xe.d,message:e}))},we=function(e){$.b.error(c.a.createElement(Ue,{icon:xe.e,message:e}))},Ke=function(e){var t=e.title,a=e.body,n=e.icon;Object($.b)(c.a.createElement(Pe,{title:t,body:a,icon:n}))},Fe=a(57),He=a.n(Fe),Be=function(e,t,a){ae.a.defer((function(){var e=a(),t=e.pomodoro_date,n=e.pomodoro_number,r=e.pomodoro_used_number;Ae(ke.POMODORO_DATE,t),Ae(ke.POMODORO_NUMBER,String(n)),Ae(ke.POMODORO_USED_NUMBER,String(r))}))},ze=new(function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(pe.a)(this,Object(Oe.a)(t).call(this,"TaigaPomodoroDatabase"))).items=void 0,e.totals=void 0,e.version(1).stores({items:"++id, completedAt, duration, pure, dateKey",totals:"++id, date, value, pureValue, &dateKey, dayOfWeek"}),e.items=e.table("items"),e.totals=e.table("totals"),e}return Object(be.a)(t,e),t}(a(267).a)),Ye=a(268),Ve=a.n(Ye),Ge=a(143),Je=a.n(Ge);a(580),a(372);Ve.a.config();var Ze=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_apiKey:"AIzaSyDscSWT2haNjkDvdx29dz1mIxX0LX3PLJM",REACT_APP_authDomain:"taiga-ext.firebaseapp.com",REACT_APP_databaseURL:"https://taiga-ext.firebaseio.com",REACT_APP_projectId:"taiga-ext",REACT_APP_storageBucket:"taiga-ext.appspot.com",REACT_APP_messagingSenderId:"670370401412",REACT_APP_appId:"1:670370401412:web:c1a69635a444ff4f",REACT_APP_VapidKey:"BOOlMIIx0P4qjkh4KEwpEunUeeuVvaYelqqcsUGnimb7LBc6GyDECYhUwe7vCdJEDDiNExg-annFh4kXrqiIank"}),We=Ze.REACT_APP_apiKey,qe=Ze.REACT_APP_VapidKey,Qe={apiKey:We,authDomain:Ze.REACT_APP_authDomain,databaseURL:Ze.REACT_APP_databaseURL,projectId:Ze.REACT_APP_projectId,storageBucket:Ze.REACT_APP_storageBucket,messagingSenderId:Ze.REACT_APP_messagingSenderId,appId:Ze.REACT_APP_appId};Je.a.initializeApp(Qe);var Xe=null;try{Xe=Je.a.messaging()}catch(br){console.log(br)}var $e=Xe;navigator.serviceWorker&&$e&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){ae.a.get($e,"registrationToUse")||$e.useServiceWorker(e),$e.usePublicVapidKey(qe||""),$e.onTokenRefresh((function(){return oe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.a.awrap($e.getToken());case 2:e.sent;case 3:case"end":return e.stop()}}))})),$e.getToken().then((function(e){e}))}));var et=Je.a.firestore().collection("timers");$e&&$e.requestPermission().then((function(){console.log("Notification permission granted.")})).catch((function(e){console.log("Unable to get permission to notify.",e)}));var tt=function(e,t,a,n,r){var c,o;return oe.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,oe.a.awrap(et.add({title:e,body:t,remaining:a,token:n,icon:"./tomato.png",click_action:window.location.href,mode:r}));case 2:return c=s.sent,o=c.id,s.abrupt("return",o);case 5:case"end":return s.stop()}}))},at=function(e,t,a){if(e.type===q.DEL_FB_TIMER){var n=a().timer_id;n&&(r=n,et.doc(r).delete(),t({type:q.SET_TIMER_ID,payload:{timer_id:null}}))}var r},nt=function(e,t,a){return He.a.get("".concat(it(e),"/").concat(t),a)},rt=function(e,t,a,n){return He.a.post("".concat(it(e),"/").concat(t),a,n)},ct=function(e,t,a,n){return He.a.patch("".concat(it(e),"/").concat(t),a,n)},ot=function(e){var t;try{t=e.response?e.response.data._error_message:"error"}catch(br){t=br.message||br}we(t)},st=function(e,t,a){switch(e.type){case q.FETCH_PROJECT:return void function(e,t,a){var n,r,c,o,s;oe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==q.FETCH_PROJECT){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.pid,!r||!c){l.next=10;break}return l.next=7,oe.a.awrap(nt(r,"projects/".concat(c)));case 7:o=l.sent,s=o.data,t({type:q.SET_PROJECT,payload:{project:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ot(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case q.FETCH_MILESTONES:return void function(e,t,a){var n,r,c,o,s;oe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==q.FETCH_MILESTONES){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.project,!r||!c){l.next=10;break}return l.next=7,oe.a.awrap(nt(r,"milestones",{params:{project:c}}));case 7:o=l.sent,s=o.data,t({type:q.SET_MILESTONES,payload:{milestones:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ot(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case q.FETCH_TASKS:return void function(e,t,a){var n,r,c,o,s,l,i,u,m,_;oe.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e.type!==q.FETCH_TASKS){d.next=17;break}if(d.prev=1,n=a(),r=n.url,c=e.payload,o=c.milestone,s=c.reject_task_status_ids,l=c.timelimit_close_task,!(r&&o&&l)){d.next=12;break}return i=le()(l),d.next=8,oe.a.awrap(nt(r,"tasks",{headers:{"x-disable-pagination":!0},params:{milestone:o}}));case 8:u=d.sent,m=u.data,_=ae.a.chain(m).reject((function(e){return ae.a.includes(s,String(e.status))})).reject((function(e){return e.is_closed&&le()(e.finished_date).diff(i)<0})).value(),t({type:q.SET_TASKS,payload:{tasks:_}});case 12:d.next=17;break;case 14:d.prev=14,d.t0=d.catch(1),ot(d.t0);case 17:case"end":return d.stop()}}),null,null,[[1,14]])}(e,t,a);case q.FETCH_TASK_STATUSES:return void function(e,t,a){var n,r,c,o,s;oe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==q.FETCH_TASK_STATUSES){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.project,!r||!c){l.next=10;break}return l.next=7,oe.a.awrap(nt(r,"task-statuses",{params:{project:c}}));case 7:o=l.sent,s=o.data,t({type:q.SET_TASK_STATUSES,payload:{task_statuses:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ot(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case q.FETCH_CUSTOM_ATTRS:return void function(e,t,a){var n,r,c,o,s;oe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==q.FETCH_CUSTOM_ATTRS){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.project,!r||!c){l.next=10;break}return l.next=7,oe.a.awrap(nt(r,"task-custom-attributes",{params:{project:c}}));case 7:o=l.sent,s=o.data,t({type:q.SET_CUSTOM_ATTRS,payload:{custom_attrs:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ot(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case q.FETCH_CUSTOM_VALUE_MAP:return void function(e,t,a){var n,r,c,o,s,l;oe.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.type!==q.FETCH_CUSTOM_VALUE_MAP){i.next=16;break}if(i.prev=1,n=a(),r=n.url,c=n.custom_eid,o=n.custom_rid,s=e.payload.tasks,!(r&&s.length&&c&&o)){i.next=11;break}return i.t0=WeakMap,i.next=8,oe.a.awrap(Promise.all(s.map((function(e){var t,a;return oe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oe.a.awrap(nt(r,"tasks/custom-attributes-values/".concat(e.id)));case 2:return t=n.sent,a=t.data,n.abrupt("return",[e,a]);case 5:case"end":return n.stop()}}))}))));case 8:i.t1=i.sent,l=new i.t0(i.t1),t({type:q.SET_CUSTOM_VALUE_MAP,payload:{custom_value_map:l}});case 11:i.next=16;break;case 13:i.prev=13,i.t2=i.catch(1),ot(i.t2);case 16:case"end":return i.stop()}}),null,null,[[1,13]])}(e,t,a);case q.FETCH_USER:return void function(e,t,a){var n,r,c,o,s;oe.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.type!==q.FETCH_USER){l.next=15;break}if(l.prev=1,n=a(),r=n.url,c=e.payload.uid,!r||!c){l.next=10;break}return l.next=7,oe.a.awrap(nt(r,"users/".concat(c)));case 7:o=l.sent,s=o.data,t({type:q.SET_USER,payload:{user:s}});case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),ot(l.t0);case 15:case"end":return l.stop()}}),null,null,[[1,12]])}(e,t,a);case q.PATCH_CUSTOM_VALUE:return void function(e,t,a){var n,r,c,o,s,l,i,u,m,_,E,p,O,f;oe.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(e.type!==q.PATCH_CUSTOM_VALUE){b.next=20;break}if(b.prev=1,n=a(),r=n.url,c=n.custom_value_map,o=n.tasks,s=n.in_progress_task_status_id,l=e.payload,i=l.id,u=l.key,m=l.value,_=l.version,E=o.find((function(e){return e.id===i})),!(r&&i&&u&&E&&c.has(E))){b.next=15;break}if(!(p=c.get(E))){b.next=15;break}return O=p.attributes_values,b.next=11,oe.a.awrap(ct(r,"tasks/custom-attributes-values/".concat(i),{attributes_values:Object(d.a)({},O,Object(_e.a)({},u,String(m))),version:_}));case 11:e.meta&&e.meta.update_status&&m>0&&s&&!E.is_closed&&E.status!==Number(s)&&t({type:q.PATCH_TASK,payload:{key:"status",value:s,id:E.id}}),e.meta&&e.meta.use_pomodoro&&(f=e.meta.use_pomodoro.used_number,t({type:q.USE_POMODORO,payload:{used_number:f}})),t({type:q.UPDATE_DATA}),Le("Custom value updated. [".concat(m,"]"));case 15:b.next=20;break;case 17:b.prev=17,b.t0=b.catch(1),ot(b.t0);case 20:case"end":return b.stop()}}),null,null,[[1,17]])}(e,t,a);case q.SIGN_IN:return void function(e,t,a){var n,r,c,o,s,l,i;oe.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e.type!==q.SIGN_IN){u.next=20;break}if(u.prev=1,n=a(),r=n.url,c=e.payload,o=c.username,s=c.password,!(r&&o&&s)){u.next=13;break}return u.next=7,oe.a.awrap(rt(r,"auth",{username:o,password:s,type:"normal"}));case 7:l=u.sent,i=l.data.auth_token,t({type:q.SET_AUTH_TOKEN,payload:{auth_token:i}}),Ae(ke.USERNAME,o),Ae(ke.PASSWORD,s),Le("".concat(o," signed in."));case 13:u.next=20;break;case 15:u.prev=15,u.t0=u.catch(1),t({type:q.SET_AUTH_ERROR}),ae.a.get(u.t0,"response.data._err_message")&&t({type:q.SIGN_OUT}),ot(u.t0);case 20:case"end":return u.stop()}}),null,null,[[1,15]])}(e,t,a);case q.PATCH_TASK:return void function(e,t,a){var n,r,c,o,s,l,i,u,m;oe.a.async((function(_){for(;;)switch(_.prev=_.next){case 0:if(e.type!==q.PATCH_TASK){_.next=15;break}if(_.prev=1,n=a(),r=n.url,c=n.tasks,o=e.payload,s=o.id,l=o.key,i=o.value,u=c.find((function(e){return e.id===s})),!(r&&s&&l&&u)){_.next=10;break}return _.next=8,oe.a.awrap(ct(r,"tasks/".concat(s),(m={},Object(_e.a)(m,l,i),Object(_e.a)(m,"version",u.version),m)));case 8:t({type:q.UPDATE_DATA}),Le("Task updated. [".concat(l,"=").concat(i,"]"));case 10:_.next=15;break;case 12:_.prev=12,_.t0=_.catch(1),ot(_.t0);case 15:case"end":return _.stop()}}),null,null,[[1,12]])}(e,t,a);case q.SIGN_OUT:return localStorage.removeItem(ke.USERNAME),localStorage.removeItem(ke.PASSWORD),void(He.a.defaults.headers.common.Authorization&&delete He.a.defaults.headers.common.Authorization);case q.SET_AUTH_TOKEN:return void function(e,t,a){if(e.type===q.SET_AUTH_TOKEN){var n=e.payload.auth_token;He.a.defaults.headers.common.Authorization="Bearer ".concat(n)}}(e);case q.SET_URL:return void function(e,t,a){if(e.type===q.SET_URL){var n=e.payload.url;Ae(ke.URL,n)}}(e);case q.SET_PID:!function(e,t,a){if(e.type===q.SET_PID){var n=e.payload.pid;Ae(ke.PID,n),localStorage.removeItem(ke.MID);var r=Ce(ke.CUSTOM_EID,n),c=Ce(ke.CUSTOM_RID,n);t({type:q.SET_CUSTOM_EID,payload:{custom_eid:r}}),t({type:q.SET_CUSTOM_RID,payload:{custom_rid:c}})}}(e,t);break;case q.SET_MID:!function(e,t,a){if(e.type===q.SET_MID){var n=e.payload.mid,r=a().mid;Ae(ke.MID,n);var c=ae.a.compact(Ce(ke.BIZ_DAYS,n).split(",")).sort();t({type:q.SET_BIZ_DAYS,payload:{biz_days:c}}),r&&n!==r&&t({type:q.RESET_TASK_ID});var o=Ce(ke.TIMELIMIT_CLOSE_TASK,n);t({type:q.SET_TIMELIMIT_CLOSE_TASK,payload:{timelimit_close_task:o}})}}(e,t,a);break;case q.SET_CUSTOM_EID:!function(e,t,a){if(e.type===q.SET_CUSTOM_EID){var n=e.payload.custom_eid,r=ge(ke.PID);De(ke.CUSTOM_EID,r,n)}}(e);break;case q.SET_CUSTOM_RID:!function(e,t,a){if(e.type===q.SET_CUSTOM_RID){var n=e.payload.custom_rid,r=ge(ke.PID);De(ke.CUSTOM_RID,r,n)}}(e);break;case q.SET_BIZ_DAYS:case q.ADD_BIZ_DAY:case q.REMOVE_BIZ_DAY:!function(e,t,a){ae.a.defer((function(){var e=a(),t=e.mid,n=e.biz_days;De(ke.BIZ_DAYS,t,n.join(","))}))}(0,0,a);break;case q.ADD_REJECT_TASK_STATUS_ID:case q.REMOVE_REJECT_TASK_STATUS_ID:!function(e,t,a){ae.a.defer((function(){var e=a(),t=e.pid,n=e.reject_task_status_ids;De(ke.REJECT_TASK_STATUS_IDS,t,n.join(","))}))}(0,0,a);break;case q.ADD_POMODORO:!function(e,t,a){var n,r,c,o,s,l,i,u,m,_,d,E,p;oe.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(e.type!==q.ADD_POMODORO||!e.meta){O.next=15;break}return n=a(),r=n.url,c=n.task_id,o=n.custom_rid,s=e.meta,l=s.completedAt,i=s.duration,u=s.pure,m=le()(l).format("YYYY-MM-DD"),O.next=6,oe.a.awrap(ze.items.put({completedAt:l,duration:i,pure:u,dateKey:m}));case 6:if(t({type:q.CALC_POMODORO_TOTAL,payload:{dateKey:m}}),!c||!o){O.next=15;break}return O.next=10,oe.a.awrap(nt(r,"tasks/custom-attributes-values/".concat(c)));case 10:_=O.sent,d=_.data,E=Number(ae.a.get(d,"attributes_values.".concat(o),"0"))+.5,p=d.version,d&&p&&t({type:q.PATCH_CUSTOM_VALUE,payload:{id:Number(c),key:o,value:E,version:p},meta:{use_pomodoro:{used_number:1},update_status:!0}});case 15:case"end":return O.stop()}}))}(e,t,a),Be(0,0,a);break;case q.USE_POMODORO:case q.RESET_POMODORO:Be(0,0,a);break;case q.CALC_POMODORO_TOTAL:!function(e,t,a){var n,r,c,o,s,l,i;oe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.type!==q.CALC_POMODORO_TOTAL){a.next=14;break}return n=e.payload,a.next=4,oe.a.awrap(ze.totals.get(n));case 4:return r=a.sent,a.next=7,oe.a.awrap(ze.items.where(n).toArray());case 7:c=a.sent,o=c.length,s=ae.a.filter(c,{pure:!0}).length,l=le()(n.dateKey,"YYYY-MM-DD").day(),i=le()(n.dateKey,"YYYY-MM-DD").toDate(),ze.totals.put(Object(d.a)({},r,{},n,{date:i,value:o,pureValue:s,dayOfWeek:l})),t({type:q.LOAD_POMODORO_TOTALS});case 14:case"end":return a.stop()}}))}(e,t);break;case q.LOAD_POMODORO_TOTALS:!function(e,t,a){var n;oe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.a.awrap(ze.totals.toArray());case 2:n=e.sent,t({type:q.SET_POMODORO_TOTALS,payload:{pomodoro_daily_totals:n}});case 4:case"end":return e.stop()}}))}(0,t);break;case q.SET_TASK_ID:case q.RESET_TASK_ID:!function(e,t,a){ae.a.defer((function(){var e=a().task_id;e?Ae(ke.TASK_ID,e):localStorage.removeItem(ke.TASK_ID)}))}(0,0,a);break;case q.SET_TIMELIMIT_CLOSE_TASK:!function(e,t,a){if(e.type===q.SET_TIMELIMIT_CLOSE_TASK){var n=e.payload.timelimit_close_task,r=!!e.meta&&e.meta.customize,c=a().mid;n&&r&&De(ke.TIMELIMIT_CLOSE_TASK,c,n)}}(e,0,a);break;case q.ADD_FB_TIMER:!function(e,t,a){var n,r,c,o,s,l,i,u;oe.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e.type!==q.ADD_FB_TIMER){m.next=7;break}return n=a(),r=n.token,c=n.pomodoro_mode,o=e.payload,s=o.title,l=o.body,i=o.remaining,m.next=5,oe.a.awrap(tt(s,l,i,r,c));case 5:u=m.sent,t({type:q.SET_TIMER_ID,payload:{timer_id:u}});case 7:case"end":return m.stop()}}))}(e,t,a);break;case q.DEL_FB_TIMER:at(e,t,a);break;case q.SET_TIMER_ID:!function(e,t,a){if(e.type===q.SET_TIMER_ID){var n=e.payload.timer_id;n?Ae(ke.TIMER_ID,n):localStorage.removeItem(ke.TIMER_ID)}}(e)}},lt=function(e){!function(e){var t=ge(ke.URL),a=ge(ke.TIMER_ID),n=ge(ke.PID),r=ge(ke.MID),c=Ce(ke.CUSTOM_EID,n),o=Ce(ke.CUSTOM_RID,n),s=ae.a.compact(Ce(ke.BIZ_DAYS,r).split(",")).sort(),l=ae.a.compact(Ce(ke.REJECT_TASK_STATUS_IDS,n).split(",")),i=!(t&&n&&r&&c&&o),u=ge(ke.POMODORO_DATE),m=Number(ge(ke.POMODORO_NUMBER)||"0"),_=Number(ge(ke.POMODORO_USED_NUMBER)||"0"),d=ge(ke.TASK_ID);a&&e({type:q.SET_TIMER_ID,payload:{timer_id:a}}),t&&e({type:q.SET_URL,payload:{url:t}}),n&&e({type:q.SET_PID,payload:{pid:n}}),r&&e({type:q.SET_MID,payload:{mid:r}}),c&&e({type:q.SET_CUSTOM_EID,payload:{custom_eid:c}}),o&&e({type:q.SET_CUSTOM_RID,payload:{custom_rid:o}}),s.length&&e({type:q.SET_BIZ_DAYS,payload:{biz_days:s}}),l.length&&e({type:q.SET_REJECT_TASK_STATUS_IDS,payload:{reject_task_status_ids:l}}),d&&e({type:q.SET_TASK_ID,payload:{task_id:d}}),i&&e({type:q.OPEN_CONTROLLER}),u&&e({type:q.RESTORE_POMODORO,payload:{pomodoro_date:u,pomodoro_number:m,pomodoro_used_number:_}}),e({type:q.LOADED}),e({type:q.LOAD_POMODORO_TOTALS})}(e),ae.a.defer((function(){!function(e){var t=ge(ke.USERNAME),a=ge(ke.PASSWORD);e({type:q.SIGN_IN,payload:{username:t,password:a}})}(e)}))},it=function(e){return"".concat(e.replace(/[\xa5/]$/,""),"/api/v1")},ut=function(e,t){return ae.a.find(e,{id:t})},mt=Object(r.createContext)({state:Re,dispatch:function(e){}}),_t=function(e){var t=e.children,a=f(),n=function(e,t){var a=Object(ee.a)(e,2),n=a[0],c=a[1],o=null,s=Object(r.useCallback)((function(e){o&&o(e)}),[o]),l=Object(r.useMemo)((function(){return function(){var e;return{getter:function(){return e},setter:function(t){e=t}}}()}),[]);return l.setter(n),[n,o=Object(r.useCallback)(Ie(l.getter,c,t,s),[])]}(Object(r.useReducer)(Me,Re),st),o=Object(ee.a)(n,2),s=o[0],l=o[1],i={state:s,dispatch:l};return Object(r.useEffect)((function(){a&&s.pid&&(l({type:q.FETCH_MILESTONES,payload:{project:s.pid}}),l({type:q.FETCH_CUSTOM_ATTRS,payload:{project:s.pid}}),l({type:q.FETCH_TASK_STATUSES,payload:{project:s.pid}}),l({type:q.FETCH_PROJECT,payload:{pid:s.pid}}))}),[a,s.pid,l]),Object(r.useEffect)((function(){a&&s.mid&&s.milestone.id&&s.timelimit_close_task&&l({type:q.FETCH_TASKS,payload:{milestone:s.mid,reject_task_status_ids:s.reject_task_status_ids,timelimit_close_task:s.timelimit_close_task}})}),[a,s.mid,s.updated_time,s.reject_task_status_ids,l,s.milestone.id,s.timelimit_close_task]),Object(r.useEffect)((function(){l({type:q.FETCH_CUSTOM_VALUE_MAP,payload:{tasks:s.tasks}})}),[l,s.tasks,s.custom_eid,s.custom_rid]),Object(r.useEffect)((function(){var e=ae.a.chain(s.task_statuses).reject((function(e){return ae.a.includes(s.reject_task_status_ids,String(e.id))})).orderBy((function(e){return e.order})).value();l({type:q.SET_ACTIVE_TASK_STATUSES,payload:{active_task_statuses:e}})}),[s.task_statuses,s.reject_task_status_ids,l]),Object(r.useEffect)((function(){var e=ut(s.custom_attrs,Number(s.custom_eid));e&&l({type:q.SET_CUSTOM_ATTR_E,payload:{custom_attr_e:e}})}),[l,s.custom_attrs,s.custom_eid]),Object(r.useEffect)((function(){var e=ut(s.custom_attrs,Number(s.custom_rid));e&&l({type:q.SET_CUSTOM_ATTR_R,payload:{custom_attr_r:e}})}),[l,s.custom_attrs,s.custom_rid]),Object(r.useEffect)((function(){var e,t,a=(e=s.milestones,t=s.mid,e.find((function(e){return String(e.id)===t})));a&&l({type:q.SET_MILESTONE,payload:{milestone:a}})}),[l,s.mid,s.milestones]),Object(r.useEffect)((function(){if(s.tasks.length>0&&s.user){var e=(t=s.tasks,a=s.user.id,ae.a.chain(t).filter({assigned_to:a}).sortBy("user_story").value());l({type:q.SET_USER_TASKS,payload:{user_tasks:e}})}var t,a}),[l,s.tasks,s.user]),Object(r.useEffect)((function(){lt(l)}),[l]),Object(r.useEffect)((function(){if(s.task_id){var e=s.tasks.find((function(e){return e.id===Number(s.task_id)}));e&&l({type:q.SET_TASK,payload:{task:e}})}}),[l,s.task_id,s.tasks]),Object(r.useEffect)((function(){var e=s.biz_days[0];if(e&&!s.timelimit_close_task){var t="".concat(le()(e).local().startOf("day").format("YYYY-MM-DD"),"T12:00");l({type:q.SET_TIMELIMIT_CLOSE_TASK,payload:{timelimit_close_task:t}})}}),[l,s.biz_days,s.milestone,s.timelimit_close_task]),Object(r.useEffect)((function(){if(s.task_statuses.length>0){var e=s.task_statuses.find((function(e){return"in-progress"===e.slug}));e&&l({type:q.SET_IN_PROGRESS_TASK_STATUS_ID,payload:{task_status_id:String(e.id)}})}}),[l,s.task_statuses,s.task_statuses.length]),Object(r.useEffect)((function(){$e&&($e.onTokenRefresh((function(){var e;return oe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!$e){t.next=5;break}return t.next=3,oe.a.awrap($e.getToken());case 3:e=t.sent,l({type:q.SET_TOKEN,payload:{token:e}});case 5:case"end":return t.stop()}}))})),$e.getToken().then((function(e){l({type:q.SET_TOKEN,payload:{token:e}})})))}),[l]),Object(r.useEffect)((function(){Object.values(me).forEach((function(e){et.where("mode","==",e).onSnapshot((function(t){l({type:q.SET_POMODORO_LIVE_COUNT,payload:{mode:e,value:t.size}})}))}))}),[l]),c.a.createElement(mt.Provider,{value:i},t)},dt=a(598),Et=a(599),pt=a(602),Ot=a(603),ft=a(601),bt=a(592),Tt=a(593),St=a(594),vt=a(272),yt=function(e){e.preventDefault()},kt=function(e){e.stopPropagation()},ht=a(139),jt=function(){return c.a.createElement(ht.a,{progress:0,buffer:0,className:"my-auto mx-2 border-0 form-control"})},gt=function(){var e=v(),t=Object(r.useContext)(mt),a=t.state.pid,n=t.dispatch,o=Object(r.useCallback)((function(e){var t=e.target.value;t&&n({type:q.SET_PID,payload:{pid:t}})}),[n]);return c.a.createElement(bt.a,{className:"col"},c.a.createElement(Tt.a,{addonType:"prepend"},"Project"),ae.a.isEmpty(e)?c.a.createElement(jt,null):c.a.createElement(St.a,{value:a,type:"select",onChange:o},c.a.createElement("option",{value:""}," --- "),e.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))},Ct=function(){var e=Object(l.b)(),t=D(),a=Object(r.useContext)(mt),n=a.state.milestones,o=a.dispatch,s=Object(r.useCallback)((function(t){var a=t.target.value;a&&(o({type:q.SET_MID,payload:{mid:a}}),e(g.setMid(a)))}),[o,e]);return c.a.createElement(bt.a,{className:"col"},c.a.createElement(Tt.a,{addonType:"prepend"},"Sprint"),ae.a.isEmpty(n)?c.a.createElement(jt,null):c.a.createElement(St.a,{type:"select",value:t,onChange:s},c.a.createElement("option",{value:""}," --- "),n.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))},At=function(){var e=Object(r.useContext)(mt),t=e.state,a=t.custom_attrs,n=t.custom_eid,o=t.custom_rid,s=e.dispatch,l=Object(r.useCallback)((function(e){var t=e.target.value;if(t)switch(e.target.name){case"eid":s({type:q.SET_CUSTOM_EID,payload:{custom_eid:t}});break;case"rid":s({type:q.SET_CUSTOM_RID,payload:{custom_rid:t}})}}),[s]);return c.a.createElement("div",{className:"row"},c.a.createElement(bt.a,{className:"col"},c.a.createElement(Tt.a,{addonType:"prepend"},"Estimate"),ae.a.isEmpty(a)?c.a.createElement(jt,null):c.a.createElement(St.a,{value:n,name:"eid",type:"select",onChange:l},c.a.createElement("option",{value:""}," --- "),a.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))),c.a.createElement(bt.a,{className:"col"},c.a.createElement(Tt.a,{addonType:"prepend"},"Result"),ae.a.isEmpty(a)?c.a.createElement(jt,null):c.a.createElement(St.a,{value:o,name:"rid",type:"select",onChange:l},c.a.createElement("option",null," --- "),a.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))))},Dt=a(595),Rt=a(596),Mt=a(624),It=a(597),Nt=a(144),xt=a.n(Nt),Ut=function(e,t){return-1===t?"":0===t?"Planning":"Day ".concat(t)},Pt=function(e){return e.filter((function(e){return xt.a.isWeekDay(e)})).map((function(e){return e.format("YYYY-MM-DD")}))},Lt=function(e){return{"text-danger":0===e,"text-info":6===e}},wt=function(e){var t=e.item,a=e.idx,n=Object(r.useContext)(mt),o=n.state.biz_days,s=n.dispatch,l=Object(r.useCallback)((function(e){var t=e.target.value;e.target.checked?s({type:q.ADD_BIZ_DAY,payload:{biz_day:t}}):s({type:q.REMOVE_BIZ_DAY,payload:{biz_day:t}})}),[s]);if(!t)return c.a.createElement("td",null,c.a.createElement("br",null));var i=t.format("YYYY-MM-DD"),u=i===o[0],m="biz-day-".concat(i),_=ae.a.includes(o,i);return c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:re()(Lt(a),{"table-info":u}),id:m},xt.a.isWeekDay(t)?c.a.createElement(Dt.a,{check:!0,inline:!0},c.a.createElement(Rt.a,{check:!0},c.a.createElement(St.a,{onChange:l,disabled:xt.a.isWeekendDay(t),value:i,type:"checkbox",checked:_,className:"form-check-input"}),i)):c.a.createElement("span",null,i)),_?c.a.createElement(Mt.a,{target:m},function(e,t){var a=t.indexOf(e);return Ut(0,a)}(i,o)):null)},Kt=function(){var e=Object(r.useContext)(mt),t=e.state,a=t.biz_days,n=t.milestone,o=e.dispatch,s=Object(r.useState)([]),l=Object(ee.a)(s,2),u=l[0],m=l[1],_=Object(r.useState)([]),d=Object(ee.a)(_,2),E=d[0],p=d[1];return Object(r.useEffect)((function(){if(n){var e=function(e){var t=le()(e.estimated_start).local(),a=le()(e.estimated_finish).local().diff(t,"days");return ae.a.times(a).map((function(e){return t.clone().add(e,"days")}))}(n);m(e),a.length<=1&&o({type:q.SET_BIZ_DAYS,payload:{biz_days:Pt(e)}})}}),[n,a,o]),Object(r.useEffect)((function(){if(u.length>0){var e=ae.a.chunk([].concat(Object(i.a)(ae.a.times(u[0].day(),(function(){return null}))),Object(i.a)(u)),7);p(e)}}),[u]),c.a.createElement(It.a,{bordered:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,le.a.weekdays().map((function(e,t){return c.a.createElement("th",{key:t,className:re()("text-center",Lt(t))},e)})))),c.a.createElement("tbody",null,E.map((function(e,t){return c.a.createElement("tr",{key:t},e.map((function(e,t){return c.a.createElement(wt,{idx:t,key:t,item:e})})))}))))},Ft=function(){var e=Object(r.useContext)(mt).state.milestone;return c.a.createElement(dt.a,null,c.a.createElement(Et.a,null,"Business Days"),ae.a.isEmpty(e)?c.a.createElement(bt.a,null,c.a.createElement(jt,null)):c.a.createElement(Kt,null))},Ht=a(600),Bt=function(e){var t=e.item,a=Object(r.useContext)(mt),n=a.state.reject_task_status_ids,o=a.dispatch,s=Object(r.useCallback)((function(e){var t=e.target.value;e.target.checked?o({type:q.REMOVE_REJECT_TASK_STATUS_ID,payload:{reject_task_status_id:t}}):o({type:q.ADD_REJECT_TASK_STATUS_ID,payload:{reject_task_status_id:t}})}),[o]);return c.a.createElement(Dt.a,{check:!0,inline:!0},c.a.createElement(Rt.a,{check:!0},c.a.createElement(St.a,{onChange:s,type:"checkbox",value:t.id,defaultChecked:!ae.a.includes(n,String(t.id))}),t.name))},zt=function(){var e=Object(r.useContext)(mt).state.task_statuses;return 0===e.length?null:c.a.createElement(dt.a,null,c.a.createElement(Et.a,null,"Task status"),c.a.createElement(Ht.a,null,e.map((function(e){return c.a.createElement(Bt,{key:e.id,item:e})}))))},Yt=a(270),Vt=function(){return c.a.createElement(Tt.a,{addonType:"append"},c.a.createElement(Yt.a,null,c.a.createElement(Ne.a,{icon:xe.G,className:"fa-pulse"})))},Gt=function(){var e=Object(r.useContext)(mt),t=e.state.timelimit_close_task,a=e.dispatch,n=Object(r.useState)(""),o=Object(ee.a)(n,2),s=o[0],l=o[1],i=Object(r.useState)(!1),u=Object(ee.a)(i,2),m=u[0],_=u[1],d=Object(r.useCallback)((function(e){l(e.target.value)}),[]),E=Object(r.useCallback)((function(e){s&&a({type:q.SET_TIMELIMIT_CLOSE_TASK,payload:{timelimit_close_task:s},meta:{customize:!0}}),e.preventDefault()}),[s,a]);return Object(r.useEffect)((function(){t&&(_(!0),ae.a.defer(_,!1))}),[t]),c.a.createElement(ft.a,{onSubmit:E},c.a.createElement(bt.a,null,c.a.createElement(Tt.a,{addonType:"prepend"},"Timelimit for closing old tasks"),m?c.a.createElement(Vt,null):c.a.createElement(St.a,{defaultValue:t,onChange:d,type:"datetime-local"}),c.a.createElement(Tt.a,{addonType:"append"},c.a.createElement(vt.a,null,"Set"))))},Jt=a(273),Zt=a.n(Jt),Wt=function(e){var t=e.isOpen?90:void 0;return c.a.createElement(Ne.a,{className:"text-muted mr-2",rotation:t,icon:xe.f})},qt=function(){var e=Object(l.b)(),t=f(),a=Object(r.useContext)(mt),n=a.state,o=n.isOpen,s=n.biz_days,i=n.milestone,u=a.dispatch,m=Object(r.useState)(""),_=Object(ee.a)(m,2),d=_[0],p=_[1],O=Object(r.useCallback)((function(e){p(e.target.value)}),[p]),b=Object(r.useCallback)((function(t){d&&e(E.setUrl(d)),t.preventDefault()}),[d,e]),T=Object(r.useCallback)((function(){u(o?{type:q.CLOSE_CONTROLLER}:{type:q.OPEN_CONTROLLER})}),[u,o]),S=Object(r.useMemo)((function(){return function(e,t){return e&&t.project_extra_info?"".concat(e,"/project/").concat(t.project_extra_info.slug,"/taskboard/").concat(t.slug):""}(t,i)}),[i,t]),v=i.name,y=Object(r.useMemo)((function(){return function(e){return e.length>1?"[".concat(ae.a.head(e)," - ").concat(ae.a.last(e),"]"):""}(s)}),[s]);return c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:re()(Zt.a.header),onClick:T},c.a.createElement(Wt,{isOpen:o}),v&&c.a.createElement(pt.a,{color:"primary",pill:!0,className:"p-1 m-1"},c.a.createElement("span",null,v)),y&&c.a.createElement(pt.a,{className:"p-1 m-1"},c.a.createElement("span",null,y)),S?c.a.createElement("a",{target:"_blank",onClick:kt,className:"float-right",href:S,rel:"noopener noreferrer"},c.a.createElement(Ne.a,{className:"mr-1",icon:xe.o}),"Taskboard"):null),c.a.createElement(Ot.a,{isOpen:o},c.a.createElement(ft.a,{onSubmit:b},c.a.createElement(bt.a,null,c.a.createElement(Tt.a,{addonType:"prepend"},"URL"),c.a.createElement(St.a,{defaultValue:t,onChange:O,placeholder:"http://hostname:port"}),c.a.createElement(Tt.a,{addonType:"append"},c.a.createElement(vt.a,null,"Set")))),c.a.createElement("div",{className:"row"},c.a.createElement(gt,null),c.a.createElement(Ct,null)),c.a.createElement(At,null),c.a.createElement(Gt,null),c.a.createElement(Ft,null),c.a.createElement(zt,null)))},Qt=a(49),Xt=a(67),$t=a(134),ea=a(605),ta=a(606),aa=function(e){var t=e.size,a=Object(l.b)(),n=Object(r.useContext)(mt).dispatch,o=Object(r.useCallback)((function(){n({type:q.UPDATE_DATA}),a(R.updateData())}),[n,a]);return c.a.createElement(vt.a,{onClick:o,size:t,className:"mx-1"},c.a.createElement(Ne.a,{icon:xe.H}))},na=a(184),ra=a.n(na),ca=a(604),oa=function(){var e=Object(r.useContext)(mt),t=e.state,a=t.auth_token,n=t.auth_error,o=t.username,s=e.dispatch,l=Object(r.useState)(""),i=Object(ee.a)(l,2),u=i[0],m=i[1],_=Object(r.useState)(""),d=Object(ee.a)(_,2),E=d[0],p=d[1],O=Object(r.useState)(!1),f=Object(ee.a)(O,2),b=f[0],T=f[1],S=Object(r.useCallback)((function(e){u&&E&&(T(!0),s({type:q.SIGN_IN,payload:{username:u,password:E}})),e.preventDefault()}),[E,u,s,T]),v=Object(r.useCallback)((function(e){m(e.target.value)}),[m]),y=Object(r.useCallback)((function(e){p(e.target.value)}),[p]),k=Object(r.useCallback)((function(){s({type:q.SIGN_OUT})}),[s]);return Object(r.useEffect)((function(){(n||a)&&T(!1)}),[n,a,T]),c.a.createElement(c.a.Fragment,null,a?c.a.createElement(ft.a,{inline:!0,onSubmit:yt,className:"mr-1"},c.a.createElement(bt.a,null,c.a.createElement(Tt.a,{addonType:"prepend"},c.a.createElement(Yt.a,null,c.a.createElement(Ne.a,{icon:xe.K}))),c.a.createElement(Tt.a,{addonType:"prepend",className:"border border-success"},c.a.createElement(Yt.a,null,o)),c.a.createElement(Tt.a,{addonType:"append"},c.a.createElement(vt.a,{title:"Sign out",onClick:k,color:"danger"},c.a.createElement(Ne.a,{icon:xe.F}))))):c.a.createElement(ft.a,{inline:!0,onSubmit:S,className:"mr-1"},c.a.createElement(bt.a,null,c.a.createElement(Tt.a,{addonType:"prepend"},c.a.createElement(Yt.a,null,c.a.createElement(Ne.a,{icon:xe.K}))),c.a.createElement(St.a,{disabled:b,onInput:v,onChange:v,name:"username",placeholder:"username",invalid:n})),c.a.createElement(bt.a,null,c.a.createElement(Tt.a,{addonType:"prepend"},c.a.createElement(Yt.a,null,c.a.createElement(Ne.a,{icon:xe.v}))),c.a.createElement(St.a,{disabled:b,onInput:y,onChange:y,name:"password",placeholder:"password",type:"password",invalid:n})),c.a.createElement(vt.a,{color:"info"},b?c.a.createElement(ca.a,{size:"sm",type:"grow"}):c.a.createElement(Ne.a,{icon:xe.E}))))},sa=["success","warning","info","danger"],la=function(e){return ae.a.groupBy(e,"assigned_to")},ia=function(e){var t=e.src||"http://i.pravatar.cc/80?u=".concat(Math.random());return c.a.createElement($t.a,Object.assign({},e,{src:t,square:!0,className:"mr-1"}))},ua=function(e,t,a){return e.has(t)?(n=ae.a.get(e.get(t),"attributes_values.".concat(a),"0"),ae.a.chain(n).replace(/[^0-9.+,]/g,"").replace(/[+]/g,",").split(",").compact().map(Number).sum().value()):0;var n},ma=function(e,t,a){return ae.a.chain(t).map((function(t){return ua(e,t,a)})).sum().value()},_a=function(e,t,a){return ma(e,t.filter((function(e){return e.is_closed})),a)},da=function(e,t){return e.has(t)?ae.a.get(e.get(t),"version"):void 0},Ea=function(e,t,a){return a&&t===e},pa=function(e,t){return t>e},Oa=function(e){var t=e.photo,a=e.id,n=e.username,r=e.total_hours,o="/users/".concat(a);return r&&(o="".concat(o,"/").concat(r)),c.a.createElement(c.a.Fragment,null,c.a.createElement(ia,{src:t}),c.a.createElement(Qt.b,{to:o},n))},fa=function(e){var t=e.username,a=e.val,n=e.total,o=e.imgSrc,s=e.id,l=Object(r.useMemo)((function(){var e=n>0?(a-n)/n:0;return e<-.1?[xe.q,""]:e<=.1?[xe.q,"table-success"]:e<=.2?[xe.r,"table-warning"]:[xe.j,"table-danger"]}),[n,a]),i=Object(ee.a)(l,2),u=i[0],m=i[1];return a?c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:m},c.a.createElement(Oa,{id:s,photo:o,username:t,total_hours:n}),c.a.createElement(Ne.a,{className:"mx-1",icon:u})),c.a.createElement("td",{className:re()(m,"text-right")},a)):c.a.createElement(c.a.Fragment,null,c.a.createElement("td",null,c.a.createElement(ia,{src:o})," ",t),c.a.createElement("td",null))},ba=function(e){var t=e.e,a=e.r,n=Object(r.useMemo)((function(){return function(e,t){if(ae.a.isNumber(e)&&ae.a.isNumber(t)&&e>0){var a=Math.abs(e-t)/e;if(a<=.05)return["gold",3];if(a<=.1)return["silver",2];if(a<.2)return["bronze",1]}return[null,0]}(t,a)}),[t,a]),o=Object(ee.a)(n,2),s=o[0],l=o[1];return s?c.a.createElement(c.a.Fragment,null,ae.a.times(l).map((function(e){return c.a.createElement(Ne.a,{key:e,className:ra.a[s],icon:xe.y})}))):null},Ta=function(e){var t=e.tasks,a=Object(r.useContext)(mt).state,n=a.active_task_statuses,o=a.custom_eid,s=a.custom_value_map,l=Number(o),i=Object(r.useMemo)((function(){return ae.a.chain(n).filter({is_closed:!0}).reverse().map((function(e,a){return{status:e.id,total:ma(s,ae.a.filter(t,{status:e.id}),l),style:sa[a],label:e.name}})).value()}),[n,s,l,t]),u=Object(r.useMemo)((function(){return ma(s,t,l)}),[s,l,t]);return c.a.createElement(ea.a,{multi:!0},i.map((function(e){return c.a.createElement(ea.a,{key:e.label,bar:!0,max:u,value:e.total,color:e.style},e.label)})))},Sa=function(e){var t=e.item,a=e.sums,n=e.isPast,o=e.total,s=e.hpd,l=e.tasks,i=Object(r.useState)(0),u=Object(ee.a)(i,2),m=u[0],_=u[1],d=Object(r.useCallback)((function(e){_(Number(e.target.value)||0)}),[_]),E=ae.a.get(a,t.id),p=ae.a.get(E,"e"),O=ae.a.get(E,"r"),f=m||o,b=String(f);return c.a.createElement("tr",{key:t.id},o>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(fa,{username:t.username,val:p,total:f,imgSrc:t.photo,id:t.id}),c.a.createElement("td",{className:"text-right"},o),c.a.createElement("td",{className:ra.a.custom_input_td},c.a.createElement(St.a,{bsSize:"sm",type:"number",className:"text-right",value:b,step:s,onChange:d}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("td",null,c.a.createElement(Oa,{photo:t.photo,id:t.id,username:t.username})),c.a.createElement("td",{className:"text-right"},t.closed||""),c.a.createElement("td",{className:"text-right"},p),c.a.createElement("td",{className:"text-right"},O),c.a.createElement("td",null,ae.a.isNumber(p)&&c.a.createElement(Ta,{tasks:l}))),n?c.a.createElement("td",null,c.a.createElement(ba,{e:p,r:O})):null)},va=function(){var e=Object(r.useContext)(mt).state,t=e.tasks,a=e.custom_value_map,n=e.custom_eid,o=e.custom_rid,s=e.biz_days,l=e.custom_attr_e,i=e.custom_attr_r,u=e.project.members,m=Object(r.useState)(0),_=Object(ee.a)(m,2),E=_[0],p=_[1],O=s.length-1,f=Object(r.useCallback)((function(e){p(Number(e.target.value)||0)}),[p]),b=E*O,T=Object(r.useMemo)((function(){return function(e,t,a,n){var r=Number(a),c=Number(n);return ae.a.mapValues(la(e),(function(e){return ae.a.chain(e).map((function(e){return{e:ua(t,e,r),r:ua(t,e,c)}})).reduce((function(e,t){return{e:e.e+t.e,r:e.r+t.r}}),{e:0,r:0}).value()}))}(t,a,n,o)}),[n,o,a,t]),S=ae.a.get(T,"null.e",0),v=b>0,y=Object(r.useMemo)((function(){return!v&&le()().diff(le()(ae.a.last(s)).local().endOf("days"))>0}),[s,v]),k=Object(r.useMemo)((function(){return la(t)}),[t]),h=Object(r.useMemo)((function(){return ae.a.chain(u).reject((function(e){return ae.a.isEmpty(k[e.id])})).map((function(e){return Object(d.a)({},e,{closed:_a(a,k[e.id]||[],Number(n))})})).sortBy("closed").reverse().value()}),[n,a,u,k]);return!l.id||!i.id||s.length<=1?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(ta.a,{color:"light",light:!0},c.a.createElement(ft.a,{inline:!0,className:"mr-auto",onSubmit:yt},c.a.createElement(bt.a,null,c.a.createElement(St.a,{type:"number",step:"0.5",placeholder:"hours / day",className:"text-right",onChange:f}),c.a.createElement(Tt.a,{addonType:"append"},c.a.createElement(Yt.a,null,c.a.createElement(Ne.a,{className:"mx-2",icon:xe.J}),O," [days]",c.a.createElement(Ne.a,{className:"mx-2",icon:xe.l})),b>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(Yt.a,{className:"bg-white"},c.a.createElement("strong",null,b)),c.a.createElement(Yt.a,null,"hours / sprint")):null))),c.a.createElement(oa,null),c.a.createElement(aa,null)),c.a.createElement(It.a,{bordered:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name"),!v&&c.a.createElement("th",{className:"text-success"},"Completed"),c.a.createElement("th",null,l.name),v?c.a.createElement(c.a.Fragment,null,c.a.createElement("th",null,"Total"),c.a.createElement("th",null,"Custom")):c.a.createElement(c.a.Fragment,null,c.a.createElement("th",null,i.name),c.a.createElement("th",null,"Progress")),y?c.a.createElement("th",null,"Grade"):null)),c.a.createElement("tbody",null,(h||[]).map((function(e){return c.a.createElement(Sa,{key:e.id,isPast:y,item:e,sums:T,total:b,hpd:E,tasks:k[e.id]||[]})})),c.a.createElement("tr",{key:"null"},c.a.createElement("td",{className:"text-danger"},c.a.createElement(Ne.a,{icon:xe.p,className:"ml-1 mr-2 fa-lg"}),"Not assigned"),!v&&c.a.createElement("td",null),c.a.createElement("td",{className:"text-right text-danger"},S),c.a.createElement("td",null),c.a.createElement("td",null),y?c.a.createElement("td",null):null))))},ya=a(608),ka=a(609),ha=a(625),ja=a(610),ga=a(611),Ca=a(612),Aa=a(613),Da=a(614),Ra=a(615),Ma=a(616),Ia=a(287),Na=a(275),xa=a.n(Na),Ua=function(e){var t=e.label,a=e.value,n=e.onSubmit,o=e.onEditable,s=e.onValueChange,l=e.valid,i=e.invalid,u=e.disabled,m=e.loading,_=e.id,d=e.submitting,E=e.disabledMessage,p=void 0===E?"":E,O=Object(r.useState)(!1),f=Object(ee.a)(O,2),b=f[0],T=f[1],S=Object(r.useState)(""),v=Object(ee.a)(S,2),y=v[0],k=v[1],h=Object(r.useState)(!1),j=Object(ee.a)(h,2),g=j[0],C=j[1],A=Object(r.useCallback)((function(e){T(e.currentTarget.checked)}),[T]),D=Object(r.useCallback)((function(e){var t=e.target.value;k(t),s&&s(Number(t))}),[s]),R=Object(r.useCallback)((function(e){var t=Number(y);b&&""!==y&&t>=0&&n&&(n(t),T(!1),C(!0)),e.preventDefault()}),[b,y,n,T]);return Object(r.useEffect)((function(){u&&T(!1)}),[T,u]),Object(r.useEffect)((function(){C(!1)}),[a]),Object(r.useEffect)((function(){o&&o(b)}),[b,o]),Object(r.useEffect)((function(){d&&(T(!1),C(!0))}),[d]),Object(r.useEffect)((function(){m&&T(!1)}),[m]),c.a.createElement(ft.a,{inline:!0,onSubmit:R},c.a.createElement(bt.a,{className:xa.a.input_group},c.a.createElement(Tt.a,{addonType:"prepend"},t),m?c.a.createElement(Vt,null):c.a.createElement(c.a.Fragment,null,b?c.a.createElement(c.a.Fragment,null,c.a.createElement(Tt.a,{addonType:"prepend"},c.a.createElement(Yt.a,null,a)),c.a.createElement(Tt.a,{addonType:"prepend"},c.a.createElement(Yt.a,null,c.a.createElement(Ne.a,{className:"text-info",icon:xe.s}))),c.a.createElement(St.a,{onInput:D,onChange:D,defaultValue:String(a),type:"number",step:"0.5",min:"0",id:_}),c.a.createElement(Tt.a,{addonType:"append"},c.a.createElement(vt.a,{color:"info"},c.a.createElement(Ne.a,{icon:xe.g})))):c.a.createElement(c.a.Fragment,null,g?c.a.createElement(Vt,null):c.a.createElement(St.a,{valid:l,invalid:i,readOnly:!0,value:a,className:"text-right"})),c.a.createElement(Tt.a,{addonType:"append",title:u?p:""},c.a.createElement(Ia.a,{disabled:u,checked:b,onChange:A},c.a.createElement(Ne.a,{className:"text-info",icon:xe.k}))))))};function Pa(){return(Pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function La(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var wa,Ka=c.a.createElement("g",null,c.a.createElement("path",{fill:"currentColor",className:"leaf",d:"M115.343,123.839c0.814,1.256,3.343,2.605,7.23,4.014c7.586-1.069,14.943-1.586,21.885-1.586 c15.579,0,30.166,2.469,42.438,7.145c17.87-5.567,43.412-11.694,69.108-11.694c25.694,0,51.228,6.126,69.108,11.694 c12.262-4.676,26.848-7.145,42.42-7.145c7.001,0,14.418,0.518,22.063,1.604c3.471-1.341,6.296-2.699,8.325-4.031 c42.2-28.139,53.036-81.183,47.41-69.931c-4.218,8.418-60.309,35.581-100.004,52.222c14.68-17.769,31.677-44.134,43.438-80.309 c0,0-60.978,52.382-98.867,74.887c-11.974-20.816-33.892-86.589-33.892-86.589s-18.567,49.515-20.358,81.412 c-30.21-16.929-63.354-51.474-72.485-74.538c-10.752-27.189-13.78,53.545,15.436,89.396c-1.095,0.162-2.206,0.315-3.344,0.476 c-39.111-16.072-100.454-47.91-104.926-54.86C64.708,47.255,73.143,101.954,115.343,123.839z M290.531,107.181l0.747,0.857 l-3.098-0.746L290.531,107.181z"}),c.a.createElement("path",{fill:"currentColor",className:"tomato",d:"M485.83,198.564c-38.169-57.253-117.544-70.584-160.338-52.195c-18.27-5.906-43.872-12.27-69.49-12.27 c-25.619,0-51.228,6.364-69.499,12.27c-42.794-18.388-122.168-5.058-160.338,52.195c-64.136,96.203-18.711,299.318,229.836,299.318 C504.541,497.882,549.974,294.767,485.83,198.564z M101.172,262.929c-17.099,0-30.947-13.857-30.947-30.948 c0-17.09,13.848-30.947,30.947-30.947c17.082,0,30.947,13.857,30.947,30.947C132.119,249.071,118.253,262.929,101.172,262.929z"})),Fa=function(e){var t=e.svgRef,a=e.title,n=La(e,["svgRef","title"]);return c.a.createElement("svg",Pa({id:"_x32_",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve",ref:t},n),a?c.a.createElement("title",null,a):null,Ka)},Ha=c.a.forwardRef((function(e,t){return c.a.createElement(Fa,Pa({svgRef:t},e))})),Ba=(a.p,a(104)),za=a.n(Ba);!function(e){e.FRESH="fresh",e.STALE="stale"}(wa||(wa={}));var Ya=function(e){var t,a=e.state,n=e.bl,r=e.br;return c.a.createElement(Ha,{className:re()("fa-fw","svg-inline--fa",(t={},Object(_e.a)(t,za.a.fresh,a===wa.FRESH),Object(_e.a)(t,za.a.stale,a===wa.STALE),Object(_e.a)(t,za.a.bl,n),Object(_e.a)(t,za.a.br,r),t))})},Va=a(145),Ga=a.n(Va),Ja=function(e){var t=e.item,a=Object(r.useContext)(mt),n=a.state,o=n.task_id,s=n.pomodoro_mode,l=n.pomodoro_state,i=a.dispatch,u=Object(r.useCallback)((function(){Number(o)!==t.id&&i({type:q.SET_TASK_ID,payload:{task_id:String(t.id)}}),l===ue.STOPPED?he.changeMode(me.FOCUS,!0):s===me.FOCUS?he.resume():he.changeMode(me.FOCUS,!0)}),[i,t.id,s,l,o]),m=Object(r.useCallback)((function(){he.pause()}),[]);return Number(o)===t.id?s===me.FOCUS&&l===ue.RUNNING?c.a.createElement(vt.a,{className:re()("mr-2",Ga.a.btn),color:"danger",onClick:m},c.a.createElement(Ne.a,{icon:xe.A}),c.a.createElement(Ya,null)):c.a.createElement(vt.a,{onClick:u,color:"primary",className:re()("mr-2",Ga.a.btn)},c.a.createElement(Ne.a,{icon:xe.B}),c.a.createElement(Ya,null)):""===o?s===me.FOCUS&&l!==ue.STOPPED?null:c.a.createElement(vt.a,{onClick:u,color:"primary",className:re()("mr-2",Ga.a.btn)},c.a.createElement(Ne.a,{icon:xe.B}),c.a.createElement(Ya,null)):null},Za=function(e){var t=e.label,a=e.value,n=e.loading,r=e.size,o=e.invalid,s=e.valid;return c.a.createElement(bt.a,{size:r,className:"my-n1"},c.a.createElement(Tt.a,{addonType:"prepend"},t),n?c.a.createElement(Vt,null):c.a.createElement(St.a,{invalid:o,valid:s,readOnly:!0,value:a,className:"text-right"}))},Wa=a(147),qa=a.n(Wa),Qa=a(146),Xa=a.n(Qa),$a=a(105),en=a.n($a),tn=a(276),an=a.n(tn),nn=function(e){return ae.a.chain(e).groupBy("user_story").map((function(e,t){return{user_story:Number(t),user_story_extra_info:e[0].user_story_extra_info,project_extra_info:e[0].project_extra_info,tasks:e,is_closed:e.every((function(e){return e.is_closed}))}})).value()},rn=function(e){return e?"Need sign in!":""},cn=function(e){var t=e.user_story_extra_info,a=e.project_extra_info,n=f(),r=a.slug,o=t?"#".concat(t.ref," ").concat(t.subject):void 0,s=t?"".concat(n,"/project/").concat(r,"/us/").concat(t.ref):"#";return o?c.a.createElement("a",{href:s,onClick:kt,target:"_blank",rel:"noopener noreferrer",title:o},c.a.createElement(Ne.a,{icon:xe.o})," ",o):c.a.createElement(c.a.Fragment,null,"(Unassigned tasks)")},on=function(e){var t=e.item,a=f(),n="#".concat(t.ref," ").concat(t.subject),r="".concat(a,"/project/").concat(t.project_extra_info.slug,"/task/").concat(t.ref);return c.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:n},c.a.createElement(Ne.a,{icon:xe.o})," ",n)},sn=function(e){var t=e.e,a=e.r;return c.a.createElement(bt.a,{className:en.a.display_medal},c.a.createElement(Tt.a,{addonType:"prepend"},"Grade"),c.a.createElement(an.a,{className:en.a.medal},c.a.createElement(ba,{e:t,r:a})))},ln=function(e){var t=e.item,a=e.task,n=e.onSelect,o=Object(r.useContext)(mt).dispatch,s=Object(r.useCallback)((function(){o({type:q.PATCH_TASK,payload:{key:"status",value:t.id,id:a.id}}),n&&n(t.id)}),[o,t.id,a.id,n]);return c.a.createElement(ya.a,{onClick:s},t.name)},un=function(e){var t=e.task,a=e.disabled,n=Object(r.useState)(!1),o=Object(ee.a)(n,2),s=o[0],l=o[1],i=Object(r.useContext)(mt).state.active_task_statuses,u=Object(r.useCallback)((function(){l(!0)}),[l]);return Object(r.useEffect)((function(){l(!1)}),[t.version,l]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(ca.a,{type:"grow",color:"info"}):c.a.createElement(ka.a,null,c.a.createElement(ha.a,{title:rn(a),disabled:a,caret:!a},t.status_extra_info.name),c.a.createElement(ja.a,null,i.map((function(e){return c.a.createElement(ln,{item:e,key:e.id,task:t,onSelect:u})})))))},mn=function(e){var t=e.item,a=e.onSelect,n=Object(r.useCallback)((function(){a&&a(t.id)}),[t.id,a]);return c.a.createElement(ya.a,{onClick:n},c.a.createElement(ia,{src:t.photo}),t.username)},_n=function(e){var t=e.task,a=e.disabled,n=Object(r.useState)(!1),o=Object(ee.a)(n,2),s=o[0],l=o[1],i=Object(r.useContext)(mt),u=i.state.project.members,m=i.dispatch,_=Object(r.useCallback)((function(e){l(!0),m({type:q.PATCH_TASK,payload:{key:"assigned_to",value:e,id:t.id}})}),[m,t.id]);return Object(r.useEffect)((function(){l(!1)}),[t.version,l]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(ca.a,{type:"grow",color:"info"}):c.a.createElement(ka.a,null,c.a.createElement(ha.a,{title:rn(a),size:"sm",disabled:a,caret:!a},"Assign To"),c.a.createElement(ja.a,null,(u||[]).map((function(e){return c.a.createElement(mn,{item:e,onSelect:_,key:e.id})})))))},dn=function(e){var t=e.task,a=Object(r.useState)(!1),n=Object(ee.a)(a,2),o=n[0],s=n[1],l=Object(r.useContext)(mt).dispatch,i=Object(r.useCallback)((function(){s(!0),l({type:q.PATCH_TASK,payload:{key:"assigned_to",value:null,id:t.id}})}),[l,t.id]);return Object(r.useEffect)((function(){s(!1)}),[t.version,s]),c.a.createElement(c.a.Fragment,null,o?c.a.createElement(ca.a,{type:"grow",color:"danger"}):c.a.createElement(vt.a,{className:"mr-2",title:"Not assigned",color:"danger",onClick:i},c.a.createElement(Ne.a,{icon:xe.M})))},En=function(e){var t=e.item,a=Object(r.useContext)(mt),n=a.state,o=n.custom_eid,s=n.custom_value_map,l=n.auth_token,i=n.custom_attr_e,u=a.dispatch,m=da(s,t),_=Object(r.useCallback)((function(e){m&&u({type:q.PATCH_CUSTOM_VALUE,payload:{id:t.id,key:o,value:e,version:m}})}),[u,t.id,o,m]),d=Object(r.useMemo)((function(){return ua(s,t,i.id)}),[i.id,s,t]);if(!i.id)return null;var E=!d,p=d>4,O=""===l,f=!m;return c.a.createElement(Ua,{onSubmit:_,label:i.name,value:d,invalid:E||p,disabled:O,loading:f,disabledMessage:"Need sign in!"})},pn=function(e){var t=e.item,a=Object(r.useState)(!1),n=Object(ee.a)(a,2),o=n[0],s=n[1],l=Object(r.useState)(0),i=Object(ee.a)(l,2),u=i[0],m=i[1],_=Object(r.useState)(!1),d=Object(ee.a)(_,2),E=d[0],p=d[1],O=Object(r.useState)(!1),f=Object(ee.a)(O,2),b=f[0],T=f[1],S=Object(r.useContext)(mt),v=S.state,y=v.custom_rid,k=v.custom_value_map,h=v.custom_attr_e,j=v.custom_attr_r,g=v.auth_token,C=v.pomodoro_number,A=v.pomodoro_used_number,D=S.dispatch,R=da(k,t),M=Object(r.useCallback)((function(){s(!o)}),[o]),I=Object(r.useCallback)((function(e,a){var n=e>0,r=a?{used_number:a}:void 0;R&&(D({type:q.PATCH_CUSTOM_VALUE,payload:{id:t.id,key:y,value:e,version:R},meta:{use_pomodoro:r,update_status:n}}),T(!0))}),[y,D,t.id,R]),N=Object(r.useCallback)((function(){m(u+1)}),[u]),x=Object(r.useCallback)((function(){m(u-1)}),[u]),U=Object(r.useCallback)((function(){m(0)}),[]),P=Object(r.useCallback)((function(e){p(e)}),[]),L=Object(r.useMemo)((function(){return ua(k,t,h.id)}),[h.id,k,t]),w=Object(r.useMemo)((function(){return ua(k,t,j.id)}),[j.id,k,t]),K=Object(r.useCallback)((function(e){p(w===e)}),[w]),F=Object(r.useCallback)((function(){I(w+u/2,u),s(!1),m(0)}),[I,w,u]),H=Object(r.useMemo)((function(){return Ea(L,w,t.is_closed)}),[L,t.is_closed,w]),B=Object(r.useMemo)((function(){return pa(L,w)}),[L,w]);if(Object(r.useEffect)((function(){R||T(!1)}),[R]),Object(r.useEffect)((function(){m(0)}),[A]),!j.id)return null;var z=""===g,Y=!R,V="rusult-input-".concat(t.id),G=C-A,J=u>0,Z=u===G;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ua,{onSubmit:I,onEditable:P,onValueChange:K,label:j.name,value:w,valid:H,invalid:B,disabled:z,loading:Y,id:V,submitting:b}),E&&G>0&&c.a.createElement(ga.a,{className:re()("popover-wide"),target:V,placement:"top",isOpen:o,toggle:M,trigger:"click hover"},c.a.createElement(Ca.a,null,"Pomodoro"),c.a.createElement(Aa.a,null,c.a.createElement(Da.a,null,c.a.createElement(vt.a,{disabled:Z,onClick:N},c.a.createElement(Ne.a,{icon:xe.C})),c.a.createElement(vt.a,{disabled:!J,onClick:x},c.a.createElement(Ne.a,{icon:xe.z})),c.a.createElement(vt.a,{disabled:!0,className:"bg-light"},ae.a.times(G).map((function(e){return c.a.createElement(Ya,{key:e,state:e>=u?wa.FRESH:wa.STALE})}))),c.a.createElement(vt.a,{disabled:!J,onClick:F},c.a.createElement(Ne.a,{icon:xe.g})),c.a.createElement(vt.a,{disabled:!J,onClick:U},c.a.createElement(Ne.a,{icon:xe.m}))))))},On=function(e){var t,a=e.item,n=Object(r.useContext)(mt).state,o=n.custom_value_map,s=n.custom_attr_e,l=n.custom_attr_r,i=n.auth_token,u=Object(r.useMemo)((function(){return da(o,a)}),[o,a]),m=Object(r.useMemo)((function(){return ua(o,a,s.id)}),[s.id,o,a]),_=Object(r.useMemo)((function(){return ua(o,a,l.id)}),[l.id,o,a]);if(!s.id||!l.id)return null;var d=""===i,E=!u,p=0===_&&!a.is_closed&&!d&&!E;return c.a.createElement(Xa.a,{className:re()((t={},Object(_e.a)(t,en.a.is_closed,a.is_closed),Object(_e.a)(t,"bg-warning",a.is_iocaine),t))},c.a.createElement("div",{className:"d-flex mb-1"},c.a.createElement("div",{className:"mr-auto text-truncate"},a.is_iocaine&&c.a.createElement(Ne.a,{icon:xe.b,className:"mr-1 text-dark fa-2x"}),c.a.createElement(on,{item:a})),p&&c.a.createElement(dn,{task:a}),c.a.createElement(Ja,{item:a}),c.a.createElement(un,{task:a,disabled:d})),c.a.createElement(Ra.a,null,c.a.createElement(Ma.a,null,c.a.createElement(En,{item:a})),c.a.createElement(Ma.a,null,c.a.createElement(pn,{item:a})),c.a.createElement(Ma.a,null,c.a.createElement(sn,{e:m,r:_}))))},fn=function(e){var t=e.item;return c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:"text-truncate"},c.a.createElement(cn,{user_story_extra_info:t.user_story_extra_info,project_extra_info:t.project_extra_info})),c.a.createElement(qa.a,null,t.tasks.map((function(e){return c.a.createElement(Xa.a,{key:e.id,className:"text-truncate"},c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"mr-auto text-truncate"},c.a.createElement(on,{item:e})),c.a.createElement(En,{item:e})))}))))},bn=function(e){var t=e.item,a=""===Object(r.useContext)(mt).state.auth_token;return c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:"text-truncate"},c.a.createElement(cn,{user_story_extra_info:t.user_story_extra_info,project_extra_info:t.project_extra_info})),c.a.createElement(Ot.a,{isOpen:!0},c.a.createElement(qa.a,null,t.tasks.map((function(e){return c.a.createElement(Xa.a,{key:e.id},c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"mr-auto text-truncate"},c.a.createElement(on,{item:e})),c.a.createElement(_n,{task:e,disabled:a})))})))))},Tn=function(e){var t=e.label;return c.a.createElement(pt.a,{color:"warning",className:"mr-1",title:t},t)},Sn=function(e){var t=e.item,a=e.tags,n=e.totalHours,o=void 0===n?0:n,s=e.onSelect,l=Object(r.useState)(!1),i=Object(ee.a)(l,2),u=i[0],m=i[1],_=Object(r.useContext)(mt).state,d=_.custom_value_map,E=_.custom_attr_e,p=_.custom_attr_r,O=Object(r.useCallback)((function(){m(!u)}),[u,m]);Object(r.useEffect)((function(){m(!t.is_closed)}),[t.is_closed,m]);var f=Object(r.useMemo)((function(){return ma(d,t.tasks,E.id)}),[E.id,d,t.tasks]),b=Object(r.useMemo)((function(){return ma(d,t.tasks,p.id)}),[p.id,d,t.tasks]),T=Object(r.useCallback)((function(e){null===s||void 0===s||s(t.user_story,e.target.checked?0:f)}),[s,f,t.user_story]),S=!d.has(t.tasks[0]);return c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:re()(en.a.header,"text-truncate",{"alert-primary":t.is_closed}),onClick:O},c.a.createElement(Ra.a,null,c.a.createElement(Ma.a,{xs:12,md:8,className:"text-truncate"},o>0&&c.a.createElement(Dt.a,{inline:!0,check:!0},c.a.createElement(St.a,{type:"checkbox",defaultChecked:!0,onChange:T,onClick:kt})),c.a.createElement(Wt,{isOpen:u}),c.a.createElement(cn,{user_story_extra_info:t.user_story_extra_info,project_extra_info:t.project_extra_info})),c.a.createElement(Ma.a,{xs:6,md:2},c.a.createElement(Za,{label:E.name,loading:S,value:f,size:"sm"})),c.a.createElement(Ma.a,{xs:6,md:2},c.a.createElement(Za,{label:p.name,loading:S,value:b,size:"sm"}))),null===a||void 0===a?void 0:a.map((function(e,t){return c.a.createElement(Tn,{key:t,label:e})}))),c.a.createElement(Ot.a,{isOpen:u},c.a.createElement(qa.a,null,t.tasks.map((function(e){return c.a.createElement(On,{item:e,key:e.id})})))))},vn=function(){var e=Object(r.useContext)(mt).state,t=e.tasks,a=e.custom_value_map,n=e.custom_eid,o=Object(r.useMemo)((function(){return Number(n)}),[n]),s=Object(r.useMemo)((function(){return o?t.filter((function(e){return da(a,e)&&0===ua(a,e,o)})):[]}),[a,o,t]),l=Object(r.useMemo)((function(){return nn(s)}),[s]);return 0===s.length?null:c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:"alert-danger"},"Un estimated tasks"),c.a.createElement(Ht.a,null,l.map((function(e){return c.a.createElement(fn,{item:e,key:e.user_story})}))))},yn=function(){var e=Object(r.useContext)(mt).state.tasks,t=Object(r.useMemo)((function(){return ae.a.filter(e,{assigned_to:null})}),[e]),a=Object(r.useMemo)((function(){return nn(t)}),[t]);return 0===t.length?null:c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:"alert-danger"},"Not assigned tasks"),c.a.createElement(Ht.a,null,a.map((function(e){return c.a.createElement(bn,{item:e,key:e.user_story})}))))},kn=a(626),hn=function(e){var t=e.type,a="Burn down"===t?xe.w:xe.x;return c.a.createElement("span",null,t,c.a.createElement(Ne.a,{className:"fa-fw",icon:a}))},jn=function(e){var t=e.type,a=e.onSelect,n=Object(r.useCallback)((function(){a(t)}),[a,t]);return c.a.createElement(ya.a,{onClick:n},c.a.createElement(hn,{type:t}))},gn=function(e){var t=e.type,a=e.onSelect;return c.a.createElement(kn.a,null,c.a.createElement(ha.a,{size:"sm",caret:!0},c.a.createElement(hn,{type:t})),c.a.createElement(ja.a,null,c.a.createElement(jn,{type:"Burn up",onSelect:a}),c.a.createElement(jn,{type:"Burn down",onSelect:a})))},Cn=a(28),An=function(e){var t=e.tasks,a=e.size,n=void 0===a?"lg":a,o=Object(r.useState)([]),s=Object(ee.a)(o,2),l=s[0],i=s[1],u=Object(r.useContext)(mt).state,m=u.biz_days,_=u.custom_value_map,d=u.custom_eid,E=u.custom_rid,p=Nn(n),O=p.width,f=p.height;Object(r.useEffect)((function(){var e=m.length,a=Number(d),n=Number(E);if(e>0&&t.length>0&&d&&E){var r=ma(_,t,a),c=m.map((function(c,o){var s=Ut(0,o),l=r*o/(e-1),i=ma(_,In(t,c),a);return le()().local().endOf("days").diff(le()(c))>0?{label:s,ideal:l,completed:ma(_,Rn(t,c),a),actual:ma(_,Rn(t,c),n),total:i}:{label:s,ideal:l,total:i}}));i(c)}else i([])}),[t,m,d,E,_,i]);var b=Object(r.useCallback)((function(e,t){return[Number(e).toFixed(1),ae.a.upperFirst(t)]}),[]);return 0===l.length?null:c.a.createElement(Cn.b,{data:l,width:O,height:f},c.a.createElement(Cn.g,null),c.a.createElement(Cn.f,{dataKey:"label"}),c.a.createElement(Cn.e,{formatter:b}),"lg"===n&&c.a.createElement(Cn.c,{formatter:ae.a.upperFirst}),c.a.createElement(Cn.a,{dataKey:"completed",fill:"#28a745"}),c.a.createElement(Cn.a,{dataKey:"actual",fill:"#17a2b8"}),c.a.createElement(Cn.d,{dataKey:"ideal",stroke:"#007bff",strokeDasharray:"5 5"}),c.a.createElement(Cn.d,{dataKey:"total",stroke:"#dc3545"}))},Dn=function(e){var t=e.tasks,a=e.size,n=void 0===a?"lg":a,o=Object(r.useState)([]),s=Object(ee.a)(o,2),l=s[0],i=s[1],u=Object(r.useContext)(mt).state,m=u.biz_days,_=u.custom_value_map,d=u.custom_eid,E=Nn(n),p=E.width,O=E.height;Object(r.useEffect)((function(){var e=m.length,a=Number(d);if(e>0&&t.length>0&&d){var n=ma(_,In(t,m[0]),a),r=m.map((function(r,c){var o=Ut(0,c),s=n-n*c/(e-1);if(le()().local().endOf("days").diff(le()(r))>0){var l=0===c?0:ma(_,Mn(t,r),a);return{label:o,ideal:s,remaining:Math.max(ma(_,In(t,r),a)-l-ma(_,Rn(t,r),a),0),add:l}}return{label:o,ideal:s}}));i(r)}else i([])}),[t,m,d,_,i]);var f=Object(r.useCallback)((function(e,t){return[Number(e).toFixed(1),ae.a.upperFirst(t)]}),[]);return 0===l.length?null:c.a.createElement(Cn.b,{data:l,width:p,height:O},c.a.createElement(Cn.g,null),c.a.createElement(Cn.f,{dataKey:"label"}),c.a.createElement(Cn.e,{formatter:f}),"lg"===n&&c.a.createElement(Cn.c,{formatter:ae.a.upperFirst}),c.a.createElement(Cn.a,{dataKey:"remaining",fill:"#8884d8",stackId:"a"}),c.a.createElement(Cn.a,{dataKey:"add",fill:"#82ca9d",stackId:"a"}),c.a.createElement(Cn.d,{dataKey:"ideal"}))},Rn=function(e,t){return e.filter((function(e){return!!e.finished_date&&le()(t).local().endOf("days").diff(le()(e.finished_date))>0}))},Mn=function(e,t){return e.filter((function(e){return le()(t).local().format("YYYY-MM-DD")===le()(e.created_date).local().format("YYYY-MM-DD")}))},In=function(e,t){return e.filter((function(e){return le()(t).local().endOf("days").diff(le()(e.created_date))>0}))},Nn=function(e){return"sm"===e?{width:250,height:200}:{width:800,height:400}},xn=function(e){var t=e.tasks,a=Object(r.useState)("Burn up"),n=Object(ee.a)(a,2),o=n[0],s=n[1],l=Object(r.useCallback)((function(e){s(e)}),[s]);return 0===t.length?null:c.a.createElement(dt.a,{className:"mb-2"},c.a.createElement(Et.a,{className:"d-flex"},c.a.createElement("div",{className:"mr-auto"},c.a.createElement(vt.a,{size:"sm",tag:Qt.b,to:"/board",color:"primary",className:"mr-2",title:"Board"},c.a.createElement(Ne.a,{icon:xe.c})),"Chart"),c.a.createElement(gn,{onSelect:l,type:o})),"Burn down"===o?c.a.createElement(Dn,{tasks:t}):c.a.createElement(An,{tasks:t}))},Un=function(){var e=Object(r.useContext)(mt).state.tasks;return c.a.createElement(c.a.Fragment,null,c.a.createElement(xn,{tasks:e}),c.a.createElement(va,null),c.a.createElement(yn,null),c.a.createElement("br",null),c.a.createElement(vn,null))},Pn=a(618),Ln=a(617),wn=a(188),Kn=a.n(wn),Fn=function(e){var t=e.tasks,a=e.totalHours,n=e.rejectVal,o=Object(r.useContext)(mt).state,s=o.custom_eid,l=o.custom_value_map,i=Object(r.useMemo)((function(){return ma(l,t,Number(s))}),[s,l,t])-n,u=1.5*a,m=i>a;return c.a.createElement(ea.a,{multi:!0,style:{position:"relative"}},c.a.createElement(ea.a,{bar:!0,value:i,max:u,color:m?"danger":"success"},i," / ",a),c.a.createElement(ea.a,{className:re()(Kn.a.total,Object(_e.a)({},Kn.a.is_over,m)),bar:!0,color:"success",value:a,max:u}," ",m?"".concat(i," / ").concat(a," "):""))},Hn=function(e){var t=e.totalHours,a=void 0===t?0:t,n=Object(r.useState)({}),o=Object(ee.a)(n,2),s=o[0],l=o[1],i=j(),u=Object(r.useContext)(mt).state,m=u.custom_value_map,_=u.biz_days,E=u.user_tasks,p=u.custom_attr_e,O=u.custom_attr_r,f=Object(r.useMemo)((function(){return new Map(i.map((function(e){return[e.id,e]})))}),[i]),b=Object(r.useMemo)((function(){return nn(E)}),[E]),T=Object(r.useMemo)((function(){return ae.a.chain(b).map((function(e){return{item:e,tags:ae.a.chain(f.get(e.user_story)).get("tags",[]).map((function(e){return ae.a.first(e)})).compact().value()}})).sortBy((function(e){return Number.isNaN(e.item.user_story)?-1:e.tags.length})).reverse().value()}),[b,f]),S=Object(r.useMemo)((function(){return ma(m,E,p.id)}),[p.id,m,E]),v=Object(r.useMemo)((function(){return ma(m,E,O.id)}),[O.id,m,E]),y=Object(r.useMemo)((function(){return Ea(S,v,b.every((function(e){return e.is_closed})))}),[S,v,b]),k=Object(r.useMemo)((function(){return pa(S,v)}),[S,v]),h=Object(r.useMemo)((function(){return E.some((function(e){return!da(m,e)}))}),[m,E]),g=Object(r.useCallback)((function(e,t){l(Object(d.a)({},s,Object(_e.a)({},e,t)))}),[s,l]);if(!p.id||!O.id||_.length<=1)return null;var C=ae.a.sum(Object.values(s));return c.a.createElement(c.a.Fragment,null,T.map((function(e){var t=e.item,n=e.tags;return c.a.createElement(Sn,{item:t,key:t.user_story,tags:n,onSelect:g,totalHours:a})})),c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:re()("alert-info")},"Total"),c.a.createElement(Ht.a,null,c.a.createElement(Ra.a,null,c.a.createElement(Ma.a,null,c.a.createElement(Za,{label:p.name,value:S-C,loading:h})),c.a.createElement(Ma.a,null,c.a.createElement(Za,{label:O.name,value:v,invalid:k,valid:y,loading:h})),c.a.createElement(Ma.a,null,c.a.createElement(sn,{e:S,r:v})))),c.a.createElement(Ln.a,null,a>0?c.a.createElement(Fn,{tasks:E,rejectVal:C,totalHours:a||1}):c.a.createElement(Ta,{tasks:E}))))},Bn=function(){var e=Object(r.useContext)(mt).state.user;return c.a.createElement(dt.a,null,e&&c.a.createElement(Et.a,null,c.a.createElement(ia,{src:e.photo,size:"xlarge"}),e.username," 's task"))},zn=function(){var e=f(),t=Object(r.useContext)(mt),a=t.state,n=a.user,o=a.user_tasks,s=t.dispatch,l=Object(Xt.f)(),i=l.uid,u=l.total_hours,m=Number(u||0),_=Object(Xt.e)(),d=Object(r.useCallback)((function(){_.goBack()}),[_]);return Object(r.useEffect)((function(){return i&&e&&s({type:q.FETCH_USER,payload:{uid:i}}),function(){s({type:q.RESET_USER})}}),[s,i,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ta.a,{color:"light",light:!0},c.a.createElement(vt.a,{onClick:d,className:"mr-auto"},c.a.createElement(Ne.a,{icon:xe.a})," Go back"),c.a.createElement(oa,null),c.a.createElement(aa,null)),n?c.a.createElement(c.a.Fragment,null,c.a.createElement(Bn,null),c.a.createElement("br",null),0===m&&c.a.createElement(c.a.Fragment,null,c.a.createElement(xn,{tasks:o}),c.a.createElement("br",null)),c.a.createElement(Hn,{totalHours:m})):c.a.createElement(Pn.a,{color:"danger"},"This user does not exist."))},Yn=a(288),Vn=a(189),Gn=a(619),Jn=a(70),Zn=a.n(Jn),Wn=a(284),qn=a.n(Wn),Qn=a(285),Xn=a.n(Qn),$n=a(286),er=a.n($n),tr=function(){var e=Object(r.useContext)(mt).state.pomodoro_daily_totals,t=Object(r.useMemo)((function(){return e.map((function(e){return{date:e.dateKey,value:e.value,pureValue:e.pureValue}}))}),[e]),a=(ae.a.maxBy(t,"value")||{value:1}).value,n=Object(r.useCallback)((function(e){return e?"style-pomodoro color-pomodoro-".concat(Math.ceil(8*(e.value||0)/a)):"style-pomodoro empty-pomodoro"}),[a]),o=Object(r.useCallback)((function(e){return e&&e.date?{"data-tip":"".concat(e.value," Pomodoros on ").concat(e.date)}:null}),[]),s=Object(r.useMemo)((function(){return le()().subtract(12,"month").toDate()}),[]);return 0===e.length?c.a.createElement(Pn.a,{color:"warning"},"No pomodoro history!"):c.a.createElement(c.a.Fragment,null,c.a.createElement(er.a,{startDate:s,showWeekdayLabels:!0,values:t,classForValue:n,tooltipDataAttrs:o}),c.a.createElement(Xn.a,null))},ar=new(a(578))({type:"rectangle"}),nr=function(e){return Math.ceil(e/60)},rr=function(e){switch(e.mode){case me.SHORT:return c.a.createElement(Ne.a,{className:re()("fa-fw",Zn.a.short_break_icon),icon:xe.h});case me.LONG:return c.a.createElement(Ne.a,{className:re()("fa-fw",Zn.a.long_break_icon),icon:xe.i});default:return c.a.createElement(Ya,{state:wa.FRESH})}},cr=function(e){var t=e.mode,a=e.onSelect,n=Object(r.useCallback)((function(){a(t)}),[t,a]);return c.a.createElement(ya.a,{onClick:n},c.a.createElement(rr,{mode:t}),t)},or=function(e){he.start(),e()},sr=function(e){he.start(),e(2)},lr=function(e){he.changeMode(me.FOCUS),he.start(),e()},ir=function(){var e=Object(l.b)(),t=Object(r.useContext)(mt),a=t.state,n=a.loaded,o=a.pomodoro_date,s=a.pomodoro_number,i=a.pomodoro_used_number,u=a.task_id,m=a.task,_=a.auth_token,d=a.pomodoro_live_counts,E=t.dispatch,p=Object(r.useState)(!1),O=Object(ee.a)(p,2),f=O[0],b=O[1],T=Object(r.useState)(!1),S=Object(ee.a)(T,2),v=S[0],y=S[1],k=Object(r.useState)(ve[me.FOCUS]),h=Object(ee.a)(k,2),j=h[0],g=h[1],C=Object(r.useState)(ue.STOPPED),A=Object(ee.a)(C,2),D=A[0],M=A[1],I=Object(r.useState)(me.FOCUS),N=Object(ee.a)(I,2),x=N[0],U=N[1],P=Object(r.useState)(0),L=Object(ee.a)(P,2),w=L[0],K=L[1],F=Object(r.useState)("min"),H=Object(ee.a)(F,2),B=H[0],z=H[1],Y=Object(r.useCallback)((function(){y((function(e){return!e}))}),[]),V=Object(r.useCallback)((function(e){he.changeMode(e)}),[]),G=Object(r.useCallback)((function(){switch(D){case ue.RUNNING:he.pause();break;case ue.PAUSED:he.resume();break;case ue.STOPPED:he.start()}}),[D]),J=Object(r.useCallback)((function(e){var t=function(e){return e>=60?[nr(e),"min"]:[Math.ceil(e),"sec"]}(e),a=Object(ee.a)(t,2),n=a[0],r=a[1];g(n),z(r)}),[]),Z=Object(r.useCallback)((function(e){M(e.state),J(e.remaining)}),[J]),W=Object(r.useCallback)((function(e){U(e.mode),J(e.duration)}),[J]),Q=Object(r.useCallback)((function(e){J(e.remaining)}),[J]),X=Object(r.useCallback)((function(t,a){var n=s;Z(t),t.mode===me.FOCUS?(E({type:q.ADD_POMODORO,meta:{completedAt:a||new Date,duration:t.duration,pure:0===t.checkpointElapsed}}),++n%4===0?he.changeMode(me.LONG):he.changeMode(me.SHORT),e(R.updateData())):he.changeMode(me.FOCUS);var r,c="",o=void 0,l=or,i=void 0;switch(r="".concat(n," Pomodoros today!"),he.mode){case me.FOCUS:c="Start Focusing.";break;case me.SHORT:c="Take a Short Break.",o="Retry focusing if double click.",l=sr,i=lr;break;case me.LONG:c="Take a Long Break.",o="Retry focusing if double click.",l=sr,i=lr}!function(e){var t=e.title,a=e.body,n=e.option,r=void 0===n?"":n,c=e.icon,o=e.onClick,s=e.onDblclick,l=0,i=null;if("granted"===Notification.permission){var u=new Notification(t,{body:"".concat(a," ").concat(r),icon:c}),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?i=setTimeout((function(){u.close(),i=null}),1e3*e):u.close()};u.onclick=function(){0===l?(l++,o(m)):(i&&clearTimeout(i),s&&s(m))}}else Ke({title:t,body:a,icon:c})}({title:c,body:r,option:o,icon:qn.a,onClick:l,onDblclick:i})}),[E,Z,s,e]),$=Object(r.useCallback)((function(){he.changeMode(me.FOCUS,!0)}),[]),te=Object(r.useCallback)((function(){E({type:q.RESET_TASK_ID})}),[E]),ne=Object(r.useCallback)((function(e){var t=" from firebase!",a=s,n=e.remaining;t=e.mode===me.FOCUS?++a%4===0?"Take a Long Break ".concat(t):"Take a Short Break ".concat(t):"Start Focusing ".concat(t);var r="".concat(a," Pomodoros today!");E({type:q.ADD_FB_TIMER,payload:{title:t,body:r,remaining:n}})}),[E,s]),ce=Object(r.useCallback)((function(e){E({type:q.DEL_FB_TIMER})}),[E]);Object(r.useEffect)((function(){return he.on("tick",Q),he.on("start",Z),he.on("start",ne),he.on("stop",Z),he.on("stop",ce),he.on("pause",Z),he.on("pause",ce),he.on("resume",Z),he.on("resume",ne),he.on("expire",X),he.on("change_mode",W),function(){he.removeAllListeners()}}),[X,W,Z,Q,ne,ce]),Object(r.useEffect)((function(){U(he.mode),M(he.state),J(he.remaining),he.restoreExpired&&_&&(ae.a.defer((function(){X(he.status)})),he.restoreExpired=!1)}),[_,X,J]),Object(r.useEffect)((function(){var e=le()().format("YYYY-MM-DD");n&&o!==e&&(E({type:q.RESET_POMODORO,payload:{pomodoro_date:e}}),he.changeMode(me.FOCUS))}),[E,n,o]),Object(r.useEffect)((function(){"denied"!==Notification.permission&&Notification.requestPermission()}),[]),Object(r.useEffect)((function(){var e=x===me.FOCUS?"#f00":"#0f0",t=x===me.FOCUS?"#fff":"#000",a="fade";if("sec"===B){var n=[t,e];e=n[0],t=n[1],a="none"}switch(D){case ue.RUNNING:ar.badge(j,{bgColor:e,textColor:t,animation:a});break;case ue.PAUSED:ar.badge("-",{bgColor:e,textColor:t,animation:a});break;default:ar.reset()}}),[x,j,D,B]),Object(r.useEffect)((function(){var e=60*ve[x];K(.01+99*(e-("min"===B?60*j:j))/e/100)}),[x,j,B]),Object(r.useEffect)((function(){E({type:q.SET_POMODORO_STATE,payload:{pomodoro_state:D}})}),[E,D]),Object(r.useEffect)((function(){E({type:q.SET_POMODORO_MODE,payload:{pomodoro_mode:x}})}),[E,x]);var oe=Object(r.useCallback)((function(){b((function(e){return!e}))}),[]),se=D===ue.RUNNING?w:1;if(!_)return null;var ie=m?"#".concat(m.ref," ").concat(ae.a.get(m,"user_story_extra_info.subject","Unassigned tasks")," / ").concat(m.subject):"",_e=m?ae.a.truncate("#".concat(m.ref," ").concat(m.subject),{length:10}):"",de=Object.values(d).some((function(e){return e>0}));return c.a.createElement(dt.a,{className:re()(Zn.a.top,"sticky-top")},c.a.createElement(Yn.a,{options:{primary:x===me.FOCUS?"red":"green"}},c.a.createElement(ht.a,{buffer:se,progress:w,closed:D===ue.STOPPED})),c.a.createElement(Et.a,{onClick:oe},c.a.createElement("div",{className:"d-flex"},c.a.createElement(Wt,{isOpen:f}),c.a.createElement(bt.a,{className:re()(Zn.a.button_group,"ml-1")},c.a.createElement(Gn.a,{onClick:kt,isOpen:v,toggle:Y,addonType:"prepend"},c.a.createElement(ha.a,{color:"light",size:"sm",caret:!0},c.a.createElement(rr,{mode:x})),c.a.createElement(ja.a,null,c.a.createElement(cr,{mode:me.FOCUS,onSelect:V}),c.a.createElement(cr,{mode:me.SHORT,onSelect:V}),c.a.createElement(cr,{mode:me.LONG,onSelect:V}))),c.a.createElement(Tt.a,{addonType:"prepend",onClick:kt},c.a.createElement(Yt.a,{className:re()(Zn.a.fix_w,{"font-weight-bold":D===ue.RUNNING})},j)),c.a.createElement(Tt.a,{onClick:kt,addonType:"prepend"},B),c.a.createElement(Tt.a,{addonType:"append",onClick:kt},D===ue.RUNNING?c.a.createElement(vt.a,{color:"danger",onClick:G},c.a.createElement(Ne.a,{icon:xe.A})):c.a.createElement(vt.a,{color:"primary",onClick:G},c.a.createElement(Ne.a,{icon:xe.B}))),x!==me.FOCUS&&c.a.createElement(Tt.a,{addonType:"append",onClick:kt},c.a.createElement(vt.a,{color:"light",onClick:$,title:"Retry focusing"},c.a.createElement(Ne.a,{icon:xe.D,className:"text-muted"}),c.a.createElement(Ya,{state:wa.STALE}))),u&&c.a.createElement(Vn.b,{onClick:kt,className:re()(Zn.a.chip_set)},c.a.createElement(Vn.a,{icon:c.a.createElement(Ne.a,{icon:xe.I}),onRemove:te,title:ie,trailingIcon:c.a.createElement(Ne.a,{icon:xe.J})},_e||c.a.createElement(ca.a,{type:"grow"}))),de&&c.a.createElement("div",{className:"ml-1"},c.a.createElement("div",{className:re()("w-100","text-light","bg-danger","text-center","rounded","shadow","font-weight-bold",Zn.a.live)},c.a.createElement(Ne.a,{className:"ml-1",icon:xe.L}),c.a.createElement("span",{className:"mx-1"},"LIVE")),c.a.createElement("div",null,Object.entries(d).filter((function(e){var t=Object(ee.a)(e,2);t[0];return t[1]>0})).map((function(e){var t=Object(ee.a)(e,2),a=t[0],n=t[1];return c.a.createElement(pt.a,{key:a,color:"light",className:"border"},c.a.createElement(rr,{mode:a}),":",n)}))))),s>0&&c.a.createElement(pt.a,{color:"danger",className:"mr-2"},c.a.createElement(Ya,null)," ",c.a.createElement(Ne.a,{icon:xe.J})," ",s),ae.a.times(s).map((function(e){return c.a.createElement(Ya,{key:e,state:e<i?wa.STALE:wa.FRESH,br:e%2!==s%2&&e<s-1})})))),c.a.createElement(Ot.a,{isOpen:f},c.a.createElement(Ht.a,{className:"bg-grass"},c.a.createElement(tr,null))))},ur=a(620),mr=a(621),_r=function(e,t,a){return e.has(t)?(n=ae.a.get(e.get(t),"attributes_values.".concat(a),"0"),ae.a.chain(n).replace(/[^0-9.+,]/g,"").replace(/[+]/g,",").split(",").compact().map(Number).sum().value()):0;var n},dr=function(e,t,a){return function(e,t,a){return ae.a.chain(t).map((function(t){return _r(e,t,a)})).sum().value()}(e,t.filter((function(e){return e.is_closed})),a)},Er=function(e){var t=e.src||"http://i.pravatar.cc/80?u=".concat(Math.random());return c.a.createElement($t.a,Object.assign({},e,{src:t,square:!0,className:"mr-1"}))},pr=function(e){var t=e.user,a=e.tasks,n=e.type;return c.a.createElement(Ma.a,{sm:"12",md:"6",lg:"4"},c.a.createElement(dt.a,null,c.a.createElement(Et.a,{className:"text-truncate",title:t.username},c.a.createElement(Er,{src:t.photo}),c.a.createElement(Qt.b,{to:"/users/".concat(t.id)},t.username)),c.a.createElement(Ht.a,null,"Burn down"===n?c.a.createElement(Dn,{tasks:a,size:"sm"}):c.a.createElement(An,{tasks:a,size:"sm"}))))},Or=function(){var e=Object(r.useContext)(mt).state,t=e.tasks,a=e.project.members,n=e.custom_value_map,o=e.custom_eid,s=Object(r.useState)("Burn up"),l=Object(ee.a)(s,2),i=l[0],u=l[1],m=Object(r.useMemo)((function(){return e=t,ae.a.chain(e).reject((function(e){return!e.assigned_to})).groupBy("assigned_to").value();var e}),[t]),_=Object(r.useMemo)((function(){return ae.a.chain(a).filter((function(e){return ae.a.has(m,e.id)})).map((function(e){return{user:e,tasks:m[e.id],closed:dr(n,m[e.id],Number(o))}})).sortBy("closed").value()}),[m,a,n,o]),d=Object(r.useCallback)((function(e){u(e)}),[u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(ur.a,{tag:"nav"},c.a.createElement(mr.a,{title:"Home",tag:Qt.b,to:"/"},c.a.createElement(Ne.a,{icon:xe.t})),c.a.createElement(mr.a,{className:"mr-auto",tag:"span",active:!0},c.a.createElement(Ne.a,{icon:xe.c}),"  Board"),c.a.createElement(gn,{type:i,onSelect:d}),c.a.createElement(aa,{size:"sm"})),c.a.createElement(Ra.a,{className:"mt-1"},_.map((function(e,t){var a=e.user,n=e.tasks;return c.a.createElement(pr,{key:t,user:a,tasks:n,type:i})}))))},fr=function(){Object(l.b)();var e=f(),t=Object(r.useContext)(mt).dispatch;return Object(r.useEffect)((function(){e&&t&&t({type:q.SET_URL,payload:{url:e}})}),[t,e]),c.a.createElement(c.a.Fragment,null)};s.a.render(c.a.createElement(l.a,{store:W},c.a.createElement((function(){return c.a.createElement("div",{className:"container-xl"},c.a.createElement($.a,{className:"toast-top"}),c.a.createElement(Qt.a,null,c.a.createElement(_t,null,c.a.createElement(ir,null),c.a.createElement(qt,null),c.a.createElement(Xt.a,{exact:!0,path:"/",component:Un}),c.a.createElement(Xt.a,{exact:!0,path:"/board",component:Or}),c.a.createElement(Xt.a,{exact:!0,path:"/users/:uid",component:zn}),c.a.createElement(Xt.a,{exact:!0,path:"/users/:uid/:total_hours",component:zn}),c.a.createElement(fr,null))))}),null),c.a.createElement((function(){var e=Object(l.b)(),t=f(),a=D(),n=N();return Object(r.useEffect)((function(){t&&e(b.fetchList())}),[t,e]),Object(r.useEffect)((function(){t&&a&&e(y.fetchList({milestone:Number(a)}))}),[t,a,e,n]),c.a.createElement(c.a.Fragment,null)}),null)),document.getElementById("root")),function(){var e=W.dispatch,t=X(n.URL),a=X(n.MID);t&&e(E.setUrl(t)),a&&e(g.setMid(a))}()},70:function(e,t,a){e.exports={top:"Pomodoro_top__2KPBC",button_group:"Pomodoro_button_group__25QhE",chip_set:"Pomodoro_chip_set__UcFix",fix_w:"Pomodoro_fix_w__26hsb",short_break_icon:"Pomodoro_short_break_icon__3e20m",long_break_icon:"Pomodoro_long_break_icon__1CgqS",live:"Pomodoro_live__293Tt"}}},[[317,1,2]]]);
//# sourceMappingURL=main.3914261e.chunk.js.map